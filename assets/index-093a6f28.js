var ZT=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports);var zA=ZT((UA,vy)=>{(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))y(w);new MutationObserver(w=>{for(const M of w)if(M.type==="childList")for(const L of M.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&y(L)}).observe(document,{childList:!0,subtree:!0});function d(w){const M={};return w.integrity&&(M.integrity=w.integrity),w.referrerPolicy&&(M.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?M.credentials="include":w.crossOrigin==="anonymous"?M.credentials="omit":M.credentials="same-origin",M}function y(w){if(w.ep)return;w.ep=!0;const M=d(w);fetch(w.href,M)}})();function QT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var AC={exports:{}},Hy={},jC={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp=Symbol.for("react.element"),JT=Symbol.for("react.portal"),qT=Symbol.for("react.fragment"),bT=Symbol.for("react.strict_mode"),tL=Symbol.for("react.profiler"),eL=Symbol.for("react.provider"),iL=Symbol.for("react.context"),nL=Symbol.for("react.forward_ref"),rL=Symbol.for("react.suspense"),oL=Symbol.for("react.memo"),sL=Symbol.for("react.lazy"),yk=Symbol.iterator;function lL(s){return s===null||typeof s!="object"?null:(s=yk&&s[yk]||s["@@iterator"],typeof s=="function"?s:null)}var DC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},OC=Object.assign,IC={};function Za(s,a,d){this.props=s,this.context=a,this.refs=IC,this.updater=d||DC}Za.prototype.isReactComponent={};Za.prototype.setState=function(s,a){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,a,"setState")};Za.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function EC(){}EC.prototype=Za.prototype;function xx(s,a,d){this.props=s,this.context=a,this.refs=IC,this.updater=d||DC}var wx=xx.prototype=new EC;wx.constructor=xx;OC(wx,Za.prototype);wx.isPureReactComponent=!0;var mk=Array.isArray,BC=Object.prototype.hasOwnProperty,Mx={current:null},RC={key:!0,ref:!0,__self:!0,__source:!0};function zC(s,a,d){var y,w={},M=null,L=null;if(a!=null)for(y in a.ref!==void 0&&(L=a.ref),a.key!==void 0&&(M=""+a.key),a)BC.call(a,y)&&!RC.hasOwnProperty(y)&&(w[y]=a[y]);var I=arguments.length-2;if(I===1)w.children=d;else if(1<I){for(var B=Array(I),Q=0;Q<I;Q++)B[Q]=arguments[Q+2];w.children=B}if(s&&s.defaultProps)for(y in I=s.defaultProps,I)w[y]===void 0&&(w[y]=I[y]);return{$$typeof:yp,type:s,key:M,ref:L,props:w,_owner:Mx.current}}function uL(s,a){return{$$typeof:yp,type:s.type,key:a,ref:s.ref,props:s.props,_owner:s._owner}}function Sx(s){return typeof s=="object"&&s!==null&&s.$$typeof===yp}function hL(s){var a={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(d){return a[d]})}var vk=/\/+/g;function qv(s,a){return typeof s=="object"&&s!==null&&s.key!=null?hL(""+s.key):a.toString(36)}function sy(s,a,d,y,w){var M=typeof s;(M==="undefined"||M==="boolean")&&(s=null);var L=!1;if(s===null)L=!0;else switch(M){case"string":case"number":L=!0;break;case"object":switch(s.$$typeof){case yp:case JT:L=!0}}if(L)return L=s,w=w(L),s=y===""?"."+qv(L,0):y,mk(w)?(d="",s!=null&&(d=s.replace(vk,"$&/")+"/"),sy(w,a,d,"",function(Q){return Q})):w!=null&&(Sx(w)&&(w=uL(w,d+(!w.key||L&&L.key===w.key?"":(""+w.key).replace(vk,"$&/")+"/")+s)),a.push(w)),1;if(L=0,y=y===""?".":y+":",mk(s))for(var I=0;I<s.length;I++){M=s[I];var B=y+qv(M,I);L+=sy(M,a,d,B,w)}else if(B=lL(s),typeof B=="function")for(s=B.call(s),I=0;!(M=s.next()).done;)M=M.value,B=y+qv(M,I++),L+=sy(M,a,d,B,w);else if(M==="object")throw a=String(s),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.");return L}function Yg(s,a,d){if(s==null)return s;var y=[],w=0;return sy(s,y,"","",function(M){return a.call(d,M,w++)}),y}function aL(s){if(s._status===-1){var a=s._result;a=a(),a.then(function(d){(s._status===0||s._status===-1)&&(s._status=1,s._result=d)},function(d){(s._status===0||s._status===-1)&&(s._status=2,s._result=d)}),s._status===-1&&(s._status=0,s._result=a)}if(s._status===1)return s._result.default;throw s._result}var rr={current:null},ly={transition:null},fL={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:ly,ReactCurrentOwner:Mx};function VC(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Yg,forEach:function(s,a,d){Yg(s,function(){a.apply(this,arguments)},d)},count:function(s){var a=0;return Yg(s,function(){a++}),a},toArray:function(s){return Yg(s,function(a){return a})||[]},only:function(s){if(!Sx(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};he.Component=Za;he.Fragment=qT;he.Profiler=tL;he.PureComponent=xx;he.StrictMode=bT;he.Suspense=rL;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fL;he.act=VC;he.cloneElement=function(s,a,d){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var y=OC({},s.props),w=s.key,M=s.ref,L=s._owner;if(a!=null){if(a.ref!==void 0&&(M=a.ref,L=Mx.current),a.key!==void 0&&(w=""+a.key),s.type&&s.type.defaultProps)var I=s.type.defaultProps;for(B in a)BC.call(a,B)&&!RC.hasOwnProperty(B)&&(y[B]=a[B]===void 0&&I!==void 0?I[B]:a[B])}var B=arguments.length-2;if(B===1)y.children=d;else if(1<B){I=Array(B);for(var Q=0;Q<B;Q++)I[Q]=arguments[Q+2];y.children=I}return{$$typeof:yp,type:s.type,key:w,ref:M,props:y,_owner:L}};he.createContext=function(s){return s={$$typeof:iL,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:eL,_context:s},s.Consumer=s};he.createElement=zC;he.createFactory=function(s){var a=zC.bind(null,s);return a.type=s,a};he.createRef=function(){return{current:null}};he.forwardRef=function(s){return{$$typeof:nL,render:s}};he.isValidElement=Sx;he.lazy=function(s){return{$$typeof:sL,_payload:{_status:-1,_result:s},_init:aL}};he.memo=function(s,a){return{$$typeof:oL,type:s,compare:a===void 0?null:a}};he.startTransition=function(s){var a=ly.transition;ly.transition={};try{s()}finally{ly.transition=a}};he.unstable_act=VC;he.useCallback=function(s,a){return rr.current.useCallback(s,a)};he.useContext=function(s){return rr.current.useContext(s)};he.useDebugValue=function(){};he.useDeferredValue=function(s){return rr.current.useDeferredValue(s)};he.useEffect=function(s,a){return rr.current.useEffect(s,a)};he.useId=function(){return rr.current.useId()};he.useImperativeHandle=function(s,a,d){return rr.current.useImperativeHandle(s,a,d)};he.useInsertionEffect=function(s,a){return rr.current.useInsertionEffect(s,a)};he.useLayoutEffect=function(s,a){return rr.current.useLayoutEffect(s,a)};he.useMemo=function(s,a){return rr.current.useMemo(s,a)};he.useReducer=function(s,a,d){return rr.current.useReducer(s,a,d)};he.useRef=function(s){return rr.current.useRef(s)};he.useState=function(s){return rr.current.useState(s)};he.useSyncExternalStore=function(s,a,d){return rr.current.useSyncExternalStore(s,a,d)};he.useTransition=function(){return rr.current.useTransition()};he.version="18.3.1";jC.exports=he;var ms=jC.exports;const cL=QT(ms);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pL=ms,dL=Symbol.for("react.element"),gL=Symbol.for("react.fragment"),yL=Object.prototype.hasOwnProperty,mL=pL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vL={key:!0,ref:!0,__self:!0,__source:!0};function UC(s,a,d){var y,w={},M=null,L=null;d!==void 0&&(M=""+d),a.key!==void 0&&(M=""+a.key),a.ref!==void 0&&(L=a.ref);for(y in a)yL.call(a,y)&&!vL.hasOwnProperty(y)&&(w[y]=a[y]);if(s&&s.defaultProps)for(y in a=s.defaultProps,a)w[y]===void 0&&(w[y]=a[y]);return{$$typeof:dL,type:s,key:M,ref:L,props:w,_owner:mL.current}}Hy.Fragment=gL;Hy.jsx=UC;Hy.jsxs=UC;AC.exports=Hy;var Mn=AC.exports,N1={},YC={exports:{}},Vr={},GC={exports:{}},HC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function a(Ct,ft){var ie=Ct.length;Ct.push(ft);t:for(;0<ie;){var we=ie-1>>>1,li=Ct[we];if(0<w(li,ft))Ct[we]=ft,Ct[ie]=li,ie=we;else break t}}function d(Ct){return Ct.length===0?null:Ct[0]}function y(Ct){if(Ct.length===0)return null;var ft=Ct[0],ie=Ct.pop();if(ie!==ft){Ct[0]=ie;t:for(var we=0,li=Ct.length,K=li>>>1;we<K;){var Xn=2*(we+1)-1,tl=Ct[Xn],Xe=Xn+1,ws=Ct[Xe];if(0>w(tl,ie))Xe<li&&0>w(ws,tl)?(Ct[we]=ws,Ct[Xe]=ie,we=Xe):(Ct[we]=tl,Ct[Xn]=ie,we=Xn);else if(Xe<li&&0>w(ws,ie))Ct[we]=ws,Ct[Xe]=ie,we=Xe;else break t}}return ft}function w(Ct,ft){var ie=Ct.sortIndex-ft.sortIndex;return ie!==0?ie:Ct.id-ft.id}if(typeof performance=="object"&&typeof performance.now=="function"){var M=performance;s.unstable_now=function(){return M.now()}}else{var L=Date,I=L.now();s.unstable_now=function(){return L.now()-I}}var B=[],Q=[],Z=1,Y=null,st=3,Mt=!1,kt=!1,$=!1,xe=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(Ct){for(var ft=d(Q);ft!==null;){if(ft.callback===null)y(Q);else if(ft.startTime<=Ct)y(Q),ft.sortIndex=ft.expirationTime,a(B,ft);else break;ft=d(Q)}}function O(Ct){if($=!1,J(Ct),!kt)if(d(B)!==null)kt=!0,Bi(rt);else{var ft=d(Q);ft!==null&&Qu(O,ft.startTime-Ct)}}function rt(Ct,ft){kt=!1,$&&($=!1,b(gt),gt=-1),Mt=!0;var ie=st;try{for(J(ft),Y=d(B);Y!==null&&(!(Y.expirationTime>ft)||Ct&&!Ji());){var we=Y.callback;if(typeof we=="function"){Y.callback=null,st=Y.priorityLevel;var li=we(Y.expirationTime<=ft);ft=s.unstable_now(),typeof li=="function"?Y.callback=li:Y===d(B)&&y(B),J(ft)}else y(B);Y=d(B)}if(Y!==null)var K=!0;else{var Xn=d(Q);Xn!==null&&Qu(O,Xn.startTime-ft),K=!1}return K}finally{Y=null,st=ie,Mt=!1}}var at=!1,Pt=null,gt=-1,Ht=5,Qt=-1;function Ji(){return!(s.unstable_now()-Qt<Ht)}function Mr(){if(Pt!==null){var Ct=s.unstable_now();Qt=Ct;var ft=!0;try{ft=Pt(!0,Ct)}finally{ft?Rt():(at=!1,Pt=null)}}else at=!1}var Rt;if(typeof G=="function")Rt=function(){G(Mr)};else if(typeof MessageChannel<"u"){var Bt=new MessageChannel,Go=Bt.port2;Bt.port1.onmessage=Mr,Rt=function(){Go.postMessage(null)}}else Rt=function(){xe(Mr,0)};function Bi(Ct){Pt=Ct,at||(at=!0,Rt())}function Qu(Ct,ft){gt=xe(function(){Ct(s.unstable_now())},ft)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Ct){Ct.callback=null},s.unstable_continueExecution=function(){kt||Mt||(kt=!0,Bi(rt))},s.unstable_forceFrameRate=function(Ct){0>Ct||125<Ct?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ht=0<Ct?Math.floor(1e3/Ct):5},s.unstable_getCurrentPriorityLevel=function(){return st},s.unstable_getFirstCallbackNode=function(){return d(B)},s.unstable_next=function(Ct){switch(st){case 1:case 2:case 3:var ft=3;break;default:ft=st}var ie=st;st=ft;try{return Ct()}finally{st=ie}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Ct,ft){switch(Ct){case 1:case 2:case 3:case 4:case 5:break;default:Ct=3}var ie=st;st=Ct;try{return ft()}finally{st=ie}},s.unstable_scheduleCallback=function(Ct,ft,ie){var we=s.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?we+ie:we):ie=we,Ct){case 1:var li=-1;break;case 2:li=250;break;case 5:li=1073741823;break;case 4:li=1e4;break;default:li=5e3}return li=ie+li,Ct={id:Z++,callback:ft,priorityLevel:Ct,startTime:ie,expirationTime:li,sortIndex:-1},ie>we?(Ct.sortIndex=ie,a(Q,Ct),d(B)===null&&Ct===d(Q)&&($?(b(gt),gt=-1):$=!0,Qu(O,ie-we))):(Ct.sortIndex=li,a(B,Ct),kt||Mt||(kt=!0,Bi(rt))),Ct},s.unstable_shouldYield=Ji,s.unstable_wrapCallback=function(Ct){var ft=st;return function(){var ie=st;st=ft;try{return Ct.apply(this,arguments)}finally{st=ie}}}})(HC);GC.exports=HC;var xL=GC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wL=ms,zr=xL;function mt(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XC=new Set,bc={};function $u(s,a){Ga(s,a),Ga(s+"Capture",a)}function Ga(s,a){for(bc[s]=a,s=0;s<a.length;s++)XC.add(a[s])}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T1=Object.prototype.hasOwnProperty,ML=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xk={},wk={};function SL(s){return T1.call(wk,s)?!0:T1.call(xk,s)?!1:ML.test(s)?wk[s]=!0:(xk[s]=!0,!1)}function kL(s,a,d,y){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return y?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function CL(s,a,d,y){if(a===null||typeof a>"u"||kL(s,a,d,y))return!0;if(y)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function or(s,a,d,y,w,M,L){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=y,this.attributeNamespace=w,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=M,this.removeEmptyString=L}var kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){kn[s]=new or(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];kn[a]=new or(a,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){kn[s]=new or(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){kn[s]=new or(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){kn[s]=new or(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){kn[s]=new or(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){kn[s]=new or(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){kn[s]=new or(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){kn[s]=new or(s,5,!1,s.toLowerCase(),null,!1,!1)});var kx=/[\-:]([a-z])/g;function Cx(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(kx,Cx);kn[a]=new or(a,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(kx,Cx);kn[a]=new or(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(kx,Cx);kn[a]=new or(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){kn[s]=new or(s,1,!1,s.toLowerCase(),null,!1,!1)});kn.xlinkHref=new or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){kn[s]=new or(s,1,!1,s.toLowerCase(),null,!0,!0)});function Px(s,a,d,y){var w=kn.hasOwnProperty(a)?kn[a]:null;(w!==null?w.type!==0:y||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(CL(a,d,w,y)&&(d=null),y||w===null?SL(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):w.mustUseProperty?s[w.propertyName]=d===null?w.type===3?!1:"":d:(a=w.attributeName,y=w.attributeNamespace,d===null?s.removeAttribute(a):(w=w.type,d=w===3||w===4&&d===!0?"":""+d,y?s.setAttributeNS(y,a,d):s.setAttribute(a,d))))}var bs=wL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gg=Symbol.for("react.element"),Ca=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),Nx=Symbol.for("react.strict_mode"),L1=Symbol.for("react.profiler"),KC=Symbol.for("react.provider"),_C=Symbol.for("react.context"),Tx=Symbol.for("react.forward_ref"),F1=Symbol.for("react.suspense"),A1=Symbol.for("react.suspense_list"),Lx=Symbol.for("react.memo"),Fl=Symbol.for("react.lazy"),WC=Symbol.for("react.offscreen"),Mk=Symbol.iterator;function Dc(s){return s===null||typeof s!="object"?null:(s=Mk&&s[Mk]||s["@@iterator"],typeof s=="function"?s:null)}var si=Object.assign,bv;function Uc(s){if(bv===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);bv=a&&a[1]||""}return`
`+bv+s}var t1=!1;function e1(s,a){if(!s||t1)return"";t1=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Q){var y=Q}Reflect.construct(s,[],a)}else{try{a.call()}catch(Q){y=Q}s.call(a.prototype)}else{try{throw Error()}catch(Q){y=Q}s()}}catch(Q){if(Q&&y&&typeof Q.stack=="string"){for(var w=Q.stack.split(`
`),M=y.stack.split(`
`),L=w.length-1,I=M.length-1;1<=L&&0<=I&&w[L]!==M[I];)I--;for(;1<=L&&0<=I;L--,I--)if(w[L]!==M[I]){if(L!==1||I!==1)do if(L--,I--,0>I||w[L]!==M[I]){var B=`
`+w[L].replace(" at new "," at ");return s.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",s.displayName)),B}while(1<=L&&0<=I);break}}}finally{t1=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?Uc(s):""}function PL(s){switch(s.tag){case 5:return Uc(s.type);case 16:return Uc("Lazy");case 13:return Uc("Suspense");case 19:return Uc("SuspenseList");case 0:case 2:case 15:return s=e1(s.type,!1),s;case 11:return s=e1(s.type.render,!1),s;case 1:return s=e1(s.type,!0),s;default:return""}}function j1(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Pa:return"Fragment";case Ca:return"Portal";case L1:return"Profiler";case Nx:return"StrictMode";case F1:return"Suspense";case A1:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case _C:return(s.displayName||"Context")+".Consumer";case KC:return(s._context.displayName||"Context")+".Provider";case Tx:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Lx:return a=s.displayName||null,a!==null?a:j1(s.type)||"Memo";case Fl:a=s._payload,s=s._init;try{return j1(s(a))}catch{}}return null}function NL(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j1(a);case 8:return a===Nx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Hl(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function $C(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function TL(s){var a=$C(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),y=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var w=d.get,M=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return w.call(this)},set:function(L){y=""+L,M.call(this,L)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(L){y=""+L},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Hg(s){s._valueTracker||(s._valueTracker=TL(s))}function ZC(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),y="";return s&&(y=$C(s)?s.checked?"true":"false":s.value),s=y,s!==d?(a.setValue(s),!0):!1}function xy(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function D1(s,a){var d=a.checked;return si({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function Sk(s,a){var d=a.defaultValue==null?"":a.defaultValue,y=a.checked!=null?a.checked:a.defaultChecked;d=Hl(a.value!=null?a.value:d),s._wrapperState={initialChecked:y,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function QC(s,a){a=a.checked,a!=null&&Px(s,"checked",a,!1)}function O1(s,a){QC(s,a);var d=Hl(a.value),y=a.type;if(d!=null)y==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(y==="submit"||y==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?I1(s,a.type,d):a.hasOwnProperty("defaultValue")&&I1(s,a.type,Hl(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function kk(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var y=a.type;if(!(y!=="submit"&&y!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function I1(s,a,d){(a!=="number"||xy(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var Yc=Array.isArray;function Ba(s,a,d,y){if(s=s.options,a){a={};for(var w=0;w<d.length;w++)a["$"+d[w]]=!0;for(d=0;d<s.length;d++)w=a.hasOwnProperty("$"+s[d].value),s[d].selected!==w&&(s[d].selected=w),w&&y&&(s[d].defaultSelected=!0)}else{for(d=""+Hl(d),a=null,w=0;w<s.length;w++){if(s[w].value===d){s[w].selected=!0,y&&(s[w].defaultSelected=!0);return}a!==null||s[w].disabled||(a=s[w])}a!==null&&(a.selected=!0)}}function E1(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(mt(91));return si({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Ck(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(mt(92));if(Yc(d)){if(1<d.length)throw Error(mt(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:Hl(d)}}function JC(s,a){var d=Hl(a.value),y=Hl(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),y!=null&&(s.defaultValue=""+y)}function Pk(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function qC(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B1(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?qC(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Xg,bC=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,y,w){MSApp.execUnsafeLocalFunction(function(){return s(a,d,y,w)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Xg=Xg||document.createElement("div"),Xg.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Xg.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function tp(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var Xc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LL=["Webkit","ms","Moz","O"];Object.keys(Xc).forEach(function(s){LL.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Xc[a]=Xc[s]})});function tP(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||Xc.hasOwnProperty(s)&&Xc[s]?(""+a).trim():a+"px"}function eP(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var y=d.indexOf("--")===0,w=tP(d,a[d],y);d==="float"&&(d="cssFloat"),y?s.setProperty(d,w):s[d]=w}}var FL=si({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function R1(s,a){if(a){if(FL[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(mt(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(mt(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(mt(61))}if(a.style!=null&&typeof a.style!="object")throw Error(mt(62))}}function z1(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V1=null;function Fx(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var U1=null,Ra=null,za=null;function Nk(s){if(s=xp(s)){if(typeof U1!="function")throw Error(mt(280));var a=s.stateNode;a&&(a=$y(a),U1(s.stateNode,s.type,a))}}function iP(s){Ra?za?za.push(s):za=[s]:Ra=s}function nP(){if(Ra){var s=Ra,a=za;if(za=Ra=null,Nk(s),a)for(s=0;s<a.length;s++)Nk(a[s])}}function rP(s,a){return s(a)}function oP(){}var i1=!1;function sP(s,a,d){if(i1)return s(a,d);i1=!0;try{return rP(s,a,d)}finally{i1=!1,(Ra!==null||za!==null)&&(oP(),nP())}}function ep(s,a){var d=s.stateNode;if(d===null)return null;var y=$y(d);if(y===null)return null;d=y[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break t;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(mt(231,a,typeof d));return d}var Y1=!1;if(Zs)try{var Oc={};Object.defineProperty(Oc,"passive",{get:function(){Y1=!0}}),window.addEventListener("test",Oc,Oc),window.removeEventListener("test",Oc,Oc)}catch{Y1=!1}function AL(s,a,d,y,w,M,L,I,B){var Q=Array.prototype.slice.call(arguments,3);try{a.apply(d,Q)}catch(Z){this.onError(Z)}}var Kc=!1,wy=null,My=!1,G1=null,jL={onError:function(s){Kc=!0,wy=s}};function DL(s,a,d,y,w,M,L,I,B){Kc=!1,wy=null,AL.apply(jL,arguments)}function OL(s,a,d,y,w,M,L,I,B){if(DL.apply(this,arguments),Kc){if(Kc){var Q=wy;Kc=!1,wy=null}else throw Error(mt(198));My||(My=!0,G1=Q)}}function Zu(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,a.flags&4098&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function lP(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Tk(s){if(Zu(s)!==s)throw Error(mt(188))}function IL(s){var a=s.alternate;if(!a){if(a=Zu(s),a===null)throw Error(mt(188));return a!==s?null:s}for(var d=s,y=a;;){var w=d.return;if(w===null)break;var M=w.alternate;if(M===null){if(y=w.return,y!==null){d=y;continue}break}if(w.child===M.child){for(M=w.child;M;){if(M===d)return Tk(w),s;if(M===y)return Tk(w),a;M=M.sibling}throw Error(mt(188))}if(d.return!==y.return)d=w,y=M;else{for(var L=!1,I=w.child;I;){if(I===d){L=!0,d=w,y=M;break}if(I===y){L=!0,y=w,d=M;break}I=I.sibling}if(!L){for(I=M.child;I;){if(I===d){L=!0,d=M,y=w;break}if(I===y){L=!0,y=M,d=w;break}I=I.sibling}if(!L)throw Error(mt(189))}}if(d.alternate!==y)throw Error(mt(190))}if(d.tag!==3)throw Error(mt(188));return d.stateNode.current===d?s:a}function uP(s){return s=IL(s),s!==null?hP(s):null}function hP(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=hP(s);if(a!==null)return a;s=s.sibling}return null}var aP=zr.unstable_scheduleCallback,Lk=zr.unstable_cancelCallback,EL=zr.unstable_shouldYield,BL=zr.unstable_requestPaint,Fi=zr.unstable_now,RL=zr.unstable_getCurrentPriorityLevel,Ax=zr.unstable_ImmediatePriority,fP=zr.unstable_UserBlockingPriority,Sy=zr.unstable_NormalPriority,zL=zr.unstable_LowPriority,cP=zr.unstable_IdlePriority,Xy=null,vs=null;function VL(s){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(Xy,s,void 0,(s.current.flags&128)===128)}catch{}}var Vo=Math.clz32?Math.clz32:GL,UL=Math.log,YL=Math.LN2;function GL(s){return s>>>=0,s===0?32:31-(UL(s)/YL|0)|0}var Kg=64,_g=4194304;function Gc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ky(s,a){var d=s.pendingLanes;if(d===0)return 0;var y=0,w=s.suspendedLanes,M=s.pingedLanes,L=d&268435455;if(L!==0){var I=L&~w;I!==0?y=Gc(I):(M&=L,M!==0&&(y=Gc(M)))}else L=d&~w,L!==0?y=Gc(L):M!==0&&(y=Gc(M));if(y===0)return 0;if(a!==0&&a!==y&&!(a&w)&&(w=y&-y,M=a&-a,w>=M||w===16&&(M&4194240)!==0))return a;if(y&4&&(y|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=y;0<a;)d=31-Vo(a),w=1<<d,y|=s[d],a&=~w;return y}function HL(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XL(s,a){for(var d=s.suspendedLanes,y=s.pingedLanes,w=s.expirationTimes,M=s.pendingLanes;0<M;){var L=31-Vo(M),I=1<<L,B=w[L];B===-1?(!(I&d)||I&y)&&(w[L]=HL(I,a)):B<=a&&(s.expiredLanes|=I),M&=~I}}function H1(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function pP(){var s=Kg;return Kg<<=1,!(Kg&4194240)&&(Kg=64),s}function n1(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function mp(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-Vo(a),s[a]=d}function KL(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var y=s.eventTimes;for(s=s.expirationTimes;0<d;){var w=31-Vo(d),M=1<<w;a[w]=0,y[w]=-1,s[w]=-1,d&=~M}}function jx(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var y=31-Vo(d),w=1<<y;w&a|s[y]&a&&(s[y]|=a),d&=~w}}var Le=0;function dP(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var gP,Dx,yP,mP,vP,X1=!1,Wg=[],El=null,Bl=null,Rl=null,ip=new Map,np=new Map,jl=[],_L="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fk(s,a){switch(s){case"focusin":case"focusout":El=null;break;case"dragenter":case"dragleave":Bl=null;break;case"mouseover":case"mouseout":Rl=null;break;case"pointerover":case"pointerout":ip.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":np.delete(a.pointerId)}}function Ic(s,a,d,y,w,M){return s===null||s.nativeEvent!==M?(s={blockedOn:a,domEventName:d,eventSystemFlags:y,nativeEvent:M,targetContainers:[w]},a!==null&&(a=xp(a),a!==null&&Dx(a)),s):(s.eventSystemFlags|=y,a=s.targetContainers,w!==null&&a.indexOf(w)===-1&&a.push(w),s)}function WL(s,a,d,y,w){switch(a){case"focusin":return El=Ic(El,s,a,d,y,w),!0;case"dragenter":return Bl=Ic(Bl,s,a,d,y,w),!0;case"mouseover":return Rl=Ic(Rl,s,a,d,y,w),!0;case"pointerover":var M=w.pointerId;return ip.set(M,Ic(ip.get(M)||null,s,a,d,y,w)),!0;case"gotpointercapture":return M=w.pointerId,np.set(M,Ic(np.get(M)||null,s,a,d,y,w)),!0}return!1}function xP(s){var a=zu(s.target);if(a!==null){var d=Zu(a);if(d!==null){if(a=d.tag,a===13){if(a=lP(d),a!==null){s.blockedOn=a,vP(s.priority,function(){yP(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function uy(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=K1(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var y=new d.constructor(d.type,d);V1=y,d.target.dispatchEvent(y),V1=null}else return a=xp(d),a!==null&&Dx(a),s.blockedOn=d,!1;a.shift()}return!0}function Ak(s,a,d){uy(s)&&d.delete(a)}function $L(){X1=!1,El!==null&&uy(El)&&(El=null),Bl!==null&&uy(Bl)&&(Bl=null),Rl!==null&&uy(Rl)&&(Rl=null),ip.forEach(Ak),np.forEach(Ak)}function Ec(s,a){s.blockedOn===a&&(s.blockedOn=null,X1||(X1=!0,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,$L)))}function rp(s){function a(w){return Ec(w,s)}if(0<Wg.length){Ec(Wg[0],s);for(var d=1;d<Wg.length;d++){var y=Wg[d];y.blockedOn===s&&(y.blockedOn=null)}}for(El!==null&&Ec(El,s),Bl!==null&&Ec(Bl,s),Rl!==null&&Ec(Rl,s),ip.forEach(a),np.forEach(a),d=0;d<jl.length;d++)y=jl[d],y.blockedOn===s&&(y.blockedOn=null);for(;0<jl.length&&(d=jl[0],d.blockedOn===null);)xP(d),d.blockedOn===null&&jl.shift()}var Va=bs.ReactCurrentBatchConfig,Cy=!0;function ZL(s,a,d,y){var w=Le,M=Va.transition;Va.transition=null;try{Le=1,Ox(s,a,d,y)}finally{Le=w,Va.transition=M}}function QL(s,a,d,y){var w=Le,M=Va.transition;Va.transition=null;try{Le=4,Ox(s,a,d,y)}finally{Le=w,Va.transition=M}}function Ox(s,a,d,y){if(Cy){var w=K1(s,a,d,y);if(w===null)p1(s,a,y,Py,d),Fk(s,y);else if(WL(w,s,a,d,y))y.stopPropagation();else if(Fk(s,y),a&4&&-1<_L.indexOf(s)){for(;w!==null;){var M=xp(w);if(M!==null&&gP(M),M=K1(s,a,d,y),M===null&&p1(s,a,y,Py,d),M===w)break;w=M}w!==null&&y.stopPropagation()}else p1(s,a,y,null,d)}}var Py=null;function K1(s,a,d,y){if(Py=null,s=Fx(y),s=zu(s),s!==null)if(a=Zu(s),a===null)s=null;else if(d=a.tag,d===13){if(s=lP(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Py=s,null}function wP(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RL()){case Ax:return 1;case fP:return 4;case Sy:case zL:return 16;case cP:return 536870912;default:return 16}default:return 16}}var Ol=null,Ix=null,hy=null;function MP(){if(hy)return hy;var s,a=Ix,d=a.length,y,w="value"in Ol?Ol.value:Ol.textContent,M=w.length;for(s=0;s<d&&a[s]===w[s];s++);var L=d-s;for(y=1;y<=L&&a[d-y]===w[M-y];y++);return hy=w.slice(s,1<y?1-y:void 0)}function ay(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function $g(){return!0}function jk(){return!1}function Ur(s){function a(d,y,w,M,L){this._reactName=d,this._targetInst=w,this.type=y,this.nativeEvent=M,this.target=L,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(d=s[I],this[I]=d?d(M):M[I]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?$g:jk,this.isPropagationStopped=jk,this}return si(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=$g)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=$g)},persist:function(){},isPersistent:$g}),a}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ex=Ur(Qa),vp=si({},Qa,{view:0,detail:0}),JL=Ur(vp),r1,o1,Bc,Ky=si({},vp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bx,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Bc&&(Bc&&s.type==="mousemove"?(r1=s.screenX-Bc.screenX,o1=s.screenY-Bc.screenY):o1=r1=0,Bc=s),r1)},movementY:function(s){return"movementY"in s?s.movementY:o1}}),Dk=Ur(Ky),qL=si({},Ky,{dataTransfer:0}),bL=Ur(qL),tF=si({},vp,{relatedTarget:0}),s1=Ur(tF),eF=si({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),iF=Ur(eF),nF=si({},Qa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),rF=Ur(nF),oF=si({},Qa,{data:0}),Ok=Ur(oF),sF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hF(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=uF[s])?!!a[s]:!1}function Bx(){return hF}var aF=si({},vp,{key:function(s){if(s.key){var a=sF[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ay(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?lF[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bx,charCode:function(s){return s.type==="keypress"?ay(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ay(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),fF=Ur(aF),cF=si({},Ky,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ik=Ur(cF),pF=si({},vp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bx}),dF=Ur(pF),gF=si({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),yF=Ur(gF),mF=si({},Ky,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),vF=Ur(mF),xF=[9,13,27,32],Rx=Zs&&"CompositionEvent"in window,_c=null;Zs&&"documentMode"in document&&(_c=document.documentMode);var wF=Zs&&"TextEvent"in window&&!_c,SP=Zs&&(!Rx||_c&&8<_c&&11>=_c),Ek=String.fromCharCode(32),Bk=!1;function kP(s,a){switch(s){case"keyup":return xF.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CP(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Na=!1;function MF(s,a){switch(s){case"compositionend":return CP(a);case"keypress":return a.which!==32?null:(Bk=!0,Ek);case"textInput":return s=a.data,s===Ek&&Bk?null:s;default:return null}}function SF(s,a){if(Na)return s==="compositionend"||!Rx&&kP(s,a)?(s=MP(),hy=Ix=Ol=null,Na=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return SP&&a.locale!=="ko"?null:a.data;default:return null}}var kF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rk(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!kF[s.type]:a==="textarea"}function PP(s,a,d,y){iP(y),a=Ny(a,"onChange"),0<a.length&&(d=new Ex("onChange","change",null,d,y),s.push({event:d,listeners:a}))}var Wc=null,op=null;function CF(s){BP(s,0)}function _y(s){var a=Fa(s);if(ZC(a))return s}function PF(s,a){if(s==="change")return a}var NP=!1;if(Zs){var l1;if(Zs){var u1="oninput"in document;if(!u1){var zk=document.createElement("div");zk.setAttribute("oninput","return;"),u1=typeof zk.oninput=="function"}l1=u1}else l1=!1;NP=l1&&(!document.documentMode||9<document.documentMode)}function Vk(){Wc&&(Wc.detachEvent("onpropertychange",TP),op=Wc=null)}function TP(s){if(s.propertyName==="value"&&_y(op)){var a=[];PP(a,op,s,Fx(s)),sP(CF,a)}}function NF(s,a,d){s==="focusin"?(Vk(),Wc=a,op=d,Wc.attachEvent("onpropertychange",TP)):s==="focusout"&&Vk()}function TF(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return _y(op)}function LF(s,a){if(s==="click")return _y(a)}function FF(s,a){if(s==="input"||s==="change")return _y(a)}function AF(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Yo=typeof Object.is=="function"?Object.is:AF;function sp(s,a){if(Yo(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),y=Object.keys(a);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var w=d[y];if(!T1.call(a,w)||!Yo(s[w],a[w]))return!1}return!0}function Uk(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Yk(s,a){var d=Uk(s);s=0;for(var y;d;){if(d.nodeType===3){if(y=s+d.textContent.length,s<=a&&y>=a)return{node:d,offset:a-s};s=y}t:{for(;d;){if(d.nextSibling){d=d.nextSibling;break t}d=d.parentNode}d=void 0}d=Uk(d)}}function LP(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?LP(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function FP(){for(var s=window,a=xy();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=xy(s.document)}return a}function zx(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function jF(s){var a=FP(),d=s.focusedElem,y=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&LP(d.ownerDocument.documentElement,d)){if(y!==null&&zx(d)){if(a=y.start,s=y.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var w=d.textContent.length,M=Math.min(y.start,w);y=y.end===void 0?M:Math.min(y.end,w),!s.extend&&M>y&&(w=y,y=M,M=w),w=Yk(d,M);var L=Yk(d,y);w&&L&&(s.rangeCount!==1||s.anchorNode!==w.node||s.anchorOffset!==w.offset||s.focusNode!==L.node||s.focusOffset!==L.offset)&&(a=a.createRange(),a.setStart(w.node,w.offset),s.removeAllRanges(),M>y?(s.addRange(a),s.extend(L.node,L.offset)):(a.setEnd(L.node,L.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var DF=Zs&&"documentMode"in document&&11>=document.documentMode,Ta=null,_1=null,$c=null,W1=!1;function Gk(s,a,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;W1||Ta==null||Ta!==xy(y)||(y=Ta,"selectionStart"in y&&zx(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),$c&&sp($c,y)||($c=y,y=Ny(_1,"onSelect"),0<y.length&&(a=new Ex("onSelect","select",null,a,d),s.push({event:a,listeners:y}),a.target=Ta)))}function Zg(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var La={animationend:Zg("Animation","AnimationEnd"),animationiteration:Zg("Animation","AnimationIteration"),animationstart:Zg("Animation","AnimationStart"),transitionend:Zg("Transition","TransitionEnd")},h1={},AP={};Zs&&(AP=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Wy(s){if(h1[s])return h1[s];if(!La[s])return s;var a=La[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in AP)return h1[s]=a[d];return s}var jP=Wy("animationend"),DP=Wy("animationiteration"),OP=Wy("animationstart"),IP=Wy("transitionend"),EP=new Map,Hk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kl(s,a){EP.set(s,a),$u(a,[s])}for(var a1=0;a1<Hk.length;a1++){var f1=Hk[a1],OF=f1.toLowerCase(),IF=f1[0].toUpperCase()+f1.slice(1);Kl(OF,"on"+IF)}Kl(jP,"onAnimationEnd");Kl(DP,"onAnimationIteration");Kl(OP,"onAnimationStart");Kl("dblclick","onDoubleClick");Kl("focusin","onFocus");Kl("focusout","onBlur");Kl(IP,"onTransitionEnd");Ga("onMouseEnter",["mouseout","mouseover"]);Ga("onMouseLeave",["mouseout","mouseover"]);Ga("onPointerEnter",["pointerout","pointerover"]);Ga("onPointerLeave",["pointerout","pointerover"]);$u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$u("onBeforeInput",["compositionend","keypress","textInput","paste"]);$u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hc));function Xk(s,a,d){var y=s.type||"unknown-event";s.currentTarget=d,OL(y,a,void 0,s),s.currentTarget=null}function BP(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var y=s[d],w=y.event;y=y.listeners;t:{var M=void 0;if(a)for(var L=y.length-1;0<=L;L--){var I=y[L],B=I.instance,Q=I.currentTarget;if(I=I.listener,B!==M&&w.isPropagationStopped())break t;Xk(w,I,Q),M=B}else for(L=0;L<y.length;L++){if(I=y[L],B=I.instance,Q=I.currentTarget,I=I.listener,B!==M&&w.isPropagationStopped())break t;Xk(w,I,Q),M=B}}}if(My)throw s=G1,My=!1,G1=null,s}function Ge(s,a){var d=a[q1];d===void 0&&(d=a[q1]=new Set);var y=s+"__bubble";d.has(y)||(RP(a,s,2,!1),d.add(y))}function c1(s,a,d){var y=0;a&&(y|=4),RP(d,s,y,a)}var Qg="_reactListening"+Math.random().toString(36).slice(2);function lp(s){if(!s[Qg]){s[Qg]=!0,XC.forEach(function(d){d!=="selectionchange"&&(EF.has(d)||c1(d,!1,s),c1(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Qg]||(a[Qg]=!0,c1("selectionchange",!1,a))}}function RP(s,a,d,y){switch(wP(a)){case 1:var w=ZL;break;case 4:w=QL;break;default:w=Ox}d=w.bind(null,a,d,s),w=void 0,!Y1||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(w=!0),y?w!==void 0?s.addEventListener(a,d,{capture:!0,passive:w}):s.addEventListener(a,d,!0):w!==void 0?s.addEventListener(a,d,{passive:w}):s.addEventListener(a,d,!1)}function p1(s,a,d,y,w){var M=y;if(!(a&1)&&!(a&2)&&y!==null)t:for(;;){if(y===null)return;var L=y.tag;if(L===3||L===4){var I=y.stateNode.containerInfo;if(I===w||I.nodeType===8&&I.parentNode===w)break;if(L===4)for(L=y.return;L!==null;){var B=L.tag;if((B===3||B===4)&&(B=L.stateNode.containerInfo,B===w||B.nodeType===8&&B.parentNode===w))return;L=L.return}for(;I!==null;){if(L=zu(I),L===null)return;if(B=L.tag,B===5||B===6){y=M=L;continue t}I=I.parentNode}}y=y.return}sP(function(){var Q=M,Z=Fx(d),Y=[];t:{var st=EP.get(s);if(st!==void 0){var Mt=Ex,kt=s;switch(s){case"keypress":if(ay(d)===0)break t;case"keydown":case"keyup":Mt=fF;break;case"focusin":kt="focus",Mt=s1;break;case"focusout":kt="blur",Mt=s1;break;case"beforeblur":case"afterblur":Mt=s1;break;case"click":if(d.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Mt=Dk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Mt=bL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Mt=dF;break;case jP:case DP:case OP:Mt=iF;break;case IP:Mt=yF;break;case"scroll":Mt=JL;break;case"wheel":Mt=vF;break;case"copy":case"cut":case"paste":Mt=rF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Mt=Ik}var $=(a&4)!==0,xe=!$&&s==="scroll",b=$?st!==null?st+"Capture":null:st;$=[];for(var G=Q,J;G!==null;){J=G;var O=J.stateNode;if(J.tag===5&&O!==null&&(J=O,b!==null&&(O=ep(G,b),O!=null&&$.push(up(G,O,J)))),xe)break;G=G.return}0<$.length&&(st=new Mt(st,kt,null,d,Z),Y.push({event:st,listeners:$}))}}if(!(a&7)){t:{if(st=s==="mouseover"||s==="pointerover",Mt=s==="mouseout"||s==="pointerout",st&&d!==V1&&(kt=d.relatedTarget||d.fromElement)&&(zu(kt)||kt[Qs]))break t;if((Mt||st)&&(st=Z.window===Z?Z:(st=Z.ownerDocument)?st.defaultView||st.parentWindow:window,Mt?(kt=d.relatedTarget||d.toElement,Mt=Q,kt=kt?zu(kt):null,kt!==null&&(xe=Zu(kt),kt!==xe||kt.tag!==5&&kt.tag!==6)&&(kt=null)):(Mt=null,kt=Q),Mt!==kt)){if($=Dk,O="onMouseLeave",b="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&($=Ik,O="onPointerLeave",b="onPointerEnter",G="pointer"),xe=Mt==null?st:Fa(Mt),J=kt==null?st:Fa(kt),st=new $(O,G+"leave",Mt,d,Z),st.target=xe,st.relatedTarget=J,O=null,zu(Z)===Q&&($=new $(b,G+"enter",kt,d,Z),$.target=J,$.relatedTarget=xe,O=$),xe=O,Mt&&kt)e:{for($=Mt,b=kt,G=0,J=$;J;J=ka(J))G++;for(J=0,O=b;O;O=ka(O))J++;for(;0<G-J;)$=ka($),G--;for(;0<J-G;)b=ka(b),J--;for(;G--;){if($===b||b!==null&&$===b.alternate)break e;$=ka($),b=ka(b)}$=null}else $=null;Mt!==null&&Kk(Y,st,Mt,$,!1),kt!==null&&xe!==null&&Kk(Y,xe,kt,$,!0)}}t:{if(st=Q?Fa(Q):window,Mt=st.nodeName&&st.nodeName.toLowerCase(),Mt==="select"||Mt==="input"&&st.type==="file")var rt=PF;else if(Rk(st))if(NP)rt=FF;else{rt=TF;var at=NF}else(Mt=st.nodeName)&&Mt.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(rt=LF);if(rt&&(rt=rt(s,Q))){PP(Y,rt,d,Z);break t}at&&at(s,st,Q),s==="focusout"&&(at=st._wrapperState)&&at.controlled&&st.type==="number"&&I1(st,"number",st.value)}switch(at=Q?Fa(Q):window,s){case"focusin":(Rk(at)||at.contentEditable==="true")&&(Ta=at,_1=Q,$c=null);break;case"focusout":$c=_1=Ta=null;break;case"mousedown":W1=!0;break;case"contextmenu":case"mouseup":case"dragend":W1=!1,Gk(Y,d,Z);break;case"selectionchange":if(DF)break;case"keydown":case"keyup":Gk(Y,d,Z)}var Pt;if(Rx)t:{switch(s){case"compositionstart":var gt="onCompositionStart";break t;case"compositionend":gt="onCompositionEnd";break t;case"compositionupdate":gt="onCompositionUpdate";break t}gt=void 0}else Na?kP(s,d)&&(gt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(gt="onCompositionStart");gt&&(SP&&d.locale!=="ko"&&(Na||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&Na&&(Pt=MP()):(Ol=Z,Ix="value"in Ol?Ol.value:Ol.textContent,Na=!0)),at=Ny(Q,gt),0<at.length&&(gt=new Ok(gt,s,null,d,Z),Y.push({event:gt,listeners:at}),Pt?gt.data=Pt:(Pt=CP(d),Pt!==null&&(gt.data=Pt)))),(Pt=wF?MF(s,d):SF(s,d))&&(Q=Ny(Q,"onBeforeInput"),0<Q.length&&(Z=new Ok("onBeforeInput","beforeinput",null,d,Z),Y.push({event:Z,listeners:Q}),Z.data=Pt))}BP(Y,a)})}function up(s,a,d){return{instance:s,listener:a,currentTarget:d}}function Ny(s,a){for(var d=a+"Capture",y=[];s!==null;){var w=s,M=w.stateNode;w.tag===5&&M!==null&&(w=M,M=ep(s,d),M!=null&&y.unshift(up(s,M,w)),M=ep(s,a),M!=null&&y.push(up(s,M,w))),s=s.return}return y}function ka(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Kk(s,a,d,y,w){for(var M=a._reactName,L=[];d!==null&&d!==y;){var I=d,B=I.alternate,Q=I.stateNode;if(B!==null&&B===y)break;I.tag===5&&Q!==null&&(I=Q,w?(B=ep(d,M),B!=null&&L.unshift(up(d,B,I))):w||(B=ep(d,M),B!=null&&L.push(up(d,B,I)))),d=d.return}L.length!==0&&s.push({event:a,listeners:L})}var BF=/\r\n?/g,RF=/\u0000|\uFFFD/g;function _k(s){return(typeof s=="string"?s:""+s).replace(BF,`
`).replace(RF,"")}function Jg(s,a,d){if(a=_k(a),_k(s)!==a&&d)throw Error(mt(425))}function Ty(){}var $1=null,Z1=null;function Q1(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var J1=typeof setTimeout=="function"?setTimeout:void 0,zF=typeof clearTimeout=="function"?clearTimeout:void 0,Wk=typeof Promise=="function"?Promise:void 0,VF=typeof queueMicrotask=="function"?queueMicrotask:typeof Wk<"u"?function(s){return Wk.resolve(null).then(s).catch(UF)}:J1;function UF(s){setTimeout(function(){throw s})}function d1(s,a){var d=a,y=0;do{var w=d.nextSibling;if(s.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(y===0){s.removeChild(w),rp(a);return}y--}else d!=="$"&&d!=="$?"&&d!=="$!"||y++;d=w}while(d);rp(a)}function zl(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function $k(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var Ja=Math.random().toString(36).slice(2),ys="__reactFiber$"+Ja,hp="__reactProps$"+Ja,Qs="__reactContainer$"+Ja,q1="__reactEvents$"+Ja,YF="__reactListeners$"+Ja,GF="__reactHandles$"+Ja;function zu(s){var a=s[ys];if(a)return a;for(var d=s.parentNode;d;){if(a=d[Qs]||d[ys]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=$k(s);s!==null;){if(d=s[ys])return d;s=$k(s)}return a}s=d,d=s.parentNode}return null}function xp(s){return s=s[ys]||s[Qs],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Fa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(mt(33))}function $y(s){return s[hp]||null}var b1=[],Aa=-1;function _l(s){return{current:s}}function He(s){0>Aa||(s.current=b1[Aa],b1[Aa]=null,Aa--)}function Ve(s,a){Aa++,b1[Aa]=s.current,s.current=a}var Xl={},Hn=_l(Xl),vr=_l(!1),Hu=Xl;function Ha(s,a){var d=s.type.contextTypes;if(!d)return Xl;var y=s.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===a)return y.__reactInternalMemoizedMaskedChildContext;var w={},M;for(M in d)w[M]=a[M];return y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=w),w}function xr(s){return s=s.childContextTypes,s!=null}function Ly(){He(vr),He(Hn)}function Zk(s,a,d){if(Hn.current!==Xl)throw Error(mt(168));Ve(Hn,a),Ve(vr,d)}function zP(s,a,d){var y=s.stateNode;if(a=a.childContextTypes,typeof y.getChildContext!="function")return d;y=y.getChildContext();for(var w in y)if(!(w in a))throw Error(mt(108,NL(s)||"Unknown",w));return si({},d,y)}function Fy(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Xl,Hu=Hn.current,Ve(Hn,s),Ve(vr,vr.current),!0}function Qk(s,a,d){var y=s.stateNode;if(!y)throw Error(mt(169));d?(s=zP(s,a,Hu),y.__reactInternalMemoizedMergedChildContext=s,He(vr),He(Hn),Ve(Hn,s)):He(vr),Ve(vr,d)}var Ks=null,Zy=!1,g1=!1;function VP(s){Ks===null?Ks=[s]:Ks.push(s)}function HF(s){Zy=!0,VP(s)}function Wl(){if(!g1&&Ks!==null){g1=!0;var s=0,a=Le;try{var d=Ks;for(Le=1;s<d.length;s++){var y=d[s];do y=y(!0);while(y!==null)}Ks=null,Zy=!1}catch(w){throw Ks!==null&&(Ks=Ks.slice(s+1)),aP(Ax,Wl),w}finally{Le=a,g1=!1}}return null}var ja=[],Da=0,Ay=null,jy=0,so=[],lo=0,Xu=null,_s=1,Ws="";function Bu(s,a){ja[Da++]=jy,ja[Da++]=Ay,Ay=s,jy=a}function UP(s,a,d){so[lo++]=_s,so[lo++]=Ws,so[lo++]=Xu,Xu=s;var y=_s;s=Ws;var w=32-Vo(y)-1;y&=~(1<<w),d+=1;var M=32-Vo(a)+w;if(30<M){var L=w-w%5;M=(y&(1<<L)-1).toString(32),y>>=L,w-=L,_s=1<<32-Vo(a)+w|d<<w|y,Ws=M+s}else _s=1<<M|d<<w|y,Ws=s}function Vx(s){s.return!==null&&(Bu(s,1),UP(s,1,0))}function Ux(s){for(;s===Ay;)Ay=ja[--Da],ja[Da]=null,jy=ja[--Da],ja[Da]=null;for(;s===Xu;)Xu=so[--lo],so[lo]=null,Ws=so[--lo],so[lo]=null,_s=so[--lo],so[lo]=null}var Rr=null,Br=null,Ze=!1,zo=null;function YP(s,a){var d=uo(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function Jk(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Rr=s,Br=zl(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Rr=s,Br=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Xu!==null?{id:_s,overflow:Ws}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=uo(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,Rr=s,Br=null,!0):!1;default:return!1}}function tx(s){return(s.mode&1)!==0&&(s.flags&128)===0}function ex(s){if(Ze){var a=Br;if(a){var d=a;if(!Jk(s,a)){if(tx(s))throw Error(mt(418));a=zl(d.nextSibling);var y=Rr;a&&Jk(s,a)?YP(y,d):(s.flags=s.flags&-4097|2,Ze=!1,Rr=s)}}else{if(tx(s))throw Error(mt(418));s.flags=s.flags&-4097|2,Ze=!1,Rr=s}}}function qk(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Rr=s}function qg(s){if(s!==Rr)return!1;if(!Ze)return qk(s),Ze=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Q1(s.type,s.memoizedProps)),a&&(a=Br)){if(tx(s))throw GP(),Error(mt(418));for(;a;)YP(s,a),a=zl(a.nextSibling)}if(qk(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(mt(317));t:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){Br=zl(s.nextSibling);break t}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}Br=null}}else Br=Rr?zl(s.stateNode.nextSibling):null;return!0}function GP(){for(var s=Br;s;)s=zl(s.nextSibling)}function Xa(){Br=Rr=null,Ze=!1}function Yx(s){zo===null?zo=[s]:zo.push(s)}var XF=bs.ReactCurrentBatchConfig;function Rc(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(mt(309));var y=d.stateNode}if(!y)throw Error(mt(147,s));var w=y,M=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===M?a.ref:(a=function(L){var I=w.refs;L===null?delete I[M]:I[M]=L},a._stringRef=M,a)}if(typeof s!="string")throw Error(mt(284));if(!d._owner)throw Error(mt(290,s))}return s}function bg(s,a){throw s=Object.prototype.toString.call(a),Error(mt(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function bk(s){var a=s._init;return a(s._payload)}function HP(s){function a(b,G){if(s){var J=b.deletions;J===null?(b.deletions=[G],b.flags|=16):J.push(G)}}function d(b,G){if(!s)return null;for(;G!==null;)a(b,G),G=G.sibling;return null}function y(b,G){for(b=new Map;G!==null;)G.key!==null?b.set(G.key,G):b.set(G.index,G),G=G.sibling;return b}function w(b,G){return b=Gl(b,G),b.index=0,b.sibling=null,b}function M(b,G,J){return b.index=J,s?(J=b.alternate,J!==null?(J=J.index,J<G?(b.flags|=2,G):J):(b.flags|=2,G)):(b.flags|=1048576,G)}function L(b){return s&&b.alternate===null&&(b.flags|=2),b}function I(b,G,J,O){return G===null||G.tag!==6?(G=S1(J,b.mode,O),G.return=b,G):(G=w(G,J),G.return=b,G)}function B(b,G,J,O){var rt=J.type;return rt===Pa?Z(b,G,J.props.children,O,J.key):G!==null&&(G.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===Fl&&bk(rt)===G.type)?(O=w(G,J.props),O.ref=Rc(b,G,J),O.return=b,O):(O=my(J.type,J.key,J.props,null,b.mode,O),O.ref=Rc(b,G,J),O.return=b,O)}function Q(b,G,J,O){return G===null||G.tag!==4||G.stateNode.containerInfo!==J.containerInfo||G.stateNode.implementation!==J.implementation?(G=k1(J,b.mode,O),G.return=b,G):(G=w(G,J.children||[]),G.return=b,G)}function Z(b,G,J,O,rt){return G===null||G.tag!==7?(G=Gu(J,b.mode,O,rt),G.return=b,G):(G=w(G,J),G.return=b,G)}function Y(b,G,J){if(typeof G=="string"&&G!==""||typeof G=="number")return G=S1(""+G,b.mode,J),G.return=b,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Gg:return J=my(G.type,G.key,G.props,null,b.mode,J),J.ref=Rc(b,null,G),J.return=b,J;case Ca:return G=k1(G,b.mode,J),G.return=b,G;case Fl:var O=G._init;return Y(b,O(G._payload),J)}if(Yc(G)||Dc(G))return G=Gu(G,b.mode,J,null),G.return=b,G;bg(b,G)}return null}function st(b,G,J,O){var rt=G!==null?G.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return rt!==null?null:I(b,G,""+J,O);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Gg:return J.key===rt?B(b,G,J,O):null;case Ca:return J.key===rt?Q(b,G,J,O):null;case Fl:return rt=J._init,st(b,G,rt(J._payload),O)}if(Yc(J)||Dc(J))return rt!==null?null:Z(b,G,J,O,null);bg(b,J)}return null}function Mt(b,G,J,O,rt){if(typeof O=="string"&&O!==""||typeof O=="number")return b=b.get(J)||null,I(G,b,""+O,rt);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Gg:return b=b.get(O.key===null?J:O.key)||null,B(G,b,O,rt);case Ca:return b=b.get(O.key===null?J:O.key)||null,Q(G,b,O,rt);case Fl:var at=O._init;return Mt(b,G,J,at(O._payload),rt)}if(Yc(O)||Dc(O))return b=b.get(J)||null,Z(G,b,O,rt,null);bg(G,O)}return null}function kt(b,G,J,O){for(var rt=null,at=null,Pt=G,gt=G=0,Ht=null;Pt!==null&&gt<J.length;gt++){Pt.index>gt?(Ht=Pt,Pt=null):Ht=Pt.sibling;var Qt=st(b,Pt,J[gt],O);if(Qt===null){Pt===null&&(Pt=Ht);break}s&&Pt&&Qt.alternate===null&&a(b,Pt),G=M(Qt,G,gt),at===null?rt=Qt:at.sibling=Qt,at=Qt,Pt=Ht}if(gt===J.length)return d(b,Pt),Ze&&Bu(b,gt),rt;if(Pt===null){for(;gt<J.length;gt++)Pt=Y(b,J[gt],O),Pt!==null&&(G=M(Pt,G,gt),at===null?rt=Pt:at.sibling=Pt,at=Pt);return Ze&&Bu(b,gt),rt}for(Pt=y(b,Pt);gt<J.length;gt++)Ht=Mt(Pt,b,gt,J[gt],O),Ht!==null&&(s&&Ht.alternate!==null&&Pt.delete(Ht.key===null?gt:Ht.key),G=M(Ht,G,gt),at===null?rt=Ht:at.sibling=Ht,at=Ht);return s&&Pt.forEach(function(Ji){return a(b,Ji)}),Ze&&Bu(b,gt),rt}function $(b,G,J,O){var rt=Dc(J);if(typeof rt!="function")throw Error(mt(150));if(J=rt.call(J),J==null)throw Error(mt(151));for(var at=rt=null,Pt=G,gt=G=0,Ht=null,Qt=J.next();Pt!==null&&!Qt.done;gt++,Qt=J.next()){Pt.index>gt?(Ht=Pt,Pt=null):Ht=Pt.sibling;var Ji=st(b,Pt,Qt.value,O);if(Ji===null){Pt===null&&(Pt=Ht);break}s&&Pt&&Ji.alternate===null&&a(b,Pt),G=M(Ji,G,gt),at===null?rt=Ji:at.sibling=Ji,at=Ji,Pt=Ht}if(Qt.done)return d(b,Pt),Ze&&Bu(b,gt),rt;if(Pt===null){for(;!Qt.done;gt++,Qt=J.next())Qt=Y(b,Qt.value,O),Qt!==null&&(G=M(Qt,G,gt),at===null?rt=Qt:at.sibling=Qt,at=Qt);return Ze&&Bu(b,gt),rt}for(Pt=y(b,Pt);!Qt.done;gt++,Qt=J.next())Qt=Mt(Pt,b,gt,Qt.value,O),Qt!==null&&(s&&Qt.alternate!==null&&Pt.delete(Qt.key===null?gt:Qt.key),G=M(Qt,G,gt),at===null?rt=Qt:at.sibling=Qt,at=Qt);return s&&Pt.forEach(function(Mr){return a(b,Mr)}),Ze&&Bu(b,gt),rt}function xe(b,G,J,O){if(typeof J=="object"&&J!==null&&J.type===Pa&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case Gg:t:{for(var rt=J.key,at=G;at!==null;){if(at.key===rt){if(rt=J.type,rt===Pa){if(at.tag===7){d(b,at.sibling),G=w(at,J.props.children),G.return=b,b=G;break t}}else if(at.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===Fl&&bk(rt)===at.type){d(b,at.sibling),G=w(at,J.props),G.ref=Rc(b,at,J),G.return=b,b=G;break t}d(b,at);break}else a(b,at);at=at.sibling}J.type===Pa?(G=Gu(J.props.children,b.mode,O,J.key),G.return=b,b=G):(O=my(J.type,J.key,J.props,null,b.mode,O),O.ref=Rc(b,G,J),O.return=b,b=O)}return L(b);case Ca:t:{for(at=J.key;G!==null;){if(G.key===at)if(G.tag===4&&G.stateNode.containerInfo===J.containerInfo&&G.stateNode.implementation===J.implementation){d(b,G.sibling),G=w(G,J.children||[]),G.return=b,b=G;break t}else{d(b,G);break}else a(b,G);G=G.sibling}G=k1(J,b.mode,O),G.return=b,b=G}return L(b);case Fl:return at=J._init,xe(b,G,at(J._payload),O)}if(Yc(J))return kt(b,G,J,O);if(Dc(J))return $(b,G,J,O);bg(b,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,G!==null&&G.tag===6?(d(b,G.sibling),G=w(G,J),G.return=b,b=G):(d(b,G),G=S1(J,b.mode,O),G.return=b,b=G),L(b)):d(b,G)}return xe}var Ka=HP(!0),XP=HP(!1),Dy=_l(null),Oy=null,Oa=null,Gx=null;function Hx(){Gx=Oa=Oy=null}function Xx(s){var a=Dy.current;He(Dy),s._currentValue=a}function ix(s,a,d){for(;s!==null;){var y=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,y!==null&&(y.childLanes|=a)):y!==null&&(y.childLanes&a)!==a&&(y.childLanes|=a),s===d)break;s=s.return}}function Ua(s,a){Oy=s,Gx=Oa=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&a&&(mr=!0),s.firstContext=null)}function ao(s){var a=s._currentValue;if(Gx!==s)if(s={context:s,memoizedValue:a,next:null},Oa===null){if(Oy===null)throw Error(mt(308));Oa=s,Oy.dependencies={lanes:0,firstContext:s}}else Oa=Oa.next=s;return a}var Vu=null;function Kx(s){Vu===null?Vu=[s]:Vu.push(s)}function KP(s,a,d,y){var w=a.interleaved;return w===null?(d.next=d,Kx(a)):(d.next=w.next,w.next=d),a.interleaved=d,Js(s,y)}function Js(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var Al=!1;function _x(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _P(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function $s(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Vl(s,a,d){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,ve&2){var w=y.pending;return w===null?a.next=a:(a.next=w.next,w.next=a),y.pending=a,Js(s,d)}return w=y.interleaved,w===null?(a.next=a,Kx(y)):(a.next=w.next,w.next=a),y.interleaved=a,Js(s,d)}function fy(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var y=a.lanes;y&=s.pendingLanes,d|=y,a.lanes=d,jx(s,d)}}function tC(s,a){var d=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var w=null,M=null;if(d=d.firstBaseUpdate,d!==null){do{var L={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};M===null?w=M=L:M=M.next=L,d=d.next}while(d!==null);M===null?w=M=a:M=M.next=a}else w=M=a;d={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:M,shared:y.shared,effects:y.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function Iy(s,a,d,y){var w=s.updateQueue;Al=!1;var M=w.firstBaseUpdate,L=w.lastBaseUpdate,I=w.shared.pending;if(I!==null){w.shared.pending=null;var B=I,Q=B.next;B.next=null,L===null?M=Q:L.next=Q,L=B;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,I=Z.lastBaseUpdate,I!==L&&(I===null?Z.firstBaseUpdate=Q:I.next=Q,Z.lastBaseUpdate=B))}if(M!==null){var Y=w.baseState;L=0,Z=Q=B=null,I=M;do{var st=I.lane,Mt=I.eventTime;if((y&st)===st){Z!==null&&(Z=Z.next={eventTime:Mt,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});t:{var kt=s,$=I;switch(st=a,Mt=d,$.tag){case 1:if(kt=$.payload,typeof kt=="function"){Y=kt.call(Mt,Y,st);break t}Y=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=$.payload,st=typeof kt=="function"?kt.call(Mt,Y,st):kt,st==null)break t;Y=si({},Y,st);break t;case 2:Al=!0}}I.callback!==null&&I.lane!==0&&(s.flags|=64,st=w.effects,st===null?w.effects=[I]:st.push(I))}else Mt={eventTime:Mt,lane:st,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Z===null?(Q=Z=Mt,B=Y):Z=Z.next=Mt,L|=st;if(I=I.next,I===null){if(I=w.shared.pending,I===null)break;st=I,I=st.next,st.next=null,w.lastBaseUpdate=st,w.shared.pending=null}}while(1);if(Z===null&&(B=Y),w.baseState=B,w.firstBaseUpdate=Q,w.lastBaseUpdate=Z,a=w.shared.interleaved,a!==null){w=a;do L|=w.lane,w=w.next;while(w!==a)}else M===null&&(w.shared.lanes=0);_u|=L,s.lanes=L,s.memoizedState=Y}}function eC(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var y=s[a],w=y.callback;if(w!==null){if(y.callback=null,y=d,typeof w!="function")throw Error(mt(191,w));w.call(y)}}}var wp={},xs=_l(wp),ap=_l(wp),fp=_l(wp);function Uu(s){if(s===wp)throw Error(mt(174));return s}function Wx(s,a){switch(Ve(fp,a),Ve(ap,s),Ve(xs,wp),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:B1(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=B1(a,s)}He(xs),Ve(xs,a)}function _a(){He(xs),He(ap),He(fp)}function WP(s){Uu(fp.current);var a=Uu(xs.current),d=B1(a,s.type);a!==d&&(Ve(ap,s),Ve(xs,d))}function $x(s){ap.current===s&&(He(xs),He(ap))}var ri=_l(0);function Ey(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var y1=[];function Zx(){for(var s=0;s<y1.length;s++)y1[s]._workInProgressVersionPrimary=null;y1.length=0}var cy=bs.ReactCurrentDispatcher,m1=bs.ReactCurrentBatchConfig,Ku=0,oi=null,Zi=null,ln=null,By=!1,Zc=!1,cp=0,KF=0;function Un(){throw Error(mt(321))}function Qx(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!Yo(s[d],a[d]))return!1;return!0}function Jx(s,a,d,y,w,M){if(Ku=M,oi=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,cy.current=s===null||s.memoizedState===null?ZF:QF,s=d(y,w),Zc){M=0;do{if(Zc=!1,cp=0,25<=M)throw Error(mt(301));M+=1,ln=Zi=null,a.updateQueue=null,cy.current=JF,s=d(y,w)}while(Zc)}if(cy.current=Ry,a=Zi!==null&&Zi.next!==null,Ku=0,ln=Zi=oi=null,By=!1,a)throw Error(mt(300));return s}function qx(){var s=cp!==0;return cp=0,s}function gs(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?oi.memoizedState=ln=s:ln=ln.next=s,ln}function fo(){if(Zi===null){var s=oi.alternate;s=s!==null?s.memoizedState:null}else s=Zi.next;var a=ln===null?oi.memoizedState:ln.next;if(a!==null)ln=a,Zi=s;else{if(s===null)throw Error(mt(310));Zi=s,s={memoizedState:Zi.memoizedState,baseState:Zi.baseState,baseQueue:Zi.baseQueue,queue:Zi.queue,next:null},ln===null?oi.memoizedState=ln=s:ln=ln.next=s}return ln}function pp(s,a){return typeof a=="function"?a(s):a}function v1(s){var a=fo(),d=a.queue;if(d===null)throw Error(mt(311));d.lastRenderedReducer=s;var y=Zi,w=y.baseQueue,M=d.pending;if(M!==null){if(w!==null){var L=w.next;w.next=M.next,M.next=L}y.baseQueue=w=M,d.pending=null}if(w!==null){M=w.next,y=y.baseState;var I=L=null,B=null,Q=M;do{var Z=Q.lane;if((Ku&Z)===Z)B!==null&&(B=B.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),y=Q.hasEagerState?Q.eagerState:s(y,Q.action);else{var Y={lane:Z,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};B===null?(I=B=Y,L=y):B=B.next=Y,oi.lanes|=Z,_u|=Z}Q=Q.next}while(Q!==null&&Q!==M);B===null?L=y:B.next=I,Yo(y,a.memoizedState)||(mr=!0),a.memoizedState=y,a.baseState=L,a.baseQueue=B,d.lastRenderedState=y}if(s=d.interleaved,s!==null){w=s;do M=w.lane,oi.lanes|=M,_u|=M,w=w.next;while(w!==s)}else w===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function x1(s){var a=fo(),d=a.queue;if(d===null)throw Error(mt(311));d.lastRenderedReducer=s;var y=d.dispatch,w=d.pending,M=a.memoizedState;if(w!==null){d.pending=null;var L=w=w.next;do M=s(M,L.action),L=L.next;while(L!==w);Yo(M,a.memoizedState)||(mr=!0),a.memoizedState=M,a.baseQueue===null&&(a.baseState=M),d.lastRenderedState=M}return[M,y]}function $P(){}function ZP(s,a){var d=oi,y=fo(),w=a(),M=!Yo(y.memoizedState,w);if(M&&(y.memoizedState=w,mr=!0),y=y.queue,bx(qP.bind(null,d,y,s),[s]),y.getSnapshot!==a||M||ln!==null&&ln.memoizedState.tag&1){if(d.flags|=2048,dp(9,JP.bind(null,d,y,w,a),void 0,null),un===null)throw Error(mt(349));Ku&30||QP(d,a,w)}return w}function QP(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=oi.updateQueue,a===null?(a={lastEffect:null,stores:null},oi.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function JP(s,a,d,y){a.value=d,a.getSnapshot=y,bP(a)&&tN(s)}function qP(s,a,d){return d(function(){bP(a)&&tN(s)})}function bP(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!Yo(s,d)}catch{return!0}}function tN(s){var a=Js(s,1);a!==null&&Uo(a,s,1,-1)}function iC(s){var a=gs();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pp,lastRenderedState:s},a.queue=s,s=s.dispatch=$F.bind(null,oi,s),[a.memoizedState,s]}function dp(s,a,d,y){return s={tag:s,create:a,destroy:d,deps:y,next:null},a=oi.updateQueue,a===null?(a={lastEffect:null,stores:null},oi.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(y=d.next,d.next=s,s.next=y,a.lastEffect=s)),s}function eN(){return fo().memoizedState}function py(s,a,d,y){var w=gs();oi.flags|=s,w.memoizedState=dp(1|a,d,void 0,y===void 0?null:y)}function Qy(s,a,d,y){var w=fo();y=y===void 0?null:y;var M=void 0;if(Zi!==null){var L=Zi.memoizedState;if(M=L.destroy,y!==null&&Qx(y,L.deps)){w.memoizedState=dp(a,d,M,y);return}}oi.flags|=s,w.memoizedState=dp(1|a,d,M,y)}function nC(s,a){return py(8390656,8,s,a)}function bx(s,a){return Qy(2048,8,s,a)}function iN(s,a){return Qy(4,2,s,a)}function nN(s,a){return Qy(4,4,s,a)}function rN(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function oN(s,a,d){return d=d!=null?d.concat([s]):null,Qy(4,4,rN.bind(null,a,s),d)}function tw(){}function sN(s,a){var d=fo();a=a===void 0?null:a;var y=d.memoizedState;return y!==null&&a!==null&&Qx(a,y[1])?y[0]:(d.memoizedState=[s,a],s)}function lN(s,a){var d=fo();a=a===void 0?null:a;var y=d.memoizedState;return y!==null&&a!==null&&Qx(a,y[1])?y[0]:(s=s(),d.memoizedState=[s,a],s)}function uN(s,a,d){return Ku&21?(Yo(d,a)||(d=pP(),oi.lanes|=d,_u|=d,s.baseState=!0),a):(s.baseState&&(s.baseState=!1,mr=!0),s.memoizedState=d)}function _F(s,a){var d=Le;Le=d!==0&&4>d?d:4,s(!0);var y=m1.transition;m1.transition={};try{s(!1),a()}finally{Le=d,m1.transition=y}}function hN(){return fo().memoizedState}function WF(s,a,d){var y=Yl(s);if(d={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null},aN(s))fN(a,d);else if(d=KP(s,a,d,y),d!==null){var w=nr();Uo(d,s,y,w),cN(d,a,y)}}function $F(s,a,d){var y=Yl(s),w={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null};if(aN(s))fN(a,w);else{var M=s.alternate;if(s.lanes===0&&(M===null||M.lanes===0)&&(M=a.lastRenderedReducer,M!==null))try{var L=a.lastRenderedState,I=M(L,d);if(w.hasEagerState=!0,w.eagerState=I,Yo(I,L)){var B=a.interleaved;B===null?(w.next=w,Kx(a)):(w.next=B.next,B.next=w),a.interleaved=w;return}}catch{}finally{}d=KP(s,a,w,y),d!==null&&(w=nr(),Uo(d,s,y,w),cN(d,a,y))}}function aN(s){var a=s.alternate;return s===oi||a!==null&&a===oi}function fN(s,a){Zc=By=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function cN(s,a,d){if(d&4194240){var y=a.lanes;y&=s.pendingLanes,d|=y,a.lanes=d,jx(s,d)}}var Ry={readContext:ao,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},ZF={readContext:ao,useCallback:function(s,a){return gs().memoizedState=[s,a===void 0?null:a],s},useContext:ao,useEffect:nC,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,py(4194308,4,rN.bind(null,a,s),d)},useLayoutEffect:function(s,a){return py(4194308,4,s,a)},useInsertionEffect:function(s,a){return py(4,2,s,a)},useMemo:function(s,a){var d=gs();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var y=gs();return a=d!==void 0?d(a):a,y.memoizedState=y.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},y.queue=s,s=s.dispatch=WF.bind(null,oi,s),[y.memoizedState,s]},useRef:function(s){var a=gs();return s={current:s},a.memoizedState=s},useState:iC,useDebugValue:tw,useDeferredValue:function(s){return gs().memoizedState=s},useTransition:function(){var s=iC(!1),a=s[0];return s=_F.bind(null,s[1]),gs().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var y=oi,w=gs();if(Ze){if(d===void 0)throw Error(mt(407));d=d()}else{if(d=a(),un===null)throw Error(mt(349));Ku&30||QP(y,a,d)}w.memoizedState=d;var M={value:d,getSnapshot:a};return w.queue=M,nC(qP.bind(null,y,M,s),[s]),y.flags|=2048,dp(9,JP.bind(null,y,M,d,a),void 0,null),d},useId:function(){var s=gs(),a=un.identifierPrefix;if(Ze){var d=Ws,y=_s;d=(y&~(1<<32-Vo(y)-1)).toString(32)+d,a=":"+a+"R"+d,d=cp++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=KF++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},QF={readContext:ao,useCallback:sN,useContext:ao,useEffect:bx,useImperativeHandle:oN,useInsertionEffect:iN,useLayoutEffect:nN,useMemo:lN,useReducer:v1,useRef:eN,useState:function(){return v1(pp)},useDebugValue:tw,useDeferredValue:function(s){var a=fo();return uN(a,Zi.memoizedState,s)},useTransition:function(){var s=v1(pp)[0],a=fo().memoizedState;return[s,a]},useMutableSource:$P,useSyncExternalStore:ZP,useId:hN,unstable_isNewReconciler:!1},JF={readContext:ao,useCallback:sN,useContext:ao,useEffect:bx,useImperativeHandle:oN,useInsertionEffect:iN,useLayoutEffect:nN,useMemo:lN,useReducer:x1,useRef:eN,useState:function(){return x1(pp)},useDebugValue:tw,useDeferredValue:function(s){var a=fo();return Zi===null?a.memoizedState=s:uN(a,Zi.memoizedState,s)},useTransition:function(){var s=x1(pp)[0],a=fo().memoizedState;return[s,a]},useMutableSource:$P,useSyncExternalStore:ZP,useId:hN,unstable_isNewReconciler:!1};function Bo(s,a){if(s&&s.defaultProps){a=si({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}function nx(s,a,d,y){a=s.memoizedState,d=d(y,a),d=d==null?a:si({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Jy={isMounted:function(s){return(s=s._reactInternals)?Zu(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var y=nr(),w=Yl(s),M=$s(y,w);M.payload=a,d!=null&&(M.callback=d),a=Vl(s,M,w),a!==null&&(Uo(a,s,w,y),fy(a,s,w))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var y=nr(),w=Yl(s),M=$s(y,w);M.tag=1,M.payload=a,d!=null&&(M.callback=d),a=Vl(s,M,w),a!==null&&(Uo(a,s,w,y),fy(a,s,w))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=nr(),y=Yl(s),w=$s(d,y);w.tag=2,a!=null&&(w.callback=a),a=Vl(s,w,y),a!==null&&(Uo(a,s,y,d),fy(a,s,y))}};function rC(s,a,d,y,w,M,L){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,M,L):a.prototype&&a.prototype.isPureReactComponent?!sp(d,y)||!sp(w,M):!0}function pN(s,a,d){var y=!1,w=Xl,M=a.contextType;return typeof M=="object"&&M!==null?M=ao(M):(w=xr(a)?Hu:Hn.current,y=a.contextTypes,M=(y=y!=null)?Ha(s,w):Xl),a=new a(d,M),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Jy,s.stateNode=a,a._reactInternals=s,y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=w,s.__reactInternalMemoizedMaskedChildContext=M),a}function oC(s,a,d,y){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,y),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,y),a.state!==s&&Jy.enqueueReplaceState(a,a.state,null)}function rx(s,a,d,y){var w=s.stateNode;w.props=d,w.state=s.memoizedState,w.refs={},_x(s);var M=a.contextType;typeof M=="object"&&M!==null?w.context=ao(M):(M=xr(a)?Hu:Hn.current,w.context=Ha(s,M)),w.state=s.memoizedState,M=a.getDerivedStateFromProps,typeof M=="function"&&(nx(s,a,M,d),w.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(a=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),a!==w.state&&Jy.enqueueReplaceState(w,w.state,null),Iy(s,d,w,y),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308)}function Wa(s,a){try{var d="",y=a;do d+=PL(y),y=y.return;while(y);var w=d}catch(M){w=`
Error generating stack: `+M.message+`
`+M.stack}return{value:s,source:a,stack:w,digest:null}}function w1(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function ox(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var qF=typeof WeakMap=="function"?WeakMap:Map;function dN(s,a,d){d=$s(-1,d),d.tag=3,d.payload={element:null};var y=a.value;return d.callback=function(){Vy||(Vy=!0,gx=y),ox(s,a)},d}function gN(s,a,d){d=$s(-1,d),d.tag=3;var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var w=a.value;d.payload=function(){return y(w)},d.callback=function(){ox(s,a)}}var M=s.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(d.callback=function(){ox(s,a),typeof y!="function"&&(Ul===null?Ul=new Set([this]):Ul.add(this));var L=a.stack;this.componentDidCatch(a.value,{componentStack:L!==null?L:""})}),d}function sC(s,a,d){var y=s.pingCache;if(y===null){y=s.pingCache=new qF;var w=new Set;y.set(a,w)}else w=y.get(a),w===void 0&&(w=new Set,y.set(a,w));w.has(d)||(w.add(d),s=cA.bind(null,s,a,d),a.then(s,s))}function lC(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function uC(s,a,d,y,w){return s.mode&1?(s.flags|=65536,s.lanes=w,s):(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=$s(-1,1),a.tag=2,Vl(d,a,1))),d.lanes|=1),s)}var bF=bs.ReactCurrentOwner,mr=!1;function ir(s,a,d,y){a.child=s===null?XP(a,null,d,y):Ka(a,s.child,d,y)}function hC(s,a,d,y,w){d=d.render;var M=a.ref;return Ua(a,w),y=Jx(s,a,d,y,M,w),d=qx(),s!==null&&!mr?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~w,qs(s,a,w)):(Ze&&d&&Vx(a),a.flags|=1,ir(s,a,y,w),a.child)}function aC(s,a,d,y,w){if(s===null){var M=d.type;return typeof M=="function"&&!uw(M)&&M.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=M,yN(s,a,M,y,w)):(s=my(d.type,null,y,a,a.mode,w),s.ref=a.ref,s.return=a,a.child=s)}if(M=s.child,!(s.lanes&w)){var L=M.memoizedProps;if(d=d.compare,d=d!==null?d:sp,d(L,y)&&s.ref===a.ref)return qs(s,a,w)}return a.flags|=1,s=Gl(M,y),s.ref=a.ref,s.return=a,a.child=s}function yN(s,a,d,y,w){if(s!==null){var M=s.memoizedProps;if(sp(M,y)&&s.ref===a.ref)if(mr=!1,a.pendingProps=y=M,(s.lanes&w)!==0)s.flags&131072&&(mr=!0);else return a.lanes=s.lanes,qs(s,a,w)}return sx(s,a,d,y,w)}function mN(s,a,d){var y=a.pendingProps,w=y.children,M=s!==null?s.memoizedState:null;if(y.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Ea,Er),Er|=d;else{if(!(d&1073741824))return s=M!==null?M.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Ve(Ea,Er),Er|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=M!==null?M.baseLanes:d,Ve(Ea,Er),Er|=y}else M!==null?(y=M.baseLanes|d,a.memoizedState=null):y=d,Ve(Ea,Er),Er|=y;return ir(s,a,w,d),a.child}function vN(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function sx(s,a,d,y,w){var M=xr(d)?Hu:Hn.current;return M=Ha(a,M),Ua(a,w),d=Jx(s,a,d,y,M,w),y=qx(),s!==null&&!mr?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~w,qs(s,a,w)):(Ze&&y&&Vx(a),a.flags|=1,ir(s,a,d,w),a.child)}function fC(s,a,d,y,w){if(xr(d)){var M=!0;Fy(a)}else M=!1;if(Ua(a,w),a.stateNode===null)dy(s,a),pN(a,d,y),rx(a,d,y,w),y=!0;else if(s===null){var L=a.stateNode,I=a.memoizedProps;L.props=I;var B=L.context,Q=d.contextType;typeof Q=="object"&&Q!==null?Q=ao(Q):(Q=xr(d)?Hu:Hn.current,Q=Ha(a,Q));var Z=d.getDerivedStateFromProps,Y=typeof Z=="function"||typeof L.getSnapshotBeforeUpdate=="function";Y||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(I!==y||B!==Q)&&oC(a,L,y,Q),Al=!1;var st=a.memoizedState;L.state=st,Iy(a,y,L,w),B=a.memoizedState,I!==y||st!==B||vr.current||Al?(typeof Z=="function"&&(nx(a,d,Z,y),B=a.memoizedState),(I=Al||rC(a,d,I,y,st,B,Q))?(Y||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(a.flags|=4194308)):(typeof L.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=y,a.memoizedState=B),L.props=y,L.state=B,L.context=Q,y=I):(typeof L.componentDidMount=="function"&&(a.flags|=4194308),y=!1)}else{L=a.stateNode,_P(s,a),I=a.memoizedProps,Q=a.type===a.elementType?I:Bo(a.type,I),L.props=Q,Y=a.pendingProps,st=L.context,B=d.contextType,typeof B=="object"&&B!==null?B=ao(B):(B=xr(d)?Hu:Hn.current,B=Ha(a,B));var Mt=d.getDerivedStateFromProps;(Z=typeof Mt=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(I!==Y||st!==B)&&oC(a,L,y,B),Al=!1,st=a.memoizedState,L.state=st,Iy(a,y,L,w);var kt=a.memoizedState;I!==Y||st!==kt||vr.current||Al?(typeof Mt=="function"&&(nx(a,d,Mt,y),kt=a.memoizedState),(Q=Al||rC(a,d,Q,y,st,kt,B)||!1)?(Z||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(y,kt,B),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(y,kt,B)),typeof L.componentDidUpdate=="function"&&(a.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof L.componentDidUpdate!="function"||I===s.memoizedProps&&st===s.memoizedState||(a.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&st===s.memoizedState||(a.flags|=1024),a.memoizedProps=y,a.memoizedState=kt),L.props=y,L.state=kt,L.context=B,y=Q):(typeof L.componentDidUpdate!="function"||I===s.memoizedProps&&st===s.memoizedState||(a.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&st===s.memoizedState||(a.flags|=1024),y=!1)}return lx(s,a,d,y,M,w)}function lx(s,a,d,y,w,M){vN(s,a);var L=(a.flags&128)!==0;if(!y&&!L)return w&&Qk(a,d,!1),qs(s,a,M);y=a.stateNode,bF.current=a;var I=L&&typeof d.getDerivedStateFromError!="function"?null:y.render();return a.flags|=1,s!==null&&L?(a.child=Ka(a,s.child,null,M),a.child=Ka(a,null,I,M)):ir(s,a,I,M),a.memoizedState=y.state,w&&Qk(a,d,!0),a.child}function xN(s){var a=s.stateNode;a.pendingContext?Zk(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Zk(s,a.context,!1),Wx(s,a.containerInfo)}function cC(s,a,d,y,w){return Xa(),Yx(w),a.flags|=256,ir(s,a,d,y),a.child}var ux={dehydrated:null,treeContext:null,retryLane:0};function hx(s){return{baseLanes:s,cachePool:null,transitions:null}}function wN(s,a,d){var y=a.pendingProps,w=ri.current,M=!1,L=(a.flags&128)!==0,I;if((I=L)||(I=s!==null&&s.memoizedState===null?!1:(w&2)!==0),I?(M=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(w|=1),Ve(ri,w&1),s===null)return ex(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(a.mode&1?s.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(L=y.children,s=y.fallback,M?(y=a.mode,M=a.child,L={mode:"hidden",children:L},!(y&1)&&M!==null?(M.childLanes=0,M.pendingProps=L):M=t0(L,y,0,null),s=Gu(s,y,d,null),M.return=a,s.return=a,M.sibling=s,a.child=M,a.child.memoizedState=hx(d),a.memoizedState=ux,s):ew(a,L));if(w=s.memoizedState,w!==null&&(I=w.dehydrated,I!==null))return tA(s,a,L,y,I,w,d);if(M){M=y.fallback,L=a.mode,w=s.child,I=w.sibling;var B={mode:"hidden",children:y.children};return!(L&1)&&a.child!==w?(y=a.child,y.childLanes=0,y.pendingProps=B,a.deletions=null):(y=Gl(w,B),y.subtreeFlags=w.subtreeFlags&14680064),I!==null?M=Gl(I,M):(M=Gu(M,L,d,null),M.flags|=2),M.return=a,y.return=a,y.sibling=M,a.child=y,y=M,M=a.child,L=s.child.memoizedState,L=L===null?hx(d):{baseLanes:L.baseLanes|d,cachePool:null,transitions:L.transitions},M.memoizedState=L,M.childLanes=s.childLanes&~d,a.memoizedState=ux,y}return M=s.child,s=M.sibling,y=Gl(M,{mode:"visible",children:y.children}),!(a.mode&1)&&(y.lanes=d),y.return=a,y.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=y,a.memoizedState=null,y}function ew(s,a){return a=t0({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function ty(s,a,d,y){return y!==null&&Yx(y),Ka(a,s.child,null,d),s=ew(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function tA(s,a,d,y,w,M,L){if(d)return a.flags&256?(a.flags&=-257,y=w1(Error(mt(422))),ty(s,a,L,y)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(M=y.fallback,w=a.mode,y=t0({mode:"visible",children:y.children},w,0,null),M=Gu(M,w,L,null),M.flags|=2,y.return=a,M.return=a,y.sibling=M,a.child=y,a.mode&1&&Ka(a,s.child,null,L),a.child.memoizedState=hx(L),a.memoizedState=ux,M);if(!(a.mode&1))return ty(s,a,L,null);if(w.data==="$!"){if(y=w.nextSibling&&w.nextSibling.dataset,y)var I=y.dgst;return y=I,M=Error(mt(419)),y=w1(M,y,void 0),ty(s,a,L,y)}if(I=(L&s.childLanes)!==0,mr||I){if(y=un,y!==null){switch(L&-L){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=w&(y.suspendedLanes|L)?0:w,w!==0&&w!==M.retryLane&&(M.retryLane=w,Js(s,w),Uo(y,s,w,-1))}return lw(),y=w1(Error(mt(421))),ty(s,a,L,y)}return w.data==="$?"?(a.flags|=128,a.child=s.child,a=pA.bind(null,s),w._reactRetry=a,null):(s=M.treeContext,Br=zl(w.nextSibling),Rr=a,Ze=!0,zo=null,s!==null&&(so[lo++]=_s,so[lo++]=Ws,so[lo++]=Xu,_s=s.id,Ws=s.overflow,Xu=a),a=ew(a,y.children),a.flags|=4096,a)}function pC(s,a,d){s.lanes|=a;var y=s.alternate;y!==null&&(y.lanes|=a),ix(s.return,a,d)}function M1(s,a,d,y,w){var M=s.memoizedState;M===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:w}:(M.isBackwards=a,M.rendering=null,M.renderingStartTime=0,M.last=y,M.tail=d,M.tailMode=w)}function MN(s,a,d){var y=a.pendingProps,w=y.revealOrder,M=y.tail;if(ir(s,a,y.children,d),y=ri.current,y&2)y=y&1|2,a.flags|=128;else{if(s!==null&&s.flags&128)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&pC(s,d,a);else if(s.tag===19)pC(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}if(Ve(ri,y),!(a.mode&1))a.memoizedState=null;else switch(w){case"forwards":for(d=a.child,w=null;d!==null;)s=d.alternate,s!==null&&Ey(s)===null&&(w=d),d=d.sibling;d=w,d===null?(w=a.child,a.child=null):(w=d.sibling,d.sibling=null),M1(a,!1,w,d,M);break;case"backwards":for(d=null,w=a.child,a.child=null;w!==null;){if(s=w.alternate,s!==null&&Ey(s)===null){a.child=w;break}s=w.sibling,w.sibling=d,d=w,w=s}M1(a,!0,d,null,M);break;case"together":M1(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function dy(s,a){!(a.mode&1)&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function qs(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),_u|=a.lanes,!(d&a.childLanes))return null;if(s!==null&&a.child!==s.child)throw Error(mt(153));if(a.child!==null){for(s=a.child,d=Gl(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=Gl(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function eA(s,a,d){switch(a.tag){case 3:xN(a),Xa();break;case 5:WP(a);break;case 1:xr(a.type)&&Fy(a);break;case 4:Wx(a,a.stateNode.containerInfo);break;case 10:var y=a.type._context,w=a.memoizedProps.value;Ve(Dy,y._currentValue),y._currentValue=w;break;case 13:if(y=a.memoizedState,y!==null)return y.dehydrated!==null?(Ve(ri,ri.current&1),a.flags|=128,null):d&a.child.childLanes?wN(s,a,d):(Ve(ri,ri.current&1),s=qs(s,a,d),s!==null?s.sibling:null);Ve(ri,ri.current&1);break;case 19:if(y=(d&a.childLanes)!==0,s.flags&128){if(y)return MN(s,a,d);a.flags|=128}if(w=a.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Ve(ri,ri.current),y)break;return null;case 22:case 23:return a.lanes=0,mN(s,a,d)}return qs(s,a,d)}var SN,ax,kN,CN;SN=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};ax=function(){};kN=function(s,a,d,y){var w=s.memoizedProps;if(w!==y){s=a.stateNode,Uu(xs.current);var M=null;switch(d){case"input":w=D1(s,w),y=D1(s,y),M=[];break;case"select":w=si({},w,{value:void 0}),y=si({},y,{value:void 0}),M=[];break;case"textarea":w=E1(s,w),y=E1(s,y),M=[];break;default:typeof w.onClick!="function"&&typeof y.onClick=="function"&&(s.onclick=Ty)}R1(d,y);var L;d=null;for(Q in w)if(!y.hasOwnProperty(Q)&&w.hasOwnProperty(Q)&&w[Q]!=null)if(Q==="style"){var I=w[Q];for(L in I)I.hasOwnProperty(L)&&(d||(d={}),d[L]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(bc.hasOwnProperty(Q)?M||(M=[]):(M=M||[]).push(Q,null));for(Q in y){var B=y[Q];if(I=w!=null?w[Q]:void 0,y.hasOwnProperty(Q)&&B!==I&&(B!=null||I!=null))if(Q==="style")if(I){for(L in I)!I.hasOwnProperty(L)||B&&B.hasOwnProperty(L)||(d||(d={}),d[L]="");for(L in B)B.hasOwnProperty(L)&&I[L]!==B[L]&&(d||(d={}),d[L]=B[L])}else d||(M||(M=[]),M.push(Q,d)),d=B;else Q==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,I=I?I.__html:void 0,B!=null&&I!==B&&(M=M||[]).push(Q,B)):Q==="children"?typeof B!="string"&&typeof B!="number"||(M=M||[]).push(Q,""+B):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(bc.hasOwnProperty(Q)?(B!=null&&Q==="onScroll"&&Ge("scroll",s),M||I===B||(M=[])):(M=M||[]).push(Q,B))}d&&(M=M||[]).push("style",d);var Q=M;(a.updateQueue=Q)&&(a.flags|=4)}};CN=function(s,a,d,y){d!==y&&(a.flags|=4)};function zc(s,a){if(!Ze)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function Yn(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,y=0;if(a)for(var w=s.child;w!==null;)d|=w.lanes|w.childLanes,y|=w.subtreeFlags&14680064,y|=w.flags&14680064,w.return=s,w=w.sibling;else for(w=s.child;w!==null;)d|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=s,w=w.sibling;return s.subtreeFlags|=y,s.childLanes=d,a}function iA(s,a,d){var y=a.pendingProps;switch(Ux(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(a),null;case 1:return xr(a.type)&&Ly(),Yn(a),null;case 3:return y=a.stateNode,_a(),He(vr),He(Hn),Zx(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(s===null||s.child===null)&&(qg(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,zo!==null&&(vx(zo),zo=null))),ax(s,a),Yn(a),null;case 5:$x(a);var w=Uu(fp.current);if(d=a.type,s!==null&&a.stateNode!=null)kN(s,a,d,y,w),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!y){if(a.stateNode===null)throw Error(mt(166));return Yn(a),null}if(s=Uu(xs.current),qg(a)){y=a.stateNode,d=a.type;var M=a.memoizedProps;switch(y[ys]=a,y[hp]=M,s=(a.mode&1)!==0,d){case"dialog":Ge("cancel",y),Ge("close",y);break;case"iframe":case"object":case"embed":Ge("load",y);break;case"video":case"audio":for(w=0;w<Hc.length;w++)Ge(Hc[w],y);break;case"source":Ge("error",y);break;case"img":case"image":case"link":Ge("error",y),Ge("load",y);break;case"details":Ge("toggle",y);break;case"input":Sk(y,M),Ge("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!M.multiple},Ge("invalid",y);break;case"textarea":Ck(y,M),Ge("invalid",y)}R1(d,M),w=null;for(var L in M)if(M.hasOwnProperty(L)){var I=M[L];L==="children"?typeof I=="string"?y.textContent!==I&&(M.suppressHydrationWarning!==!0&&Jg(y.textContent,I,s),w=["children",I]):typeof I=="number"&&y.textContent!==""+I&&(M.suppressHydrationWarning!==!0&&Jg(y.textContent,I,s),w=["children",""+I]):bc.hasOwnProperty(L)&&I!=null&&L==="onScroll"&&Ge("scroll",y)}switch(d){case"input":Hg(y),kk(y,M,!0);break;case"textarea":Hg(y),Pk(y);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(y.onclick=Ty)}y=w,a.updateQueue=y,y!==null&&(a.flags|=4)}else{L=w.nodeType===9?w:w.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=qC(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=L.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof y.is=="string"?s=L.createElement(d,{is:y.is}):(s=L.createElement(d),d==="select"&&(L=s,y.multiple?L.multiple=!0:y.size&&(L.size=y.size))):s=L.createElementNS(s,d),s[ys]=a,s[hp]=y,SN(s,a,!1,!1),a.stateNode=s;t:{switch(L=z1(d,y),d){case"dialog":Ge("cancel",s),Ge("close",s),w=y;break;case"iframe":case"object":case"embed":Ge("load",s),w=y;break;case"video":case"audio":for(w=0;w<Hc.length;w++)Ge(Hc[w],s);w=y;break;case"source":Ge("error",s),w=y;break;case"img":case"image":case"link":Ge("error",s),Ge("load",s),w=y;break;case"details":Ge("toggle",s),w=y;break;case"input":Sk(s,y),w=D1(s,y),Ge("invalid",s);break;case"option":w=y;break;case"select":s._wrapperState={wasMultiple:!!y.multiple},w=si({},y,{value:void 0}),Ge("invalid",s);break;case"textarea":Ck(s,y),w=E1(s,y),Ge("invalid",s);break;default:w=y}R1(d,w),I=w;for(M in I)if(I.hasOwnProperty(M)){var B=I[M];M==="style"?eP(s,B):M==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&bC(s,B)):M==="children"?typeof B=="string"?(d!=="textarea"||B!=="")&&tp(s,B):typeof B=="number"&&tp(s,""+B):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(bc.hasOwnProperty(M)?B!=null&&M==="onScroll"&&Ge("scroll",s):B!=null&&Px(s,M,B,L))}switch(d){case"input":Hg(s),kk(s,y,!1);break;case"textarea":Hg(s),Pk(s);break;case"option":y.value!=null&&s.setAttribute("value",""+Hl(y.value));break;case"select":s.multiple=!!y.multiple,M=y.value,M!=null?Ba(s,!!y.multiple,M,!1):y.defaultValue!=null&&Ba(s,!!y.multiple,y.defaultValue,!0);break;default:typeof w.onClick=="function"&&(s.onclick=Ty)}switch(d){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break t;case"img":y=!0;break t;default:y=!1}}y&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Yn(a),null;case 6:if(s&&a.stateNode!=null)CN(s,a,s.memoizedProps,y);else{if(typeof y!="string"&&a.stateNode===null)throw Error(mt(166));if(d=Uu(fp.current),Uu(xs.current),qg(a)){if(y=a.stateNode,d=a.memoizedProps,y[ys]=a,(M=y.nodeValue!==d)&&(s=Rr,s!==null))switch(s.tag){case 3:Jg(y.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Jg(y.nodeValue,d,(s.mode&1)!==0)}M&&(a.flags|=4)}else y=(d.nodeType===9?d:d.ownerDocument).createTextNode(y),y[ys]=a,a.stateNode=y}return Yn(a),null;case 13:if(He(ri),y=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ze&&Br!==null&&a.mode&1&&!(a.flags&128))GP(),Xa(),a.flags|=98560,M=!1;else if(M=qg(a),y!==null&&y.dehydrated!==null){if(s===null){if(!M)throw Error(mt(318));if(M=a.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(mt(317));M[ys]=a}else Xa(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Yn(a),M=!1}else zo!==null&&(vx(zo),zo=null),M=!0;if(!M)return a.flags&65536?a:null}return a.flags&128?(a.lanes=d,a):(y=y!==null,y!==(s!==null&&s.memoizedState!==null)&&y&&(a.child.flags|=8192,a.mode&1&&(s===null||ri.current&1?Qi===0&&(Qi=3):lw())),a.updateQueue!==null&&(a.flags|=4),Yn(a),null);case 4:return _a(),ax(s,a),s===null&&lp(a.stateNode.containerInfo),Yn(a),null;case 10:return Xx(a.type._context),Yn(a),null;case 17:return xr(a.type)&&Ly(),Yn(a),null;case 19:if(He(ri),M=a.memoizedState,M===null)return Yn(a),null;if(y=(a.flags&128)!==0,L=M.rendering,L===null)if(y)zc(M,!1);else{if(Qi!==0||s!==null&&s.flags&128)for(s=a.child;s!==null;){if(L=Ey(s),L!==null){for(a.flags|=128,zc(M,!1),y=L.updateQueue,y!==null&&(a.updateQueue=y,a.flags|=4),a.subtreeFlags=0,y=d,d=a.child;d!==null;)M=d,s=y,M.flags&=14680066,L=M.alternate,L===null?(M.childLanes=0,M.lanes=s,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=L.childLanes,M.lanes=L.lanes,M.child=L.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=L.memoizedProps,M.memoizedState=L.memoizedState,M.updateQueue=L.updateQueue,M.type=L.type,s=L.dependencies,M.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return Ve(ri,ri.current&1|2),a.child}s=s.sibling}M.tail!==null&&Fi()>$a&&(a.flags|=128,y=!0,zc(M,!1),a.lanes=4194304)}else{if(!y)if(s=Ey(L),s!==null){if(a.flags|=128,y=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),zc(M,!0),M.tail===null&&M.tailMode==="hidden"&&!L.alternate&&!Ze)return Yn(a),null}else 2*Fi()-M.renderingStartTime>$a&&d!==1073741824&&(a.flags|=128,y=!0,zc(M,!1),a.lanes=4194304);M.isBackwards?(L.sibling=a.child,a.child=L):(d=M.last,d!==null?d.sibling=L:a.child=L,M.last=L)}return M.tail!==null?(a=M.tail,M.rendering=a,M.tail=a.sibling,M.renderingStartTime=Fi(),a.sibling=null,d=ri.current,Ve(ri,y?d&1|2:d&1),a):(Yn(a),null);case 22:case 23:return sw(),y=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==y&&(a.flags|=8192),y&&a.mode&1?Er&1073741824&&(Yn(a),a.subtreeFlags&6&&(a.flags|=8192)):Yn(a),null;case 24:return null;case 25:return null}throw Error(mt(156,a.tag))}function nA(s,a){switch(Ux(a),a.tag){case 1:return xr(a.type)&&Ly(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return _a(),He(vr),He(Hn),Zx(),s=a.flags,s&65536&&!(s&128)?(a.flags=s&-65537|128,a):null;case 5:return $x(a),null;case 13:if(He(ri),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(mt(340));Xa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return He(ri),null;case 4:return _a(),null;case 10:return Xx(a.type._context),null;case 22:case 23:return sw(),null;case 24:return null;default:return null}}var ey=!1,Gn=!1,rA=typeof WeakSet=="function"?WeakSet:Set,At=null;function Ia(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(y){ki(s,a,y)}else d.current=null}function fx(s,a,d){try{d()}catch(y){ki(s,a,y)}}var dC=!1;function oA(s,a){if($1=Cy,s=FP(),zx(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else t:{d=(d=s.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var w=y.anchorOffset,M=y.focusNode;y=y.focusOffset;try{d.nodeType,M.nodeType}catch{d=null;break t}var L=0,I=-1,B=-1,Q=0,Z=0,Y=s,st=null;e:for(;;){for(var Mt;Y!==d||w!==0&&Y.nodeType!==3||(I=L+w),Y!==M||y!==0&&Y.nodeType!==3||(B=L+y),Y.nodeType===3&&(L+=Y.nodeValue.length),(Mt=Y.firstChild)!==null;)st=Y,Y=Mt;for(;;){if(Y===s)break e;if(st===d&&++Q===w&&(I=L),st===M&&++Z===y&&(B=L),(Mt=Y.nextSibling)!==null)break;Y=st,st=Y.parentNode}Y=Mt}d=I===-1||B===-1?null:{start:I,end:B}}else d=null}d=d||{start:0,end:0}}else d=null;for(Z1={focusedElem:s,selectionRange:d},Cy=!1,At=a;At!==null;)if(a=At,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,At=s;else for(;At!==null;){a=At;try{var kt=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(kt!==null){var $=kt.memoizedProps,xe=kt.memoizedState,b=a.stateNode,G=b.getSnapshotBeforeUpdate(a.elementType===a.type?$:Bo(a.type,$),xe);b.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var J=a.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mt(163))}}catch(O){ki(a,a.return,O)}if(s=a.sibling,s!==null){s.return=a.return,At=s;break}At=a.return}return kt=dC,dC=!1,kt}function Qc(s,a,d){var y=a.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var w=y=y.next;do{if((w.tag&s)===s){var M=w.destroy;w.destroy=void 0,M!==void 0&&fx(a,d,M)}w=w.next}while(w!==y)}}function qy(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var y=d.create;d.destroy=y()}d=d.next}while(d!==a)}}function cx(s){var a=s.ref;if(a!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof a=="function"?a(s):a.current=s}}function PN(s){var a=s.alternate;a!==null&&(s.alternate=null,PN(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[ys],delete a[hp],delete a[q1],delete a[YF],delete a[GF])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function NN(s){return s.tag===5||s.tag===3||s.tag===4}function gC(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||NN(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function px(s,a,d){var y=s.tag;if(y===5||y===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Ty));else if(y!==4&&(s=s.child,s!==null))for(px(s,a,d),s=s.sibling;s!==null;)px(s,a,d),s=s.sibling}function dx(s,a,d){var y=s.tag;if(y===5||y===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(y!==4&&(s=s.child,s!==null))for(dx(s,a,d),s=s.sibling;s!==null;)dx(s,a,d),s=s.sibling}var wn=null,Ro=!1;function Ll(s,a,d){for(d=d.child;d!==null;)TN(s,a,d),d=d.sibling}function TN(s,a,d){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(Xy,d)}catch{}switch(d.tag){case 5:Gn||Ia(d,a);case 6:var y=wn,w=Ro;wn=null,Ll(s,a,d),wn=y,Ro=w,wn!==null&&(Ro?(s=wn,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):wn.removeChild(d.stateNode));break;case 18:wn!==null&&(Ro?(s=wn,d=d.stateNode,s.nodeType===8?d1(s.parentNode,d):s.nodeType===1&&d1(s,d),rp(s)):d1(wn,d.stateNode));break;case 4:y=wn,w=Ro,wn=d.stateNode.containerInfo,Ro=!0,Ll(s,a,d),wn=y,Ro=w;break;case 0:case 11:case 14:case 15:if(!Gn&&(y=d.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){w=y=y.next;do{var M=w,L=M.destroy;M=M.tag,L!==void 0&&(M&2||M&4)&&fx(d,a,L),w=w.next}while(w!==y)}Ll(s,a,d);break;case 1:if(!Gn&&(Ia(d,a),y=d.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=d.memoizedProps,y.state=d.memoizedState,y.componentWillUnmount()}catch(I){ki(d,a,I)}Ll(s,a,d);break;case 21:Ll(s,a,d);break;case 22:d.mode&1?(Gn=(y=Gn)||d.memoizedState!==null,Ll(s,a,d),Gn=y):Ll(s,a,d);break;default:Ll(s,a,d)}}function yC(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new rA),a.forEach(function(y){var w=dA.bind(null,s,y);d.has(y)||(d.add(y),y.then(w,w))})}}function Eo(s,a){var d=a.deletions;if(d!==null)for(var y=0;y<d.length;y++){var w=d[y];try{var M=s,L=a,I=L;t:for(;I!==null;){switch(I.tag){case 5:wn=I.stateNode,Ro=!1;break t;case 3:wn=I.stateNode.containerInfo,Ro=!0;break t;case 4:wn=I.stateNode.containerInfo,Ro=!0;break t}I=I.return}if(wn===null)throw Error(mt(160));TN(M,L,w),wn=null,Ro=!1;var B=w.alternate;B!==null&&(B.return=null),w.return=null}catch(Q){ki(w,a,Q)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)LN(a,s),a=a.sibling}function LN(s,a){var d=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Eo(a,s),ds(s),y&4){try{Qc(3,s,s.return),qy(3,s)}catch($){ki(s,s.return,$)}try{Qc(5,s,s.return)}catch($){ki(s,s.return,$)}}break;case 1:Eo(a,s),ds(s),y&512&&d!==null&&Ia(d,d.return);break;case 5:if(Eo(a,s),ds(s),y&512&&d!==null&&Ia(d,d.return),s.flags&32){var w=s.stateNode;try{tp(w,"")}catch($){ki(s,s.return,$)}}if(y&4&&(w=s.stateNode,w!=null)){var M=s.memoizedProps,L=d!==null?d.memoizedProps:M,I=s.type,B=s.updateQueue;if(s.updateQueue=null,B!==null)try{I==="input"&&M.type==="radio"&&M.name!=null&&QC(w,M),z1(I,L);var Q=z1(I,M);for(L=0;L<B.length;L+=2){var Z=B[L],Y=B[L+1];Z==="style"?eP(w,Y):Z==="dangerouslySetInnerHTML"?bC(w,Y):Z==="children"?tp(w,Y):Px(w,Z,Y,Q)}switch(I){case"input":O1(w,M);break;case"textarea":JC(w,M);break;case"select":var st=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!M.multiple;var Mt=M.value;Mt!=null?Ba(w,!!M.multiple,Mt,!1):st!==!!M.multiple&&(M.defaultValue!=null?Ba(w,!!M.multiple,M.defaultValue,!0):Ba(w,!!M.multiple,M.multiple?[]:"",!1))}w[hp]=M}catch($){ki(s,s.return,$)}}break;case 6:if(Eo(a,s),ds(s),y&4){if(s.stateNode===null)throw Error(mt(162));w=s.stateNode,M=s.memoizedProps;try{w.nodeValue=M}catch($){ki(s,s.return,$)}}break;case 3:if(Eo(a,s),ds(s),y&4&&d!==null&&d.memoizedState.isDehydrated)try{rp(a.containerInfo)}catch($){ki(s,s.return,$)}break;case 4:Eo(a,s),ds(s);break;case 13:Eo(a,s),ds(s),w=s.child,w.flags&8192&&(M=w.memoizedState!==null,w.stateNode.isHidden=M,!M||w.alternate!==null&&w.alternate.memoizedState!==null||(rw=Fi())),y&4&&yC(s);break;case 22:if(Z=d!==null&&d.memoizedState!==null,s.mode&1?(Gn=(Q=Gn)||Z,Eo(a,s),Gn=Q):Eo(a,s),ds(s),y&8192){if(Q=s.memoizedState!==null,(s.stateNode.isHidden=Q)&&!Z&&s.mode&1)for(At=s,Z=s.child;Z!==null;){for(Y=At=Z;At!==null;){switch(st=At,Mt=st.child,st.tag){case 0:case 11:case 14:case 15:Qc(4,st,st.return);break;case 1:Ia(st,st.return);var kt=st.stateNode;if(typeof kt.componentWillUnmount=="function"){y=st,d=st.return;try{a=y,kt.props=a.memoizedProps,kt.state=a.memoizedState,kt.componentWillUnmount()}catch($){ki(y,d,$)}}break;case 5:Ia(st,st.return);break;case 22:if(st.memoizedState!==null){vC(Y);continue}}Mt!==null?(Mt.return=st,At=Mt):vC(Y)}Z=Z.sibling}t:for(Z=null,Y=s;;){if(Y.tag===5){if(Z===null){Z=Y;try{w=Y.stateNode,Q?(M=w.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(I=Y.stateNode,B=Y.memoizedProps.style,L=B!=null&&B.hasOwnProperty("display")?B.display:null,I.style.display=tP("display",L))}catch($){ki(s,s.return,$)}}}else if(Y.tag===6){if(Z===null)try{Y.stateNode.nodeValue=Q?"":Y.memoizedProps}catch($){ki(s,s.return,$)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===s)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===s)break t;for(;Y.sibling===null;){if(Y.return===null||Y.return===s)break t;Z===Y&&(Z=null),Y=Y.return}Z===Y&&(Z=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Eo(a,s),ds(s),y&4&&yC(s);break;case 21:break;default:Eo(a,s),ds(s)}}function ds(s){var a=s.flags;if(a&2){try{t:{for(var d=s.return;d!==null;){if(NN(d)){var y=d;break t}d=d.return}throw Error(mt(160))}switch(y.tag){case 5:var w=y.stateNode;y.flags&32&&(tp(w,""),y.flags&=-33);var M=gC(s);dx(s,M,w);break;case 3:case 4:var L=y.stateNode.containerInfo,I=gC(s);px(s,I,L);break;default:throw Error(mt(161))}}catch(B){ki(s,s.return,B)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function sA(s,a,d){At=s,FN(s)}function FN(s,a,d){for(var y=(s.mode&1)!==0;At!==null;){var w=At,M=w.child;if(w.tag===22&&y){var L=w.memoizedState!==null||ey;if(!L){var I=w.alternate,B=I!==null&&I.memoizedState!==null||Gn;I=ey;var Q=Gn;if(ey=L,(Gn=B)&&!Q)for(At=w;At!==null;)L=At,B=L.child,L.tag===22&&L.memoizedState!==null?xC(w):B!==null?(B.return=L,At=B):xC(w);for(;M!==null;)At=M,FN(M),M=M.sibling;At=w,ey=I,Gn=Q}mC(s)}else w.subtreeFlags&8772&&M!==null?(M.return=w,At=M):mC(s)}}function mC(s){for(;At!==null;){var a=At;if(a.flags&8772){var d=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:Gn||qy(5,a);break;case 1:var y=a.stateNode;if(a.flags&4&&!Gn)if(d===null)y.componentDidMount();else{var w=a.elementType===a.type?d.memoizedProps:Bo(a.type,d.memoizedProps);y.componentDidUpdate(w,d.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var M=a.updateQueue;M!==null&&eC(a,M,y);break;case 3:var L=a.updateQueue;if(L!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}eC(a,L,d)}break;case 5:var I=a.stateNode;if(d===null&&a.flags&4){d=I;var B=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&d.focus();break;case"img":B.src&&(d.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Q=a.alternate;if(Q!==null){var Z=Q.memoizedState;if(Z!==null){var Y=Z.dehydrated;Y!==null&&rp(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mt(163))}Gn||a.flags&512&&cx(a)}catch(st){ki(a,a.return,st)}}if(a===s){At=null;break}if(d=a.sibling,d!==null){d.return=a.return,At=d;break}At=a.return}}function vC(s){for(;At!==null;){var a=At;if(a===s){At=null;break}var d=a.sibling;if(d!==null){d.return=a.return,At=d;break}At=a.return}}function xC(s){for(;At!==null;){var a=At;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{qy(4,a)}catch(B){ki(a,d,B)}break;case 1:var y=a.stateNode;if(typeof y.componentDidMount=="function"){var w=a.return;try{y.componentDidMount()}catch(B){ki(a,w,B)}}var M=a.return;try{cx(a)}catch(B){ki(a,M,B)}break;case 5:var L=a.return;try{cx(a)}catch(B){ki(a,L,B)}}}catch(B){ki(a,a.return,B)}if(a===s){At=null;break}var I=a.sibling;if(I!==null){I.return=a.return,At=I;break}At=a.return}}var lA=Math.ceil,zy=bs.ReactCurrentDispatcher,iw=bs.ReactCurrentOwner,ho=bs.ReactCurrentBatchConfig,ve=0,un=null,Ei=null,Sn=0,Er=0,Ea=_l(0),Qi=0,gp=null,_u=0,by=0,nw=0,Jc=null,yr=null,rw=0,$a=1/0,Xs=null,Vy=!1,gx=null,Ul=null,iy=!1,Il=null,Uy=0,qc=0,yx=null,gy=-1,yy=0;function nr(){return ve&6?Fi():gy!==-1?gy:gy=Fi()}function Yl(s){return s.mode&1?ve&2&&Sn!==0?Sn&-Sn:XF.transition!==null?(yy===0&&(yy=pP()),yy):(s=Le,s!==0||(s=window.event,s=s===void 0?16:wP(s.type)),s):1}function Uo(s,a,d,y){if(50<qc)throw qc=0,yx=null,Error(mt(185));mp(s,d,y),(!(ve&2)||s!==un)&&(s===un&&(!(ve&2)&&(by|=d),Qi===4&&Dl(s,Sn)),wr(s,y),d===1&&ve===0&&!(a.mode&1)&&($a=Fi()+500,Zy&&Wl()))}function wr(s,a){var d=s.callbackNode;XL(s,a);var y=ky(s,s===un?Sn:0);if(y===0)d!==null&&Lk(d),s.callbackNode=null,s.callbackPriority=0;else if(a=y&-y,s.callbackPriority!==a){if(d!=null&&Lk(d),a===1)s.tag===0?HF(wC.bind(null,s)):VP(wC.bind(null,s)),VF(function(){!(ve&6)&&Wl()}),d=null;else{switch(dP(y)){case 1:d=Ax;break;case 4:d=fP;break;case 16:d=Sy;break;case 536870912:d=cP;break;default:d=Sy}d=RN(d,AN.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function AN(s,a){if(gy=-1,yy=0,ve&6)throw Error(mt(327));var d=s.callbackNode;if(Ya()&&s.callbackNode!==d)return null;var y=ky(s,s===un?Sn:0);if(y===0)return null;if(y&30||y&s.expiredLanes||a)a=Yy(s,y);else{a=y;var w=ve;ve|=2;var M=DN();(un!==s||Sn!==a)&&(Xs=null,$a=Fi()+500,Yu(s,a));do try{aA();break}catch(I){jN(s,I)}while(1);Hx(),zy.current=M,ve=w,Ei!==null?a=0:(un=null,Sn=0,a=Qi)}if(a!==0){if(a===2&&(w=H1(s),w!==0&&(y=w,a=mx(s,w))),a===1)throw d=gp,Yu(s,0),Dl(s,y),wr(s,Fi()),d;if(a===6)Dl(s,y);else{if(w=s.current.alternate,!(y&30)&&!uA(w)&&(a=Yy(s,y),a===2&&(M=H1(s),M!==0&&(y=M,a=mx(s,M))),a===1))throw d=gp,Yu(s,0),Dl(s,y),wr(s,Fi()),d;switch(s.finishedWork=w,s.finishedLanes=y,a){case 0:case 1:throw Error(mt(345));case 2:Ru(s,yr,Xs);break;case 3:if(Dl(s,y),(y&130023424)===y&&(a=rw+500-Fi(),10<a)){if(ky(s,0)!==0)break;if(w=s.suspendedLanes,(w&y)!==y){nr(),s.pingedLanes|=s.suspendedLanes&w;break}s.timeoutHandle=J1(Ru.bind(null,s,yr,Xs),a);break}Ru(s,yr,Xs);break;case 4:if(Dl(s,y),(y&4194240)===y)break;for(a=s.eventTimes,w=-1;0<y;){var L=31-Vo(y);M=1<<L,L=a[L],L>w&&(w=L),y&=~M}if(y=w,y=Fi()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*lA(y/1960))-y,10<y){s.timeoutHandle=J1(Ru.bind(null,s,yr,Xs),y);break}Ru(s,yr,Xs);break;case 5:Ru(s,yr,Xs);break;default:throw Error(mt(329))}}}return wr(s,Fi()),s.callbackNode===d?AN.bind(null,s):null}function mx(s,a){var d=Jc;return s.current.memoizedState.isDehydrated&&(Yu(s,a).flags|=256),s=Yy(s,a),s!==2&&(a=yr,yr=d,a!==null&&vx(a)),s}function vx(s){yr===null?yr=s:yr.push.apply(yr,s)}function uA(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var y=0;y<d.length;y++){var w=d[y],M=w.getSnapshot;w=w.value;try{if(!Yo(M(),w))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Dl(s,a){for(a&=~nw,a&=~by,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-Vo(a),y=1<<d;s[d]=-1,a&=~y}}function wC(s){if(ve&6)throw Error(mt(327));Ya();var a=ky(s,0);if(!(a&1))return wr(s,Fi()),null;var d=Yy(s,a);if(s.tag!==0&&d===2){var y=H1(s);y!==0&&(a=y,d=mx(s,y))}if(d===1)throw d=gp,Yu(s,0),Dl(s,a),wr(s,Fi()),d;if(d===6)throw Error(mt(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Ru(s,yr,Xs),wr(s,Fi()),null}function ow(s,a){var d=ve;ve|=1;try{return s(a)}finally{ve=d,ve===0&&($a=Fi()+500,Zy&&Wl())}}function Wu(s){Il!==null&&Il.tag===0&&!(ve&6)&&Ya();var a=ve;ve|=1;var d=ho.transition,y=Le;try{if(ho.transition=null,Le=1,s)return s()}finally{Le=y,ho.transition=d,ve=a,!(ve&6)&&Wl()}}function sw(){Er=Ea.current,He(Ea)}function Yu(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,zF(d)),Ei!==null)for(d=Ei.return;d!==null;){var y=d;switch(Ux(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Ly();break;case 3:_a(),He(vr),He(Hn),Zx();break;case 5:$x(y);break;case 4:_a();break;case 13:He(ri);break;case 19:He(ri);break;case 10:Xx(y.type._context);break;case 22:case 23:sw()}d=d.return}if(un=s,Ei=s=Gl(s.current,null),Sn=Er=a,Qi=0,gp=null,nw=by=_u=0,yr=Jc=null,Vu!==null){for(a=0;a<Vu.length;a++)if(d=Vu[a],y=d.interleaved,y!==null){d.interleaved=null;var w=y.next,M=d.pending;if(M!==null){var L=M.next;M.next=w,y.next=L}d.pending=y}Vu=null}return s}function jN(s,a){do{var d=Ei;try{if(Hx(),cy.current=Ry,By){for(var y=oi.memoizedState;y!==null;){var w=y.queue;w!==null&&(w.pending=null),y=y.next}By=!1}if(Ku=0,ln=Zi=oi=null,Zc=!1,cp=0,iw.current=null,d===null||d.return===null){Qi=1,gp=a,Ei=null;break}t:{var M=s,L=d.return,I=d,B=a;if(a=Sn,I.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var Q=B,Z=I,Y=Z.tag;if(!(Z.mode&1)&&(Y===0||Y===11||Y===15)){var st=Z.alternate;st?(Z.updateQueue=st.updateQueue,Z.memoizedState=st.memoizedState,Z.lanes=st.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var Mt=lC(L);if(Mt!==null){Mt.flags&=-257,uC(Mt,L,I,M,a),Mt.mode&1&&sC(M,Q,a),a=Mt,B=Q;var kt=a.updateQueue;if(kt===null){var $=new Set;$.add(B),a.updateQueue=$}else kt.add(B);break t}else{if(!(a&1)){sC(M,Q,a),lw();break t}B=Error(mt(426))}}else if(Ze&&I.mode&1){var xe=lC(L);if(xe!==null){!(xe.flags&65536)&&(xe.flags|=256),uC(xe,L,I,M,a),Yx(Wa(B,I));break t}}M=B=Wa(B,I),Qi!==4&&(Qi=2),Jc===null?Jc=[M]:Jc.push(M),M=L;do{switch(M.tag){case 3:M.flags|=65536,a&=-a,M.lanes|=a;var b=dN(M,B,a);tC(M,b);break t;case 1:I=B;var G=M.type,J=M.stateNode;if(!(M.flags&128)&&(typeof G.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Ul===null||!Ul.has(J)))){M.flags|=65536,a&=-a,M.lanes|=a;var O=gN(M,I,a);tC(M,O);break t}}M=M.return}while(M!==null)}IN(d)}catch(rt){a=rt,Ei===d&&d!==null&&(Ei=d=d.return);continue}break}while(1)}function DN(){var s=zy.current;return zy.current=Ry,s===null?Ry:s}function lw(){(Qi===0||Qi===3||Qi===2)&&(Qi=4),un===null||!(_u&268435455)&&!(by&268435455)||Dl(un,Sn)}function Yy(s,a){var d=ve;ve|=2;var y=DN();(un!==s||Sn!==a)&&(Xs=null,Yu(s,a));do try{hA();break}catch(w){jN(s,w)}while(1);if(Hx(),ve=d,zy.current=y,Ei!==null)throw Error(mt(261));return un=null,Sn=0,Qi}function hA(){for(;Ei!==null;)ON(Ei)}function aA(){for(;Ei!==null&&!EL();)ON(Ei)}function ON(s){var a=BN(s.alternate,s,Er);s.memoizedProps=s.pendingProps,a===null?IN(s):Ei=a,iw.current=null}function IN(s){var a=s;do{var d=a.alternate;if(s=a.return,a.flags&32768){if(d=nA(d,a),d!==null){d.flags&=32767,Ei=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Qi=6,Ei=null;return}}else if(d=iA(d,a,Er),d!==null){Ei=d;return}if(a=a.sibling,a!==null){Ei=a;return}Ei=a=s}while(a!==null);Qi===0&&(Qi=5)}function Ru(s,a,d){var y=Le,w=ho.transition;try{ho.transition=null,Le=1,fA(s,a,d,y)}finally{ho.transition=w,Le=y}return null}function fA(s,a,d,y){do Ya();while(Il!==null);if(ve&6)throw Error(mt(327));d=s.finishedWork;var w=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(mt(177));s.callbackNode=null,s.callbackPriority=0;var M=d.lanes|d.childLanes;if(KL(s,M),s===un&&(Ei=un=null,Sn=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||iy||(iy=!0,RN(Sy,function(){return Ya(),null})),M=(d.flags&15990)!==0,d.subtreeFlags&15990||M){M=ho.transition,ho.transition=null;var L=Le;Le=1;var I=ve;ve|=4,iw.current=null,oA(s,d),LN(d,s),jF(Z1),Cy=!!$1,Z1=$1=null,s.current=d,sA(d),BL(),ve=I,Le=L,ho.transition=M}else s.current=d;if(iy&&(iy=!1,Il=s,Uy=w),M=s.pendingLanes,M===0&&(Ul=null),VL(d.stateNode),wr(s,Fi()),a!==null)for(y=s.onRecoverableError,d=0;d<a.length;d++)w=a[d],y(w.value,{componentStack:w.stack,digest:w.digest});if(Vy)throw Vy=!1,s=gx,gx=null,s;return Uy&1&&s.tag!==0&&Ya(),M=s.pendingLanes,M&1?s===yx?qc++:(qc=0,yx=s):qc=0,Wl(),null}function Ya(){if(Il!==null){var s=dP(Uy),a=ho.transition,d=Le;try{if(ho.transition=null,Le=16>s?16:s,Il===null)var y=!1;else{if(s=Il,Il=null,Uy=0,ve&6)throw Error(mt(331));var w=ve;for(ve|=4,At=s.current;At!==null;){var M=At,L=M.child;if(At.flags&16){var I=M.deletions;if(I!==null){for(var B=0;B<I.length;B++){var Q=I[B];for(At=Q;At!==null;){var Z=At;switch(Z.tag){case 0:case 11:case 15:Qc(8,Z,M)}var Y=Z.child;if(Y!==null)Y.return=Z,At=Y;else for(;At!==null;){Z=At;var st=Z.sibling,Mt=Z.return;if(PN(Z),Z===Q){At=null;break}if(st!==null){st.return=Mt,At=st;break}At=Mt}}}var kt=M.alternate;if(kt!==null){var $=kt.child;if($!==null){kt.child=null;do{var xe=$.sibling;$.sibling=null,$=xe}while($!==null)}}At=M}}if(M.subtreeFlags&2064&&L!==null)L.return=M,At=L;else t:for(;At!==null;){if(M=At,M.flags&2048)switch(M.tag){case 0:case 11:case 15:Qc(9,M,M.return)}var b=M.sibling;if(b!==null){b.return=M.return,At=b;break t}At=M.return}}var G=s.current;for(At=G;At!==null;){L=At;var J=L.child;if(L.subtreeFlags&2064&&J!==null)J.return=L,At=J;else t:for(L=G;At!==null;){if(I=At,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:qy(9,I)}}catch(rt){ki(I,I.return,rt)}if(I===L){At=null;break t}var O=I.sibling;if(O!==null){O.return=I.return,At=O;break t}At=I.return}}if(ve=w,Wl(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(Xy,s)}catch{}y=!0}return y}finally{Le=d,ho.transition=a}}return!1}function MC(s,a,d){a=Wa(d,a),a=dN(s,a,1),s=Vl(s,a,1),a=nr(),s!==null&&(mp(s,1,a),wr(s,a))}function ki(s,a,d){if(s.tag===3)MC(s,s,d);else for(;a!==null;){if(a.tag===3){MC(a,s,d);break}else if(a.tag===1){var y=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ul===null||!Ul.has(y))){s=Wa(d,s),s=gN(a,s,1),a=Vl(a,s,1),s=nr(),a!==null&&(mp(a,1,s),wr(a,s));break}}a=a.return}}function cA(s,a,d){var y=s.pingCache;y!==null&&y.delete(a),a=nr(),s.pingedLanes|=s.suspendedLanes&d,un===s&&(Sn&d)===d&&(Qi===4||Qi===3&&(Sn&130023424)===Sn&&500>Fi()-rw?Yu(s,0):nw|=d),wr(s,a)}function EN(s,a){a===0&&(s.mode&1?(a=_g,_g<<=1,!(_g&130023424)&&(_g=4194304)):a=1);var d=nr();s=Js(s,a),s!==null&&(mp(s,a,d),wr(s,d))}function pA(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),EN(s,d)}function dA(s,a){var d=0;switch(s.tag){case 13:var y=s.stateNode,w=s.memoizedState;w!==null&&(d=w.retryLane);break;case 19:y=s.stateNode;break;default:throw Error(mt(314))}y!==null&&y.delete(a),EN(s,d)}var BN;BN=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||vr.current)mr=!0;else{if(!(s.lanes&d)&&!(a.flags&128))return mr=!1,eA(s,a,d);mr=!!(s.flags&131072)}else mr=!1,Ze&&a.flags&1048576&&UP(a,jy,a.index);switch(a.lanes=0,a.tag){case 2:var y=a.type;dy(s,a),s=a.pendingProps;var w=Ha(a,Hn.current);Ua(a,d),w=Jx(null,a,y,s,w,d);var M=qx();return a.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,xr(y)?(M=!0,Fy(a)):M=!1,a.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,_x(a),w.updater=Jy,a.stateNode=w,w._reactInternals=a,rx(a,y,s,d),a=lx(null,a,y,!0,M,d)):(a.tag=0,Ze&&M&&Vx(a),ir(null,a,w,d),a=a.child),a;case 16:y=a.elementType;t:{switch(dy(s,a),s=a.pendingProps,w=y._init,y=w(y._payload),a.type=y,w=a.tag=yA(y),s=Bo(y,s),w){case 0:a=sx(null,a,y,s,d);break t;case 1:a=fC(null,a,y,s,d);break t;case 11:a=hC(null,a,y,s,d);break t;case 14:a=aC(null,a,y,Bo(y.type,s),d);break t}throw Error(mt(306,y,""))}return a;case 0:return y=a.type,w=a.pendingProps,w=a.elementType===y?w:Bo(y,w),sx(s,a,y,w,d);case 1:return y=a.type,w=a.pendingProps,w=a.elementType===y?w:Bo(y,w),fC(s,a,y,w,d);case 3:t:{if(xN(a),s===null)throw Error(mt(387));y=a.pendingProps,M=a.memoizedState,w=M.element,_P(s,a),Iy(a,y,null,d);var L=a.memoizedState;if(y=L.element,M.isDehydrated)if(M={element:y,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},a.updateQueue.baseState=M,a.memoizedState=M,a.flags&256){w=Wa(Error(mt(423)),a),a=cC(s,a,y,d,w);break t}else if(y!==w){w=Wa(Error(mt(424)),a),a=cC(s,a,y,d,w);break t}else for(Br=zl(a.stateNode.containerInfo.firstChild),Rr=a,Ze=!0,zo=null,d=XP(a,null,y,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Xa(),y===w){a=qs(s,a,d);break t}ir(s,a,y,d)}a=a.child}return a;case 5:return WP(a),s===null&&ex(a),y=a.type,w=a.pendingProps,M=s!==null?s.memoizedProps:null,L=w.children,Q1(y,w)?L=null:M!==null&&Q1(y,M)&&(a.flags|=32),vN(s,a),ir(s,a,L,d),a.child;case 6:return s===null&&ex(a),null;case 13:return wN(s,a,d);case 4:return Wx(a,a.stateNode.containerInfo),y=a.pendingProps,s===null?a.child=Ka(a,null,y,d):ir(s,a,y,d),a.child;case 11:return y=a.type,w=a.pendingProps,w=a.elementType===y?w:Bo(y,w),hC(s,a,y,w,d);case 7:return ir(s,a,a.pendingProps,d),a.child;case 8:return ir(s,a,a.pendingProps.children,d),a.child;case 12:return ir(s,a,a.pendingProps.children,d),a.child;case 10:t:{if(y=a.type._context,w=a.pendingProps,M=a.memoizedProps,L=w.value,Ve(Dy,y._currentValue),y._currentValue=L,M!==null)if(Yo(M.value,L)){if(M.children===w.children&&!vr.current){a=qs(s,a,d);break t}}else for(M=a.child,M!==null&&(M.return=a);M!==null;){var I=M.dependencies;if(I!==null){L=M.child;for(var B=I.firstContext;B!==null;){if(B.context===y){if(M.tag===1){B=$s(-1,d&-d),B.tag=2;var Q=M.updateQueue;if(Q!==null){Q=Q.shared;var Z=Q.pending;Z===null?B.next=B:(B.next=Z.next,Z.next=B),Q.pending=B}}M.lanes|=d,B=M.alternate,B!==null&&(B.lanes|=d),ix(M.return,d,a),I.lanes|=d;break}B=B.next}}else if(M.tag===10)L=M.type===a.type?null:M.child;else if(M.tag===18){if(L=M.return,L===null)throw Error(mt(341));L.lanes|=d,I=L.alternate,I!==null&&(I.lanes|=d),ix(L,d,a),L=M.sibling}else L=M.child;if(L!==null)L.return=M;else for(L=M;L!==null;){if(L===a){L=null;break}if(M=L.sibling,M!==null){M.return=L.return,L=M;break}L=L.return}M=L}ir(s,a,w.children,d),a=a.child}return a;case 9:return w=a.type,y=a.pendingProps.children,Ua(a,d),w=ao(w),y=y(w),a.flags|=1,ir(s,a,y,d),a.child;case 14:return y=a.type,w=Bo(y,a.pendingProps),w=Bo(y.type,w),aC(s,a,y,w,d);case 15:return yN(s,a,a.type,a.pendingProps,d);case 17:return y=a.type,w=a.pendingProps,w=a.elementType===y?w:Bo(y,w),dy(s,a),a.tag=1,xr(y)?(s=!0,Fy(a)):s=!1,Ua(a,d),pN(a,y,w),rx(a,y,w,d),lx(null,a,y,!0,s,d);case 19:return MN(s,a,d);case 22:return mN(s,a,d)}throw Error(mt(156,a.tag))};function RN(s,a){return aP(s,a)}function gA(s,a,d,y){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uo(s,a,d,y){return new gA(s,a,d,y)}function uw(s){return s=s.prototype,!(!s||!s.isReactComponent)}function yA(s){if(typeof s=="function")return uw(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Tx)return 11;if(s===Lx)return 14}return 2}function Gl(s,a){var d=s.alternate;return d===null?(d=uo(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function my(s,a,d,y,w,M){var L=2;if(y=s,typeof s=="function")uw(s)&&(L=1);else if(typeof s=="string")L=5;else t:switch(s){case Pa:return Gu(d.children,w,M,a);case Nx:L=8,w|=8;break;case L1:return s=uo(12,d,a,w|2),s.elementType=L1,s.lanes=M,s;case F1:return s=uo(13,d,a,w),s.elementType=F1,s.lanes=M,s;case A1:return s=uo(19,d,a,w),s.elementType=A1,s.lanes=M,s;case WC:return t0(d,w,M,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case KC:L=10;break t;case _C:L=9;break t;case Tx:L=11;break t;case Lx:L=14;break t;case Fl:L=16,y=null;break t}throw Error(mt(130,s==null?s:typeof s,""))}return a=uo(L,d,a,w),a.elementType=s,a.type=y,a.lanes=M,a}function Gu(s,a,d,y){return s=uo(7,s,y,a),s.lanes=d,s}function t0(s,a,d,y){return s=uo(22,s,y,a),s.elementType=WC,s.lanes=d,s.stateNode={isHidden:!1},s}function S1(s,a,d){return s=uo(6,s,null,a),s.lanes=d,s}function k1(s,a,d){return a=uo(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function mA(s,a,d,y,w){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=n1(0),this.expirationTimes=n1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=n1(0),this.identifierPrefix=y,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function hw(s,a,d,y,w,M,L,I,B){return s=new mA(s,a,d,I,B),a===1?(a=1,M===!0&&(a|=8)):a=0,M=uo(3,null,null,a),s.current=M,M.stateNode=s,M.memoizedState={element:y,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},_x(M),s}function vA(s,a,d){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ca,key:y==null?null:""+y,children:s,containerInfo:a,implementation:d}}function zN(s){if(!s)return Xl;s=s._reactInternals;t:{if(Zu(s)!==s||s.tag!==1)throw Error(mt(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(xr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(mt(171))}if(s.tag===1){var d=s.type;if(xr(d))return zP(s,d,a)}return a}function VN(s,a,d,y,w,M,L,I,B){return s=hw(d,y,!0,s,w,M,L,I,B),s.context=zN(null),d=s.current,y=nr(),w=Yl(d),M=$s(y,w),M.callback=a??null,Vl(d,M,w),s.current.lanes=w,mp(s,w,y),wr(s,y),s}function e0(s,a,d,y){var w=a.current,M=nr(),L=Yl(w);return d=zN(d),a.context===null?a.context=d:a.pendingContext=d,a=$s(M,L),a.payload={element:s},y=y===void 0?null:y,y!==null&&(a.callback=y),s=Vl(w,a,L),s!==null&&(Uo(s,w,L,M),fy(s,w,L)),L}function Gy(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function SC(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function aw(s,a){SC(s,a),(s=s.alternate)&&SC(s,a)}function xA(){return null}var UN=typeof reportError=="function"?reportError:function(s){console.error(s)};function fw(s){this._internalRoot=s}i0.prototype.render=fw.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(mt(409));e0(s,a,null,null)};i0.prototype.unmount=fw.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Wu(function(){e0(null,s,null,null)}),a[Qs]=null}};function i0(s){this._internalRoot=s}i0.prototype.unstable_scheduleHydration=function(s){if(s){var a=mP();s={blockedOn:null,target:s,priority:a};for(var d=0;d<jl.length&&a!==0&&a<jl[d].priority;d++);jl.splice(d,0,s),d===0&&xP(s)}};function cw(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function n0(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function kC(){}function wA(s,a,d,y,w){if(w){if(typeof y=="function"){var M=y;y=function(){var Q=Gy(L);M.call(Q)}}var L=VN(a,y,s,0,null,!1,!1,"",kC);return s._reactRootContainer=L,s[Qs]=L.current,lp(s.nodeType===8?s.parentNode:s),Wu(),L}for(;w=s.lastChild;)s.removeChild(w);if(typeof y=="function"){var I=y;y=function(){var Q=Gy(B);I.call(Q)}}var B=hw(s,0,!1,null,null,!1,!1,"",kC);return s._reactRootContainer=B,s[Qs]=B.current,lp(s.nodeType===8?s.parentNode:s),Wu(function(){e0(a,B,d,y)}),B}function r0(s,a,d,y,w){var M=d._reactRootContainer;if(M){var L=M;if(typeof w=="function"){var I=w;w=function(){var B=Gy(L);I.call(B)}}e0(a,L,s,w)}else L=wA(d,a,s,w,y);return Gy(L)}gP=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=Gc(a.pendingLanes);d!==0&&(jx(a,d|1),wr(a,Fi()),!(ve&6)&&($a=Fi()+500,Wl()))}break;case 13:Wu(function(){var y=Js(s,1);if(y!==null){var w=nr();Uo(y,s,1,w)}}),aw(s,1)}};Dx=function(s){if(s.tag===13){var a=Js(s,134217728);if(a!==null){var d=nr();Uo(a,s,134217728,d)}aw(s,134217728)}};yP=function(s){if(s.tag===13){var a=Yl(s),d=Js(s,a);if(d!==null){var y=nr();Uo(d,s,a,y)}aw(s,a)}};mP=function(){return Le};vP=function(s,a){var d=Le;try{return Le=s,a()}finally{Le=d}};U1=function(s,a,d){switch(a){case"input":if(O1(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var y=d[a];if(y!==s&&y.form===s.form){var w=$y(y);if(!w)throw Error(mt(90));ZC(y),O1(y,w)}}}break;case"textarea":JC(s,d);break;case"select":a=d.value,a!=null&&Ba(s,!!d.multiple,a,!1)}};rP=ow;oP=Wu;var MA={usingClientEntryPoint:!1,Events:[xp,Fa,$y,iP,nP,ow]},Vc={findFiberByHostInstance:zu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SA={bundleType:Vc.bundleType,version:Vc.version,rendererPackageName:Vc.rendererPackageName,rendererConfig:Vc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=uP(s),s===null?null:s.stateNode},findFiberByHostInstance:Vc.findFiberByHostInstance||xA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ny.isDisabled&&ny.supportsFiber)try{Xy=ny.inject(SA),vs=ny}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MA;Vr.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cw(a))throw Error(mt(200));return vA(s,a,null,d)};Vr.createRoot=function(s,a){if(!cw(s))throw Error(mt(299));var d=!1,y="",w=UN;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=hw(s,1,!1,null,null,d,!1,y,w),s[Qs]=a.current,lp(s.nodeType===8?s.parentNode:s),new fw(a)};Vr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(mt(188)):(s=Object.keys(s).join(","),Error(mt(268,s)));return s=uP(a),s=s===null?null:s.stateNode,s};Vr.flushSync=function(s){return Wu(s)};Vr.hydrate=function(s,a,d){if(!n0(a))throw Error(mt(200));return r0(null,s,a,!0,d)};Vr.hydrateRoot=function(s,a,d){if(!cw(s))throw Error(mt(405));var y=d!=null&&d.hydratedSources||null,w=!1,M="",L=UN;if(d!=null&&(d.unstable_strictMode===!0&&(w=!0),d.identifierPrefix!==void 0&&(M=d.identifierPrefix),d.onRecoverableError!==void 0&&(L=d.onRecoverableError)),a=VN(a,null,s,1,d??null,w,!1,M,L),s[Qs]=a.current,lp(s),y)for(s=0;s<y.length;s++)d=y[s],w=d._getVersion,w=w(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,w]:a.mutableSourceEagerHydrationData.push(d,w);return new i0(a)};Vr.render=function(s,a,d){if(!n0(a))throw Error(mt(200));return r0(null,s,a,!1,d)};Vr.unmountComponentAtNode=function(s){if(!n0(s))throw Error(mt(40));return s._reactRootContainer?(Wu(function(){r0(null,null,s,!1,function(){s._reactRootContainer=null,s[Qs]=null})}),!0):!1};Vr.unstable_batchedUpdates=ow;Vr.unstable_renderSubtreeIntoContainer=function(s,a,d,y){if(!n0(d))throw Error(mt(200));if(s==null||s._reactInternals===void 0)throw Error(mt(38));return r0(s,a,d,!1,y)};Vr.version="18.3.1-next-f1338f8080-20240426";function YN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YN)}catch(s){console.error(s)}}YN(),YC.exports=Vr;var kA=YC.exports,CC=kA;N1.createRoot=CC.createRoot,N1.hydrateRoot=CC.hydrateRoot;(function(){var s;function a(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function d(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:a(t)}}function y(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}var w=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},M;if(typeof Object.setPrototypeOf=="function")M=Object.setPrototypeOf;else{var L;t:{var I={a:!0},B={};try{B.__proto__=I,L=B.a;break t}catch{}L=!1}M=L?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var Q=M;function Z(t,e){if(t.prototype=w(e.prototype),t.prototype.constructor=t,Q)Q(t,e);else for(var i in e)if(i!="prototype")if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,i);n&&Object.defineProperty(t,i,n)}else t[i]=e[i];t.TA=e.prototype}var Y=typeof global<"u"&&global!=null?global:self,st=typeof Object.assign=="function"?Object.assign:function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mt=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)};function kt(t,e){if(e){var i=Y;t=t.split(".");for(var n=0;n<t.length-1;n++){var r=t[n];r in i||(i[r]={}),i=i[r]}t=t[t.length-1],n=i[t],e=e(n),e!=n&&e!=null&&Mt(i,t,{writable:!0,value:e})}}kt("Object.assign",function(t){return t||st}),kt("Array.prototype.fill",function(t){return t||function(e,i,n){var r=this.length||0;for(0>i&&(i=Math.max(0,r+i)),(n==null||n>r)&&(n=r),n=Number(n),0>n&&(n=Math.max(0,r+n)),i=Number(i||0);i<n;i++)this[i]=e;return this}});var $=typeof globalThis=="object"&&globalThis||typeof global=="object"&&global.global===global&&global||typeof self=="object"&&self.self===self&&self||{};$.requestAnimationFrame===void 0&&($.setImmediate===void 0?$.requestAnimationFrame=function(t){$.setTimeout(t,0)}:$.requestAnimationFrame=$.setImmediate);function xe(){}function b(t,e){var i=-1;return function(){var n=this,r=arguments;i!==-1&&$.clearTimeout(i),i=G(function(){i=-1,t.apply(n,r)},e)}}function G(t,e){return $.setTimeout(t,e)}function J(t){return $.document.createElement(t)}function O(t){throw Error(t)}function rt(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),e!==void 0&&(t+="  to value: "+e),O(t)}function at(t,e,i,n){i=i===null?"*":typeof i=="string"?i:typeof i=="function"&&typeof i.className=="string"?i.className:"",n!==void 0&&(i+="."+n),O(i+" is not in the range "+e+": "+t)}function Pt(t){$.console&&$.console.log(t)}function gt(t){return typeof t=="object"&&t!==null}function Ht(t){return Array.isArray(t)||$.NodeList&&t instanceof $.NodeList||$.HTMLCollection&&t instanceof $.HTMLCollection}function Qt(t){return Array.prototype.slice.call(t)}function Ji(t,e,i){Array.isArray(t)?e>=t.length?t.push(i):t.splice(e,0,i):O("Cannot insert an object into an HTMLCollection or NodeList: "+i+" at "+e)}function Mr(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):O("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function Rt(){var t=li.pop();return t===void 0?[]:t}function Bt(t){t.length=0,li.push(t)}function Go(t){if(typeof t=="function"){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(e=e.substring(9,e.indexOf("(")).trim(),e!=="")return t._className=e}else if(gt(t)&&t.constructor)return Go(t.constructor);return typeof t}function Bi(t){var e=t;return gt(t)&&(t.text?e=t.text:t.name?e=t.name:t.key!==void 0?e=t.key:t.id!==void 0?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:t.Key!==void 0?e=t.Key:t.Id!==void 0?e=t.Id:t.ID!==void 0&&(e=t.ID))),e===void 0?"undefined":e===null?"null":e.toString()}function Qu(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var i=t.GA;if(i&&i[e])return!0;t=Object.getPrototypeOf(t)}return!1}function Ct(t,e,i){Object.defineProperty(qt.prototype,t,{get:e,set:i})}function ft(t){for(var e=[],i=0;256>i;i++)e["0123456789abcdef".charAt(i>>4)+"0123456789abcdef".charAt(i&15)]=String.fromCharCode(i);t.length%2&&(t="0"+t),i=[];for(var n=0,r=0;r<t.length;r+=2)i[n++]=e[t.substr(r,2)];for(t=i.join(""),t=t===""?"0":t,e=[],i=0;256>i;i++)e[i]=i;for(i=n=0;256>i;i++)n=(n+e[i]+119)%256,r=e[i],e[i]=e[n],e[n]=r;n=i=0;for(var o="",l=0;l<t.length;l++)i=(i+1)%256,n=(n+e[i])%256,r=e[i],e[i]=e[n],e[n]=r,o+=String.fromCharCode(t.charCodeAt(l)^e[(e[i]+e[n])%256]);return o}var ie=$.navigator!==void 0&&0<$.navigator.userAgent.indexOf("Trident/7"),we=$.navigator!==void 0&&$.navigator.platform!==void 0&&$.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i)!==null,li=[];xe.className="Util",xe.Dx="32ab5ff3b26f42dc0ed90f21472913b5",xe.adym="gojs.net",xe.vfo="28e645fdb26e",xe.className="Util";function K(t,e,i){Te(this),this.j=t,this.xa=e,this.o=i}K.prototype.toString=function(){return"EnumValue."+this.xa};function Xn(t,e){return e==null||e===""?null:t[e]}Y.Object.defineProperties(K.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.xa}},value:{get:function(){return this.o}}}),K.className="EnumValue";function tl(){this.gw=[]}tl.prototype.toString=function(){return this.gw.join("")},tl.prototype.add=function(t){t!==""&&this.gw.push(t)},tl.className="StringBuilder";function Xe(){}Xe.className="PropertyCollection";var ws={IA:!1,NA:!1,KA:!1,MA:!1,RA:!1,PA:!1,px:!1,JA:null,trace:function(t){$.console&&$.console.log(t)},LA:function(t,e,i,n){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(i,i),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(n.left,n.top+20),t.lineTo(n.left,n.top),t.lineTo(n.left+20,n.top),t.moveTo(n.right,n.bottom-20),t.lineTo(n.right,n.bottom),t.lineTo(n.right-20,n.bottom),t.stroke(),t.fillText("DB: "+Math.round(n.x)+", "+Math.round(n.y)+", "+Math.round(n.width)+", "+Math.round(n.height),n.left,n.top-5)},HA:function(t){var e={},i;for(i in t){if(e.x=i,e.x!=="licenseKey"){var n=t[e.x];if(n.prototype!==void 0){e.$l=Object.getOwnPropertyNames(n.prototype);for(var r={Sj:0};r.Sj<e.$l.length;r={Sj:r.Sj},r.Sj++){var o=Object.getOwnPropertyDescriptor(n.prototype,e.$l[r.Sj]);o.get!==void 0&&o.set===void 0&&Object.defineProperty(n.prototype,e.$l[r.Sj],{set:function(l,u){return function(){throw Error("Property "+l.$l[u.Sj]+" of "+l.x+" is read-only.")}}(e,r)})}}}e={$l:e.$l,x:e.x}}}};function ui(){}ui.prototype.reset=function(){},ui.prototype.next=function(){return!1},ui.prototype.Ad=function(){return!1},ui.prototype.first=function(){return null},ui.prototype.any=function(){return!1},ui.prototype.all=function(){return!0},ui.prototype.each=function(){return this},ui.prototype.map=function(){return this},ui.prototype.filter=function(){return this},ui.prototype.de=function(){},ui.prototype.toString=function(){return"EmptyIterator"},Y.Object.defineProperties(ui.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),ui.prototype.first=ui.prototype.first,ui.prototype.hasNext=ui.prototype.Ad,ui.prototype.next=ui.prototype.next,ui.prototype.reset=ui.prototype.reset;var Kn=null;ui.className="EmptyIterator",Kn=new ui;function De(t){this.key=-1,this.value=t}De.prototype.reset=function(){this.key=-1},De.prototype.next=function(){return this.key===-1?(this.key=0,!0):!1},De.prototype.Ad=function(){return this.next()},De.prototype.first=function(){return this.key=0,this.value},De.prototype.any=function(t){return this.key=-1,t(this.value)},De.prototype.all=function(t){return this.key=-1,t(this.value)},De.prototype.each=function(t){return this.key=-1,t(this.value),this},De.prototype.map=function(t){return new De(t(this.value))},De.prototype.filter=function(t){return t(this.value)?new De(this.value):Kn},De.prototype.de=function(){this.value=null},De.prototype.toString=function(){return"SingletonIterator("+this.value+")"},Y.Object.defineProperties(De.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),De.prototype.first=De.prototype.first,De.prototype.hasNext=De.prototype.Ad,De.prototype.next=De.prototype.next,De.prototype.reset=De.prototype.reset,De.className="SingletonIterator";function Fe(t){this.Cb=t,this.qf=null,t.Sa=null,this.qa=t.Ja,this.Za=-1}Fe.prototype.reset=function(){var t=this.Cb;t.Sa=null,this.qa=t.Ja,this.Za=-1},Fe.prototype.next=function(){var t=this.Cb;if(t.Ja!==this.qa&&0>this.key)return!1;t=t.s;var e=t.length,i=++this.Za,n=this.qf;if(n!==null)for(;i<e;){var r=t[i];if(n(r))return this.key=this.Za=i,this.value=r,!0;i++}else{if(i<e)return this.key=i,this.value=t[i],!0;this.de()}return!1},Fe.prototype.Ad=function(){return this.next()},Fe.prototype.first=function(){var t=this.Cb;this.qa=t.Ja,this.Za=0,t=t.s;var e=t.length,i=this.qf;if(i!==null){for(var n=0;n<e;){var r=t[n];if(i(r))return this.key=this.Za=n,this.value=r;n++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},Fe.prototype.any=function(t){var e=this.Cb;e.Sa=null,this.Za=-1,e=e.s;for(var i=e.length,n=this.qf,r=0;r<i;r++){var o=e[r];if((n===null||n(o))&&t(o))return!0}return!1},Fe.prototype.all=function(t){var e=this.Cb;e.Sa=null,this.Za=-1,e=e.s;for(var i=e.length,n=this.qf,r=0;r<i;r++){var o=e[r];if((n===null||n(o))&&!t(o))return!1}return!0},Fe.prototype.each=function(t){var e=this.Cb;e.Sa=null,this.Za=-1,e=e.s;for(var i=e.length,n=this.qf,r=0;r<i;r++){var o=e[r];(n===null||n(o))&&t(o)}return this},Fe.prototype.map=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;var i=[];e=e.s;for(var n=e.length,r=this.qf,o=0;o<n;o++){var l=e[o];(r===null||r(l))&&i.push(t(l))}return t=new q,t.s=i,t.yb(),t.iterator},Fe.prototype.filter=function(t){var e=this.Cb;e.Sa=null,this.Za=-1;var i=[];e=e.s;for(var n=e.length,r=this.qf,o=0;o<n;o++){var l=e[o];(r===null||r(l))&&t(l)&&i.push(l)}return t=new q,t.s=i,t.yb(),t.iterator},Fe.prototype.de=function(){this.key=-1,this.value=null,this.qa=-1,this.qf=null,this.Cb.Sa=this},Fe.prototype.toString=function(){return"ListIterator@"+this.Za+"/"+this.Cb.count},Y.Object.defineProperties(Fe.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.qf},set:function(t){this.qf=t}},count:{get:function(){var t=this.qf;if(t!==null){for(var e=0,i=this.Cb.s,n=i.length,r=0;r<n;r++)t(i[r])&&e++;return e}return this.Cb.s.length}}}),Fe.prototype.first=Fe.prototype.first,Fe.prototype.hasNext=Fe.prototype.Ad,Fe.prototype.next=Fe.prototype.next,Fe.prototype.reset=Fe.prototype.reset,Fe.className="ListIterator";function hi(t){this.Cb=t,t.Hg=null,this.qa=t.Ja,this.Za=t.s.length}hi.prototype.reset=function(){var t=this.Cb;t.Hg=null,this.qa=t.Ja,this.Za=t.s.length},hi.prototype.next=function(){var t=this.Cb;if(t.Ja!==this.qa&&0>this.key)return!1;var e=--this.Za;return 0<=e?(this.key=e,this.value=t.s[e],!0):(this.de(),!1)},hi.prototype.Ad=function(){return this.next()},hi.prototype.first=function(){var t=this.Cb;this.qa=t.Ja;var e=t.s;return this.Za=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},hi.prototype.any=function(t){var e=this.Cb;e.Hg=null,e=e.s;var i=e.length;for(this.Za=i,--i;0<=i;i--)if(t(e[i]))return!0;return!1},hi.prototype.all=function(t){var e=this.Cb;e.Hg=null,e=e.s;var i=e.length;for(this.Za=i,--i;0<=i;i--)if(!t(e[i]))return!1;return!0},hi.prototype.each=function(t){var e=this.Cb;e.Hg=null,e=e.s;var i=e.length;for(this.Za=i,--i;0<=i;i--)t(e[i]);return this},hi.prototype.map=function(t){var e=this.Cb;e.Hg=null;var i=[];e=e.s;var n=e.length;for(this.Za=n,--n;0<=n;n--)i.push(t(e[n]));return t=new q,t.s=i,t.yb(),t.iterator},hi.prototype.filter=function(t){var e=this.Cb;e.Hg=null;var i=[];e=e.s;var n=e.length;for(this.Za=n,--n;0<=n;n--){var r=e[n];t(r)&&i.push(r)}return t=new q,t.s=i,t.yb(),t.iterator},hi.prototype.de=function(){this.key=-1,this.value=null,this.qa=-1,this.Cb.Hg=this},hi.prototype.toString=function(){return"ListIteratorBackwards("+this.Za+"/"+this.Cb.count+")"},Y.Object.defineProperties(hi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.Cb.s.length}}}),hi.prototype.first=hi.prototype.first,hi.prototype.hasNext=hi.prototype.Ad,hi.prototype.next=hi.prototype.next,hi.prototype.reset=hi.prototype.reset,hi.className="ListIteratorBackwards";function q(t){Te(this),this._isFrozen=!1,this.s=[],this.Ja=0,this.Hg=this.Sa=null,typeof t=="string"&&O("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}s=q.prototype,s.yb=function(){var t=this.Ja;t++,999999999<t&&(t=0),this.Ja=t},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return this._isFrozen=!1,this},s.toString=function(){return"List()#"+Ci(this)},s.add=function(t){return t===null?this:(this._isFrozen&&rt(this,t),this.s.push(t),this.yb(),this)},s.push=function(t){this.add(t)},s.addAll=function(t){if(t===null)return this;this._isFrozen&&rt(this);var e=this.s;if(Ht(t))for(var i=t.length,n=0;n<i;n++)e.push(t[n]);else for(t=t.iterator;t.next();)e.push(t.value);return this.yb(),this},s.clear=function(){this._isFrozen&&rt(this),this.s.length=0,this.yb()},s.contains=function(t){return t===null?!1:this.s.indexOf(t)!==-1},s.has=function(t){return this.contains(t)},s.indexOf=function(t){return t===null?-1:this.s.indexOf(t)},s.M=function(t){var e=this.s;return(0>t||t>=e.length)&&at(t,"0 <= i < length",q,"elt:i"),e[t]},s.get=function(t){return this.M(t)},s.cd=function(t,e){var i=this.s;(0>t||t>=i.length)&&at(t,"0 <= i < length",q,"setElt:i"),this._isFrozen&&rt(this,t),i[t]=e},s.set=function(t,e){this.cd(t,e)},s.first=function(){var t=this.s;return t.length===0?null:t[0]},s.lc=function(){var t=this.s,e=t.length;return 0<e?t[e-1]:null},s.pop=function(){this._isFrozen&&rt(this);var t=this.s;return 0<t.length?t.pop():null},q.prototype.any=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)if(t(e[n]))return!0;return!1},q.prototype.all=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)if(!t(e[n]))return!1;return!0},q.prototype.each=function(t){for(var e=this.s,i=e.length,n=0;n<i;n++)t(e[n]);return this},q.prototype.map=function(t){for(var e=new q,i=[],n=this.s,r=n.length,o=0;o<r;o++)i.push(t(n[o]));return e.s=i,e.yb(),e},q.prototype.filter=function(t){for(var e=new q,i=[],n=this.s,r=n.length,o=0;o<r;o++){var l=n[o];t(l)&&i.push(l)}return e.s=i,e.yb(),e},s=q.prototype,s.Hb=function(t,e){0>t&&at(t,">= 0",q,"insertAt:i"),this._isFrozen&&rt(this,t);var i=this.s;t>=i.length?i.push(e):i.splice(t,0,e),this.yb()},s.remove=function(t){if(t===null)return!1;this._isFrozen&&rt(this,t);var e=this.s;return t=e.indexOf(t),t===-1?!1:(t===e.length-1?e.pop():e.splice(t,1),this.yb(),!0)},s.delete=function(t){return this.remove(t)},s.mb=function(t){var e=this.s;(0>t||t>=e.length)&&at(t,"0 <= i < length",q,"removeAt:i"),this._isFrozen&&rt(this,t),t===e.length-1?e.pop():e.splice(t,1),this.yb()},s.removeRange=function(t,e){var i=this.s,n=i.length;if(0>t)t=0;else if(t>=n)return this;if(0>e)return this;if(e>=n&&(e=n-1),t>e)return this;this._isFrozen&&rt(this);for(var r=t,o=e+1;o<n;)i[r++]=i[o++];return i.length=n-(e-t+1),this.yb(),this},q.prototype.copy=function(){var t=new q,e=this.s;return 0<e.length&&(t.s=Array.prototype.slice.call(e)),t},s=q.prototype,s.Fa=function(){for(var t=this.s,e=this.count,i=Array(e),n=0;n<e;n++)i[n]=t[n];return i},s.Kv=function(){for(var t=new _,e=this.s,i=this.count,n=0;n<i;n++)t.add(e[n]);return t},s.sort=function(t){return this._isFrozen&&rt(this),this.s.sort(t),this.yb(),this},s.Ai=function(t,e,i){var n=this.s,r=n.length;e===void 0&&(e=0),i===void 0&&(i=r),this._isFrozen&&rt(this);var o=i-e;if(1>=o)return this;if((0>e||e>=r-1)&&at(e,"0 <= from < length",q,"sortRange:from"),o===2)return i=n[e],r=n[e+1],0<t(i,r)&&(n[e]=r,n[e+1]=i,this.yb()),this;if(e===0)if(i>=r)n.sort(t);else for(e=n.slice(0,i),e.sort(t),t=0;t<i;t++)n[t]=e[t];else if(i>=r)for(i=n.slice(e),i.sort(t),t=e;t<r;t++)n[t]=i[t-e];else for(r=n.slice(e,i),r.sort(t),t=e;t<i;t++)n[t]=r[t-e];return this.yb(),this},s.reverse=function(){return this._isFrozen&&rt(this),this.s.reverse(),this.yb(),this},Y.Object.defineProperties(q.prototype,{_dataArray:{get:function(){return this.s}},count:{get:function(){return this.s.length}},size:{get:function(){return this.s.length}},length:{get:function(){return this.s.length}},iterator:{get:function(){if(0>=this.s.length)return Kn;var t=this.Sa;return t!==null?(t.reset(),t):new Fe(this)}},iteratorBackwards:{get:function(){if(0>=this.s.length)return Kn;var t=this.Hg;return t!==null?(t.reset(),t):new hi(this)}}}),q.prototype.reverse=q.prototype.reverse,q.prototype.sortRange=q.prototype.Ai,q.prototype.sort=q.prototype.sort,q.prototype.toSet=q.prototype.Kv,q.prototype.toArray=q.prototype.Fa,q.prototype.removeRange=q.prototype.removeRange,q.prototype.removeAt=q.prototype.mb,q.prototype.delete=q.prototype.delete,q.prototype.remove=q.prototype.remove,q.prototype.insertAt=q.prototype.Hb,q.prototype.pop=q.prototype.pop,q.prototype.last=q.prototype.lc,q.prototype.first=q.prototype.first,q.prototype.set=q.prototype.set,q.prototype.setElt=q.prototype.cd,q.prototype.get=q.prototype.get,q.prototype.elt=q.prototype.M,q.prototype.indexOf=q.prototype.indexOf,q.prototype.has=q.prototype.has,q.prototype.contains=q.prototype.contains,q.prototype.clear=q.prototype.clear,q.prototype.addAll=q.prototype.addAll,q.prototype.push=q.prototype.push,q.prototype.add=q.prototype.add,q.prototype.thaw=q.prototype.ka,q.prototype.freeze=q.prototype.freeze,q.className="List";function ai(t){this.eg=t,t.Sa=null,this.qa=t.Ja,this.sa=null}ai.prototype.reset=function(){var t=this.eg;t.Sa=null,this.qa=t.Ja,this.sa=null},ai.prototype.next=function(){var t=this.eg;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.va,e!==null?(this.sa=e,this.value=e.value,this.key=e.key,!0):(this.de(),!1)},ai.prototype.Ad=function(){return this.next()},ai.prototype.first=function(){var t=this.eg;if(this.qa=t.Ja,t=t.ea,t!==null){this.sa=t;var e=t.value;return this.key=t.key,this.value=e}return null},ai.prototype.any=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.va}return!1},ai.prototype.all=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.va}return!0},ai.prototype.each=function(t){var e=this.eg;for(this.sa=e.Sa=null,e=e.ea;e!==null;)t(e.value),e=e.va;return this},ai.prototype.map=function(t){var e=this.eg;e.Sa=null;var i=new q;for(e=e.ea;e!==null;)i.add(t(e.value)),e=e.va;return i.iterator},ai.prototype.filter=function(t){var e=this.eg;e.Sa=null;var i=new q;for(e=e.ea;e!==null;){var n=e.value;t(n)&&i.add(n),e=e.va}return i.iterator},ai.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.eg.Sa=this},ai.prototype.toString=function(){return this.sa!==null?"SetIterator@"+this.sa.value:"SetIterator"},Y.Object.defineProperties(ai.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.eg.Ub}}}),ai.prototype.first=ai.prototype.first,ai.prototype.hasNext=ai.prototype.Ad,ai.prototype.next=ai.prototype.next,ai.prototype.reset=ai.prototype.reset,ai.className="SetIterator";function _(t){Te(this),this._isFrozen=!1,this.Vb={},this.Ub=0,this.Sa=null,this.Ja=0,this.kf=this.ea=null,typeof t=="string"&&O("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}s=_.prototype,s.yb=function(){var t=this.Ja;t++,999999999<t&&(t=0),this.Ja=t},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return this._isFrozen=!1,this},s.toString=function(){return"Set()#"+Ci(this)},s.add=function(t){if(t===null)return this;this._isFrozen&&rt(this,t);var e=t;return gt(t)&&(e=$l(t)),this.Vb[e]===void 0&&(this.Ub++,t=new qa(t,t),this.Vb[e]=t,e=this.kf,e===null?this.ea=t:(t.ll=e,e.va=t),this.kf=t,this.yb()),this},s.addAll=function(t){if(t===null)return this;if(this._isFrozen&&rt(this),Ht(t))for(var e=t.length,i=0;i<e;i++)this.add(t[i]);else for(t=t.iterator;t.next();)this.add(t.value);return this},s.contains=function(t){if(t===null)return!1;var e=t;return gt(t)&&(e=Ci(t),e===void 0)?!1:this.Vb[e]!==void 0},s.has=function(t){return this.contains(t)},s.Xy=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},s.Yy=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},s.first=function(){var t=this.ea;return t===null?null:t.value},_.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e.value))return!0;e=e.va}return!1},_.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e.value))return!1;e=e.va}return!0},_.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e.value),e=e.va;return this},_.prototype.map=function(t){for(var e=new _,i=this.ea;i!==null;)e.add(t(i.value)),i=i.va;return e},_.prototype.filter=function(t){for(var e=new _,i=this.ea;i!==null;){var n=i.value;t(n)&&e.add(n),i=i.va}return e},s=_.prototype,s.remove=function(t){if(t===null)return!1;this._isFrozen&&rt(this,t);var e=t;if(gt(t)&&(e=Ci(t),e===void 0)||(t=this.Vb[e],t===void 0))return!1;var i=t.va,n=t.ll;return i!==null&&(i.ll=n),n!==null&&(n.va=i),this.ea===t&&(this.ea=i),this.kf===t&&(this.kf=n),delete this.Vb[e],this.Ub--,this.yb(),!0},s.delete=function(t){return this.remove(t)},s.hp=function(t){if(t===null)return this;if(this._isFrozen&&rt(this),Ht(t))for(var e=t.length,i=0;i<e;i++)this.remove(t[i]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},s.tA=function(t){if(t===null||this.count===0)return this;this._isFrozen&&rt(this);var e=new _;e.addAll(t),t=[];for(var i=this.iterator;i.next();){var n=i.value;e.contains(n)||t.push(n)}return this.hp(t),this},s.clear=function(){this._isFrozen&&rt(this),this.Vb={},this.Ub=0,this.Sa!==null&&this.Sa.reset(),this.kf=this.ea=null,this.yb()},_.prototype.copy=function(){var t=new _,e=this.Vb,i;for(i in e)t.add(e[i].value);return t},_.prototype.Fa=function(){var t=Array(this.Ub),e=this.Vb,i=0,n;for(n in e)t[i]=e[n].value,i++;return t},_.prototype.Jv=function(){var t=new q,e=this.Vb,i;for(i in e)t.add(e[i].value);return t};function Te(t){t.__gohashid=Zl++}function $l(t){var e=t.__gohashid;return e===void 0&&(e=Zl++,t.__gohashid=e),e}function Ci(t){return t.__gohashid}Y.Object.defineProperties(_.prototype,{count:{get:function(){return this.Ub}},size:{get:function(){return this.Ub}},iterator:{get:function(){if(0>=this.Ub)return Kn;var t=this.Sa;return t!==null?(t.reset(),t):new ai(this)}}}),_.prototype.toList=_.prototype.Jv,_.prototype.toArray=_.prototype.Fa,_.prototype.clear=_.prototype.clear,_.prototype.retainAll=_.prototype.tA,_.prototype.removeAll=_.prototype.hp,_.prototype.delete=_.prototype.delete,_.prototype.remove=_.prototype.remove,_.prototype.first=_.prototype.first,_.prototype.containsAny=_.prototype.Yy,_.prototype.containsAll=_.prototype.Xy,_.prototype.has=_.prototype.has,_.prototype.contains=_.prototype.contains,_.prototype.addAll=_.prototype.addAll,_.prototype.add=_.prototype.add,_.prototype.thaw=_.prototype.ka,_.prototype.freeze=_.prototype.freeze;var Zl=1;_.className="Set",_.uniqueHash=Te,_.hashIdUnique=$l,_.hashId=Ci;function Qe(t){this.ma=t,this.qa=t.Ja,this.sa=null}Qe.prototype.reset=function(){this.qa=this.ma.Ja,this.sa=null},Qe.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.va,e!==null?(this.sa=e,this.value=this.key=t=e.key,!0):(this.de(),!1)},Qe.prototype.Ad=function(){return this.next()},Qe.prototype.first=function(){var t=this.ma;return this.qa=t.Ja,t=t.ea,t!==null?(this.sa=t,this.value=this.key=t=t.key):null},Qe.prototype.any=function(t){var e=this.ma;for(this.sa=null,e=e.ea;e!==null;){if(t(e.key))return!0;e=e.va}return!1},Qe.prototype.all=function(t){var e=this.ma;for(this.sa=null,e=e.ea;e!==null;){if(!t(e.key))return!1;e=e.va}return!0},Qe.prototype.each=function(t){var e=this.ma;for(this.sa=null,e=e.ea;e!==null;)t(e.key),e=e.va;return this},Qe.prototype.map=function(t){var e=this.ma;this.sa=null;var i=new q;for(e=e.ea;e!==null;)i.add(t(e.key)),e=e.va;return i.iterator},Qe.prototype.filter=function(t){var e=this.ma;this.sa=null;var i=new q;for(e=e.ea;e!==null;){var n=e.key;t(n)&&i.add(n),e=e.va}return i.iterator},Qe.prototype.de=function(){this.value=this.key=null,this.qa=-1},Qe.prototype.toString=function(){return this.sa!==null?"MapKeySetIterator@"+this.sa.value:"MapKeySetIterator"},Y.Object.defineProperties(Qe.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Ub}}}),Qe.prototype.first=Qe.prototype.first,Qe.prototype.hasNext=Qe.prototype.Ad,Qe.prototype.next=Qe.prototype.next,Qe.prototype.reset=Qe.prototype.reset,Qe.className="MapKeySetIterator";function re(t){_.call(this),Te(this),this._isFrozen=!0,this.ma=t}Z(re,_),s=re.prototype,s.freeze=function(){return this},s.ka=function(){return this},s.toString=function(){return"MapKeySet("+this.ma.toString()+")"},s.add=function(){O("This Set is read-only: "+this.toString())},s.contains=function(t){return this.ma.contains(t)},s.has=function(t){return this.contains(t)},s.remove=function(){O("This Set is read-only: "+this.toString())},s.delete=function(t){return this.remove(t)},s.clear=function(){O("This Set is read-only: "+this.toString())},s.first=function(){var t=this.ma.ea;return t!==null?t.key:null},re.prototype.any=function(t){for(var e=this.ma.ea;e!==null;){if(t(e.key))return!0;e=e.va}return!1},re.prototype.all=function(t){for(var e=this.ma.ea;e!==null;){if(!t(e.key))return!1;e=e.va}return!0},re.prototype.each=function(t){for(var e=this.ma.ea;e!==null;)t(e.key),e=e.va;return this},re.prototype.map=function(t){for(var e=new _,i=this.ma.ea;i!==null;)e.add(t(i.key)),i=i.va;return e},re.prototype.filter=function(t){for(var e=new _,i=this.ma.ea;i!==null;){var n=i.key;t(n)&&e.add(n),i=i.va}return e},re.prototype.copy=function(){return new re(this.ma)},re.prototype.Kv=function(){var t=new _,e=this.ma.Vb,i;for(i in e)t.add(e[i].key);return t},re.prototype.Fa=function(){var t=this.ma.Vb,e=Array(this.ma.Ub),i=0,n;for(n in t)e[i]=t[n].key,i++;return e},re.prototype.Jv=function(){var t=new q,e=this.ma.Vb,i;for(i in e)t.add(e[i].key);return t},Y.Object.defineProperties(re.prototype,{count:{get:function(){return this.ma.Ub}},size:{get:function(){return this.ma.Ub}},iterator:{get:function(){return 0>=this.ma.Ub?Kn:new Qe(this.ma)}}}),re.prototype.toList=re.prototype.Jv,re.prototype.toArray=re.prototype.Fa,re.prototype.toSet=re.prototype.Kv,re.prototype.first=re.prototype.first,re.prototype.clear=re.prototype.clear,re.prototype.delete=re.prototype.delete,re.prototype.remove=re.prototype.remove,re.prototype.has=re.prototype.has,re.prototype.contains=re.prototype.contains,re.prototype.add=re.prototype.add,re.prototype.thaw=re.prototype.ka,re.prototype.freeze=re.prototype.freeze,re.className="MapKeySet";function fi(t){this.ma=t,t.jf=null,this.qa=t.Ja,this.sa=null}fi.prototype.reset=function(){var t=this.ma;t.jf=null,this.qa=t.Ja,this.sa=null},fi.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.va,e!==null?(this.sa=e,this.value=e.value,this.key=e.key,!0):(this.de(),!1)},fi.prototype.Ad=function(){return this.next()},fi.prototype.first=function(){var t=this.ma;if(this.qa=t.Ja,t=t.ea,t!==null){this.sa=t;var e=t.value;return this.key=t.key,this.value=e}return null},fi.prototype.any=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;e!==null;){if(t(e.value))return!0;e=e.va}return!1},fi.prototype.all=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;e!==null;){if(!t(e.value))return!1;e=e.va}return!0},fi.prototype.each=function(t){var e=this.ma;for(this.sa=e.jf=null,e=e.ea;e!==null;)t(e.value),e=e.va;return this},fi.prototype.map=function(t){var e=this.ma;this.sa=e.jf=null;var i=new q;for(e=e.ea;e!==null;)i.add(t(e.value)),e=e.va;return i.iterator},fi.prototype.filter=function(t){var e=this.ma;this.sa=e.jf=null;var i=new q;for(e=e.ea;e!==null;){var n=e.value;t(n)&&i.add(n),e=e.va}return i.iterator},fi.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.ma.jf=this},fi.prototype.toString=function(){return this.sa!==null?"MapValueSetIterator@"+this.sa.value:"MapValueSetIterator"},Y.Object.defineProperties(fi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Ub}}}),fi.prototype.first=fi.prototype.first,fi.prototype.hasNext=fi.prototype.Ad,fi.prototype.next=fi.prototype.next,fi.prototype.reset=fi.prototype.reset,fi.className="MapValueSetIterator";function qa(t,e){this.key=t,this.value=e,this.ll=this.va=null}qa.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},qa.className="KeyValuePair";function ci(t){this.ma=t,t.Sa=null,this.qa=t.Ja,this.sa=null}ci.prototype.reset=function(){var t=this.ma;t.Sa=null,this.qa=t.Ja,this.sa=null},ci.prototype.next=function(){var t=this.ma;if(t.Ja!==this.qa&&this.key===null)return!1;var e=this.sa;return e=e===null?t.ea:e.va,e!==null?(this.sa=e,this.key=e.key,this.value=e.value,!0):(this.de(),!1)},ci.prototype.Ad=function(){return this.next()},ci.prototype.first=function(){var t=this.ma;return this.qa=t.Ja,t=t.ea,t!==null?(this.sa=t,this.key=t.key,this.value=t.value,t):null},ci.prototype.any=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(t(e))return!0;e=e.va}return!1},ci.prototype.all=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;e!==null;){if(!t(e))return!1;e=e.va}return!0},ci.prototype.each=function(t){var e=this.ma;for(this.sa=e.Sa=null,e=e.ea;e!==null;)t(e),e=e.va;return this},ci.prototype.map=function(t){var e=this.ma;this.sa=e.Sa=null;var i=new q;for(e=e.ea;e!==null;)i.add(t(e)),e=e.va;return i.iterator},ci.prototype.filter=function(t){var e=this.ma;this.sa=e.Sa=null;var i=new q;for(e=e.ea;e!==null;)t(e)&&i.add(e),e=e.va;return i.iterator},ci.prototype.de=function(){this.value=this.key=null,this.qa=-1,this.ma.Sa=this},ci.prototype.toString=function(){return this.sa!==null?"MapIterator@"+this.sa:"MapIterator"},Y.Object.defineProperties(ci.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ma.Ub}}}),ci.prototype.first=ci.prototype.first,ci.prototype.hasNext=ci.prototype.Ad,ci.prototype.next=ci.prototype.next,ci.prototype.reset=ci.prototype.reset,ci.className="MapIterator";function ct(t){Te(this),this._isFrozen=!1,this.Vb={},this.Ub=0,this.jf=this.Sa=null,this.Ja=0,this.kf=this.ea=null,typeof t=="string"&&O("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),t!==void 0&&this.addAll(t)}s=ct.prototype,s.yb=function(){var t=this.Ja;t++,999999999<t&&(t=0),this.Ja=t},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return this._isFrozen=!1,this},s.toString=function(){return"Map()#"+Ci(this)},s.add=function(t,e){this._isFrozen&&rt(this,t);var i=t;gt(t)&&(i=$l(t));var n=this.Vb[i];return n===void 0?(this.Ub++,t=new qa(t,e),this.Vb[i]=t,i=this.kf,i===null?this.ea=t:(t.ll=i,i.va=t),this.kf=t,this.yb()):n.value=e,this},s.set=function(t,e){return this.add(t,e)},s.addAll=function(t){if(t===null)return this;if(Ht(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];this.add(n.key,n.value)}else if(t instanceof ct)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)e=t.value,this.add(e.key,e.value);return this},s.first=function(){return this.ea},ct.prototype.any=function(t){for(var e=this.ea;e!==null;){if(t(e))return!0;e=e.va}return!1},ct.prototype.all=function(t){for(var e=this.ea;e!==null;){if(!t(e))return!1;e=e.va}return!0},ct.prototype.each=function(t){for(var e=this.ea;e!==null;)t(e),e=e.va;return this},ct.prototype.map=function(t){for(var e=new ct,i=this.ea;i!==null;)e.add(i.key,t(i)),i=i.va;return e},ct.prototype.filter=function(t){for(var e=new ct,i=this.ea;i!==null;)t(i)&&e.add(i.key,i.value),i=i.va;return e},s=ct.prototype,s.contains=function(t){var e=t;return gt(t)&&(e=Ci(t),e===void 0)?!1:this.Vb[e]!==void 0},s.has=function(t){return this.contains(t)},s.I=function(t){var e=t;return gt(t)&&(e=Ci(t),e===void 0)?null:(t=this.Vb[e],t===void 0?null:t.value)},s.get=function(t){return this.I(t)},s.remove=function(t){if(t===null)return!1;this._isFrozen&&rt(this,t);var e=t;if(gt(t)&&(e=Ci(t),e===void 0)||(t=this.Vb[e],t===void 0))return!1;var i=t.va,n=t.ll;return i!==null&&(i.ll=n),n!==null&&(n.va=i),this.ea===t&&(this.ea=i),this.kf===t&&(this.kf=n),delete this.Vb[e],this.Ub--,this.yb(),!0},s.delete=function(t){return this.remove(t)},s.clear=function(){this._isFrozen&&rt(this),this.Vb={},this.Ub=0,this.Sa!==null&&this.Sa.reset(),this.jf!==null&&this.jf.reset(),this.kf=this.ea=null,this.yb()},ct.prototype.copy=function(){var t=new ct,e=this.Vb,i;for(i in e){var n=e[i];t.add(n.key,n.value)}return t},ct.prototype.Fa=function(){var t=this.Vb,e=Array(this.Ub),i=0,n;for(n in t){var r=t[n];e[i]=new qa(r.key,r.value),i++}return e},ct.prototype.Lf=function(){return new re(this)},Y.Object.defineProperties(ct.prototype,{count:{get:function(){return this.Ub}},size:{get:function(){return this.Ub}},iterator:{get:function(){if(0>=this.count)return Kn;var t=this.Sa;return t!==null?(t.reset(),t):new ci(this)}},iteratorKeys:{get:function(){return 0>=this.count?Kn:new Qe(this)}},iteratorValues:{get:function(){if(0>=this.count)return Kn;var t=this.jf;return t!==null?(t.reset(),t):new fi(this)}}}),ct.prototype.toKeySet=ct.prototype.Lf,ct.prototype.toArray=ct.prototype.Fa,ct.prototype.clear=ct.prototype.clear,ct.prototype.delete=ct.prototype.delete,ct.prototype.remove=ct.prototype.remove,ct.prototype.get=ct.prototype.get,ct.prototype.getValue=ct.prototype.I,ct.prototype.has=ct.prototype.has,ct.prototype.contains=ct.prototype.contains,ct.prototype.first=ct.prototype.first,ct.prototype.addAll=ct.prototype.addAll,ct.prototype.set=ct.prototype.set,ct.prototype.add=ct.prototype.add,ct.prototype.thaw=ct.prototype.ka,ct.prototype.freeze=ct.prototype.freeze,ct.className="Map";function C(t,e){t===void 0?this.y=this.x=0:typeof t=="number"&&typeof e=="number"?(this.x=t,this.y=e):O("Invalid arguments to Point constructor: "+t+", "+e),this._isFrozen=!1}var co,o0,s0,l0,Mp;C.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},C.prototype.h=function(t,e){return this.x=t,this.y=e,this},C.prototype.sg=function(t,e){return this.x=t,this.y=e,this},C.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},C.prototype.copy=function(){var t=new C;return t.x=this.x,t.y=this.y,t},s=C.prototype,s.ja=function(){return this._isFrozen=!0,Object.freeze(this),this},s.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this._isFrozen=!1,this};function dw(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;return(n=t[e++])&&(r=parseFloat(n)),new C(i,r)}return new C}function gw(t){return t.x.toString()+" "+t.y.toString()}s.toString=function(){return"Point("+this.x+","+this.y+")"},s.D=function(t){return t instanceof C?this.x===t.x&&this.y===t.y:!1},s.ii=function(t,e){return this.x===t&&this.y===e},s.Xa=function(t){return A.B(this.x,t.x)&&A.B(this.y,t.y)},s.add=function(t){return this.x+=t.x,this.y+=t.y,this},s.re=function(t){return this.x-=t.x,this.y-=t.y,this},s.offset=function(t,e){return this.x+=t,this.y+=e,this},C.prototype.rotate=function(t){if(t===0)return this;var e=this.x,i=this.y;if(e===0&&i===0)return this;if(360<=t?t-=360:0>t&&(t+=360),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));return this.x=t*e-n*i,this.y=n*e+t*i,this},s=C.prototype,s.scale=function(t,e){return this.x*=t,this.y*=e,this},s.Bf=function(t){var e=t.x-this.x;return t=t.y-this.y,e*e+t*t},s.zd=function(t,e){return t-=this.x,e-=this.y,t*t+e*e},s.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return 0<i&&(this.x=t/i,this.y=e/i),this},s.ab=function(t){return yw(t.x-this.x,t.y-this.y)},s.direction=function(t,e){return yw(t-this.x,e-this.y)};function yw(t,e){if(t===0)return 0<e?90:0>e?270:0;if(e===0)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var i=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i}s.Wy=function(t,e){return A.Fl(t.x,t.y,e.x,e.y,this.x,this.y)},s.jA=function(t,e,i,n){return A.qh(t,e,i,n,this.x,this.y,this),this},s.kA=function(t,e){return A.qh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},s.yA=function(t,e,i,n){return A.Oo(this.x,this.y,t,e,i,n,this),this},s.zA=function(t,e){return A.Oo(this.x,this.y,t.x,t.y,e.width,e.height,this),this},s.yi=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},s.zi=function(t,e,i,n,r){return this.x=t+r.x*i+r.offsetX,this.y=e+r.y*n+r.offsetY,this},s.transform=function(t){return t.Ga(this),this};function pi(t,e){return e.Cd(t),t}function di(t,e,i,n,r,o){var l=r-i,u=o-n,h=l*l+u*u;i-=t,n-=e;var f=-i*l-n*u;return 0>=f||f>=h?(l=r-t,u=o-e,Math.min(i*i+n*n,l*l+u*u)):(t=l*n-u*i,t*t/h)}function po(t,e,i,n){return t=i-t,e=n-e,t*t+e*e}function u0(t,e,i,n){return t=i-t,e=n-e,t===0?0<e?90:0>e?270:0:e===0?0<t?0:180:isNaN(t)||isNaN(e)?0:(n=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n)}s.w=function(){return isFinite(this.x)&&isFinite(this.y)},C.alloc=function(){var t=h0.pop();return t===void 0?new C:t},C.allocAt=function(t,e){var i=h0.pop();return i===void 0?new C(t,e):(i.x=t,i.y=e,i)},C.free=function(t){h0.push(t)},C.prototype.isReal=C.prototype.w,C.prototype.setSpot=C.prototype.zi,C.prototype.setRectSpot=C.prototype.yi,C.prototype.snapToGridPoint=C.prototype.zA,C.prototype.snapToGrid=C.prototype.yA,C.prototype.projectOntoLineSegmentPoint=C.prototype.kA,C.prototype.projectOntoLineSegment=C.prototype.jA,C.intersectingLineSegments=function(t,e,i,n,r,o,l,u){return A.Rl(t,e,i,n,r,o,l,u)},C.prototype.compareWithLineSegmentPoint=C.prototype.Wy,C.compareWithLineSegment=function(t,e,i,n,r,o){return A.Fl(t,e,i,n,r,o)},C.prototype.direction=C.prototype.direction,C.prototype.directionPoint=C.prototype.ab,C.prototype.normalize=C.prototype.normalize,C.prototype.distanceSquared=C.prototype.zd,C.prototype.distanceSquaredPoint=C.prototype.Bf,C.prototype.scale=C.prototype.scale,C.prototype.rotate=C.prototype.rotate,C.prototype.offset=C.prototype.offset,C.prototype.subtract=C.prototype.re,C.prototype.add=C.prototype.add,C.prototype.equalsApprox=C.prototype.Xa,C.prototype.equalTo=C.prototype.ii,C.prototype.equals=C.prototype.D,C.prototype.set=C.prototype.set,C.prototype.setTo=C.prototype.sg;var h0=[];C.className="Point",C.parse=dw,C.stringify=gw,C.distanceLineSegmentSquared=di,C.distanceSquared=po,C.direction=u0,C.Origin=co=new C(0,0).ja(),C.InfiniteTopLeft=o0=new C(-1/0,-1/0).ja(),C.InfiniteBottomRight=s0=new C(1/0,1/0).ja(),C.SixPoint=l0=new C(6,6).ja(),C.NoPoint=Mp=new C(NaN,NaN).ja(),C.parse=dw,C.stringify=gw,C.distanceLineSegmentSquared=di,C.distanceSquared=po,C.direction=u0;function ht(t,e){t===void 0?this.height=this.width=0:typeof t=="number"&&(0<=t||isNaN(t))&&typeof e=="number"&&(0<=e||isNaN(e))?(this.width=t,this.height=e):O("Invalid arguments to Size constructor: "+t+", "+e),this._isFrozen=!1}var Ql,Sp,a0,Jl,mw,f0,kp;ht.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},ht.prototype.h=function(t,e){return this.width=t,this.height=e,this},ht.prototype.sg=function(t,e){return this.width=t,this.height=e,this},ht.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},ht.prototype.copy=function(){var t=new ht;return t.width=this.width,t.height=this.height,t},s=ht.prototype,s.ja=function(){return this._isFrozen=!0,Object.freeze(this),this},s.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this._isFrozen=!1,this};function vw(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;return(n=t[e++])&&(r=parseFloat(n)),new ht(i,r)}return new ht}function xw(t){return t.width.toString()+" "+t.height.toString()}s.toString=function(){return"Size("+this.width+","+this.height+")"},s.D=function(t){return t instanceof ht?this.width===t.width&&this.height===t.height:!1},s.ii=function(t,e){return this.width===t&&this.height===e},s.Xa=function(t){return A.B(this.width,t.width)&&A.B(this.height,t.height)},s.Bc=function(t,e){return t=this.width+t,this.width=0<=t?t:0,e=this.height+e,this.height=0<=e?e:0,this},s.w=function(){return isFinite(this.width)&&isFinite(this.height)},ht.alloc=function(){var t=ww.pop();return t===void 0?new ht:t},ht.free=function(t){ww.push(t)},ht.prototype.isReal=ht.prototype.w,ht.prototype.inflate=ht.prototype.Bc,ht.prototype.equalsApprox=ht.prototype.Xa,ht.prototype.equalTo=ht.prototype.ii,ht.prototype.equals=ht.prototype.D,ht.prototype.set=ht.prototype.set,ht.prototype.setTo=ht.prototype.sg;var ww=[];ht.className="Size",ht.parse=vw,ht.stringify=xw,ht.ZeroSize=Ql=new ht(0,0).ja(),ht.OneSize=Sp=new ht(1,1).ja(),ht.SixSize=a0=new ht(6,6).ja(),ht.EightSize=Jl=new ht(8,8).ja(),ht.TenSize=mw=new ht(10,10).ja(),ht.InfiniteSize=f0=new ht(1/0,1/0).ja(),ht.NoSize=kp=new ht(NaN,NaN).ja(),ht.parse=vw,ht.stringify=xw;function E(t,e,i,n){t===void 0?this.height=this.width=this.y=this.x=0:typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&(0<=i||isNaN(i))&&typeof n=="number"&&(0<=n||isNaN(n))?(this.x=t,this.y=e,this.width=i,this.height=n):t instanceof C?(i=t.x,t=t.y,e instanceof C?(n=e.x,e=e.y,this.x=Math.min(i,n),this.y=Math.min(t,e),this.width=Math.abs(i-n),this.height=Math.abs(t-e)):e instanceof ht?(this.x=i,this.y=t,this.width=e.width,this.height=e.height):O("Incorrect second argument supplied to Rect constructor "+e)):O("Invalid arguments to Rect constructor: "+t+", "+e+", "+i+", "+n),this._isFrozen=!1}s=E.prototype,s.assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},s.h=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this};function go(t,e,i){t.width=e,t.height=i}s.sg=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},s.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},s.dd=function(t){return this.x=t.x,this.y=t.y,this},s.xA=function(t){return this.width=t.width,this.height=t.height,this},E.prototype.copy=function(){var t=new E;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},s=E.prototype,s.ja=function(){return this._isFrozen=!0,Object.freeze(this),this},s.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this._isFrozen=!1,this};function Mw(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;(n=t[e++])&&(r=parseFloat(n));for(var o=0;t[e]==="";)e++;(n=t[e++])&&(o=parseFloat(n));for(var l=0;t[e]==="";)e++;return(n=t[e++])&&(l=parseFloat(n)),new E(i,r,o,l)}return new E}function Sw(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}s.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},s.D=function(t){return t instanceof E?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},s.ii=function(t,e,i,n){return this.x===t&&this.y===e&&this.width===i&&this.height===n},s.Xa=function(t){return A.B(this.x,t.x)&&A.B(this.y,t.y)&&A.B(this.width,t.width)&&A.B(this.height,t.height)};function c0(t,e){return A.$(t.x,e.x)&&A.$(t.y,e.y)&&A.$(t.width,e.width)&&A.$(t.height,e.height)}s.ca=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},s.Re=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},s.contains=function(t,e,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=e&&e+n<=this.y+this.height},s.offset=function(t,e){return this.x+=t,this.y+=e,this},s.Bc=function(t,e){return Cp(this,e,t,e,t)},s.Do=function(t){return Cp(this,t.top,t.right,t.bottom,t.left)},s.Hv=function(t){return Cp(this,-t.top,-t.right,-t.bottom,-t.left)},s.Mz=function(t,e,i,n){return Cp(this,t,e,i,n)};function Cp(t,e,i,n,r){var o=t.width;return i+r<=-o?(t.x+=o/2,t.width=0):(t.x-=r,t.width+=i+r),i=t.height,e+n<=-i?(t.y+=i/2,t.height=0):(t.y-=e,t.height+=e+n),t}s.Gx=function(t){return kw(this,t.x,t.y,t.width,t.height)},s.Wu=function(t,e,i,n){return kw(this,t,e,i,n)};function kw(t,e,i,n,r){var o=Math.max(t.x,e),l=Math.max(t.y,i);return e=Math.min(t.x+t.width,e+n),i=Math.min(t.y+t.height,i+r),t.x=o,t.y=l,t.width=Math.max(0,e-o),t.height=Math.max(0,i-l),t}s.Yc=function(t){return this.Xu(t.x,t.y,t.width,t.height)},s.Xu=function(t,e,i,n){var r=this.width,o=this.x;return r!==1/0&&i!==1/0&&(r+=o,i+=t,isNaN(i)||isNaN(r)||o>i||t>r)?!1:(t=this.height,i=this.y,!(t!==1/0&&n!==1/0&&(t+=i,n+=e,isNaN(n)||isNaN(t)||i>n||e>t)))};function Cw(t,e){var i=t.width,n=t.x,r=e.x-10;return n>e.width+10+10+r||r>i+n?!1:(i=t.height,t=t.y,n=e.y-10,!(t>e.height+10+10+n||n>i+t))}s.Ye=function(t){return Oe(this,t.x,t.y,0,0)},s.ed=function(t){return Oe(this,t.x,t.y,t.width,t.height)},s.Mv=function(t,e,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),Oe(this,t,e,i,n)};function Oe(t,e,i,n,r){var o=Math.min(t.x,e),l=Math.min(t.y,i);return e=Math.max(t.x+t.width,e+n),i=Math.max(t.y+t.height,i+r),t.x=o,t.y=l,t.width=e-o,t.height=i-l,t}s.zi=function(t,e,i){return this.x=t-i.offsetX-i.x*this.width,this.y=e-i.offsetY-i.y*this.height,this};function sr(t,e,i,n,r,o,l,u){return l===void 0&&(l=0),u===void 0&&(u=0),t<=r&&r+l<=t+i&&e<=o&&o+u<=e+n}function Pw(t,e,i,n,r,o,l,u){return t>l+r||r>i+t?!1:!(e>u+o||o>n+e)}s.w=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},s.Rz=function(){return this.width===0&&this.height===0},E.alloc=function(){var t=p0.pop();return t===void 0?new E:t},E.allocAt=function(t,e,i,n){var r=p0.pop();return r===void 0?new E(t,e,i,n):r.h(t,e,i,n)},E.free=function(t){p0.push(t)},Y.Object.defineProperties(E.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new C(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new ht(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new C(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),E.prototype.isEmpty=E.prototype.Rz,E.prototype.isReal=E.prototype.w,E.intersectsLineSegment=function(t,e,i,n,r,o,l,u){return A.Hx(t,e,i,n,r,o,l,u)},E.prototype.setSpot=E.prototype.zi,E.prototype.union=E.prototype.Mv,E.prototype.unionRect=E.prototype.ed,E.prototype.unionPoint=E.prototype.Ye,E.prototype.intersects=E.prototype.Xu,E.prototype.intersectsRect=E.prototype.Yc,E.prototype.intersect=E.prototype.Wu,E.prototype.intersectRect=E.prototype.Gx,E.prototype.grow=E.prototype.Mz,E.prototype.subtractMargin=E.prototype.Hv,E.prototype.addMargin=E.prototype.Do,E.prototype.inflate=E.prototype.Bc,E.prototype.offset=E.prototype.offset,E.prototype.contains=E.prototype.contains,E.prototype.containsRect=E.prototype.Re,E.prototype.containsPoint=E.prototype.ca,E.prototype.equalsApprox=E.prototype.Xa,E.prototype.equalTo=E.prototype.ii,E.prototype.equals=E.prototype.D,E.prototype.setSize=E.prototype.xA,E.prototype.setPoint=E.prototype.dd,E.prototype.set=E.prototype.set,E.prototype.setTo=E.prototype.sg;var Pp=null,Nw=null,p0=[];E.className="Rect",E.parse=Mw,E.stringify=Sw,E.contains=sr,E.intersects=Pw,E.ZeroRect=Pp=new E(0,0,0,0).ja(),E.NoRect=Nw=new E(NaN,NaN,NaN,NaN).ja(),E.parse=Mw,E.stringify=Sw,E.contains=sr,E.intersects=Pw;function Dt(t,e,i,n){t===void 0?this.left=this.bottom=this.right=this.top=0:e===void 0?this.left=this.bottom=this.right=this.top=t:i===void 0?(this.top=t,this.right=e,this.bottom=t,this.left=e):n!==void 0?(this.top=t,this.right=e,this.bottom=i,this.left=n):O("Invalid arguments to Margin constructor: "+t+", "+e+", "+i+", "+n),this._isFrozen=!1}Dt.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Dt.prototype.sg=function(t,e,i,n){return this.top=t,this.right=e,this.bottom=i,this.left=n,this},Dt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Dt.prototype.copy=function(){var t=new Dt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},s=Dt.prototype,s.ja=function(){return this._isFrozen=!0,Object.freeze(this),this},s.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this._isFrozen=!1,this};function Tw(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=NaN;t[e]==="";)e++;var n=t[e++];if(n&&(i=parseFloat(n)),isNaN(i))return new Dt;for(var r=NaN;t[e]==="";)e++;if((n=t[e++])&&(r=parseFloat(n)),isNaN(r))return new Dt(i);for(var o=NaN;t[e]==="";)e++;if((n=t[e++])&&(o=parseFloat(n)),isNaN(o))return new Dt(i,r);for(var l=NaN;t[e]==="";)e++;return(n=t[e++])&&(l=parseFloat(n)),isNaN(l)?new Dt(i,r):new Dt(i,r,o,l)}return new Dt}function Lw(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}s.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},s.D=function(t){return t instanceof Dt?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},s.ii=function(t,e,i,n){return this.top===t&&this.right===e&&this.bottom===i&&this.left===n},s.Xa=function(t){return A.B(this.top,t.top)&&A.B(this.right,t.right)&&A.B(this.bottom,t.bottom)&&A.B(this.left,t.left)},s.w=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Dt.alloc=function(){var t=Fw.pop();return t===void 0?new Dt:t},Dt.free=function(t){Fw.push(t)},Dt.prototype.isReal=Dt.prototype.w,Dt.prototype.equalsApprox=Dt.prototype.Xa,Dt.prototype.equalTo=Dt.prototype.ii,Dt.prototype.equals=Dt.prototype.D,Dt.prototype.set=Dt.prototype.set,Dt.prototype.setTo=Dt.prototype.sg;var Ju=null,d0=null,Fw=[];Dt.className="Margin",Dt.parse=Tw,Dt.stringify=Lw,Dt.ZeroMargin=Ju=new Dt(0,0,0,0).ja(),Dt.TwoMargin=d0=new Dt(2,2,2,2).ja(),Dt.parse=Tw,Dt.stringify=Lw;function lt(t,e,i,n){t===void 0?this.offsetY=this.offsetX=this.y=this.x=0:(e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=e,this.offsetX=i,this.offsetY=n),this._isFrozen=!1}var Ke,Je,yo,qu,ba,Et,tf,bu,ql,Yr,th,eh,ih,nh,g0,y0,m0,v0,x0,w0,M0,S0,k0,C0,P0,_e,Aw,jw,Np,Dw,Cn,Pn,Ri,Nn,N0,T0;lt.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},lt.prototype.sg=function(t,e,i,n){return this.x=t,this.y=e,this.offsetX=i,this.offsetY=n,this},lt.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},lt.prototype.copy=function(){var t=new lt;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},s=lt.prototype,s.ja=function(){return this._isFrozen=!0,Object.freeze(this),this},s.J=function(){return this._isFrozen||Object.isFrozen(this)?this:this.copy().freeze()},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this._isFrozen=!1,this};function hn(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function L0(t){if(typeof t=="string"){if(t=t.trim(),t==="None")return Ke;if(t==="TopLeft")return Je;if(t==="Top"||t==="TopCenter"||t==="MiddleTop")return yo;if(t==="TopRight")return qu;if(t==="Left"||t==="LeftCenter"||t==="MiddleLeft")return ba;if(t==="Center")return Et;if(t==="Right"||t==="RightCenter"||t==="MiddleRight")return tf;if(t==="BottomLeft")return bu;if(t==="Bottom"||t==="BottomCenter"||t==="MiddleBottom")return ql;if(t==="BottomRight")return Yr;if(t==="TopSide")return th;if(t==="LeftSide")return eh;if(t==="RightSide")return ih;if(t==="BottomSide")return nh;if(t==="TopBottomSides")return g0;if(t==="LeftRightSides")return y0;if(t==="TopLeftSides")return m0;if(t==="TopRightSides")return v0;if(t==="BottomLeftSides")return x0;if(t==="BottomRightSides")return w0;if(t==="NotTopSide")return M0;if(t==="NotLeftSide")return S0;if(t==="NotRightSide")return k0;if(t==="NotBottomSide")return C0;if(t==="AllSides")return P0;if(t==="Default")return _e;t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n!==void 0&&0<n.length&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;n=t[e++],n!==void 0&&0<n.length&&(r=parseFloat(n));for(var o=0;t[e]==="";)e++;n=t[e++],n!==void 0&&0<n.length&&(o=parseFloat(n));for(var l=0;t[e]==="";)e++;return n=t[e++],n!==void 0&&0<n.length&&(l=parseFloat(n)),new lt(i,r,o,l)}return new lt}function Ow(t){return t.sb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}s.toString=function(){return this.sb()?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.D(Ke)?"None":this.D(Je)?"TopLeft":this.D(yo)?"Top":this.D(qu)?"TopRight":this.D(ba)?"Left":this.D(Et)?"Center":this.D(tf)?"Right":this.D(bu)?"BottomLeft":this.D(ql)?"Bottom":this.D(Yr)?"BottomRight":this.D(th)?"TopSide":this.D(eh)?"LeftSide":this.D(ih)?"RightSide":this.D(nh)?"BottomSide":this.D(g0)?"TopBottomSides":this.D(y0)?"LeftRightSides":this.D(m0)?"TopLeftSides":this.D(v0)?"TopRightSides":this.D(x0)?"BottomLeftSides":this.D(w0)?"BottomRightSides":this.D(M0)?"NotTopSide":this.D(S0)?"NotLeftSide":this.D(k0)?"NotRightSide":this.D(C0)?"NotBottomSide":this.D(P0)?"AllSides":this.D(_e)?"Default":"None"},s.D=function(t){return t instanceof lt?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},s.iv=function(){return new lt(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},s.Hf=function(t){if(!this.$c())return!1;if(!t.$c())if(t.D(Aw))t=eh;else if(t.D(jw))t=ih;else if(t.D(Np))t=th;else if(t.D(Dw))t=nh;else return!1;return t=t.offsetY,(this.offsetY&t)===t},s.sb=function(){return!isNaN(this.x)&&!isNaN(this.y)},s.Nc=function(){return isNaN(this.x)||isNaN(this.y)},s.$c=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0},s.ys=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0},s.$b=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0},lt.alloc=function(){var t=Iw.pop();return t===void 0?new lt:t},lt.free=function(t){Iw.push(t)},lt.prototype.isDefault=lt.prototype.$b,lt.prototype.isNone=lt.prototype.ys,lt.prototype.isSide=lt.prototype.$c,lt.prototype.isNoSpot=lt.prototype.Nc,lt.prototype.isSpot=lt.prototype.sb,lt.prototype.includesSide=lt.prototype.Hf,lt.prototype.opposite=lt.prototype.iv,lt.prototype.equals=lt.prototype.D,lt.prototype.set=lt.prototype.set,lt.prototype.setTo=lt.prototype.sg;var Iw=[];lt.className="Spot",lt.parse=L0,lt.stringify=Ow,lt.None=Ke=hn(new lt(0,0,0,0),0).ja(),lt.Default=_e=hn(new lt(0,0,-1,0),-1).ja(),lt.TopLeft=Je=new lt(0,0,0,0).ja(),lt.TopCenter=yo=new lt(.5,0,0,0).ja(),lt.TopRight=qu=new lt(1,0,0,0).ja(),lt.LeftCenter=ba=new lt(0,.5,0,0).ja(),lt.Center=Et=new lt(.5,.5,0,0).ja(),lt.RightCenter=tf=new lt(1,.5,0,0).ja(),lt.BottomLeft=bu=new lt(0,1,0,0).ja(),lt.BottomCenter=ql=new lt(.5,1,0,0).ja(),lt.BottomRight=Yr=new lt(1,1,0,0).ja(),lt.MiddleTop=Cn=yo,lt.MiddleLeft=Pn=ba,lt.MiddleRight=Ri=tf,lt.MiddleBottom=Nn=ql,lt.Top=Np=yo,lt.Left=Aw=ba,lt.Right=jw=tf,lt.Bottom=Dw=ql,lt.TopSide=th=hn(new lt(0,0,1,1),1).ja(),lt.LeftSide=eh=hn(new lt(0,0,1,2),1).ja(),lt.RightSide=ih=hn(new lt(0,0,1,4),1).ja(),lt.BottomSide=nh=hn(new lt(0,0,1,8),1).ja(),lt.TopBottomSides=g0=hn(new lt(0,0,1,9),1).ja(),lt.LeftRightSides=y0=hn(new lt(0,0,1,6),1).ja(),lt.TopLeftSides=m0=hn(new lt(0,0,1,3),1).ja(),lt.TopRightSides=v0=hn(new lt(0,0,1,5),1).ja(),lt.BottomLeftSides=x0=hn(new lt(0,0,1,10),1).ja(),lt.BottomRightSides=w0=hn(new lt(0,0,1,12),1).ja(),lt.NotTopSide=M0=hn(new lt(0,0,1,14),1).ja(),lt.NotLeftSide=S0=hn(new lt(0,0,1,13),1).ja(),lt.NotRightSide=k0=hn(new lt(0,0,1,11),1).ja(),lt.NotBottomSide=C0=hn(new lt(0,0,1,7),1).ja(),lt.AllSides=P0=hn(new lt(0,0,1,15),1).ja(),N0=new lt(.156,.156).ja(),T0=new lt(.844,.844).ja(),lt.parse=L0,lt.stringify=Ow;function vt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}vt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},vt.prototype.setTransform=function(t,e,i,n,r,o){return this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.dx=r,this.dy=o,this},vt.prototype.copy=function(){var t=new vt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},vt.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},vt.prototype.D=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},vt.prototype.ws=function(){return this.dx===0&&this.dy===0&&this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1},vt.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},vt.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,r=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},vt.prototype.ev=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,r=-t.m21*e,o=t.m11*e,l=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*i+this.m21*n,i=this.m12*i+this.m22*n,n=this.m11*r+this.m21*o,r=this.m12*r+this.m22*o,this.dx=this.m11*l+this.m21*t+this.dx,this.dy=this.m12*l+this.m22*t+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},vt.prototype.Uj=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,i=-this.m21*t,n=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),o=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=i,this.m22=n,this.dx=r,this.dy=o,this},vt.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),t===0)return this;if(this.translate(e,i),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var r=this.m12*t+this.m22*n,o=this.m11*-n+this.m21*t,l=this.m12*-n+this.m22*t;return this.m11=this.m11*t+this.m21*n,this.m12=r,this.m21=o,this.m22=l,this.translate(-e,-i),this},s=vt.prototype,s.translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},s.scale=function(t,e){return e===void 0&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},s.Ga=function(t){var e=t.x,i=t.y;return t.h(e*this.m11+i*this.m21+this.dx,e*this.m12+i*this.m22+this.dy)},s.Cd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=t.x,n=t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},s.Gu=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=1.25*t.x,n=1.2*t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},s.pp=function(t){var e=t.x,i=t.y,n=e+t.width,r=i+t.height,o=this.m11,l=this.m12,u=this.m21,h=this.m22,f=this.dx,c=this.dy,p=e*o+i*u+f,g=e*l+i*h+c,m=n*o+i*u+f,v=n*l+i*h+c;return i=e*o+r*u+f,e=e*l+r*h+c,o=n*o+r*u+f,n=n*l+r*h+c,r=Math.min(p,m),p=Math.max(p,m),m=Math.min(g,v),g=Math.max(g,v),r=Math.min(r,i),p=Math.max(p,i),m=Math.min(m,e),g=Math.max(g,e),r=Math.min(r,o),p=Math.max(p,o),m=Math.min(m,n),g=Math.max(g,n),t.h(r,m,p-r,g-m),t},vt.alloc=function(){var t=Ew.pop();return t===void 0?new vt:t},vt.free=function(t){Ew.push(t)},vt.prototype.transformRect=vt.prototype.pp,vt.prototype.transformPoint=vt.prototype.Ga,vt.prototype.scale=vt.prototype.scale,vt.prototype.translate=vt.prototype.translate,vt.prototype.rotate=vt.prototype.rotate,vt.prototype.invert=vt.prototype.Uj,vt.prototype.multiplyInverted=vt.prototype.ev,vt.prototype.multiply=vt.prototype.multiply,vt.prototype.reset=vt.prototype.reset,vt.prototype.isIdentity=vt.prototype.ws,vt.prototype.equals=vt.prototype.D,vt.prototype.setTransform=vt.prototype.setTransform,vt.prototype.set=vt.prototype.set;var Ew=[];vt.className="Transform",vt.xF="54a702f3e53909c447824c6706603faf4c";var A={EA:"7da71ca0ad381e90",wg:(Math.sqrt(2)-1)/3*4,Wv:null,sqrt:function(t){if(0>=t)return 0;var e=A.Wv;if(e===null){e=[];for(var i=0;2e3>=i;i++)e[i]=Math.sqrt(i);A.Wv=e}return 1>t?(i=1/t,2e3>=i?1/e[i|0]:Math.sqrt(t)):2e3>=t?e[t|0]:Math.sqrt(t)},B:function(t,e){return t-=e,.5>t&&-.5<t},$:function(t,e){return t-=e,5e-8>t&&-5e-8<t},ac:function(t,e,i,n,r,o,l){if(0>=r&&(r=1e-6),t<i)var u=t,h=i;else u=i,h=t;if(e<n)var f=e,c=n;else f=n,c=e;if(t===i)return f<=l&&l<=c&&t-r<=o&&o<=t+r;if(e===n)return u<=o&&o<=h&&e-r<=l&&l<=e+r;if(h+=r,u-=r,u<=o&&o<=h&&(c+=r,f-=r,f<=l&&l<=c))if(h-u>c-f)if(t-i>r||i-t>r){if(o=(n-e)/(i-t)*(o-t)+e,o-r<=l&&l<=o+r)return!0}else return!0;else if(e-n>r||n-e>r){if(l=(i-t)/(n-e)*(l-e)+t,l-r<=o&&o<=l+r)return!0}else return!0;return!1},cs:function(t,e,i,n,r,o,l,u,h,f,c,p){if(A.ac(t,e,l,u,p,i,n)&&A.ac(t,e,l,u,p,r,o))return A.ac(t,e,l,u,p,f,c);var g=(t+i)/2,m=(e+n)/2,v=(i+r)/2,x=(n+o)/2;r=(r+l)/2,o=(o+u)/2,n=(g+v)/2,i=(m+x)/2,v=(v+r)/2,x=(x+o)/2;var k=(n+v)/2,S=(i+x)/2;return A.cs(t,e,g,m,n,i,k,S,h,f,c,p)||A.cs(k,S,v,x,r,o,l,u,h,f,c,p)},ex:function(t,e,i,n,r,o,l,u,h){var f=(i+r)/2,c=(n+o)/2;return h.h((((t+i)/2+f)/2+(f+(r+l)/2)/2)/2,(((e+n)/2+c)/2+(c+(o+u)/2)/2)/2),h},Oy:function(t,e,i,n,r,o,l,u){var h=(i+r)/2,f=(n+o)/2;return u0(((t+i)/2+h)/2,((e+n)/2+f)/2,(h+(r+l)/2)/2,(f+(o+u)/2)/2)},Dl:function(t,e,i,n,r,o,l,u,h,f){if(A.ac(t,e,l,u,h,i,n)&&A.ac(t,e,l,u,h,r,o))Oe(f,t,e,0,0),Oe(f,l,u,0,0);else{var c=(t+i)/2,p=(e+n)/2,g=(i+r)/2,m=(n+o)/2;r=(r+l)/2,o=(o+u)/2,n=(c+g)/2,i=(p+m)/2,g=(g+r)/2,m=(m+o)/2;var v=(n+g)/2,x=(i+m)/2;A.Dl(t,e,c,p,n,i,v,x,h,f),A.Dl(v,x,g,m,r,o,l,u,h,f)}return f},Qe:function(t,e,i,n,r,o,l,u,h,f){if(A.ac(t,e,l,u,h,i,n)&&A.ac(t,e,l,u,h,r,o))f.length===0&&(f.push(t),f.push(e)),f.push(l),f.push(u);else{var c=(t+i)/2,p=(e+n)/2,g=(i+r)/2,m=(n+o)/2;r=(r+l)/2,o=(o+u)/2,n=(c+g)/2,i=(p+m)/2,g=(g+r)/2,m=(m+o)/2;var v=(n+g)/2,x=(i+m)/2;A.Qe(t,e,c,p,n,i,v,x,h,f),A.Qe(v,x,g,m,r,o,l,u,h,f)}return f},lv:function(t,e,i,n,r,o,l,u,h,f){if(A.ac(t,e,r,o,f,i,n))return A.ac(t,e,r,o,f,u,h);var c=(t+i)/2,p=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var g=(c+i)/2,m=(p+n)/2;return A.lv(t,e,c,p,g,m,l,u,h,f)||A.lv(g,m,i,n,r,o,l,u,h,f)},SA:function(t,e,i,n,r,o,l){return l.h(((t+i)/2+(i+r)/2)/2,((e+n)/2+(n+o)/2)/2),l},kv:function(t,e,i,n,r,o,l,u){if(A.ac(t,e,r,o,l,i,n))Oe(u,t,e,0,0),Oe(u,r,o,0,0);else{var h=(t+i)/2,f=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var c=(h+i)/2,p=(f+n)/2;A.kv(t,e,h,f,c,p,l,u),A.kv(c,p,i,n,r,o,l,u)}return u},ep:function(t,e,i,n,r,o,l,u){if(A.ac(t,e,r,o,l,i,n))u.length===0&&(u.push(t),u.push(e)),u.push(r),u.push(o);else{var h=(t+i)/2,f=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var c=(h+i)/2,p=(f+n)/2;A.ep(t,e,h,f,c,p,l,u),A.ep(c,p,i,n,r,o,l,u)}return u},Fo:function(t,e,i,n,r,o,l,u,h,f,c,p,g,m){if(A.ac(t,e,l,u,g,i,n)&&A.ac(t,e,l,u,g,r,o))return!A.Rl(t,e,l,u,h,f,c,p)||(g=(t-l)*(f-p)-(e-u)*(h-c),g===0)?!1:(m.h(((t*u-e*l)*(h-c)-(t-l)*(h*p-f*c))/g,((t*u-e*l)*(f-p)-(e-u)*(h*p-f*c))/g),!0);var v=(t+i)/2,x=(e+n)/2,k=(i+r)/2,S=(n+o)/2;r=(r+l)/2,o=(o+u)/2,n=(v+k)/2,i=(x+S)/2,k=(k+r)/2,S=(S+o)/2;var P=(n+k)/2,N=(i+S)/2,T=1/0,F=!1,D=0,X=0;return A.Fo(t,e,v,x,n,i,P,N,h,f,c,p,g,m)&&(t=(m.x-h)*(m.x-h)+(m.y-f)*(m.y-f),t<T&&(T=t,F=!0,D=m.x,X=m.y)),A.Fo(P,N,k,S,r,o,l,u,h,f,c,p,g,m)&&(m.x-h)*(m.x-h)+(m.y-f)*(m.y-f)<T&&(F=!0,D=m.x,X=m.y),F&&(m.x=D,m.y=X),F},Go:function(t,e,i,n,r,o,l,u,h,f,c,p,g){var m=0;if(A.ac(t,e,l,u,g,i,n)&&A.ac(t,e,l,u,g,r,o)){if(g=(t-l)*(f-p)-(e-u)*(h-c),g===0)return m;var v=((t*u-e*l)*(h-c)-(t-l)*(h*p-f*c))/g,x=((t*u-e*l)*(f-p)-(e-u)*(h*p-f*c))/g;if(v>=c)return m;if((h>c?h-c:c-h)<(f>p?f-p:p-f)){if(e<u?(h=e,t=u):(h=u,t=e),x<h||x>t)return m}else if(t<l?(h=t,t=l):h=l,v<h||v>t)return m;0<g?m++:0>g&&m--}else{v=(t+i)/2,x=(e+n)/2;var k=(i+r)/2,S=(n+o)/2;r=(r+l)/2,o=(o+u)/2,n=(v+k)/2,i=(x+S)/2,k=(k+r)/2,S=(S+o)/2;var P=(n+k)/2,N=(i+S)/2;m+=A.Go(t,e,v,x,n,i,P,N,h,f,c,p,g),m+=A.Go(P,N,k,S,r,o,l,u,h,f,c,p,g)}return m},qh:function(t,e,i,n,r,o,l){return A.$(t,i)?(e<n?(i=e,e=n):i=n,o<i?(l.h(t,i),!1):o>e?(l.h(t,e),!1):(l.h(t,o),!0)):A.$(e,n)?(t<i?(n=t,t=i):n=i,r<n?(l.h(n,e),!1):r>t?(l.h(t,e),!1):(l.h(r,e),!0)):(r=((t-r)*(t-i)+(e-o)*(e-n))/((i-t)*(i-t)+(n-e)*(n-e)),-5e-6>r?(l.h(t,e),!1):1.000005<r?(l.h(i,n),!1):(l.h(t+r*(i-t),e+r*(n-e)),!0))},Ve:function(t,e,i,n,r,o,l,u,h){return A.B(t,i)&&A.B(e,n)?(h.h(t,e),!1):A.$(r,l)?A.$(t,i)?(A.qh(t,e,i,n,r,o,h),!1):A.qh(t,e,i,n,r,(n-e)/(i-t)*(r-t)+e,h):(u=(u-o)/(l-r),A.$(t,i)?(i=u*(t-r)+o,e<n?(r=e,e=n):r=n,i<r?(h.h(t,r),!1):i>e?(h.h(t,e),!1):(h.h(t,i),!0)):(l=(n-e)/(i-t),A.$(u,l)?(A.qh(t,e,i,n,r,o,h),!1):(r=(l*t-u*r+o-e)/(l-u),A.$(l,0)?(t<i?(n=t,t=i):n=i,r<n?(h.h(n,e),!1):r>t?(h.h(t,e),!1):(h.h(r,e),!0)):A.qh(t,e,i,n,r,l*(r-t)+e,h))))},QA:function(t,e,i,n,r){return A.Ve(i.x,i.y,n.x,n.y,t.x,t.y,e.x,e.y,r)},OA:function(t,e,i,n,r,o,l,u,h,f){function c(k,S){var P=(k-t)*(k-t)+(S-e)*(S-e);P<p&&(p=P,h.h(k,S))}var p=1/0;c(h.x,h.y);var g=0,m=0,v=0,x=0;if(r<l?(g=r,m=l):(g=l,m=r),o<u?(v=r,x=l):(v=l,x=r),g=(m-g)/2+f,f=(x-v)/2+f,r=(r+l)/2,o=(o+u)/2,g===0||f===0)return h;if(.5>(i>t?i-t:t-i)){if(g=1-(i-r)*(i-r)/(g*g),0>g)return h;g=Math.sqrt(g),n=-f*g+o,c(i,f*g+o),c(i,n)}else{if(i=(n-e)/(i-t),n=1/(g*g)+i*i/(f*f),u=2*i*(e-i*t)/(f*f)-2*i*o/(f*f)-2*r/(g*g),g=u*u-4*n*(2*i*t*o/(f*f)-2*e*o/(f*f)+o*o/(f*f)+r*r/(g*g)-1+(e-i*t)*(e-i*t)/(f*f)),0>g)return h;g=Math.sqrt(g),f=(-u+g)/(2*n),c(f,i*f-i*t+e),g=(-u-g)/(2*n),c(g,i*g-i*t+e)}return h},Ff:function(t,e,i,n,r,o,l,u,h){var f=1e21,c=t,p=e;if(A.Ve(t,e,t,n,r,o,l,u,h)){var g=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o);g<f&&(f=g,c=h.x,p=h.y)}return A.Ve(i,e,i,n,r,o,l,u,h)&&(g=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o),g<f&&(f=g,c=h.x,p=h.y)),A.Ve(t,e,i,e,r,o,l,u,h)&&(e=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o),e<f&&(f=e,c=h.x,p=h.y)),A.Ve(t,n,i,n,r,o,l,u,h)&&(t=(h.x-r)*(h.x-r)+(h.y-o)*(h.y-o),t<f&&(f=t,c=h.x,p=h.y)),h.h(c,p),1e21>f},us:function(t,e,i){return A.Hx(t.x,t.y,t.width,t.height,e.x,e.y,i.x,i.y)},Hx:function(t,e,i,n,r,o,l,u){var h=t+i,f=e+n;return r===l?(o<u?(l=o,o=u):l=u,t<=r&&r<=h&&l<=f&&o>=e):o===u?(r<l?(u=r,r=l):u=l,e<=o&&o<=f&&u<=h&&r>=t):!!(sr(t,e,i,n,r,o)||sr(t,e,i,n,l,u)||A.Rl(t,e,h,e,r,o,l,u)||A.Rl(h,e,h,f,r,o,l,u)||A.Rl(h,f,t,f,r,o,l,u)||A.Rl(t,f,t,e,r,o,l,u))},Rl:function(t,e,i,n,r,o,l,u){return t===i&&e===n&&r===l&&o===u?t===r&&e===o:0>=A.Fl(t,e,i,n,r,o)*A.Fl(t,e,i,n,l,u)&&0>=A.Fl(r,o,l,u,t,e)*A.Fl(r,o,l,u,i,n)},Fl:function(t,e,i,n,r,o){return i-=t,n-=e,t=r-t,e=o-e,o=t*n-e*i,o===0&&(o=t*i+e*n,0<o&&(o=(t-i)*i+(e-n)*n,0>o&&(o=0))),o},cp:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},lx:function(t,e,i,n,r,o){var l=Math.PI;o||(n*=l/180,r*=l/180);var u=n>r?-1:1;o=[];var h=l/2,f=n;if(n=Math.min(2*l,Math.abs(r-n)),1e-5>n)return h=f+u*Math.min(n,h),u=t+i*Math.cos(f),f=e+i*Math.sin(f),t+=i*Math.cos(h),e+=i*Math.sin(h),i=(u+t)/2,h=(f+e)/2,o.push([u,f,i,h,i,h,t,e]),o;for(;1e-5<n;)r=f+u*Math.min(n,h),o.push(A.$y(i,f,r,t,e)),n-=Math.abs(r-f),f=r;return o},$y:function(t,e,i,n,r){var o=(i-e)/2,l=t*Math.cos(o),u=t*Math.sin(o),h=-u,f=l*l+h*h,c=f+l*l+h*u;return f=4/3*(Math.sqrt(2*f*c)-c)/(l*u-h*l),u=l-f*h,l=h+f*l,h=-l,f=o+e,o=Math.cos(f),f=Math.sin(f),[n+t*Math.cos(e),r+t*Math.sin(e),n+u*o-l*f,r+u*f+l*o,n+u*o-h*f,r+u*f+h*o,n+t*Math.cos(i),r+t*Math.sin(i)]},Oo:function(t,e,i,n,r,o,l){i=Math.floor((t-i)/r)*r+i,n=Math.floor((e-n)/o)*o+n;var u=i;return i+r-t<r/2&&(u=i+r),t=n,n+o-e<o/2&&(t=n+o),l.h(u,t),l},xx:function(t,e){var i=Math.max(t,e);t=Math.min(t,e);var n;do e=i%t,i=n=t,t=e;while(0<e);return n},ez:function(t,e,i,n){var r=0>i,o=0>n;if(t<e)var l=1,u=0;else l=0,u=1;var h=l===0?t:e,f=l===0?i:n;return(l===0?r:o)&&(f=-f),l=u,i=l===0?i:n,(l===0?r:o)&&(i=-i),A.fz(h,l===0?t:e,f,i,0,0)},fz:function(t,e,i,n,r,o){if(0<n)if(0<i){r=t*t,o=e*e,t*=i;var l=e*n,u=-o+l,h=-o+Math.sqrt(t*t+l*l);e=u;for(var f=0;9999999999>f&&(e=.5*(u+h),!(e===u||e===h));++f){var c=t/(e+r),p=l/(e+o);if(c=c*c+p*p-1,0<c)u=e;else if(0>c)h=e;else break}i=r*i/(e+r)-i,n=o*n/(e+o)-n,i=Math.sqrt(i*i+n*n)}else i=Math.abs(n-e);else n=t*t-e*e,o=t*i,o<n?(n=o/n,o=e*Math.sqrt(Math.abs(1-n*n)),i=t*n-i,i=Math.sqrt(i*i+o*o)):i=Math.abs(i-t);return i},Ze:new Xe,vm:new Xe,Mf:new Xe,Nf:0,wm:100};A.za=A.EA;function H(t){Te(this),this.l=2,t===void 0&&(t=H.j),this.na=t,this.Ec=this.Dc=this.pd=this.od=0,t===H.j?this.ee=new q:(H.V===null&&(H.V=new q().freeze()),this.ee=H.V),this.aq=this.ee.Ja,this.Ip=new E().freeze(),this.zm=this.sk=null,this.Am=NaN,this.fg=Je,this.gg=Yr,this.Qk=this.Rk=NaN,this.Uf=oe}H.prototype.copy=function(){var t=new H;if(t.l=this.l&-2,t.na=this.na,t.od=this.od,t.pd=this.pd,t.Dc=this.Dc,t.Ec=this.Ec,this.na===H.j){for(var e=this.ee.s,i=t.ee,n=0;n<e.length;n++)i.add(e[n].copy());t.ee=i}else t.ee=this.ee;return t.aq=this.aq,t.Ip.assign(this.Ip),t.sk=this.sk,t.zm=this.zm,t.Am=this.Am,t.fg=this.fg.J(),t.gg=this.gg.J(),t.Rk=this.Rk,t.Qk=this.Qk,t.Uf=this.Uf,t},H.prototype.ja=function(){return this.freeze(),Object.freeze(this),this},H.prototype.freeze=function(){if(this._isFrozen=!0,this.type!==H.j)return this;var t=this.figures;t.freeze(),t=t.s;for(var e=t.length,i=0;i<e;i++)t[i].freeze();return this},H.prototype.ka=function(){if(Object.isFrozen(this)&&O("cannot thaw constant: "+this),this._isFrozen=!1,this.type!==H.j)return this;var t=this.figures;t.ka(),t=t.s;for(var e=t.length,i=0;i<e;i++)t[i].ka();return this},H.prototype.Xa=function(t){if(!(t instanceof H))return!1;if(this.type!==t.type)return this.type===H.o&&t.type===H.j?Bw(this,t):t.type===H.o&&this.type===H.j?Bw(t,this):!1;if(this.type===H.j){var e=this.figures.s;t=t.figures.s;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Xa(t[n]))return!1;return!0}return A.B(this.startX,t.startX)&&A.B(this.startY,t.startY)&&A.B(this.endX,t.endX)&&A.B(this.endY,t.endY)};function Bw(t,e){return t.type!==H.o||e.type!==H.j?!1:!!(e.figures.count===1&&(e=e.figures.M(0),e.segments.count===1&&A.B(t.startX,e.startX)&&A.B(t.startY,e.startY)&&(e=e.segments.M(0),e.type===$t&&A.B(t.endX,e.endX)&&A.B(t.endY,e.endY))))}H.ia=function(t){return t.toString()},H.prototype.qb=function(t){t.classType===H&&(this.type=t)},H.prototype.toString=function(t){switch(t===void 0&&(t=-1),this.type){case H.o:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case H.u:var e=new E(this.startX,this.startY,0,0);return e.Mv(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case H.F:if(e=new E(this.startX,this.startY,0,0),e.Mv(this.endX,this.endY,0,0),0>t)return t=e.left.toString()+" "+(e.y+e.height/2).toString(),"M"+t+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+(e.right.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var i=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+i+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+(e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t))+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+i;case H.j:e="",i=this.figures.s;for(var n=i.length,r=0;r<n;r++){var o=i[r];0<r&&(e+=" x "),o.isFilled&&(e+="F "),e+=o.toString(t)}return e;default:return this.type.toString()}},H.nb=function(t){t=t.split(/[Xx]/);for(var e=t.length,i="",n=0;n<e;n++){var r=t[n];i=r.match(/[Ff]/)!==null?n===0?i+r:i+("X"+(r[0]===" "?"":" ")+r):i+((n===0?"":"X ")+"F"+(r[0]===" "?"":" ")+r)}return i},H.parse=function(t,e){function i(){return x>=T-1?!0:f[x+1].match(F)!==null}function n(){return x++,f[x]}function r(pt){var ut=parseFloat(n()),Tt=parseFloat(n());k===k.toLowerCase()&&(ut=N.x+ut,Tt=N.y+Tt),pt.h(ut,Tt)}function o(){return r(N),N}function l(){return r(P),P}function u(){var pt=S.toLowerCase();return pt!=="c"&&pt!=="s"&&pt!=="q"&&pt!=="t"?new C(N.x,N.y):new C(2*N.x-P.x,2*N.y-P.y)}e===void 0&&(e=!1);var h=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm;t=t.replace(/,/gm," "),t=t.replace(h,"$1 $2"),t=t.replace(h,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2"),t=t.replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");var f=t.split(" ");for(t=0;t<f.length;t++){var c=f[t];if(c.match(/(\.[0-9]*)(\.)/gm)!==null){h=Rt();for(var p="",g=!1,m=0;m<c.length;m++){var v=c[m];v!=="."||g?v==="."?(h.push(p),p="."):p+=v:(g=!0,p+=v)}for(h.push(p),f.splice(t,1),c=0;c<h.length;c++)f.splice(t+c,0,h[c]);t+=h.length-1,Bt(h)}}var x=-1,k="",S="";h=new C(0,0);var P=new C(0,0),N=new C(0,0),T=f.length;t=TS(null),g=p=c=!1,m=!0,v=null;for(var F=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(x>=T-1);)if(S=k,k=n(),k!=="")switch(k.toUpperCase()){case"X":m=!0,p=c=!1;break;case"M":for(v=o(),t.oc===null||m===!0?(Vh(t,v.x,v.y,c,!p,g),m=!1):t.moveTo(v.x,v.y),h.assign(N);!i();)v=o(),t.lineTo(v.x,v.y);break;case"L":for(;!i();)v=o(),t.lineTo(v.x,v.y);break;case"H":for(;!i();)N.h((k===k.toLowerCase()?N.x:0)+parseFloat(n()),N.y),t.lineTo(N.x,N.y);break;case"V":for(;!i();)N.h(N.x,(k===k.toLowerCase()?N.y:0)+parseFloat(n())),t.lineTo(N.x,N.y);break;case"C":for(;!i();){v=new C,r(v);var D=l(),X=o();bo(t,v.x,v.y,D.x,D.y,X.x,X.y)}break;case"S":for(;!i();)v=u(),D=l(),X=o(),bo(t,v.x,v.y,D.x,D.y,X.x,X.y);break;case"Q":for(;!i();)v=l(),D=o(),Ed(t,v.x,v.y,D.x,D.y);break;case"T":for(;!i();)v=u(),P.assign(v),D=o(),Ed(t,v.x,v.y,D.x,D.y),P.assign(D);break;case"B":for(;!i();){v=parseFloat(n()),D=parseFloat(n()),X=parseFloat(n());var tt=parseFloat(n()),et=parseFloat(n()),U=et,R=!1;i()||(U=parseFloat(n()),i()||(R=parseFloat(n())!==0)),k===k.toLowerCase()&&(X+=N.x,tt+=N.y),t.arcTo(v,D,X,tt,et,U,R)}break;case"A":for(;!i();)v=Math.abs(parseFloat(n())),D=Math.abs(parseFloat(n())),X=parseFloat(n()),et=tt=!1,R=U=0,U=n(),U.length===1?(tt=!!parseFloat(U),et=!!parseFloat(n()),U=parseFloat(n())):U.length===2?(tt=!!parseFloat(U[0]),et=!!parseFloat(U[1]),U=parseFloat(n())):(tt=!!parseFloat(U[0]),et=!!parseFloat(U[1]),U=parseFloat(U.slice(2))),R=parseFloat(n()),k===k.toLowerCase()&&(U=N.x+U,R=N.y+R),N.h(U,R),xT(t,v,D,X,tt,et,U,R);break;case"Z":vT(t),N.assign(h);break;case"F":for(v="",D=1;f[x+D];)if(f[x+D]==="0")g=!0,D++;else if(f[x+D].match(/[Uu]/)!==null)D++;else if(f[x+D].match(F)===null)D++;else{v=f[x+D];break}v.match(/[Mm]/)?c=!0:0<t.oc.segments.length&&(t.oc.isFilled=!0);break;case"U":for(v="",D=1;f[x+D];)if(f[x+D].match(/[Ff]/)!==null)D++;else if(f[x+D].match(F)===null)D++;else{v=f[x+D];break}v.match(/[Mm]/)?p=!0:t.oc.isShadowed=!1}if(h=t.os,Bd=t,e)for(e=h.figures.iterator;e.next();)e.value.isFilled=!0;return h},H.Ha=function(t,e){for(var i=t.length,n=C.alloc(),r=0;r<i;r++){var o=t[r];n.x=o[0],n.y=o[1],e.Ga(n),o[0]=n.x,o[1]=n.y,n.x=o[2],n.y=o[3],e.Ga(n),o[2]=n.x,o[3]=n.y,n.x=o[4],n.y=o[5],e.Ga(n),o[4]=n.x,o[5]=n.y,n.x=o[6],n.y=o[7],e.Ga(n),o[6]=n.x,o[7]=n.y}C.free(n)},H.prototype.av=function(){if(this._isInvalidBounds)return!0;if(this.type===H.j){if(this.aq!==this.figures.Ja)return!0;for(var t=this.figures.s,e=t.length,i=0;i<e;i++)if(t[i].av())return!0}return!1},H.prototype.computeBounds=function(){if(this._isInvalidBounds=!1,this.zm=this.sk=null,this.Am=NaN,this.type===H.j){this.aq=this.figures.Ja;for(var t=this.figures.s,e=t.length,i=0;i<e;i++){var n=t[i];n._isInvalidBounds=!1;var r=n.segments;n.sr=r.Ja,n=r.s,r=n.length;for(var o=0;o<r;o++){var l=n[o];l._isInvalidBounds=!1,l.ae=null}}}t=this.Ip,t.ka(),isNaN(this.Rk)||isNaN(this.Qk)?t.h(0,0,0,0):t.h(0,0,this.Rk,this.Qk),Rw(this,t,!1),Oe(t,0,0,0,0),t.freeze()},H.prototype.kx=function(){var t=new E;return Rw(this,t,!0),t};function Rw(t,e,i){switch(t.type){case H.o:case H.u:case H.F:i?e.h(t.od,t.pd,0,0):Oe(e,t.od,t.pd,0,0),Oe(e,t.Dc,t.Ec,0,0);break;case H.j:var n=t.figures;t=n.s,n=n.length;for(var r=0;r<n;r++){var o=t[r];i&&r===0?e.h(o.startX,o.startY,0,0):Oe(e,o.startX,o.startY,0,0);for(var l=o.segments.s,u=l.length,h=o.startX,f=o.startY,c=0;c<u;c++){var p=l[c];switch(p.type){case $t:case Tn:h=p.endX,f=p.endY,Oe(e,h,f,0,0);break;case qi:A.Dl(h,f,p.point1X,p.point1Y,p.point2X,p.point2Y,p.endX,p.endY,.5,e),h=p.endX,f=p.endY;break;case lr:A.kv(h,f,p.point1X,p.point1Y,p.endX,p.endY,.5,e),h=p.endX,f=p.endY;break;case fe:case _n:var g=p.type===fe?mo(p,o):el(p,o,h,f),m=g.length;if(m===0){h=p.type===fe?p.centerX:p.endX,f=p.type===fe?p.centerY:p.endY,Oe(e,h,f,0,0);break}p=null;for(var v=0;v<m;v++)p=g[v],A.Dl(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.5,e);p!==null&&(h=p[6],f=p[7]);break;default:O("Unknown Segment type: "+p.type)}}}break;default:O("Unknown Geometry type: "+t.type)}}H.prototype.normalize=function(){this._isFrozen&&rt(this);var t=this.kx();return this.offset(-t.x,-t.y),new C(-t.x,-t.y)},H.prototype.offset=function(t,e){return this._isFrozen&&rt(this),this.transform(1,0,0,1,t,e),this},H.prototype.scale=function(t,e){return this._isFrozen&&rt(this),this.transform(t,0,0,e,0,0),this},H.prototype.rotate=function(t,e,i){this._isFrozen&&rt(this),e===void 0&&(e=0),i===void 0&&(i=0);var n=vt.alloc();return n.reset(),n.rotate(t,e,i),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),vt.free(n),this},s=H.prototype,s.transform=function(t,e,i,n,r,o){switch(this.type){case H.o:case H.u:case H.F:var l=this.od,u=this.pd;this.od=l*t+u*i+r,this.pd=l*e+u*n+o,l=this.Dc,u=this.Ec,this.Dc=l*t+u*i+r,this.Ec=l*e+u*n+o;break;case H.j:for(var h=this.figures.s,f=h.length,c=0;c<f;c++){var p=h[c];l=p.startX,u=p.startY,p.startX=l*t+u*i+r,p.startY=l*e+u*n+o,p=p.segments.s;for(var g=p.length,m=0;m<g;m++){var v=p[m];switch(v.type){case $t:case Tn:l=v.endX,u=v.endY,v.endX=l*t+u*i+r,v.endY=l*e+u*n+o;break;case qi:l=v.point1X,u=v.point1Y,v.point1X=l*t+u*i+r,v.point1Y=l*e+u*n+o,l=v.point2X,u=v.point2Y,v.point2X=l*t+u*i+r,v.point2Y=l*e+u*n+o,l=v.endX,u=v.endY,v.endX=l*t+u*i+r,v.endY=l*e+u*n+o;break;case lr:l=v.point1X,u=v.point1Y,v.point1X=l*t+u*i+r,v.point1Y=l*e+u*n+o,l=v.endX,u=v.endY,v.endX=l*t+u*i+r,v.endY=l*e+u*n+o;break;case fe:l=v.centerX,u=v.centerY,v.centerX=l*t+u*i+r,v.centerY=l*e+u*n+o,e!==0&&(l=180*Math.atan2(e,t)/Math.PI,0>l&&(l+=360),v.startAngle+=l),0>t&&(v.startAngle=180-v.startAngle,v.sweepAngle=-v.sweepAngle),0>n&&(v.startAngle=-v.startAngle,v.sweepAngle=-v.sweepAngle),v.radiusX*=Math.sqrt(t*t+i*i),v.radiusY!==void 0&&(v.radiusY*=Math.sqrt(e*e+n*n));break;case _n:if(l=v.endX,u=v.endY,v.endX=l*t+u*i+r,v.endY=l*e+u*n+o,v.radiusX===0||v.radiusY===0)break;e!==0&&(l=180*Math.atan2(e,t)/Math.PI,0>l&&(l+=360),v.xAxisRotation+=l),0>t&&(v.xAxisRotation=180-v.xAxisRotation,v.isClockwiseArc=!v.isClockwiseArc),0>n&&(v.xAxisRotation=-v.xAxisRotation,v.isClockwiseArc=!v.isClockwiseArc),v.radiusX*=Math.sqrt(t*t+i*i),v.radiusY*=Math.sqrt(e*e+n*n);break;default:O("Unknown Segment type: "+v.type)}}}}return this._isInvalidBounds=!0,this},s.ca=function(t,e){e===void 0&&(e=0);var i=this.od,n=this.pd,r=this.Dc,o=this.Ec;switch(this.type){case H.o:return A.ac(i,n,r,o,e,t.x,t.y);case H.u:var l=E.allocAt(Math.min(i,r)-e,Math.min(n,o)-e,Math.abs(r-i)+2*e,Math.abs(o-n)+2*e);return t=l.ca(t),E.free(l),t;case H.F:l=Math.min(i,r)-e;var u=Math.min(n,o)-e;return i=(Math.abs(r-i)+2*e)/2,e=(Math.abs(o-n)+2*e)/2,0>=i||0>=e?!1:(l=t.x-(l+i),u=t.y-(u+e),1>=l*l/(i*i)+u*u/(e*e));case H.j:return F0(this,t,e,!0,!1);default:return!1}};function F0(t,e,i,n,r){var o=e.x;e=e.y;for(var l=t.bounds.x-20,u=0,h,f,c,p,g=t.figures.s,m=g.length,v=0;v<m;v++){var x=g[v],k=!x.isEvenOdd;if(x.isFilled){if(n&&x.ca(o,e,i))return!0;var S=x.segments;h=x.startX,f=x.startY;for(var P=h,N=f,T=S.s,F=0;F<=S.length;F++){var D=void 0;if(F!==S.length){D=T[F];var X=D.type;t=D.endX,p=D.endY}else X=$t,t=P,p=N;switch(X){case Tn:if(P=Tp(o,e,l,e,h,f,P,N),isNaN(P))return!0;u+=P,P=t,N=p;break;case $t:if(h=Tp(o,e,l,e,h,f,t,p),isNaN(h))return!0;u+=h;break;case qi:c=A.Go(h,f,D.point1X,D.point1Y,D.point2X,D.point2Y,t,p,l,e,o,e,.5),u+=c;break;case lr:c=A.Go(h,f,(h+2*D.point1X)/3,(f+2*D.point1Y)/3,(2*D.point1X+t)/3,(2*D.point1Y+p)/3,t,p,l,e,o,e,.5),u+=c;break;case fe:case _n:X=D.type===fe?mo(D,x):el(D,x,h,f);var tt=X.length;if(tt===0){if(h=Tp(o,e,l,e,h,f,D.type===fe?D.centerX:D.endX,D.type===fe?D.centerY:D.endY),isNaN(h))return!0;u+=h;break}D=null;for(var et=0;et<tt;et++){if(D=X[et],et===0){if(c=Tp(o,e,l,e,h,f,D[0],D[1]),isNaN(c))return!0;u+=c}c=A.Go(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],l,e,o,e,.5),u+=c}D!==null&&(t=D[6],p=D[7]);break;default:O("Unknown Segment type: "+D.type)}h=t,f=p}if(k){if(u!==0)return!0}else if(u%2!==0)return!0;u=0}else if(x.ca(o,e,r?i:i+2))return!0}return!1}function Tp(t,e,i,n,r,o,l,u){if(A.ac(r,o,l,u,.05,t,e))return NaN;var h=(t-i)*(o-u);if(h===0)return 0;var f=((t*n-e*i)*(r-l)-(t-i)*(r*u-o*l))/h;if(e=(t*n-e*i)*(o-u)/h,f>=t)return 0;if((r>l?r-l:l-r)<(o>u?o-u:u-o)){if(o<u){if(e<o||e>u)return 0}else if(e<u||e>o)return 0}else if(r<l){if(f<r||f>l)return 0}else if(f<l||f>r)return 0;return 0<h?1:-1}function zw(t,e,i,n){t=t.figures.s;for(var r=t.length,o=0;o<r;o++)if(t[o].ca(e,i,n))return!0;return!1}s.Ru=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=new C),this.type===H.o)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,o=this.flattenedTotalLength*t,l=0,u=0;u<r;u++){var h=n[u],f=h.length;for(t=0;t<f;t++){var c=h[t];if(l+c>=o)return n=o-l,n=c===0?0:n/c,i=i[u],u=i[2*t],r=i[2*t+1],e.h(u+(i[2*t+2]-u)*n,r+(i[2*t+3]-r)*n),e;l+=c}}return e},s.yx=function(t){if(0>t?t=0:1<t&&(t=1),this.type===H.o)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,i=this.flattenedLengths,n=e.length,r=this.flattenedTotalLength*t,o=0,l=0;l<n;l++){var u=i[l],h=u.length;for(t=0;t<h;t++){var f=u[t];if(o+f>=r)return r=e[l],e=r[2*t],i=r[2*t+1],n=r[2*t+2],t=r[2*t+3],1>Math.abs(n-e)&&1>Math.abs(t-i)?0:1>Math.abs(n-e)?0<=t-i?90:270:1>Math.abs(t-i)?0<=n-e?0:180:180*Math.atan2(t-i,n-e)/Math.PI;o+=f}}return NaN},s.Su=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=[]),e.length=3,this.type===H.o)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,o=this.flattenedTotalLength*t,l=0,u=0;u<r;u++){var h=n[u],f=h.length;for(t=0;t<f;t++){var c=h[t];if(l+c>=o)return n=o-l,n=c===0?0:n/c,c=i[u],i=c[2*t],u=c[2*t+1],r=c[2*t+2],t=c[2*t+3],e[0]=i+(r-i)*n,e[1]=u+(t-u)*n,e[2]=1>Math.abs(r-i)&&1>Math.abs(t-u)?0:1>Math.abs(r-i)?0<=t-u?90:270:1>Math.abs(t-u)?0<=r-i?0:180:180*Math.atan2(t-u,r-i)/Math.PI,e;l+=c}}return e},s.zx=function(t){if(this.type===H.o){var e=this.startX,i=this.startY,n=this.endX,r=this.endY;if(e!==n||i!==r){var o=t.x;if(t=t.y,e===n){if(i<r){var l=i;n=r}else l=r,n=i;return t<=l?l===i?0:1:t>=n?n===i?0:1:Math.abs(t-i)/(n-l)}if(i===r)return e<n?l=e:(l=n,n=e),o<=l?l===e?0:1:o>=n?n===e?0:1:Math.abs(o-e)/(n-l);l=(n-e)*(n-e)+(r-i)*(r-i);var u=C.alloc();return A.qh(e,i,n,r,o,t,u),t=u.x,o=u.y,C.free(u),Math.sqrt(((t-e)*(t-e)+(o-i)*(o-i))/l)}}else if(this.type===H.u){l=this.startX,u=this.startY;var h=this.endX;if(r=this.endY,l!==h||u!==r){e=h-l,i=r-u,o=2*e+2*i,n=t.x,t=t.y,n=Math.min(Math.max(n,l),h),t=Math.min(Math.max(t,u),r),l=Math.abs(n-l),h=Math.abs(n-h),u=Math.abs(t-u),r=Math.abs(t-r);var f=Math.min(l,h,u,r);if(f===u)return n/o;if(f===h)return(e+t)/o;if(f===r)return(2*e+i-n)/o;if(f===l)return(2*e+2*i-t)/o}}else{e=this.flattenedSegments,i=this.flattenedLengths,o=this.flattenedTotalLength,n=C.alloc(),r=1/0,u=l=0,h=e.length;for(var c=f=0,p=0;p<h;p++)for(var g=e[p],m=i[p],v=g.length,x=0;x<v;x+=2){var k=g[x],S=g[x+1];if(x!==0){A.qh(f,c,k,S,t.x,t.y,n);var P=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y);P<r&&(r=P,l=u,l+=Math.sqrt((n.x-f)*(n.x-f)+(n.y-c)*(n.y-c))),u+=m[(x-2)/2]}f=k,c=S}return C.free(n),t=l/o,0>t?0:1<t?1:t}return 0};function Vw(t){if(t.sk===null){var e=t.sk=[],i=t.zm=[],n=[],r=[];if(t.type===H.o)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.endY),e.push(n),r.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),i.push(r);else if(t.type===H.u)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.startY),n.push(t.endX),n.push(t.endY),n.push(t.startX),n.push(t.endY),n.push(t.startX),n.push(t.startY),e.push(n),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),i.push(r);else if(t.type===H.F){var o=new Ae;o.startX=t.endX,o.startY=(t.startY+t.endY)/2;var l=new Ft(fe);if(l.startAngle=0,l.sweepAngle=360,l.centerX=(t.startX+t.endX)/2,l.centerY=(t.startY+t.endY)/2,l.radiusX=Math.abs(t.startX-t.endX)/2,l.radiusY=Math.abs(t.startY-t.endY)/2,o.add(l),t=mo(l,o),r=t.length,r===0)n.push(l.centerX),n.push(l.centerY);else{l=o.startX,o=o.startY;for(var u=0;u<r;u++){var h=t[u];A.Qe(l,o,h[2],h[3],h[4],h[5],h[6],h[7],.5,n),l=h[6],o=h[7]}}e.push(n),i.push(A0(n))}else for(t=t.figures.iterator;t.next();){r=t.value,n=[],n.push(r.startX),n.push(r.startY),l=r.startX,o=r.startY,u=l,h=o;for(var f=r.segments.s,c=f.length,p=0;p<c;p++){var g=f[p];switch(g.type){case Tn:4<=n.length&&(e.push(n),i.push(A0(n))),n=[],n.push(g.endX),n.push(g.endY),l=g.endX,o=g.endY,u=l,h=o;break;case $t:n.push(g.endX),n.push(g.endY),l=g.endX,o=g.endY;break;case qi:A.Qe(l,o,g.point1X,g.point1Y,g.point2X,g.point2Y,g.endX,g.endY,.5,n),l=g.endX,o=g.endY;break;case lr:A.ep(l,o,g.point1X,g.point1Y,g.endX,g.endY,.5,n),l=g.endX,o=g.endY;break;case fe:var m=mo(g,r),v=m.length;if(v===0){n.push(g.centerX),n.push(g.centerY),l=g.centerX,o=g.centerY;break}for(var x=0;x<v;x++){var k=m[x];A.Qe(l,o,k[2],k[3],k[4],k[5],k[6],k[7],.5,n),l=k[6],o=k[7]}break;case _n:if(m=el(g,r,l,o),v=m.length,x=g.endX,k=g.endY,v===0){n.push(x),n.push(k),l=x,o=k;break}for(x=0;x<v;x++)k=m[x],A.Qe(l,o,k[2],k[3],k[4],k[5],k[6],k[7],.5,n),l=k[6],o=k[7];break;default:O("Segment not of valid type: "+g.type)}g.isClosed&&(n.push(u),n.push(h))}4<=n.length&&(e.push(n),i.push(A0(n)))}}}function A0(t){for(var e=[],i=0,n=0,r=t.length,o=0;o<r;o+=2){var l=t[o],u=t[o+1];o!==0&&e.push(Math.sqrt(po(i,n,l,u))),i=l,n=u}return e}s.add=function(t){return this.ee.add(t),this},s.qm=function(t,e,i,n,r,o,l,u){return this._isFrozen&&rt(this),this.fg=new lt(t,e,r,o).freeze(),this.gg=new lt(i,n,l,u).freeze(),this},Y.Object.defineProperties(H.prototype,{_isFrozen:{get:function(){return(this.l&1)!==0},set:function(t){this.l=t?this.l|1:this.l&-2}},_isInvalidBounds:{get:function(){return(this.l&2)!==0},set:function(t){this.l=t?this.l|2:this.l&-3}},flattenedSegments:{get:function(){return Vw(this),this.sk}},flattenedLengths:{get:function(){return Vw(this),this.zm}},flattenedTotalLength:{get:function(){var t=this.Am;if(isNaN(t)){if(this.type===H.o){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===H.u)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else{e=this.flattenedLengths;for(var i=e.length,n=t=0;n<i;n++)for(var r=e[n],o=r.length,l=0;l<o;l++)t+=r[l]}this.Am=t}return t}},type:{get:function(){return this.na},set:function(t){this.na!==t&&(this._isFrozen&&rt(this,t),this.na=t,t===H.j?this.ee=new q:(H.V===null&&(H.V=new q().freeze()),this.ee=H.V),this._isInvalidBounds=!0)}},startX:{get:function(){return this.od},set:function(t){this.od!==t&&(this._isFrozen&&rt(this,t),this.od=t,this._isInvalidBounds=!0)}},startY:{get:function(){return this.pd},set:function(t){this.pd!==t&&(this._isFrozen&&rt(this,t),this.pd=t,this._isInvalidBounds=!0)}},endX:{get:function(){return this.Dc},set:function(t){this.Dc!==t&&(this._isFrozen&&rt(this,t),this.Dc=t,this._isInvalidBounds=!0)}},endY:{get:function(){return this.Ec},set:function(t){this.Ec!==t&&(this._isFrozen&&rt(this,t),this.Ec=t,this._isInvalidBounds=!0)}},figures:{get:function(){return this.ee},set:function(t){this.ee!==t&&(this._isFrozen&&rt(this,t),this.ee=t,this._isInvalidBounds=!0)}},spot1:{get:function(){return this.fg},set:function(t){this._isFrozen&&rt(this,t),this.fg=t.J()}},spot2:{get:function(){return this.gg},set:function(t){this._isFrozen&&rt(this,t),this.gg=t.J()}},defaultStretch:{get:function(){return this.Uf},set:function(t){this._isFrozen&&rt(this,t),this.Uf=t}},bounds:{get:function(){return this.av()&&this.computeBounds(),this.Ip}}}),H.prototype.setSpots=H.prototype.qm,H.prototype.add=H.prototype.add,H.prototype.getFractionForPoint=H.prototype.zx,H.prototype.getPointAndAngleAlongPath=H.prototype.Su,H.prototype.getAngleAlongPath=H.prototype.yx,H.prototype.getPointAlongPath=H.prototype.Ru,H.prototype.containsPoint=H.prototype.ca,H.prototype.transform=H.prototype.transform,H.prototype.rotate=H.prototype.rotate,H.prototype.scale=H.prototype.scale,H.prototype.offset=H.prototype.offset,H.prototype.normalize=H.prototype.normalize,H.prototype.computeBoundsWithoutOrigin=H.prototype.kx,H.prototype.equalsApprox=H.prototype.Xa,H.className="Geometry",H.o=new K(H,"Line",0),H.u=new K(H,"Rectangle",1),H.F=new K(H,"Ellipse",2),H.j=new K(H,"Path",3),H.V=null,H.hb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",H.className="Geometry",H.stringify=H.ia,H.fillPath=H.nb,H.parse=H.parse,H.Line=H.o,H.Rectangle=H.u,H.Ellipse=H.F,H.Path=H.j;function Ae(t,e,i,n,r){Te(this),i===void 0&&(i=!0),n===void 0&&(n=!0),r===void 0&&(r=!1),this.l=2|(i?4:0)|(n?8:0)|(r?16:0),t!==void 0?this.od=t:this.od=0,e!==void 0?this.pd=e:this.pd=0,this.pl=new q,this.sr=this.pl.Ja,this.hw=null}Ae.prototype.copy=function(){var t=new Ae;t.l=this.l&-2,t.od=this.od,t.pd=this.pd;for(var e=this.pl.s,i=e.length,n=t.pl,r=0;r<i;r++){var o=e[r].copy();n.add(o)}return t.sr=this.sr,t.hw=this.hw,t},s=Ae.prototype,s.Xa=function(t){if(!(t instanceof Ae&&A.B(this.startX,t.startX)&&A.B(this.startY,t.startY)))return!1;var e=this.segments.s;t=t.segments.s;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Xa(t[n]))return!1;return!0},s.toString=function(t){t===void 0&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),i=this.segments.s,n=i.length,r=0;r<n;r++)e+=" "+i[r].toString(t);return e},s.freeze=function(){this._isFrozen=!0;var t=this.segments;t.freeze();var e=t.s;t=t.length;for(var i=0;i<t;i++)e[i].freeze();return this},s.ka=function(){this._isFrozen=!1;var t=this.segments;t.ka(),t=t.s;for(var e=t.length,i=0;i<e;i++)t[i].ka();return this},s.av=function(){if(this._isInvalidBounds)return!0;var t=this.segments;if(this.sr!==t.Ja)return!0;t=t.s;for(var e=t.length,i=0;i<e;i++)if(t[i]._isInvalidBounds)return!0;return!1},s.add=function(t){return this.pl.add(t),this},s.ca=function(t,e,i){for(var n=this.startX,r=this.startY,o=n,l=r,u=this.segments.s,h=u.length,f=0;f<h;f++){var c=u[f];switch(c.type){case Tn:o=c.endX,l=c.endY,n=c.endX,r=c.endY;break;case $t:if(A.ac(n,r,c.endX,c.endY,i,t,e))return!0;n=c.endX,r=c.endY;break;case qi:if(A.cs(n,r,c.point1X,c.point1Y,c.point2X,c.point2Y,c.endX,c.endY,.5,t,e,i))return!0;n=c.endX,r=c.endY;break;case lr:if(A.lv(n,r,c.point1X,c.point1Y,c.endX,c.endY,.5,t,e,i))return!0;n=c.endX,r=c.endY;break;case fe:case _n:var p=c.type===fe?mo(c,this):el(c,this,n,r),g=p.length,m=c.type===fe?c.centerX:c.endX,v=c.type===fe?c.centerY:c.endY;if(g===0){if(A.ac(n,r,m,v,i,t,e))return!0;n=m,r=v;break}for(m=null,v=0;v<g;v++)if(m=p[v],v===0&&A.ac(n,r,m[0],m[1],i,t,e)||A.cs(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],.5,t,e,i))return!0;m!==null&&(n=m[6],r=m[7]);break;default:O("Unknown Segment type: "+c.type)}if(c.isClosed&&(n!==o||r!==l)&&A.ac(n,r,o,l,i,t,e))return!0}return!1},Y.Object.defineProperties(Ae.prototype,{_isFrozen:{get:function(){return(this.l&1)!==0},set:function(t){this.l=t?this.l|1:this.l&-2}},_isInvalidBounds:{get:function(){return(this.l&2)!==0},set:function(t){this.l=t?this.l|2:this.l&-3}},isFilled:{get:function(){return(this.l&4)!==0},set:function(t){this._isFrozen&&rt(this,t),this.l=t?this.l|4:this.l&-5}},isShadowed:{get:function(){return(this.l&8)!==0},set:function(t){this._isFrozen&&rt(this,t),this.l=t?this.l|8:this.l&-9}},isEvenOdd:{get:function(){return(this.l&16)!==0},set:function(t){this._isFrozen&&rt(this,t),this.l=t?this.l|16:this.l&-17}},startX:{get:function(){return this.od},set:function(t){this._isFrozen&&rt(this,t),this.od=t,this._isInvalidBounds=!0}},startY:{get:function(){return this.pd},set:function(t){this._isFrozen&&rt(this,t),this.pd=t,this._isInvalidBounds=!0}},segments:{get:function(){return this.pl},set:function(t){this._isFrozen&&rt(this,t),this.pl=t,this._isInvalidBounds=!0}}}),Ae.prototype.add=Ae.prototype.add,Ae.prototype.equalsApprox=Ae.prototype.Xa,Ae.className="PathFigure";function Ft(t,e,i,n,r,o,l,u){Te(this),t===void 0&&(t=$t),this.na=t,this.l=2,e!==void 0?this.Dc=e:this.Dc=0,i!==void 0?this.Ec=i:this.Ec=0,n===void 0&&(n=0),r===void 0&&(r=0),o===void 0&&(o=0),l===void 0&&(l=0),t===_n?(t=o%360,0>t&&(t+=360),this.Ne=t,this.Vh=0,this.Wh=Math.max(n,0),this.Pg=Math.max(r,0),typeof l=="boolean"?l&&(this.isLargeArc=!0):typeof l=="number"&&l&&(this.isLargeArc=!0),u&&(this.isClockwiseArc=!0)):(this.Ne=n,this.Vh=r,t===fe&&(o=Math.max(o,0)),this.Wh=o,typeof l=="number"?(t===fe&&(l=Math.max(l,0)),this.Pg=l):this.Pg=0),this.ae=null}Ft.prototype.copy=function(){var t=new Ft;return t.na=this.na,t.l=this.l&-2,t.Dc=this.Dc,t.Ec=this.Ec,t.Ne=this.Ne,t.Vh=this.Vh,t.Wh=this.Wh,t.Pg=this.Pg,t},s=Ft.prototype,s.Xa=function(t){if(!(t instanceof Ft)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case Tn:case $t:return A.B(this.endX,t.endX)&&A.B(this.endY,t.endY);case qi:return A.B(this.endX,t.endX)&&A.B(this.endY,t.endY)&&A.B(this.point1X,t.point1X)&&A.B(this.point1Y,t.point1Y)&&A.B(this.point2X,t.point2X)&&A.B(this.point2Y,t.point2Y);case lr:return A.B(this.endX,t.endX)&&A.B(this.endY,t.endY)&&A.B(this.point1X,t.point1X)&&A.B(this.point1Y,t.point1Y);case fe:return A.B(this.startAngle,t.startAngle)&&A.B(this.sweepAngle,t.sweepAngle)&&A.B(this.centerX,t.centerX)&&A.B(this.centerY,t.centerY)&&A.B(this.radiusX,t.radiusX)&&A.B(this.radiusY,t.radiusY);case _n:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&A.B(this.xAxisRotation,t.xAxisRotation)&&A.B(this.endX,t.endX)&&A.B(this.endY,t.endY)&&A.B(this.radiusX,t.radiusX)&&A.B(this.radiusY,t.radiusY);default:return!1}},s.qb=function(t){t.classType===Ft&&(this.type=t)},s.toString=function(t){switch(t===void 0&&(t=-1),this.type){case Tn:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case $t:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case qi:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case lr:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case fe:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case _n:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.isClosed?"z":"")},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return this._isFrozen=!1,this},s.close=function(){return this.isClosed=!0,this};function mo(t,e){if(t.ae!==null&&e._isInvalidBounds===!1)return t.ae;var i=t.radiusX,n=t.radiusY;if(n===void 0&&(n=i),i===0||n===0)return t.ae=[],t.ae;e=t.Ne;var r=t.Vh,o=A.lx(0,0,i<n?i:n,t.startAngle,t.startAngle+t.sweepAngle,!1);if(i!==n){var l=vt.alloc();l.reset(),i<n?l.scale(1,n/i):l.scale(i/n,1),H.Ha(o,l),vt.free(l)}for(i=o.length,n=0;n<i;n++)l=o[n],l[0]+=e,l[1]+=r,l[2]+=e,l[3]+=r,l[4]+=e,l[5]+=r,l[6]+=e,l[7]+=r;return t.ae=o,t.ae}function el(t,e,i,n){function r(x,k,S,P){return(x*P<k*S?-1:1)*Math.acos((x*S+k*P)/(Math.sqrt(x*x+k*k)*Math.sqrt(S*S+P*P)))}if(t.ae!==null&&e._isInvalidBounds===!1)return t.ae;if(t.radiusX===0||t.radiusY===0)return t.ae=[],t.ae;e=t.Wh;var o=t.Pg;e===0&&(e=1e-4),o===0&&(o=1e-4);var l=Math.PI/180*t.Ne,u=t.isLargeArc,h=t.isClockwiseArc,f=t.Dc,c=t.Ec,p=Math.cos(l),g=Math.sin(l),m=p*(i-f)/2+g*(n-c)/2;l=-g*(i-f)/2+p*(n-c)/2;var v=m*m/(e*e)+l*l/(o*o);return 1<v&&(e*=Math.sqrt(v),o*=Math.sqrt(v)),v=(u===h?-1:1)*Math.sqrt((e*e*o*o-e*e*l*l-o*o*m*m)/(e*e*l*l+o*o*m*m)),isNaN(v)&&(v=0),u=v*e*l/o,v=v*-o*m/e,isNaN(u)&&(u=0),isNaN(v)&&(v=0),i=(i+f)/2+p*u-g*v,n=(n+c)/2+g*u+p*v,c=r(1,0,(m-u)/e,(l-v)/o),p=(m-u)/e,f=(l-v)/o,m=(-m-u)/e,u=(-l-v)/o,l=r(p,f,m,u),m=(p*m+f*u)/(Math.sqrt(p*p+f*f)*Math.sqrt(m*m+u*u)),-1>=m?l=Math.PI:1<=m&&(l=0),!h&&0<l&&(l-=2*Math.PI),h&&0>l&&(l+=2*Math.PI),h=e>o?1:e/o,m=e>o?o/e:1,e=A.lx(0,0,e>o?e:o,c,c+l,!0),o=vt.alloc(),o.reset(),o.translate(i,n),o.rotate(t.Ne,0,0),o.scale(h,m),H.Ha(e,o),vt.free(o),t.ae=e,t.ae}Y.Object.defineProperties(Ft.prototype,{_isFrozen:{get:function(){return(this.l&1)!==0},set:function(t){this.l=t?this.l|1:this.l&-2}},_isInvalidBounds:{get:function(){return(this.l&2)!==0},set:function(t){this.l=t?this.l|2:this.l&-3}},isClosed:{get:function(){return(this.l&8)!==0},set:function(t){this.isClosed!==t&&(this.l=t?this.l|8:this.l&-9,this._isInvalidBounds=!0)}},type:{get:function(){return this.na},set:function(t){this._isFrozen&&rt(this,t),this.na=t,this._isInvalidBounds=!0}},endX:{get:function(){return this.Dc},set:function(t){this._isFrozen&&rt(this,t),this.Dc=t,this._isInvalidBounds=!0}},endY:{get:function(){return this.Ec},set:function(t){this._isFrozen&&rt(this,t),this.Ec=t,this._isInvalidBounds=!0}},point1X:{get:function(){return this.Ne},set:function(t){this._isFrozen&&rt(this,t),this.Ne=t,this._isInvalidBounds=!0}},point1Y:{get:function(){return this.Vh},set:function(t){this._isFrozen&&rt(this,t),this.Vh=t,this._isInvalidBounds=!0}},point2X:{get:function(){return this.Wh},set:function(t){this._isFrozen&&rt(this,t),this.Wh=t,this._isInvalidBounds=!0}},point2Y:{get:function(){return this.Pg},set:function(t){this._isFrozen&&rt(this,t),this.Pg=t,this._isInvalidBounds=!0}},centerX:{get:function(){return this.Ne},set:function(t){this._isFrozen&&rt(this,t),this.Ne=t,this._isInvalidBounds=!0}},centerY:{get:function(){return this.Vh},set:function(t){this._isFrozen&&rt(this,t),this.Vh=t,this._isInvalidBounds=!0}},radiusX:{get:function(){return this.Wh},set:function(t){0>t&&at(t,">= zero",Ft,"radiusX"),this._isFrozen&&rt(this,t),this.Wh=t,this._isInvalidBounds=!0}},radiusY:{get:function(){return this.Pg},set:function(t){0>t&&at(t,">= zero",Ft,"radiusY"),this._isFrozen&&rt(this,t),this.Pg=t,this._isInvalidBounds=!0}},startAngle:{get:function(){return this.Dc},set:function(t){this._isFrozen&&rt(this,t),t%=360,0>t&&(t+=360),this.Dc=t,this._isInvalidBounds=!0}},sweepAngle:{get:function(){return this.Ec},set:function(t){this._isFrozen&&rt(this,t),360<t&&(t=360),-360>t&&(t=-360),this.Ec=t,this._isInvalidBounds=!0}},isClockwiseArc:{get:function(){return(this.l&4)!==0},set:function(t){this._isFrozen&&rt(this,t),this.l=t?this.l|4:this.l&-5,this._isInvalidBounds=!0}},isLargeArc:{get:function(){return(this.l&16)!==0},set:function(t){this._isFrozen&&rt(this,t),this.l=t?this.l|16:this.l&-17,this._isInvalidBounds=!0}},xAxisRotation:{get:function(){return this.Ne},set:function(t){this._isFrozen&&rt(this,t),t%=360,0>t&&(t+=360),this.Ne=t,this._isInvalidBounds=!0}}}),Ft.prototype.equalsApprox=Ft.prototype.Xa;var Tn=new K(Ft,"Move",0),$t=new K(Ft,"Line",1),qi=new K(Ft,"Bezier",2),lr=new K(Ft,"QuadraticBezier",3),fe=new K(Ft,"Arc",4),_n=new K(Ft,"SvgArc",4);Ft.className="PathSegment",Ft.Move=Tn,Ft.Line=$t,Ft.Bezier=qi,Ft.QuadraticBezier=lr,Ft.Arc=fe,Ft.SvgArc=_n;function an(){this.H=null,this.yu=new C(0,0).freeze(),this.nt=new C(0,0).freeze(),this.Bp=this.Rq=0,this.Cp=1,this.xq="",this.Wr=this.Tp=!1,this.Rp=this.Ep=0,this.xg=this.nq=this.tq=!1,this.Zp=null,this.Rr=0,this.xd=this.Nr=null}an.prototype.copy=function(){var t=new an;return this.clone(t)},an.prototype.clone=function(t){return t.H=this.H,t.yu.assign(this.viewPoint),t.nt.assign(this.documentPoint),t.Rq=this.Rq,t.Bp=this.Bp,t.Cp=this.Cp,t.xq=this.xq,t.Tp=this.Tp,t.Wr=this.Wr,t.Ep=this.Ep,t.Rp=this.Rp,t.tq=this.tq,t.nq=this.nq,t.xg=this.xg,t.Zp=this.Zp,t.Rr=this.Rr,t.Nr=this.Nr,t.xd=this.xd,t},an.prototype.toString=function(){var t="^";return this.modifiers!==0&&(t+="M:"+this.modifiers),this.button!==0&&(t+="B:"+this.button),this.key!==""&&(t+="K:"+this.key),this.clickCount!==0&&(t+="C:"+this.clickCount),this.delta!==0&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),this.documentPoint!==null&&(t+="@"+this.documentPoint.toString()),t},an.prototype.To=function(t,e){var i=this.diagram;return i===null||wM(i,t,e),e},an.prototype.Gz=function(t,e){var i=this.diagram;return i===null||(wM(i,t,e),e.assign(i.Qs(e))),e},Y.Object.defineProperties(an.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},viewPoint:{get:function(){return this.yu},set:function(t){this.yu.assign(t)}},documentPoint:{get:function(){return this.nt},set:function(t){this.nt.assign(t)}},modifiers:{get:function(){return this.Rq},set:function(t){this.Rq=t}},button:{get:function(){return this.Bp},set:function(t){if(this.Bp=t,this.event===null)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.Cp},set:function(t){this.Cp=t}},key:{get:function(){return this.xq},set:function(t){this.xq=t}},down:{get:function(){return this.Tp},set:function(t){this.Tp=t}},up:{get:function(){return this.Wr},set:function(t){this.Wr=t}},clickCount:{get:function(){return this.Ep},set:function(t){this.Ep=t}},delta:{get:function(){return this.Rp},set:function(t){this.Rp=t}},isMultiTouch:{get:function(){return this.tq},set:function(t){this.tq=t}},handled:{get:function(){return this.nq},set:function(t){this.nq=t}},bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},event:{get:function(){return this.Zp},set:function(t){this.Zp=t}},isTouchEvent:{get:function(){var t=this.event;return t===null?!1:t.pointerType==="touch"||t.pointerType==="pen"}},timestamp:{get:function(){return this.Rr},set:function(t){this.Rr=t}},targetDiagram:{get:function(){return this.Nr},set:function(t){this.Nr=t}},targetObject:{get:function(){return this.xd},set:function(t){this.xd=t}},control:{get:function(){return(this.modifiers&1)!==0},set:function(t){this.modifiers=t?this.modifiers|1:this.modifiers&-2}},shift:{get:function(){return(this.modifiers&4)!==0},set:function(t){this.modifiers=t?this.modifiers|4:this.modifiers&-5}},alt:{get:function(){return(this.modifiers&2)!==0},set:function(t){this.modifiers=t?this.modifiers|2:this.modifiers&-3}},meta:{get:function(){return(this.modifiers&8)!==0},set:function(t){this.modifiers=t?this.modifiers|8:this.modifiers&-9}},left:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&1)!==0:this.button===0},set:function(t){this.buttons=t?this.buttons|1:this.buttons&-2}},right:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&2)!==0:this.button===2},set:function(t){this.buttons=t?this.buttons|2:this.buttons&-3}},middle:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&4)!==0:this.button===1},set:function(t){this.buttons=t?this.buttons|4:this.buttons&-5}}}),an.prototype.getMultiTouchDocumentPoint=an.prototype.Gz,an.prototype.getMultiTouchViewPoint=an.prototype.To,an.className="InputEvent";function bl(){this.H=null,this.xa="",this.ar=this.Lr=null}bl.prototype.copy=function(){var t=new bl;return t.H=this.H,t.xa=this.xa,t.Lr=this.Lr,t.ar=this.ar,t},bl.prototype.toString=function(){var t="*"+this.name;return this.subject!==null&&(t+=":"+this.subject.toString()),this.parameter!==null&&(t+="("+this.parameter.toString()+")"),t},Y.Object.defineProperties(bl.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},subject:{get:function(){return this.Lr},set:function(t){this.Lr=t}},parameter:{get:function(){return this.ar},set:function(t){this.ar=t}}}),bl.className="DiagramEvent";function Jt(){this.Gm=Wt,this.rf=this.Qq="",this.Mn=this.Nn=this.Sn=this.Tn=this.Rn=this.H=this.ec=null}Jt.prototype.clear=function(){this.Mn=this.Nn=this.Sn=this.Tn=this.Rn=this.H=this.ec=null},Jt.prototype.copy=function(){var t=new Jt;t.Gm=this.Gm,t.Qq=this.Qq,t.rf=this.rf,t.ec=this.ec,t.H=this.H,t.Rn=this.Rn;var e=this.Tn;return t.Tn=gt(e)&&typeof e.J=="function"?e.J():e,e=this.Sn,t.Sn=gt(e)&&typeof e.J=="function"?e.J():e,e=this.Nn,t.Nn=gt(e)&&typeof e.J=="function"?e.J():e,e=this.Mn,t.Mn=gt(e)&&typeof e.J=="function"?e.J():e,t},Jt.prototype.qb=function(t){t.classType===Jt&&(this.change=t)},Jt.prototype.toString=function(){var t="";return t=this.change===Wn?t+"* ":this.change===Wt?t+(this.model!==null?"!m":"!d"):t+((this.model!==null?"!m":"!d")+this.change),this.propertyName&&typeof this.propertyName=="string"&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===Wn?this.oldValue!==null&&(t+=" "+this.oldValue):(this.object!==null&&(t+=Bi(this.object)),this.oldValue!==null&&(t+="  old: "+Bi(this.oldValue)),this.oldParam!==null&&(t+=" "+this.oldParam),this.newValue!==null&&(t+="  new: "+Bi(this.newValue)),this.newParam!==null&&(t+=" "+this.newParam)),t},Jt.prototype.I=function(t){return t?this.oldValue:this.newValue},Jt.prototype.Iz=function(t){return t?this.oldParam:this.newParam},Jt.prototype.canUndo=function(){return this.model!==null||this.diagram!==null},Jt.prototype.undo=function(){this.canUndo()&&(this.model!==null?this.model.changeState(this,!0):this.diagram!==null&&this.diagram.changeState(this,!0))},Jt.prototype.canRedo=function(){return this.model!==null||this.diagram!==null},Jt.prototype.redo=function(){this.canRedo()&&(this.model!==null?this.model.changeState(this,!1):this.diagram!==null&&this.diagram.changeState(this,!1))},Y.Object.defineProperties(Jt.prototype,{model:{get:function(){return this.ec},set:function(t){this.ec=t}},diagram:{get:function(){return this.H},set:function(t){this.H=t}},change:{get:function(){return this.Gm},set:function(t){this.Gm=t}},modelChange:{get:function(){return this.Qq},set:function(t){this.Qq=t}},propertyName:{get:function(){return this.rf},set:function(t){this.rf=t}},isTransactionFinished:{get:function(){return this.Gm===Wn&&(this.rf==="CommittedTransaction"||this.rf==="FinishedUndo"||this.rf==="FinishedRedo")}},object:{get:function(){return this.Rn},set:function(t){this.Rn=t}},oldValue:{get:function(){return this.Tn},set:function(t){this.Tn=t}},oldParam:{get:function(){return this.Sn},set:function(t){this.Sn=t}},newValue:{get:function(){return this.Nn},set:function(t){this.Nn=t}},newParam:{get:function(){return this.Mn},set:function(t){this.Mn=t}}}),Jt.prototype.redo=Jt.prototype.redo,Jt.prototype.canRedo=Jt.prototype.canRedo,Jt.prototype.undo=Jt.prototype.undo,Jt.prototype.canUndo=Jt.prototype.canUndo,Jt.prototype.getParam=Jt.prototype.Iz,Jt.prototype.getValue=Jt.prototype.I,Jt.prototype.clear=Jt.prototype.clear;var Wn=new K(Jt,"Transaction",-1),Wt=new K(Jt,"Property",0),de=new K(Jt,"Insert",1),Se=new K(Jt,"Remove",2);Jt.className="ChangedEvent",Jt.Transaction=Wn,Jt.Property=Wt,Jt.Insert=de,Jt.Remove=Se;function Ie(){this.o=new q().freeze(),this.xa="",this.j=!1}Ie.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(t!==void 0&&0<t){t=this.changes.count;for(var i=0;i<t;i++){var n=this.changes.M(i);n!==null&&(e+=`
  `+n.toString())}}return e},Ie.prototype.clear=function(){var t=this.changes;t.ka();for(var e=t.count-1;0<=e;e--){var i=t.M(e);i!==null&&i.clear()}t.clear(),t.freeze()},Ie.prototype.canUndo=function(){return this.isComplete},Ie.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.M(t);e!==null&&e.undo()}},Ie.prototype.canRedo=function(){return this.isComplete},Ie.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var i=this.changes.M(e);i!==null&&i.redo()}},Ie.prototype.$j=function(){if(this.isComplete){var t=this.changes;t.ka();for(var e=new ct,i=0;i<t.count;i++){var n=t.M(i);if(n!==null&&n.change===Wt&&n.object){var r=e.get(n.object);r||(r=new ct,e.set(n.object,r));var o=r.get(n.propertyName);o===null?r.set(n.propertyName,-1):(0<o&&t.cd(o,null),r.set(n.propertyName,i))}}for(i=e=0;i<t.count;i++)n=t.M(i),n!==null&&(i>e&&t.cd(e,n),e++);for(;t.length>e;)t.pop();t.freeze()}},Y.Object.defineProperties(Ie.prototype,{changes:{get:function(){return this.o}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),Ie.prototype.optimize=Ie.prototype.$j,Ie.prototype.redo=Ie.prototype.redo,Ie.prototype.canRedo=Ie.prototype.canRedo,Ie.prototype.undo=Ie.prototype.undo,Ie.prototype.canUndo=Ie.prototype.canUndo,Ie.prototype.clear=Ie.prototype.clear,Ie.className="Transaction";function ne(){this.Qt=new _,this.Jd=!1,this.u=new q().freeze(),this.Ce=-1,this.o=999,this.Fe=!1,this.Np=null,this.bi=0,this.j=!1,this.Ie=new q().freeze(),this.gl=new q,this.ut=!0,this.Et=this.rq=this.Ht=this.Gt=!1}ne.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var i=this.nestedTransactionNames.count,n=0;n<i;n++)0<n&&(e+=" "),e+=this.nestedTransactionNames.M(n);if(e+="]",t!==void 0&&0<t)for(i=this.history.count,n=0;n<i;n++)e+=`
 `+this.history.M(n).toString(t-1);return e},ne.prototype.clear=function(){var t=this.history;t.ka();for(var e=t.count-1;0<=e;e--){var i=t.M(e);i!==null&&i.clear()}t.clear(),this.Ce=-1,t.freeze(),this.Fe=!1,this.Np=null,this.bi=0,this.Ie.ka(),this.Ie.clear(),this.Ie.freeze(),this.gl.clear(),this.Et=this.rq=this.Ht=this.Gt=!1},ne.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},s=ne.prototype,s.Zw=function(t){this.Qt.add(t)},s.Tx=function(t){this.Qt.remove(t)},s.Ea=function(t){if(t===void 0&&(t=""),t===null&&(t=""),this.isUndoingRedoing)return!1;this.ut===!0&&(this.ut=!1,this.bi++,this.isInternalTransaction||this.Pb("StartingFirstTransaction",t,this.currentTransaction),0<this.bi&&this.bi--),this.isEnabled&&(this.Ie.ka(),this.Ie.add(t),this.Ie.freeze(),this.currentTransaction===null?this.gl.add(0):this.gl.add(this.currentTransaction.changes.count)),this.bi++;var e=this.transactionLevel===1;return e&&(this.isInternalTransaction||this.Pb("StartedTransaction",t,this.currentTransaction)),e},s.eb=function(t){return t===void 0&&(t=""),Uw(this,!0,t)},s.Kf=function(){return Uw(this,!1,"")};function Uw(t,e,i){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&Pt("Ending transaction without having started a transaction: "+i);var n=t.transactionLevel===1,r=t.currentTransaction;n&&e&&(t.isInternalTransaction||t.Pb("CommittingTransaction",i,r));var o=0;if(0<t.transactionLevel&&(t.bi--,t.isEnabled)){var l=t.Ie.count;0<l&&(i===""&&(i=t.Ie.M(0)),t.Ie.ka(),t.Ie.mb(l-1),t.Ie.freeze()),l=t.gl.count,0<l&&(o=t.gl.M(l-1),t.gl.mb(l-1))}if(n){if(e)t.rq=!1,r===null&&i!==""&&(r=t.currentTransaction),t.isEnabled&&r!==null&&(r.isComplete||(r.isComplete=!0,r.name=i),t.nx(),e=t.history,e.ka(),n=t.maxHistoryLength,0<=n&&(n===0?e.clear():e.count>=n&&(o=e.M(0),o!==null&&o.clear(),e.mb(0),t.Ce--)),n===0||e.count!==0&&e.get(e.count-1)===r||(e.add(r),t.Ce++),e.freeze()),t.isInternalTransaction||t.Pb("CommittedTransaction",i,r);else{t.Fe=!0;try{t.isEnabled&&r!==null&&(r.isComplete=!0,r.undo())}finally{t.isInternalTransaction||t.Pb("RolledBackTransaction",i,r),t.Fe=!1}r!==null&&r.clear()}return t.Np=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&r!==null){for(t=o,i=r.changes,r=i.count-1;r>=t;r--)e=i.M(r),e!==null&&e.undo(),i.ka(),i.mb(r);i.freeze()}return!1}s.nx=function(){if(!this.isUndoingRedoing&&this.canRedo()){var t=this.history;t.ka();for(var e=t.count-1;e>this.historyIndex;e--){var i=t.M(e);i!==null&&i.clear(),t.mb(e),this.rq=!0}t.freeze()}},ne.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!!(t!==null&&t.canUndo())},ne.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.Fe=!0,this.Pb("StartingUndo","Undo",t),this.Ce--,t.undo()}catch(e){Pt("undo error: "+e.toString())}finally{this.Pb("FinishedUndo","Undo",t),this.Fe=!1}}},ne.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!!(t!==null&&t.canRedo())},ne.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.Fe=!0,this.Pb("StartingRedo","Redo",t),this.Ce++,t.redo()}catch(e){Pt("redo error: "+e.toString())}finally{this.Pb("FinishedRedo","Redo",t),this.Fe=!1}}},ne.prototype.Pb=function(t,e,i){i===void 0&&(i=null);var n=new Jt;for(n.change=Wn,n.propertyName=t,n.object=i,n.oldValue=e,t=this.models;t.next();)e=t.value,n.model=e,e.ds(n)},ne.prototype.Vu=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;e===null&&(this.Np=e=new Ie);var i=t.copy();e=e.changes,e.ka(),e.add(i),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.ut&&(t=t.diagram,t!==null&&t.ri===!1||Pt("Change not within a transaction: "+i.toString()))}},ne.prototype.skipsEvent=function(t){if(t===null||0>t.change.value)return!0;if(t=t.object,t===null)return!1;if(t.layer!==void 0){if(t=t.layer,t!==null&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},Y.Object.defineProperties(ne.prototype,{models:{get:function(){return this.Qt.iterator}},isEnabled:{get:function(){return this.Jd},set:function(t){this.Jd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.M(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.M(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.Fe}},history:{get:function(){return this.u}},maxHistoryLength:{get:function(){return this.o},set:function(t){this.o=t}},historyIndex:{get:function(){return this.Ce}},currentTransaction:{get:function(){return this.Np}},transactionLevel:{get:function(){return this.bi}},isInTransaction:{get:function(){return 0<this.bi}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.Ie}},isPendingClear:{get:function(){return this.Gt},set:function(t){this.Gt=t}},isPendingUnmodified:{get:function(){return this.Ht},set:function(t){this.Ht=t}},isInternalTransaction:{get:function(){return this.Et},set:function(t){this.Et=t}},isJustDiscarded:{get:function(){return this.rq}}}),ne.prototype.handleChanged=ne.prototype.Vu,ne.prototype.redo=ne.prototype.redo,ne.prototype.undo=ne.prototype.undo,ne.prototype.canUndo=ne.prototype.canUndo,ne.prototype.discardHistoryAfterIndex=ne.prototype.nx,ne.prototype.rollbackTransaction=ne.prototype.Kf,ne.prototype.commitTransaction=ne.prototype.eb,ne.prototype.startTransaction=ne.prototype.Ea,ne.prototype.removeModel=ne.prototype.Tx,ne.prototype.addModel=ne.prototype.Zw,ne.prototype.clear=ne.prototype.clear,ne.className="UndoManager";function Lt(){Te(this),this.H=dh,this.xa="",this.Jd=!0,this.nb=!1,this.xm=null,this.Ay=new an,this.Zr=-1}Lt.prototype.toString=function(){return this.name!==""?this.name+" Tool":Go(this.constructor)},Lt.prototype.updateAdornments=function(){},Lt.prototype.canStart=function(){return this.isEnabled},Lt.prototype.doStart=function(){},Lt.prototype.doActivate=function(){this.isActive=!0},Lt.prototype.doDeactivate=function(){this.isActive=!1},Lt.prototype.doStop=function(){},Lt.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Lt.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Lt.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Lt.prototype.doMouseMove=function(){},Lt.prototype.doMouseUp=function(){this.stopTool()},Lt.prototype.doMouseWheel=function(){},Lt.prototype.canStartMultiTouch=function(){return!0},Lt.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,i=e.To(0,C.allocAt(NaN,NaN)),n=e.To(1,C.allocAt(NaN,NaN));if(i.w()&&n.w()&&(this.doCancel(),t.Ql("hasGestureZoom"))){t.Dw=t.scale;var r=n.x-i.x,o=n.y-i.y;t.Lw=Math.sqrt(r*r+o*o),e.bubbles=!1}C.free(i),C.free(n)},Lt.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,i=e.To(0,C.allocAt(NaN,NaN)),n=e.To(1,C.allocAt(NaN,NaN));if(i.w()&&n.w()&&(this.doCancel(),t.Ql("hasGestureZoom"))){var r=n.x-i.x,o=n.y-i.y;o=Math.sqrt(r*r+o*o)/t.Lw,r=new C((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2),o*=t.Dw;var l=t.commandHandler;if(o!==t.scale&&l.canResetZoom(o)){var u=t.zoomPoint;t.zoomPoint=r,l.resetZoom(o),t.zoomPoint=u}e.bubbles=!1}C.free(i),C.free(n)},Lt.prototype.doKeyDown=function(){this.diagram.lastInput.key==="Esc"&&this.doCancel()},Lt.prototype.doKeyUp=function(){},Lt.prototype.Ea=function(t){return t===void 0&&(t=this.name),this.transactionResult=null,this.diagram.Ea(t)},Lt.prototype.stopTransaction=function(){var t=this.diagram;return this.transactionResult===null?t.Kf():t.eb(this.transactionResult)},Lt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,i=t.Ol(e.documentPoint,!1);if(i!==null){if(we?e.meta:e.control){for(t.S("ChangingSelection",t.selection),e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!e.isSelected),t.S("ChangedSelection",t.selection)}else if(e.shift){if(!i.isSelected){for(t.S("ChangingSelection",t.selection),e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!0),t.S("ChangedSelection",t.selection)}}else if(!i.isSelected){for(e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&t.select(e)}}else!e.left||(we?e.meta:e.control)||e.shift||t.clearSelection()}},Lt.prototype.standardMouseClick=function(t,e){t===void 0&&(t=null),e===void 0&&(e=function(r){return!r.layer.isTemporary});var i=this.diagram,n=i.lastInput;return t=i.kc(n.documentPoint,t,e),n.targetObject=t,GN(t,n,i),n.handled};function GN(t,e,i){if(e.handled=!1,t===null||t.If()){var n=0;e.left?n=e.clickCount===1?1:e.clickCount===2?2:1:e.right&&e.clickCount===1&&(n=3);var r="ObjectSingleClicked";if(t!==null){switch(n){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked"}n!==0&&i.S(r,t)}else{switch(n){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked"}n!==0&&i.S(r)}if(t!==null)for(;t!==null;){switch(i=null,n){case 1:i=t.click;break;case 2:i=t.doubleClick?t.doubleClick:t.click;break;case 3:i=t.contextClick}if(i!==null&&(i(e,t),e.handled))break;t=t.panel}else{switch(t=null,n){case 1:t=i.click;break;case 2:t=i.doubleClick?i.doubleClick:i.click;break;case 3:t=i.contextClick}t!==null&&t(e)}}}Lt.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(t.animationManager.Ab!==!0){var i=t.skipsUndoManager;t.skipsUndoManager=!0;var n=t.viewportBounds.ca(e.documentPoint)?t.kc(e.documentPoint,null,null):null;!e.event||e.event.type!=="pointercancel"&&e.event.type!=="pointerout"||(n=null),e.targetObject=n;var r=!1;if(n!==t.Bk){var o=t.Bk,l=o;for(t.Bk=n,this.doCurrentObjectChanged(o,n),e.handled=!1;o!==null;){var u=o.mouseLeave;if(u!==null&&(n===o||n!==null&&n.rg(o)||(u(e,o,n),r=!0,e.handled)))break;o=o.panel}for(o=l,e.handled=!1;n!==null&&(l=n.mouseEnter,!(l!==null&&(o===n||o!==null&&o.rg(n)||(l(e,n,o),r=!0,e.handled))));)n=n.panel;n=t.Bk}if(n!==null){for(o=n,l="";o!==null&&(l=o.cursor,l==="");)o=o.panel;for(t.currentCursor=l,e.handled=!1,o=n;o!==null&&(n=o.mouseOver,!(n!==null&&(n(e,o),r=!0,e.handled)));)o=o.panel}else this.doUpdateCursor(null),n=t.mouseOver,n!==null&&(n(e),r=!0);r&&t.Rb(),t.skipsUndoManager=i}},Lt.prototype.doUpdateCursor=function(){var t=this.diagram;t&&(t.currentCursor="")},Lt.prototype.doCurrentObjectChanged=function(){},Lt.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,i=e.delta;if(i!==0&&t.documentBounds.w()){var n=t.commandHandler,r=t.toolManager.mouseWheelBehavior;if(n!==null&&(r===rh&&!e.shift||r===tu&&e.control))(0<i?n.canIncreaseZoom():n.canDecreaseZoom())&&(r=t.zoomPoint,t.zoomPoint=e.viewPoint,0<i?n.increaseZoom():n.decreaseZoom(),t.zoomPoint=r),e.bubbles=!1;else if(r===rh&&e.shift||r===tu&&!e.control){n=t.position.copy();var o=e.event;r=o.deltaMode;var l=o.deltaX;o=o.deltaY;var u="pixel";if(l===0&&o===0||e.shift)!e.shift&&t.allowVerticalScroll?(i=3*i*t.scrollVerticalLineChange,t.scroll(u,0<i?"up":"down",Math.abs(i))):e.shift&&t.allowHorizontalScroll&&(i=3*i*t.scrollHorizontalLineChange,t.scroll(u,0<i?"left":"right",Math.abs(i)));else{switch(r){case 0:u="pixel";break;case 1:u="line";break;case 2:u="page"}l!==0&&t.allowHorizontalScroll&&(l*=t.scrollHorizontalLineChange/16,t.scroll(u,0<l?"right":"left",Math.abs(l))),o!==0&&t.allowVerticalScroll&&(o*=t.scrollVerticalLineChange/16,t.scroll(u,0<o?"down":"up",Math.abs(o)))}this.doWheelChange(t,n,e)}}},Lt.prototype.doWheelChange=function(t,e,i){t.position.D(e)&&i.event.wheelDeltaX===0||(i.bubbles=!1)},Lt.prototype.standardWaitAfter=function(t,e){e===void 0&&(e=this.diagram.lastInput),this.cancelWaitAfter();var i=this,n=e.clone(this.Ay);this.Zr=G(function(){i.doWaitAfter(n)},t)},Lt.prototype.cancelWaitAfter=function(){this.Zr!==-1&&$.clearTimeout(this.Zr),this.Zr=-1},Lt.prototype.doWaitAfter=function(){},Lt.prototype.findToolHandleAt=function(t,e){return t=this.diagram.kc(t,function(i){for(;i!==null&&!(i.panel instanceof Nt);)i=i.panel;return i}),t===null?null:t.part.category===e?t:null},Lt.prototype.isBeyondDragSize=function(t,e){var i=this.diagram;t===void 0&&(t=i.firstInput.viewPoint),e===void 0&&(e=i.lastInput.viewPoint);var n=i.toolManager.dragSize,r=n.width;return n=n.height,i.firstInput.isTouchEvent&&(r+=6,n+=6),Math.abs(e.x-t.x)>r||Math.abs(e.y-t.y)>n},Y.Object.defineProperties(Lt.prototype,{diagram:{get:function(){return this.H},set:function(t){t instanceof j&&(this.H=t)}},name:{get:function(){return this.xa},set:function(t){this.xa=t}},isEnabled:{get:function(){return this.Jd},set:function(t){this.Jd=t}},isActive:{get:function(){return this.nb},set:function(t){this.nb=t}},transactionResult:{get:function(){return this.xm},set:function(t){this.xm=t}}}),Lt.prototype.startTransaction=Lt.prototype.Ea,Lt.className="Tool";function qt(){Lt.call(this),this.name="ToolManager",this.hb=new q,this.ob=new q,this.Ib=new q,this.F=this.V=850,this.o=new ht(2,2).ja(),this.Ha=5e3,this.ia=tu,this.u=j0,this.Mp=this.j=null,this.Aj=-1}Z(qt,Lt),qt.prototype.initializeStandardTools=function(){},qt.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Nt&&this.Mp===t){var i=e.adornedObject;(t!==null?i.part===t:i===null)?this.showToolTip(e,i):this.hideToolTip()}},qt.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===ef&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Lp){e.bubbles=!0;return}if(this.gestureBehavior===ef)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomStart();return}}for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.M(n);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseDown());return}}t.lastInput.button===1&&(this.mouseWheelBehavior===tu?this.mouseWheelBehavior=rh:this.mouseWheelBehavior===rh&&(this.mouseWheelBehavior=tu)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},qt.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Lp){e.bubbles=!0;return}if(this.gestureBehavior===ef)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomMove();return}}if(this.isActive)for(var i=this.mouseMoveTools.length,n=0;n<i;n++){var r=this.mouseMoveTools.M(n);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseMove());return}}Yw(this,t),t=e.event,t===null||t.type!=="pointermove"&&t.cancelable||(e.bubbles=!0)};function Yw(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}qt.prototype.doCurrentObjectChanged=function(t,e){t=this.currentToolTip,t===null||e!==null&&t instanceof Nt&&(e===t||e.rg(t))||this.hideToolTip()},qt.prototype.doWaitAfter=function(t){var e=this.diagram;e.ta!==null&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&(t=t.copy(),t.button=2,t.buttons=2,e.lastInput=t,e.ru=!0,e.doMouseUp()))},qt.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;e.targetObject===null&&(e.targetObject=t.kc(e.documentPoint,null,null));var i=e.targetObject;if(i!==null)for(e.handled=!1;i!==null&&(t=this.isActive?i.mouseHold:i.mouseHover,!(t!==null&&(t(e,i),e.handled)));)i=i.panel;else i=this.isActive?t.mouseHold:t.mouseHover,i!==null&&i(e)},qt.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(e.targetObject===null&&(e.targetObject=t.kc(e.documentPoint,null,null)),e=e.targetObject,e!==null){if(t=this.currentToolTip,!(t instanceof Nt)||e!==t&&!e.rg(t)){for(;e!==null;){if(t=e.toolTip,t!==null){this.showToolTip(t,e);return}e=e.panel}this.hideToolTip()}}else e=t.toolTip,e!==null?this.showToolTip(e,null):this.hideToolTip()},qt.prototype.showToolTip=function(t,e){var i=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Nt){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category="ToolTip",t.placeholder!==null&&(t.placeholder.scale=i.scale);var n=t.diagram;n!==null&&n!==i&&n.remove(t),i.add(t),e!==null?t.adornedObject=e:t.data=i.model,t.Va(),this.positionToolTip(t,e)}else t instanceof Xo&&t!==this.currentToolTip&&t.show(e,i,this);if(this.currentToolTip=t,this.Aj!==-1&&($.clearTimeout(this.Aj),this.Aj=-1),t=this.toolTipDuration,0<t&&t!==1/0){var r=this;this.Aj=G(function(){r.hideToolTip()},t)}},qt.prototype.positionToolTip=function(t){if(t.placeholder===null){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y=i.y+20/e.scale+n.height>r.bottom?i.y-(n.height+5/e.scale):i.y+20/e.scale,i.y<r.y&&(i.y=r.y),t.position=i}},qt.prototype.hideToolTip=function(){this.Aj!==-1&&($.clearTimeout(this.Aj),this.Aj=-1);var t=this.diagram,e=this.currentToolTip;e!==null&&(e instanceof Nt?(t.remove(e),this.Mp!==null&&this.Mp.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof Xo&&e.hide!==null&&e.hide(t,this),this.currentToolTip=null)},qt.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,i=0;i<e;i++){var n=this.mouseUpTools.M(i);if(n.diagram=this.diagram,n.canStart()){t.doFocus(),t.currentTool=n,t.currentTool===n&&(n.isActive||n.doActivate(),n.doMouseUp());return}}t.doFocus(),this.doDeactivate()},qt.prototype.doMouseWheel=function(){this.standardMouseWheel()},qt.prototype.doKeyDown=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyDown()},qt.prototype.doKeyUp=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyUp()},qt.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,i=0;i<e;i++){var n=this.mouseDownTools.M(i);if(n.name===t)return n}for(e=this.mouseMoveTools.length,i=0;i<e;i++)if(n=this.mouseMoveTools.M(i),n.name===t)return n;for(e=this.mouseUpTools.length,i=0;i<e;i++)if(n=this.mouseUpTools.M(i),n.name===t)return n;return null},qt.prototype.replaceTool=function(t,e){e!==null&&(e.diagram=this.diagram);for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.M(n);if(r.name===t)return e!==null?this.mouseDownTools.cd(n,e):this.mouseDownTools.mb(n),r}for(i=this.mouseMoveTools.length,n=0;n<i;n++)if(r=this.mouseMoveTools.M(n),r.name===t)return e!==null?this.mouseMoveTools.cd(n,e):this.mouseMoveTools.mb(n),r;for(i=this.mouseUpTools.length,n=0;n<i;n++)if(r=this.mouseUpTools.M(n),r.name===t)return e!==null?this.mouseUpTools.cd(n,e):this.mouseUpTools.mb(n),r;return null},qt.prototype.gb=function(t,e,i){e!==null&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):e!==null&&i.add(e)},Y.Object.defineProperties(qt.prototype,{mouseWheelBehavior:{get:function(){return this.ia},set:function(t){this.ia=t}},gestureBehavior:{get:function(){return this.u},set:function(t){this.u=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.Mp=t!==null&&t instanceof Nt?t.adornedPart:null}},mouseDownTools:{get:function(){return this.hb}},mouseMoveTools:{get:function(){return this.ob}},mouseUpTools:{get:function(){return this.Ib}},hoverDelay:{get:function(){return this.V},set:function(t){this.V=t}},holdDelay:{get:function(){return this.F},set:function(t){this.F=t}},dragSize:{get:function(){return this.o},set:function(t){this.o=t.J()}},toolTipDuration:{get:function(){return this.Ha},set:function(t){this.Ha=t}}}),qt.prototype.replaceStandardTool=qt.prototype.gb;var tu=new K(qt,"WheelScroll",0),rh=new K(qt,"WheelZoom",1),Gw=new K(qt,"WheelNone",2),j0=new K(qt,"GestureZoom",3),ef=new K(qt,"GestureCancel",4),Lp=new K(qt,"GestureNone",5);qt.className="ToolManager",qt.WheelScroll=tu,qt.WheelZoom=rh,qt.WheelNone=Gw,qt.GestureZoom=j0,qt.GestureCancel=ef,qt.GestureNone=Lp;function bt(){Lt.call(this),this.name="Dragging",this.u=this.Uw=this.ob=!0,this.o=this.Ha=this.V=this.Oe=null,this.Zm=this.Ib=!1,this.tl=new C(NaN,NaN),this.Fr=new C,this.hb=!0,this.Hk=100,this.Cg=[],this.te=new _().freeze(),this.ia=new wh,this.Cn=null,this.F="copy",this.Pc="",this.Qc="no-drop"}var eu;Z(bt,Lt),bt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.Hk)?!1:this.findDraggablePart()!==null},bt.prototype.findDraggablePart=function(){var t=this.diagram;if(t=t.Ol(t.firstInput.documentPoint,!1),t===null)return null;for(;t!==null&&!t.canSelect();)t=t.containingGroup;return t!==null&&(t.canMove()||t.canCopy())?t:null},bt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.Ol(t.firstInput.documentPoint,!1);if(e!==null){for(;e!==null&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,this.currentPart===null||this.currentPart.isSelected||(t.S("ChangingSelection",t.selection),e=t.lastInput,(we?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.S("ChangedSelection",t.selection))}}},bt.prototype.doActivate=function(){var t=this.diagram;this.Cn=null,this.currentPart===null&&this.standardMouseSelect();var e=this.currentPart;e!==null&&(e.canMove()||e.canCopy())&&(t.Hu(!0),Be=null,this.isActive=!0,this.tl.set(t.position),D0(this,t.selection),this.Cg.length=0,t.animationManager.Cc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),this.Uw=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.Os=!0,t.Gf("temporaryPixelRatio")===!0&&30<t.bx&&cf(t),_p(t,this.draggedParts),this.Ea("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Zm=!1,Be=this,il=this.diagram,this.doSimulatedDragOut()))};function D0(t,e){if(t.dragsLink){var i=t.diagram;i.allowRelink&&(i.model.Vj()&&e.count===1&&e.first()instanceof V?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.Ej(),t.Oe=i.toolManager.findTool("Relinking"),t.Oe===null&&(t.Oe=new Ln,t.Oe.diagram=i),t.Oe.originalLink=t.draggedLink):(t.draggedLink=null,t.Oe=null))}}bt.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},bt.prototype.Pd=function(t){return t===void 0?new ks(co):this.isGridSnapEnabled?new ks(new C(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3)):new ks(t.copy())},bt.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(this.diagram.layout.isRealtime=this.Uw,t.Hu(!1),t.ug(),O0(this),gf(t,this.draggedParts),this.draggedParts=this.currentPart=this.Cn=null,this.Zm=this.isDragOutStarted=!1,0<eu.count){for(var e=eu,i=e.length,n=0;n<i;n++){var r=e.M(n);Xw(r),Ms(r),O0(r),r.diagram.ug()}e.clear()}Xw(this),this.tl.h(NaN,NaN),il!==null&&(il.currentCursor=""),Be=il=null,Ms(this),t.isMouseCaptured=!1,t.currentCursor="",t.Os=!1,this.stopTransaction(),Gp(t,!0)},bt.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.$j(),e};function O0(t){var e=t.diagram,i=e.skipsUndoManager;e.skipsUndoManager=!0,Kw(t,e.lastInput,null),e.skipsUndoManager=i,t.Cg.length=0}function Hw(){var t=Be;Ms(t),E0(t);var e=t.diagram;t.tl.w()&&(e.position=t.tl),e.ug()}bt.prototype.doCancel=function(){Ms(this),E0(this);var t=this.diagram;this.tl.w()&&(t.position=this.tl),this.stopTool()},bt.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&(e.key==="Esc"?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},bt.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()};function I0(t,e){if(t.copiedParts===null){var i=t.diagram;if((!e||!i.isReadOnly&&!i.isModelReadOnly)&&t.draggedParts!==null){var n=i.undoManager;for(n.isEnabled&&n.isInTransaction?n.currentTransaction!==null&&0<n.currentTransaction.changes.count&&(i.undoManager.Kf(),i.Ea("Drag")):E0(t),i.skipsUndoManager=!e,i.partManager.addsToTemporaryLayer=!e,t.startPoint=i.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Lf():i.selection,e=i.Kj(e,i,!0),i=new ct,n=t.draggedParts.iterator;n.next();){var r=n.key;if(r.Zc()&&r.canCopy()){var o=e.I(r);o!==null&&(o.location=r.location,o.Va(),i.add(o,t.Pd(o.location)))}}for(e=e.iterator;e.next();)n=e.value,n instanceof V&&n.canCopy()&&i.add(n,t.Pd());t.copiedParts=i,D0(t,i.Lf()),t.draggedLink!==null&&(i=t.draggedLink,e=i.routeBounds,is(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null)}}}function Ms(t){var e=t.diagram;if(t.copiedParts!==null){if(e.Js(t.copiedParts.Lf(),!1),t.copiedParts=null,t.draggedParts!==null)for(var i=t.draggedParts.iterator;i.next();)i.key instanceof V&&(i.value.point=new C(0,0));t.doUpdateCursor(null)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Xw(t){if(t.draggedLink!==null){if(t.dragsLink&&t.Oe!==null){var e=t.Oe;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode),t.Oe.originalLink=null}t.draggedLink=null,t.Oe=null}}function iu(t,e,i){var n=t.diagram,r=t.startPoint,o=C.alloc();o.assign(n.lastInput.documentPoint),t.moveParts(e,o.re(r),i),C.free(o),n.Gf("temporaryPixelRatio")===!0&&n.Yh===null&&30<n.bx&&(cf(n),n.gk())}bt.prototype.moveParts=function(t,e,i){i===void 0&&(i=!1);var n=this.diagram;n!==null&&sm(n,t,e,this.dragOptions,i)};function E0(t){if(t.draggedParts!==null){for(var e=t.diagram,i=t.draggedParts.iterator;i.next();){var n=i.key;n.Zc()&&(n.location=i.value.point)}for(i=t.draggedParts.iterator;i.next();)if(n=i.key,n instanceof V&&n.suspendsRouting){var r=i.value.point;t.draggedParts.add(n,t.Pd()),is(n,-r.x,-r.y)}e.bd()}}function B0(t,e){var i=t.diagram;t.dragsLink&&(t.draggedLink!==null&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),$w(t,!1));var n=t.findDragOverObject(e),r=i.lastInput;r.targetObject=n,t.doUpdateCursor(n);var o=i.skipsUndoManager,l=!1;try{if(i.skipsUndoManager=!0,l=Kw(t,r,n),!t.isActive&&Be===null)return;var u=n!==null?n.part:null;if(u===null||i.handlesDragDropForTopLevelParts&&u.isTopLevel&&!(u instanceof dt)){var h=i.mouseDragOver;h!==null&&(h(r),l=!0)}if(!t.isActive&&Be===null||(t.doDragOver(e,n),!t.isActive&&Be===null))return}finally{i.skipsUndoManager=o,l&&i.bd()}t.Cn=n,i.isReadOnly||!i.allowMove&&!i.allowCopy||!i.allowHorizontalScroll&&!i.allowVerticalScroll||i.gs(r.viewPoint)}bt.prototype.findDragOverObject=function(t){var e=this;return tm(this.diagram,t,null,function(i){return i===null?i=!0:(i=i.part,i=!!(i===null||i instanceof Nt||i.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(i)||e.copiedParts&&e.copiedParts.contains(i))),!i})},bt.prototype.doUpdateCursor=function(t){var e=this.diagram;(t===null||this.Cn!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?e.currentCursor=this.copyCursor:this.mayMove()?e.currentCursor=this.moveCursor:this.mayDragOut()&&(e.currentCursor=this.nodropCursor))};function Kw(t,e,i){var n=!1,r=t.Cg.length,o=0<r?t.Cg[0]:null;if(i===o)return!1;e.handled=!1;for(var l=0;l<r;l++){var u=t.Cg[l],h=u.mouseDragLeave;if(h!==null&&(h(e,u,i),n=!0,e.handled))break}if(t.Cg.length=0,!t.isActive&&Be===null||i===null)return n;for(e.handled=!1,r=i;r!==null;)t.Cg.push(r),r=_w(r);for(r=t.Cg.length,i=0;i<r&&(l=t.Cg[i],u=l.mouseDragEnter,u===null||(u(e,l,o),n=!0,!e.handled));i++);return n}function _w(t){var e=t.panel;return e!==null?e:t instanceof ot&&!(t instanceof dt)&&(t=t.containingGroup,t!==null&&t.handlesDragDropForMembers)?t:null}function Ww(t,e,i){var n=t.Oe;if(n===null)return null;var r=t.diagram.og(e,n.portGravity,function(f){return n.findValidLinkablePort(f,i)});t=C.alloc();var o=1/0,l=null;for(r=r.iterator;r.next();){var u=r.value;if(u.part!==null){var h=u.ga(Et,t);h=e.Bf(h),h<o&&(l=u,o=h)}}return C.free(t),l}function $w(t,e){var i=t.draggedLink;if(i!==null&&!(2>i.pointsCount)){var n=t.diagram;if(!n.isReadOnly){var r=t.Oe;if(r!==null){var o=null,l=null;i.fromNode===null&&(o=Ww(t,i.i(0),!1),o!==null&&(l=o.part));var u=null,h=null;i.toNode===null&&(u=Ww(t,i.i(i.pointsCount-1),!0),u!==null&&(h=u.part)),r.isValidLink(l,o,h,u)?e?(i.defaultFromPoint=i.i(0),i.defaultToPoint=i.i(i.pointsCount-1),i.suspendsRouting=!1,i.fromNode=l,o!==null&&(i.fromPortId=o.portId),i.toNode=h,u!==null&&(i.toPortId=u.portId),i.fromPort!==n.Ox&&n.S("LinkRelinked",i,n.Ox),i.toPort!==n.Px&&n.S("LinkRelinked",i,n.Px)):bw(r,l,o,h,u):bw(r,null,null,null,null)}}}}bt.prototype.doDragOver=function(){};function Zw(t,e){var i=t.diagram;t.dragsLink&&$w(t,!0),O0(t);var n=t.findDragOverObject(e),r=i.lastInput;if(r.targetObject=n,n!==null){r.handled=!1;for(var o=n;o!==null;){var l=o.mouseDrop;if(l!==null&&(l(r,o),r.handled))break;HN(t,r,o),o=_w(o)}}else o=i.mouseDrop,o!==null&&o(r);if(t.isActive||Be!==null){for(r=(t.copiedParts||t.draggedParts).iterator;r.next();)o=r.key,o instanceof W&&o.linksConnected.each(function(u){u.suspendsRouting=!1});if(t.doDropOnto(e,n),t.isActive||Be!==null){for(t=E.alloc(),e=i.selection.iterator;e.next();)n=e.value,n instanceof W&&XN(i,n,t);E.free(t)}}}function HN(t,e,i){t=t.diagram,i=i.part,!t.handlesDragDropForTopLevelParts||!i.isTopLevel||i instanceof dt||(i=t.mouseDrop,i!==null&&i(e))}function XN(t,e,i){var n=!1;if(i=e.getAvoidableRect(i),t.viewportBounds.Re(i)&&(n=!0),t=t.Pu(i,function(r){return r.part},function(r){return r instanceof V},!0,function(r){return r instanceof V},n),t.count!==0)for(t=t.iterator;t.next();)i=t.value,!i.Td(e)&&i.isAvoiding&&i.bb()}bt.prototype.doDropOnto=function(){},bt.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||this.currentPart===null||this.draggedParts===null||(this.mayCopy()?(I0(this,!1),_p(t,this.copiedParts),iu(this,this.copiedParts,!1),gf(t,this.copiedParts)):this.mayMove()?(Ms(this),iu(this,this.draggedParts,!0)):this.mayDragOut()?(I0(this,!1),iu(this,this.copiedParts,!1)):Ms(this),B0(this,t.lastInput.documentPoint))}},bt.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var i=this.mayCopy();if(i&&this.copiedParts!==null?(Ms(this),I0(this,!0),_p(t,this.copiedParts),iu(this,this.copiedParts,!1),gf(t,this.copiedParts),this.copiedParts!==null&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(r){r.isSelected=!0}))):(e=!0,Ms(this),this.mayMove()&&(iu(this,this.draggedParts,!0),B0(this,t.lastInput.documentPoint))),this.Zm=!0,Zw(this,t.lastInput.documentPoint),this.isActive){var n=i?this.copiedParts.Lf():this.draggedParts.Lf();this.copiedParts=null,e&&KN(this),t.Ya(),gf(t,this.draggedParts),this.transactionResult=i?"Copy":"Move",t.S(i?"SelectionCopied":"SelectionMoved",n)}this.stopTool(),i&&t.S("ChangedSelection",t.selection)}}},bt.prototype.simulatedMouseMove=function(t,e,i){if(Be===null)return!1;var n=Be.diagram;i instanceof j||(i=null);var r=il;return i!==r&&(r!==null&&r!==n&&(r.ug(),Be.isDragOutStarted=!1,r=r.toolManager.findTool("Dragging"),r!==null&&r.doSimulatedDragLeave()),il=i,i!==null&&i!==n&&(Hw(),r=i.toolManager.findTool("Dragging"),r!==null&&(eu.contains(r)||eu.add(r),r.doSimulatedDragEnter())),this.doUpdateCursor(null)),i===null||i===n||!i.allowDrop||i.isReadOnly||!i.allowInsert?!1:(n=i.toolManager.findTool("Dragging"),n!==null&&(t!==null&&(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.op(e),i.lastInput.down=!1,i.lastInput.up=!1,n.doSimulatedDragOver()),!0)},bt.prototype.simulatedMouseUp=function(t,e,i){if(Be===null)return!1;var n=il,r=Be.diagram;if(i===null)return Be.doCancel(),!0;if(i!==n){var o=n.toolManager.findTool("Dragging");if(n!==null&&n!==r&&o!==null)return n.ug(),Be.isDragOutStarted=!1,o.doSimulatedDragLeave(),!1;il=i,n=i.toolManager.findTool("Dragging"),n!==null&&(Hw(),eu.contains(n)||eu.add(n),n.doSimulatedDragEnter())}return i!==this.diagram?(t!==null?(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)):e===null&&(e=new C),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.op(e),i.lastInput.down=!1,i.lastInput.up=!0,t=i.toolManager.findTool("Dragging"),t!==null&&t.doSimulatedDrop(),t=Be,t!==null&&(i=t.mayCopy(),t.transactionResult=i?"Copy":"Move",t.stopTool()),!0):!1};function KN(t){if(t.draggedParts!==null)for(var e=t.draggedParts.iterator;e.next();){var i=e.key;i instanceof W&&(i=i.containingGroup,i===null||i.placeholder===null||t.draggedParts.contains(i)||i.placeholder.v())}}bt.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(we?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},bt.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},bt.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canMove())},bt.prototype.computeBorder=function(t,e,i){return this.Zm||this.draggedParts===null||this.draggedParts.contains(t)?null:i.assign(e)},bt.prototype.Fz=function(){return Be},bt.prototype.mayDragIn=function(){var t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;var e=Be;return!(e===null||e.diagram.model.dataFormat!==t.model.dataFormat)},bt.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.Cc(),_o(t),t.animationManager.Cc();var e=Be;e!==null&&(e.diagram.Os=!1,t.lastInput.event===null&&(t.lastInput.event=e.diagram.lastInput.event)),this.doUpdateCursor(null)}},bt.prototype.doSimulatedDragLeave=function(){var t=Be;t!==null&&t.doSimulatedDragOut(),this.doCancel()},bt.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.Em=!0;var e=Be;if(e!==null&&e.draggedParts!==null){if(!this.mayDragIn())return;Qw(this,e.draggedParts.Lf(),!1,t.firstInput),iu(this,this.copiedParts,!1),B0(this,t.lastInput.documentPoint)}t.animationManager.Em=!1},bt.prototype.doSimulatedDrop=function(){var t=this.diagram,e=Be;if(e!==null){var i=e.diagram;if(e.Zm=!0,Ms(this),!this.mayDragIn())return;t.animationManager.Em=!0,t.S("ChangingSelection",t.selection),this.Ea("Drop"),Qw(this,e.draggedParts.Lf(),!0,t.lastInput),iu(this,this.copiedParts,!1);var n=new _;this.copiedParts!==null&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(r){r.isSelected=!0,n.add(r)})),Zw(this,t.lastInput.documentPoint),t.Ya(),this.copiedParts!==null&&(this.transactionResult="ExternalCopy"),this.copiedParts=null,t.doFocus(),t.S("ExternalObjectsDropped",n,i),this.stopTransaction(),t.S("ChangedSelection",t.selection)}t.animationManager.Em=!1};function Qw(t,e,i,n){if(t.copiedParts===null){var r=t.diagram;if(!r.isReadOnly&&!r.isModelReadOnly){r.skipsUndoManager=!i,r.partManager.addsToTemporaryLayer=!i,t.startPoint=n.documentPoint,i=r.Kj(e,r,!0);var o=E.alloc();r=n=1/0;for(var l=-1/0,u=-1/0,h=e.iterator;h.next();){var f=h.value;if(f.isVisible()){var c=f.location;f=c.x,c=c.y,isNaN(f)||isNaN(c)||(f<n&&(n=f),c<r&&(r=c),f>l&&(l=f),c>u&&(u=c))}}for(n===1/0?o.h(0,0,0,0):o.h(n,r,l-n,u-r),n=o.x+o.width/2,r=o.y+o.height/2,E.free(o),o=t.Fr,l=new ct,u=C.alloc(),h=e.iterator;h.next();)f=h.value,f instanceof V&&f.canCopy()&&(c=i.I(f),c!==null&&(c.points=f.points,is(c,o.x-n,o.y-r),c.suspendsRouting=!0,l.add(c,t.Pd())));for(e=e.iterator;e.next();)f=e.value,f.Zc()&&f.canCopy()&&(h=i.I(f),h!==null&&(f=f.location,u.h(o.x-(n-f.x),o.y-(r-f.y)),h.location=u,h.Va(),l.add(h,t.Pd(u))));C.free(u),t.copiedParts=l,D0(t,l.Lf()),t.draggedLink!==null&&(i=t.draggedLink,e=i.routeBounds,is(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2))),t.doUpdateCursor(null)}}}bt.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.Os=!1,this.mayCopy()||this.mayMove()?t.currentCursor="":t.currentCursor=this.nodropCursor,this.Cn=null},bt.prototype.computeMove=function(t,e,i,n){return i=this.diagram,i!==null?i.computeMove(t,e,this.dragOptions,n):new C},Y.Object.defineProperties(bt.prototype,{isCopyEnabled:{get:function(){return this.ob},set:function(t){this.ob=t}},copiesEffectiveCollection:{get:function(){return this.u},set:function(t){this.u=t}},dragOptions:{get:function(){return this.ia},set:function(t){this.ia=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.hb},set:function(t){this.hb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.D(t)||(t=t.J(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.D(t)||(t=t.J(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.D(t)||(t=t.J(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.F},set:function(t){this.F=t}},moveCursor:{get:function(){return this.Pc},set:function(t){this.Pc=t}},nodropCursor:{get:function(){return this.Qc},set:function(t){this.Qc=t}},currentPart:{get:function(){return this.V},set:function(t){this.V=t}},copiedParts:{get:function(){return this.o},set:function(t){this.o=t}},draggedParts:{get:function(){return this.Ha},set:function(t){this.Ha=t}},draggingParts:{get:function(){return this.copiedParts!==null?this.copiedParts.Lf():this.draggedParts!==null?this.draggedParts.Lf():this.te}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Ib},set:function(t){this.Ib=t}},startPoint:{get:function(){return this.Fr},set:function(t){this.Fr.D(t)||this.Fr.assign(t)}},delay:{get:function(){return this.Hk},set:function(t){this.Hk=t}}}),bt.prototype.getDraggingSource=bt.prototype.Fz;var Be=null,il=null;bt.className="DraggingTool",eu=new q,Ct("draggingTool",function(){return this.findTool("Dragging")},function(t){this.gb("Dragging",t,this.mouseMoveTools)}),qt.prototype.doCancel=function(){Be!==null&&Be.doCancel(),Lt.prototype.doCancel.call(this)};function We(){Lt.call(this),this.te=100,this.Ha=!1,this.u="pointer";var t=new V,e=new yt;e.isPanelMain=!0,e.stroke="blue",t.add(e),e=new yt,e.toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.Di=t,t=new W,e=new yt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Sp,t.add(e),t.selectable=!1,t.layerName="Tool",this.Ci=t,this.j=e,t=new W,e=new yt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Sp,t.add(e),t.selectable=!1,t.layerName="Tool",this.Ei=t,this.o=e,this.Qc=this.Pc=this.ob=this.hb=this.Ib=null,this.ia=!0,this.jy=new ct,this.Of=this.hj=this.Pf=null}Z(We,Lt),We.prototype.doStop=function(){this.diagram.ug(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},We.prototype.copyPortProperties=function(t,e,i,n,r){if(t!==null&&e!==null&&i!==null&&n!==null){var o=e.Df(),l=ht.alloc();l.width=e.naturalBounds.width*o,l.height=e.naturalBounds.height*o,n.desiredSize=l,ht.free(l),r?(n.toSpot=e.toSpot,n.toEndSegmentLength=e.toEndSegmentLength):(n.fromSpot=e.fromSpot,n.fromEndSegmentLength=e.fromEndSegmentLength),i.locationSpot=Et,o=C.alloc(),i.location=e.ga(Et,o),C.free(o),n.angle=e.mi(),this.portTargeted!==null&&this.portTargeted(t,e,i,n,r)}},We.prototype.setNoTargetPortProperties=function(t,e,i){e!==null&&(e.desiredSize=Sp,e.fromSpot=Ke,e.toSpot=Ke),t!==null&&(t.location=this.diagram.lastInput.documentPoint),this.portTargeted!==null&&this.portTargeted(null,null,t,e,i)},We.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},We.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null&&this.targetPort.part instanceof W){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.gs(t.lastInput.viewPoint)}},We.prototype.findValidLinkablePort=function(t,e){if(t===null)return null;var i=t.part;if(!(i instanceof W))return null;for(;t!==null;){var n=e?t.toLinkable:t.fromLinkable;if(n===!0&&(t.portId!==null||t instanceof W)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(n===!1)break;t=t.panel}return null},We.prototype.findTargetPort=function(t){var e=this.diagram,i=e.lastInput.documentPoint,n=this.portGravity;0>=n&&(n=.1);var r=this,o=e.og(i,n,function(p){return r.findValidLinkablePort(p,t)},null,!0);for(n=1/0,e=null,o=o.iterator;o.next();){var l=o.value,u=l.part;if(u instanceof W){var h=l.ga(Et,C.alloc()),f=i.x-h.x,c=i.y-h.y;C.free(h),h=f*f+c*c,h<n&&(f=this.validPortsCache.I(l),f!==null?f&&(e=l,n=h):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,u,l)||!t&&this.isValidLink(u,l,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(l,!0),e=l,n=h):this.validPortsCache.add(l,!1))}}return e!==null&&(i=e.part,i instanceof W&&(i.layer===null||i.layer.allowLink))?e:null},We.prototype.isValidFrom=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.fromLinkable!==!0))return!1;var i=e.fromMaxLinks;if(1/0>i){if(this.originalLink!==null&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(e=e.portId,e===null&&(e=""),t.No(e).count>=i)return!1}return!0},We.prototype.isValidTo=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.toLinkable!==!0))return!1;var i=e.toMaxLinks;if(1/0>i){if(this.originalLink!==null&&t===this.originalToNode&&e===this.originalToPort)return!0;if(e=e.portId,e===null&&(e=""),t.Sd(e).count>=i)return!1}return!0},We.prototype.isInSameNode=function(t,e){return t===null||e===null?!1:t===e?!0:(t=t.part,e=e.part,t!==null&&t===e)},We.prototype.isLinked=function(t,e){if(t===null||e===null)return!1;var i=t.part;if(!(i instanceof W))return!1;t=t.portId,t===null&&(t="");var n=e.part;if(!(n instanceof W))return!1;for(e=e.portId,e===null&&(e=""),e=n.Sd(e);e.next();)if(n=e.value,n.fromNode===i&&n.fromPortId===t)return!0;return!1},We.prototype.isValidLink=function(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||!(e===null||n===null||(e.fromLinkableSelfNode&&n.toLinkableSelfNode||!this.isInSameNode(e,n))&&(e.fromLinkableDuplicates&&n.toLinkableDuplicates||!this.isLinked(e,n)))||this.originalLink!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.originalLink)||i!==null&&this.isLabelDependentOnLink(i,this.originalLink))||t!==null&&i!==null&&(t.data===null&&i.data!==null||t.data!==null&&i.data===null)||!this.isValidCycle(t,i,this.originalLink))return!1;if(t!==null){var r=t.linkValidation;if(r!==null&&!r(t,e,i,n,this.originalLink))return!1}return i!==null&&(r=i.linkValidation,r!==null&&!r(t,e,i,n,this.originalLink))?!1:(r=this.linkValidation,r!==null?r(t,e,i,n,this.originalLink):!0)},We.prototype.isLabelDependentOnLink=function(t,e){if(t===null)return!1;var i=t.labeledLink;if(i===null)return!1;if(i===e)return!0;var n=new _;return n.add(t),R0(this,i,e,n)};function R0(t,e,i,n){if(e===i)return!0;var r=e.fromNode;return r!==null&&r.isLinkLabel&&(n.add(r),R0(t,r.labeledLink,i,n))?!0:(e=e.toNode,!!(e!==null&&e.isLinkLabel&&(n.add(e),R0(t,e.labeledLink,i,n))))}We.prototype.isValidCycle=function(t,e,i){if(i===void 0&&(i=null),t===null||e===null)return this.isUnconnectedLinkValid;var n=this.diagram.validCycle;if(n!==Zp){if(n===wm){if(n=i||this.temporaryLink,n!==null&&!n.isTreeLink)return!0;for(n=e.linksConnected;n.next();){var r=n.value;if(r!==i&&r.isTreeLink&&r.toNode===e)return!1}return!nf(this,t,e,i,!0)}if(n===Mm){if(n=i||this.temporaryLink,n!==null&&!n.isTreeLink)return!0;for(n=t.linksConnected;n.next();)if(r=n.value,r!==i&&r.isTreeLink&&r.fromNode===t)return!1;return!nf(this,t,e,i,!0)}if(n===vm)return t===e?t=!0:(n=new _,n.add(e),t=Jw(this,n,t,e,i)),!t;if(n===EM)return!nf(this,t,e,i,!1);if(n===xm)return t===e?t=!0:(n=new _,n.add(e),t=qw(this,n,t,e,i)),!t}return!0};function nf(t,e,i,n,r){if(e===i)return!0;if(e===null||i===null)return!1;for(var o=e.linksConnected;o.next();){var l=o.value;if(l!==n&&(!r||l.isTreeLink)&&l.toNode===e&&(l=l.fromNode,l!==e&&nf(t,l,i,n,r)))return!0}return!1}function Jw(t,e,i,n,r){if(i===n)return!0;if(i===null||n===null||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var l=o.value;if(l!==r&&l.toNode===i&&(l=l.fromNode,l!==i&&Jw(t,e,l,n,r)))return!0}return!1}function qw(t,e,i,n,r){if(i===n)return!0;if(i===null||n===null||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var l=o.value;if(l!==r){var u=l.fromNode;if(l=l.toNode,u=u===i?l:u,u!==i&&qw(t,e,u,n,r))return!0}}return!1}Y.Object.defineProperties(We.prototype,{portGravity:{get:function(){return this.te},set:function(t){0<=t&&(this.te=t)}},isUnconnectedLinkValid:{get:function(){return this.Ha},set:function(t){this.Ha=t}},linkingCursor:{get:function(){return this.u},set:function(t){this.u=t}},temporaryLink:{get:function(){return this.Di},set:function(t){this.Di=t}},temporaryFromNode:{get:function(){return this.Ci},set:function(t){(this.Ci=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(this.j!==null){var e=this.j.panel;if(e!==null){var i=e.O.indexOf(this.j);e.mb(i),e.Hb(i,t)}}this.j=t}},temporaryToNode:{get:function(){return this.Ei},set:function(t){(this.Ei=t)&&(this.o=t.port)}},temporaryToPort:{get:function(){return this.o},set:function(t){if(this.o!==null){var e=this.o.panel;if(e!==null){var i=e.O.indexOf(this.o);e.mb(i),e.Hb(i,t)}}this.o=t}},originalLink:{get:function(){return this.Ib},set:function(t){this.Ib=t}},originalFromNode:{get:function(){return this.hb},set:function(t){this.hb=t}},originalFromPort:{get:function(){return this.ob},set:function(t){this.ob=t}},originalToNode:{get:function(){return this.Pc},set:function(t){this.Pc=t}},originalToPort:{get:function(){return this.Qc},set:function(t){this.Qc=t}},isForwards:{get:function(){return this.ia},set:function(t){this.ia=t}},validPortsCache:{get:function(){return this.jy}},targetPort:{get:function(){return this.Pf},set:function(t){this.Pf=t}},linkValidation:{get:function(){return this.hj},set:function(t){this.hj=t}},portTargeted:{get:function(){return this.Of},set:function(t){this.Of=t}}}),We.className="LinkingBaseTool";function Ai(){We.call(this),this.name="Linking",this.V={},this.F=null,this.K=rf,this.Xd=null}Z(Ai,We),Ai.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.xs()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize()?!1:this.findLinkablePort()!==null},Ai.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(e===null&&(e=t.kc(t.firstInput.documentPoint,null,null)),e===null||(t=e.part,!(t instanceof W)))return null;var i=this.direction;if(i===rf||i===z0){var n=this.findValidLinkablePort(e,!1);if(n!==null||this.startObject===t&&(n=t.port,this.findValidLinkablePort(n,!1)))return this.isForwards=!0,n}return(i===rf||i===V0)&&(e=this.findValidLinkablePort(e,!0),e!==null||this.startObject===t&&(e=t.port,this.findValidLinkablePort(e,!0)))?(this.isForwards=!1,e):null},Ai.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();e===null?this.stopTool():(this.Ea(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(this.temporaryToNode!==null&&(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,e=this.originalFromPort.part,e instanceof W&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(this.temporaryFromNode!==null&&(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,e=this.originalToPort.part,e instanceof W&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),this.temporaryFromNode&&this.temporaryFromNode.Va(),t.add(this.temporaryToNode),this.temporaryToNode&&this.temporaryToNode.Va(),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.bb(),t.add(this.temporaryLink)),this.isActive=!0)},Ai.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Ai.prototype.doStop=function(){We.prototype.doStop.call(this),this.startObject=null},Ai.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,i=null,n=null,r=null,o=null;try{var l=this.targetPort=this.findTargetPort(this.isForwards);if(l!==null){var u=l.part;u instanceof W&&(this.isForwards?(this.originalFromNode!==null&&(e=this.originalFromNode,i=this.originalFromPort),n=u,r=l):(e=u,i=l,this.originalToNode!==null&&(n=this.originalToNode,r=this.originalToPort)))}else this.isForwards?this.originalFromNode!==null&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,i=this.originalFromPort):this.originalToNode!==null&&this.isUnconnectedLinkValid&&(n=this.originalToNode,r=this.originalToPort);e!==null||n!==null?(o=this.insertLink(e,i,n,r),o!==null?(l===null&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),o.isSelected=!0),this.transactionResult=this.name,t.S("LinkDrawn",o)):this.doNoLink(e,i,n,r)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),o&&t.allowSelect&&t.S("ChangedSelection",t.selection)}}},Ai.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(t===null)return!0;if(t instanceof V)return t.isTreeLink;var e=this.diagram;return e===null?!0:(t=e.partManager.getLinkCategoryForData(t),e=e.partManager.findLinkTemplateForCategory(t),e!==null?e.isTreeLink:!0)},Ai.prototype.insertLink=function(t,e,i,n){return this.diagram.partManager.insertLink(t,e,i,n)},Ai.prototype.doNoLink=function(){},Y.Object.defineProperties(Ai.prototype,{archetypeLinkData:{get:function(){return this.V},set:function(t){this.V=t}},archetypeLabelNodeData:{get:function(){return this.F},set:function(t){this.F=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.Xd},set:function(t){this.Xd=t}}});var rf=new K(Ai,"Either",0),z0=new K(Ai,"ForwardsOnly",0),V0=new K(Ai,"BackwardsOnly",0);Ai.className="LinkingTool",Ai.Either=rf,Ai.ForwardsOnly=z0,Ai.BackwardsOnly=V0;function Ln(){We.call(this),this.name="Relinking";var t=new yt;t.figure="Diamond",t.desiredSize=Jl,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.V=t,t=new yt,t.figure="Diamond",t.desiredSize=Jl,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Xd=t,this.F=null,this.Gw=new E}Z(Ln,We),Ln.prototype.updateAdornments=function(t){if(t!==null&&t instanceof V){var e="RelinkFrom",i=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.selectionObject;n!==null&&t.canRelinkFrom()&&t.actualBounds.w()&&t.isVisible()&&n.actualBounds.w()&&n.Ed()&&(i=t.Oj(e),i===null&&(i=this.makeAdornment(n,!1),t.bh(e,i)))}i===null&&t.Jf(e),e="RelinkTo",i=null,t.isSelected&&!this.diagram.isReadOnly&&(n=t.selectionObject,n!==null&&t.canRelinkTo()&&t.actualBounds.w()&&t.isVisible()&&n.actualBounds.w()&&n.Ed()&&(i=t.Oj(e),i===null?(i=this.makeAdornment(n,!0),t.bh(e,i)):i.v())),i===null&&t.Jf(e)}},Ln.prototype.makeAdornment=function(t,e){var i=new Nt;return i.type=z.Link,e=e?this.toHandleArchetype:this.fromHandleArchetype,e!==null&&i.add(e.copy()),i.adornedObject=t,i},Ln.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.xs()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),e!==null},Ln.prototype.doActivate=function(){var t=this.diagram;if(this.originalLink===null){var e=this.handle;if(e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"),e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),e===null)return;var i=e.part;if(!(i instanceof Nt&&i.adornedPart instanceof V))return;this.handle=e,this.isForwards=i===null||i.category==="RelinkTo",this.originalLink=i.adornedPart}this.Ea(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.Gw.set(this.originalLink.actualBounds),this.originalLink!==null&&0<this.originalLink.pointsCount&&(this.originalLink.fromNode===null&&(this.temporaryFromPort!==null&&(this.temporaryFromPort.desiredSize=Ql),this.temporaryFromNode!==null&&(this.temporaryFromNode.location=this.originalLink.i(0))),this.originalLink.toNode===null&&(this.temporaryToPort!==null&&(this.temporaryToPort.desiredSize=Ql),this.temporaryToNode!==null&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.bb(),t.add(this.temporaryLink)),this.isActive=!0},Ln.prototype.copyLinkProperties=function(t,e){if(t!==null&&e!==null){e.adjusting=t.adjusting,e.corner=t.corner;var i=t.curve;(i===Mu||i===ko)&&(i=Ye),e.curve=i,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},Ln.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Ln.prototype.doStop=function(){We.prototype.doStop.call(this),this.handle=null},Ln.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,i=this.originalFromPort,n=this.originalToNode,r=this.originalToPort,o=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null){var l=this.targetPort.part;l instanceof W&&(this.isForwards?(n=l,r=this.targetPort):(e=l,i=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?r=n=null:i=e=null:o=null;o!==null?(this.reconnectLink(o,this.isForwards?n:e,this.isForwards?r:i,this.isForwards),this.targetPort===null&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint,o.bb()),this.transactionResult=this.name,t.S("LinkRelinked",o,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Yo(this.Gw)}finally{this.stopTool()}}},Ln.prototype.reconnectLink=function(t,e,i,n){return i=i!==null&&i.portId!==null?i.portId:"",n?(t.toNode=e,t.toPortId=i):(t.fromNode=e,t.fromPortId=i),!0},Ln.prototype.doNoRelink=function(){};function bw(t,e,i,n,r){e!==null?(t.copyPortProperties(e,i,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),n!==null?(t.copyPortProperties(n,r,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}Y.Object.defineProperties(Ln.prototype,{fromHandleArchetype:{get:function(){return this.V},set:function(t){this.V=t}},toHandleArchetype:{get:function(){return this.Xd},set:function(t){this.Xd=t}},handle:{get:function(){return this.F},set:function(t){if(t!==null&&!(t.part instanceof Nt))throw Error("new handle is not in an Adornment: "+t);this.F=t}}}),Ln.className="RelinkingTool",Ct("linkingTool",function(){return this.findTool("Linking")},function(t){this.gb("Linking",t,this.mouseMoveTools)}),Ct("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.gb("Relinking",t,this.mouseDownTools)});function ge(){Lt.call(this),this.name="LinkReshaping";var t=new yt;t.figure="Rectangle",t.desiredSize=a0,t.fill="lightblue",t.stroke="dodgerblue",this.o=t,t=new yt,t.figure="Diamond",t.desiredSize=Jl,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.u=t,this.F=3,this.Us=this.j=null,this.Hw=new C,this.Yq=new q}Z(ge,Lt),ge.prototype.Tu=function(t){return t&&t.reshapingBehavior.value!==0?t.reshapingBehavior:Fp},ge.prototype.pm=function(t,e){t.reshapingBehavior=e},ge.prototype.updateAdornments=function(t){if(t!==null&&t instanceof V){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.path;i!==null&&t.canReshape()&&t.actualBounds.w()&&t.isVisible()&&i.actualBounds.w()&&i.Ed()&&(e=t.Oj(this.name),e===null||e.Cw!==t.pointsCount||e.Ww!==t.resegmentable)&&(e=this.makeAdornment(i),e!==null&&(e.Cw=t.pointsCount,e.Ww=t.resegmentable,t.bh(this.name,e)))}e===null&&t.Jf(this.name)}},ge.prototype.makeAdornment=function(t){var e=t.part,i=e.pointsCount,n=e.isOrthogonal,r=null;if(e.points!==null&&1<i){r=new Nt,r.type=z.Link,i=e.firstPickIndex;var o=e.lastPickIndex,l=n?1:0;if(e.resegmentable&&e.computeCurve()!==Yi)for(var u=i+l;u<o-l;u++){var h=this.makeResegmentHandle(t,u);h!==null&&(h.segmentIndex=u,h.segmentFraction=.5,h.fromMaxLinks=999,r.add(h))}for(l=i+1;l<o;l++)if(u=this.makeHandle(t,l),u!==null){if(u.segmentIndex=l,l!==i)if(l===i+1&&n){h=e.i(i);var f=e.i(i+1);A.B(h.x,f.x)&&A.B(h.y,f.y)&&(f=e.i(i-1)),A.B(h.x,f.x)?(this.pm(u,ru),u.cursor="n-resize"):A.B(h.y,f.y)&&(this.pm(u,nu),u.cursor="w-resize")}else l===o-1&&n?(h=e.i(o-1),f=e.i(o),A.B(h.x,f.x)&&A.B(h.y,f.y)&&(h=e.i(o+1)),A.B(h.x,f.x)?(this.pm(u,ru),u.cursor="n-resize"):A.B(h.y,f.y)&&(this.pm(u,nu),u.cursor="w-resize")):l!==o&&(this.pm(u,Ap),u.cursor="move");r.add(u)}r.adornedObject=t}return r},ge.prototype.makeHandle=function(){var t=this.handleArchetype;return t===null?null:t.copy()},ge.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return t===null?null:t.copy()},ge.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowReshape&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},ge.prototype.doActivate=function(){var t=this.diagram;if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null){var e=this.handle.part.adornedPart;if(e instanceof V){if(this.Us=e,t.isMouseCaptured=!0,this.Ea(this.name),e.resegmentable&&this.handle.fromMaxLinks===999){var i=e.points.copy(),n=this.getResegmentingPoint();if(i.Hb(this.handle.segmentIndex+1,n),e.isOrthogonal&&i.Hb(this.handle.segmentIndex+1,n),e.points=i,e.Zb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),this.handle===null){this.doDeactivate();return}}this.Hw=e.i(this.handle.segmentIndex),this.Yq=e.points.copy(),this.isActive=!0}}},ge.prototype.doDeactivate=function(){this.stopTransaction(),this.Us=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},ge.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.$j(),e},ge.prototype.doCancel=function(){var t=this.adornedLink;t!==null&&(t.points=this.Yq),this.stopTool()},ge.prototype.getResegmentingPoint=function(){return this.handle.ga(Et)},ge.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},ge.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),e=this.adornedLink,e!==null&&e.resegmentable){var i=this.handle.segmentIndex,n=e.i(i-1),r=e.i(i),o=e.i(i+1);if(e.isOrthogonal){if(i>e.firstPickIndex+1&&i<e.lastPickIndex-1){var l=e.i(i-2);if(Math.abs(n.x-r.x)<this.resegmentingDistance&&Math.abs(n.y-r.y)<this.resegmentingDistance&&(oh(this,l,n,r,o,!0)||oh(this,l,n,r,o,!1))){var u=e.points.copy();oh(this,l,n,r,o,!0)?(u.cd(i-2,new C(l.x,(o.y+l.y)/2)),u.cd(i+1,new C(o.x,(o.y+l.y)/2))):(u.cd(i-2,new C((o.x+l.x)/2,l.y)),u.cd(i+1,new C((o.x+l.x)/2,o.y))),u.mb(i),u.mb(i-1),e.points=u,e.Zb()}else l=e.i(i+2),Math.abs(r.x-o.x)<this.resegmentingDistance&&Math.abs(r.y-o.y)<this.resegmentingDistance&&(oh(this,n,r,o,l,!0)||oh(this,n,r,o,l,!1))&&(u=e.points.copy(),oh(this,n,r,o,l,!0)?(u.cd(i-1,new C(n.x,(n.y+l.y)/2)),u.cd(i+2,new C(l.x,(n.y+l.y)/2))):(u.cd(i-1,new C((n.x+l.x)/2,n.y)),u.cd(i+2,new C((n.x+l.x)/2,l.y))),u.mb(i+1),u.mb(i),e.points=u,e.Zb())}}else l=C.alloc(),A.qh(n.x,n.y,o.x,o.y,r.x,r.y,l)&&l.Bf(r)<this.resegmentingDistance*this.resegmentingDistance&&(n=e.points.copy(),n.mb(i),e.points=n,e.Zb()),C.free(l)}t.Ya(),this.transactionResult=this.name,t.S("LinkReshaped",this.adornedLink,this.Yq)}this.stopTool()};function oh(t,e,i,n,r,o){return o?Math.abs(e.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-r.y)<t.resegmentingDistance:Math.abs(e.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-r.x)<t.resegmentingDistance}ge.prototype.reshape=function(t){var e=this.adornedLink;e.uh();var i=this.handle.segmentIndex,n=this.Tu(this.handle);if(e.isOrthogonal)if(i===e.firstPickIndex+1)i=e.firstPickIndex+1,n===ru?(e.L(i,e.i(i-1).x,t.y),e.L(i+1,e.i(i+2).x,t.y)):n===nu&&(e.L(i,t.x,e.i(i-1).y),e.L(i+1,t.x,e.i(i+2).y));else if(i===e.lastPickIndex-1)i=e.lastPickIndex-1,n===ru?(e.L(i-1,e.i(i-2).x,t.y),e.L(i,e.i(i+1).x,t.y)):n===nu&&(e.L(i-1,t.x,e.i(i-2).y),e.L(i,t.x,e.i(i+1).y));else{n=i;var r=e.i(n),o=e.i(n-1),l=e.i(n+1);A.B(o.x,r.x)&&A.B(r.y,l.y)?(A.B(o.x,e.i(n-2).x)&&!A.B(o.y,e.i(n-2).y)?(e.m(n,t.x,o.y),i++,n++):e.L(n-1,t.x,o.y),A.B(l.y,e.i(n+2).y)&&!A.B(l.x,e.i(n+2).x)?e.m(n+1,l.x,t.y):e.L(n+1,l.x,t.y)):A.B(o.y,r.y)&&A.B(r.x,l.x)?(A.B(o.y,e.i(n-2).y)&&!A.B(o.x,e.i(n-2).x)?(e.m(n,o.x,t.y),i++,n++):e.L(n-1,o.x,t.y),A.B(l.x,e.i(n+2).x)&&!A.B(l.y,e.i(n+2).y)?e.m(n+1,t.x,l.y):e.L(n+1,t.x,l.y)):A.B(o.x,r.x)&&A.B(r.x,l.x)?(A.B(o.x,e.i(n-2).x)&&!A.B(o.y,e.i(n-2).y)?(e.m(n,t.x,o.y),i++,n++):e.L(n-1,t.x,o.y),A.B(l.x,e.i(n+2).x)&&!A.B(l.y,e.i(n+2).y)?e.m(n+1,t.x,l.y):e.L(n+1,t.x,l.y)):A.B(o.y,r.y)&&A.B(r.y,l.y)&&(A.B(o.y,e.i(n-2).y)&&!A.B(o.x,e.i(n-2).x)?(e.m(n,o.x,t.y),i++,n++):e.L(n-1,o.x,t.y),A.B(l.y,e.i(n+2).y)&&!A.B(l.x,e.i(n+2).x)?e.m(n+1,l.x,t.y):e.L(n+1,l.x,t.y)),e.L(i,t.x,t.y)}else e.L(i,t.x,t.y),n=e.fromNode,r=e.fromPort,n!==null&&(o=n.findVisibleNode(),o!==null&&o!==n&&(n=o,r=n.port)),i===1&&e.computeSpot(!0,r).Nc()&&(o=r.ga(Et,C.alloc()),n=e.getLinkPointFromPoint(n,r,o,t,!0,C.alloc()),e.L(0,n.x,n.y),C.free(o),C.free(n)),n=e.toNode,r=e.toPort,n!==null&&(o=n.findVisibleNode(),o!==null&&o!==n&&(n=o,r=n.port)),i===e.pointsCount-2&&e.computeSpot(!1,r).Nc()&&(i=r.ga(Et,C.alloc()),t=e.getLinkPointFromPoint(n,r,i,t,!1,C.alloc()),e.L(e.pointsCount-1,t.x,t.y),C.free(i),C.free(t));e.zf()},ge.prototype.computeReshape=function(t){var e=this.adornedLink,i=this.handle.segmentIndex;switch(this.Tu(this.handle)){case Ap:return t;case ru:return new C(e.i(i).x,t.y);case nu:return new C(t.x,e.i(i).y);default:case Fp:return e.i(i)}},Y.Object.defineProperties(ge.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},midHandleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof Nt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.Us}},resegmentingDistance:{get:function(){return this.F},set:function(t){this.F=t}},originalPoint:{get:function(){return this.Hw}},originalPoints:{get:function(){return this.Yq}}}),ge.prototype.setReshapingBehavior=ge.prototype.pm,ge.prototype.getReshapingBehavior=ge.prototype.Tu;var Fp=new K(ge,"None",0),nu=new K(ge,"Horizontal",1),ru=new K(ge,"Vertical",2),Ap=new K(ge,"All",3);ge.className="LinkReshapingTool",ge.None=Fp,ge.Horizontal=nu,ge.Vertical=ru,ge.All=Ap,Ct("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.gb("LinkReshaping",t,this.mouseDownTools)});function gi(){Lt.call(this),this.name="Resizing",this.o=new ht(1,1).freeze(),this.j=new ht(9999,9999).freeze(),this.yg=new ht(NaN,NaN).freeze(),this.V=!1,this.ia=!0,this.ue=null;var t=new yt;t.alignmentFocus=Et,t.figure="Rectangle",t.desiredSize=a0,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.F=t,this.u=null,this.Xq=new C,this.Fw=new ht,this.Un=new C,this.st=new ht(0,0),this.rt=new ht(1/0,1/0),this.qt=new ht(1,1)}Z(gi,Lt),gi.prototype.updateAdornments=function(t){if(!(t===null||t instanceof V)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,i=t.Oj(this.name);if(e!==null&&t.canResize()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.Ed()&&((i===null||i.adornedObject!==e)&&(i=this.makeAdornment(e)),i!==null)){e=e.mi(),Ts(t)&&this.updateResizeHandles(i,e),t.bh(this.name,i);return}}t.Jf(this.name)}},gi.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(e===null){e=new Nt,e.type=z.Spot,e.locationSpot=Et;var i=new vi;i.isPanelMain=!0,e.add(i),e.add(this.makeHandle(t,Je)),e.add(this.makeHandle(t,qu)),e.add(this.makeHandle(t,Yr)),e.add(this.makeHandle(t,bu)),e.add(this.makeHandle(t,Cn)),e.add(this.makeHandle(t,Ri)),e.add(this.makeHandle(t,Nn)),e.add(this.makeHandle(t,Pn))}else if(jn(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},gi.prototype.makeHandle=function(t,e){return t=this.handleArchetype,t===null?null:(t=t.copy(),t.alignment=e,t)},gi.prototype.updateResizeHandles=function(t,e){if(t!==null){if(!t.alignment.$b()&&(t.cursor==="pointer"||0<t.cursor.indexOf("resize")))t:{var i=t.alignment;if(i.Nc()&&(i=Et),0>=i.x)e=0>=i.y?e+225:1<=i.y?e+135:e+180;else if(1<=i.x)0>=i.y?e+=315:1<=i.y&&(e+=45);else if(0>=i.y)e+=270;else if(1<=i.y)e+=90;else break t;0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof z)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)}},gi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowResize&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},gi.prototype.doActivate=function(){var t=this.diagram;this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null&&(this.adornedObject=this.handle.part.adornedObject,this.adornedObject!==null&&(t.isMouseCaptured=!0,t.animationManager.Cc(),this.Ea(this.name),this.Xq.set(this.adornedObject.ga(this.handle.alignment.iv())),this.Un.set(this.adornedObject.part.location),this.Fw.set(this.adornedObject.desiredSize),this.qt=this.computeCellSize(),this.st=this.computeMinSize(),this.rt=this.computeMaxSize(),this.isActive=!0))},gi.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.ue=this.handle=null,this.isActive=t.isMouseCaptured=!1},gi.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.$j(),e},gi.prototype.doCancel=function(){this.adornedObject!==null&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},gi.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.st,i=this.rt,n=this.qt,r=this.adornedObject.qs(t.lastInput.documentPoint,C.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,o),this.resize(e),t.bd(),C.free(r)}},gi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.st,i=this.rt,n=this.qt,r=this.adornedObject.qs(t.lastInput.documentPoint,C.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,o),this.resize(e),C.free(r),t.Ya(),this.transactionResult=this.name,t.S("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},gi.prototype.resize=function(t){var e=this.diagram,i=this.adornedObject;if(i!==null){if(i.desiredSize=t.size,t=i.part,t.Va(),i=i.ga(this.handle.alignment.iv()),t instanceof dt){var n=new q;if(n.add(t),!this.dragsMembers&&t.placeholder===null){var r=new wh;r.dragsMembers=!1}e.moveParts(n,this.oppositePoint.copy().re(i),!0,r)}else t.location=t.location.copy().re(i).add(this.oppositePoint);e.bd()}},gi.prototype.computeResize=function(t,e,i,n,r,o){e.Nc()&&(e=Et);var l=this.adornedObject.naturalBounds,u=l.x,h=l.y,f=l.x+l.width,c=l.y+l.height,p=1;if(!o){p=l.width;var g=l.height;0>=p&&(p=1),0>=g&&(g=1),p=g/p}return g=C.alloc(),A.Oo(t.x,t.y,u,h,r.width,r.height,g),t=l.copy(),0>=e.x?0>=e.y?(t.x=Math.max(g.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=Math.max(f-t.x,i.width),t.y=Math.max(g.y,c-n.height),t.y=Math.min(t.y,c-i.height),t.height=Math.max(c-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(p*t.width,n.height),i.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,n.width),i.width),t.height=p*t.width),t.x=f-t.width,t.y=c-t.height)):1<=e.y?(t.x=Math.max(g.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=Math.max(f-t.x,i.width),t.height=Math.max(Math.min(g.y-h,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(p*t.width,n.height),i.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,n.width),i.width),t.height=p*t.width),t.x=f-t.width)):(t.x=Math.max(g.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=f-t.x,o||(t.height=Math.max(Math.min(p*t.width,n.height),i.height),t.width=t.height/p,t.y=h+.5*(c-h-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(g.x-u,n.width),i.width),t.y=Math.max(g.y,c-n.height),t.y=Math.min(t.y,c-i.height),t.height=Math.max(c-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(p*t.width,n.height),i.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,n.width),i.width),t.height=p*t.width),t.y=c-t.height)):1<=e.y?(t.width=Math.max(Math.min(g.x-u,n.width),i.width),t.height=Math.max(Math.min(g.y-h,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(p*t.width,n.height),i.height),t.width=t.height/p):(t.width=Math.max(Math.min(t.height/p,n.width),i.width),t.height=p*t.width))):(t.width=Math.max(Math.min(g.x-u,n.width),i.width),o||(t.height=Math.max(Math.min(p*t.width,n.height),i.height),t.width=t.height/p,t.y=h+.5*(c-h-t.height))):0>=e.y?(t.y=Math.max(g.y,c-n.height),t.y=Math.min(t.y,c-i.height),t.height=c-t.y,o||(t.width=Math.max(Math.min(t.height/p,n.width),i.width),t.height=p*t.width,t.x=u+.5*(f-u-t.width))):1<=e.y&&(t.height=Math.max(Math.min(g.y-h,n.height),i.height),o||(t.width=Math.max(Math.min(t.height/p,n.width),i.width),t.height=p*t.width,t.x=u+.5*(f-u-t.width))),C.free(g),t},gi.prototype.computeReshape=function(){var t=te;return this.adornedObject instanceof yt&&(t=Qm(this.adornedObject)),!(t===Fn||this.diagram.lastInput.shift)},gi.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},gi.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},gi.prototype.computeCellSize=function(){var t=new ht(NaN,NaN),e=this.adornedObject.part;return e!==null&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&(e=e.grid,e!==null&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height))),(isNaN(t.width)||t.width===0||t.width===1/0)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===1/0)&&(t.height=1),t},Y.Object.defineProperties(gi.prototype,{handleArchetype:{get:function(){return this.F},set:function(t){this.F=t}},handle:{get:function(){return this.u},set:function(t){if(t!==null&&!(t.part instanceof Nt))throw Error("new handle is not in an Adornment: "+t);this.u=t}},adornedObject:{get:function(){return this.ue},set:function(t){if(t!==null&&t.part instanceof Nt)throw Error("new handle must not be in an Adornment: "+t);this.ue=t}},minSize:{get:function(){return this.o},set:function(t){if(!this.o.D(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.o.h(e,t)}}},maxSize:{get:function(){return this.j},set:function(t){if(!this.j.D(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.j.h(e,t)}}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.D(t)||this.yg.assign(t)}},isGridSnapEnabled:{get:function(){return this.V},set:function(t){this.V=t}},dragsMembers:{get:function(){return this.ia},set:function(t){this.ia=t}},oppositePoint:{get:function(){return this.Xq},set:function(t){this.Xq.D(t)||this.Xq.assign(t)}},originalDesiredSize:{get:function(){return this.Fw}},originalLocation:{get:function(){return this.Un}}}),gi.className="ResizingTool",Ct("resizingTool",function(){return this.findTool("Resizing")},function(t){this.gb("Resizing",t,this.mouseDownTools)});function bi(){Lt.call(this),this.name="Rotating",this.ia=45,this.V=2,this.Un=new C,this.ue=null;var t=new yt;t.figure="Ellipse",t.desiredSize=Jl,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.o=t,this.j=null,this.Ew=0,this.kr=new C(NaN,NaN),this.u=0,this.F=50}Z(bi,Lt),bi.prototype.updateAdornments=function(t){if(t!==null){if(t.ph()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&(e=t.rotateObject,e!==null&&t.canRotate()&&t.actualBounds.w()&&t.isVisible()&&e.actualBounds.w()&&e.Ed())){var i=t.Oj(this.name);if((i===null||i.adornedObject!==e)&&(i=this.makeAdornment(e)),i!==null){i.angle=e.mi(),i.placeholder===null&&(i.location=this.computeAdornmentLocation(e)),t.bh(this.name,i);return}}t.Jf(this.name)}},bi.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(e===null){e=new Nt,e.type=z.Position,e.locationSpot=Et;var i=this.handleArchetype;i!==null&&e.add(i.copy())}else if(jn(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},bi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowRotate&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},bi.prototype.doActivate=function(){var t=this.diagram;if(this.adornedObject===null){if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;this.adornedObject=this.handle.part.adornedObject}this.adornedObject!==null&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.Ea(this.name),this.Ew=this.adornedObject.angle,this.kr=this.computeRotationPoint(this.adornedObject),this.Un=this.adornedObject.part.location.copy(),this.isActive=!0)},bi.prototype.computeRotationPoint=function(t){var e=t.part,i=e.locationObject;return e.rotationSpot.sb()?t.ga(e.rotationSpot):t===e||t===i?i.ga(e.locationSpot):t.ga(Et)},bi.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.w()||(e=this.computeRotationPoint(t)),e=t.qs(e);var i=this.handleAngle;0>i?i+=360:360<=i&&(i-=360),i=Math.round(45*Math.round(i/45));var n=this.handleDistance;return i===0?e.x=t.naturalBounds.width+n:i===45?(e.x=t.naturalBounds.width+n,e.y=t.naturalBounds.height+n):i===90?e.y=t.naturalBounds.height+n:i===135?(e.x=-n,e.y=t.naturalBounds.height+n):i===180?e.x=-n:i===225?(e.x=-n,e.y=-n):i===270?e.y=-n:i===315&&(e.x=t.naturalBounds.width+n,e.y=-n),t.ga(e)},bi.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.ue=this.handle=null,this.kr=new C(NaN,NaN),this.isActive=t.isMouseCaptured=!1},bi.prototype.stopTransaction=function(){var t=this.diagram,e=Lt.prototype.stopTransaction.call(this);return e&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.$j(),e},bi.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},bi.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},bi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Ya(),this.transactionResult=this.name,t.S("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},bi.prototype.rotate=function(t){var e=this.adornedObject;if(e!==null){e.angle=t,e=e.part,e.Va();var i=e.locationObject,n=e.rotateObject;(i===n||i.rg(n))&&(i=this.Un.copy(),e.location=i.re(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.bd()}},bi.prototype.computeRotate=function(t){t=this.rotationPoint.ab(t)-this.handleAngle;var e=this.adornedObject.panel;e!==null&&(t-=e.mi()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var i=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<i&&(t%e<i?t=Math.floor(t/e)*e:t%e>e-i&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},Y.Object.defineProperties(bi.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(t!==null&&!(t.part instanceof Nt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.ue},set:function(t){if(t!==null&&t.part instanceof Nt)throw Error("new handle must not be in an Adornment: "+t);this.ue=t}},snapAngleMultiple:{get:function(){return this.ia},set:function(t){this.ia=t}},snapAngleEpsilon:{get:function(){return this.V},set:function(t){this.V=t}},originalAngle:{get:function(){return this.Ew}},rotationPoint:{get:function(){return this.kr},set:function(t){this.kr=t.copy()}},handleAngle:{get:function(){return this.u},set:function(t){this.u=t}},handleDistance:{get:function(){return this.F},set:function(t){this.F=t}}}),bi.className="RotatingTool",Ct("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.gb("Rotating",t,this.mouseDownTools)});function sh(){Lt.call(this),this.name="ClickSelecting"}Z(sh,Lt),sh.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},sh.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},sh.className="ClickSelectingTool";function Ho(){Lt.call(this),this.name="Action",this.nk=null}Z(Ho,Lt),Ho.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,i=t.kc(e.documentPoint,function(n){for(;n.panel!==null&&!n.isActionable;)n=n.panel;return n});return i!==null&&i.isActionable?(this.nk=i,t.Bk=t.kc(e.documentPoint,null,null),!0):!1},Ho.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.nk;e!==null&&(t.targetObject=e,e.actionDown!==null&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},Ho.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.nk;e!==null&&(t.targetObject=e,e.actionMove!==null&&e.actionMove(t,e))}},Ho.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.nk;if(e===null)return;t.targetObject=e,e.actionUp!==null&&e.actionUp(t,e),this.standardMouseClick(function(i){for(;i.panel!==null&&(!i.isActionable||i!==e);)i=i.panel;return i},function(i){return i===e})}this.stopTool()},Ho.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.nk;e!==null&&(t.targetObject=e,e.actionCancel!==null&&e.actionCancel(t,e),this.stopTool())},Ho.prototype.doStop=function(){this.nk=null},Ho.className="ActionTool";function nl(){Lt.call(this),this.name="ClickCreating",this.Si=null,this.o=!0,this.j=!1,this.ow=new C(0,0)}Z(nl,Lt),nl.prototype.canStart=function(){if(!this.isEnabled||this.archetypeNodeData===null)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(t.lastInput.clickCount===1&&(this.ow=t.lastInput.viewPoint.copy()),t.lastInput.clickCount!==2||this.isBeyondDragSize(this.ow))return!1}else if(t.lastInput.clickCount!==1)return!1;return!(t.currentTool!==this&&t.Ol(t.lastInput.documentPoint,!0)!==null)},nl.prototype.doMouseUp=function(){var t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()},nl.prototype.insertPart=function(t){var e=this.diagram,i=this.archetypeNodeData;if(i===null)return null;var n=null;try{if(e.S("ChangingSelection",e.selection),this.Ea(this.name),i instanceof ot)i.Zc()&&(jn(i),n=i.copy(),n!==null&&e.add(n));else if(i!==null){var r=e.model.copyNodeData(i);gt(r)&&(e.model.xf(r),n=e.Mc(r))}if(n!==null){var o=C.allocAt(t.x,t.y);this.isGridSnapEnabled&&um(this.diagram,n,t,o),n.location=o,e.allowSelect&&(e.clearSelection(!0),n.isSelected=!0),C.free(o)}e.Ya(),this.transactionResult=this.name,e.S("PartCreated",n)}finally{this.stopTransaction(),e.S("ChangedSelection",e.selection)}return n},Y.Object.defineProperties(nl.prototype,{archetypeNodeData:{get:function(){return this.Si},set:function(t){this.Si=t}},isDoubleClick:{get:function(){return this.o},set:function(t){this.o=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),nl.className="ClickCreatingTool";function Gr(){Lt.call(this),this.name="DragSelecting",this.Hk=175,this.o=!1;var t=new ot;t.layerName="Tool",t.selectable=!1;var e=new yt;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}Z(Gr,Lt),Gr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||t.Ol(e.documentPoint,!0)!==null))},Gr.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Gr.prototype.doDeactivate=function(){var t=this.diagram;t.ug(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Gr.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&this.box!==null){var e=this.computeBoxBounds(),i=this.box.fb("SHAPE");i===null&&(i=this.box.Qb());var n=ht.alloc().h(e.width,e.height);i.desiredSize=n,this.box.nm(e.x,e.y,!1),ht.free(n),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.gs(t.lastInput.viewPoint)}},Gr.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.S("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Gr.prototype.computeBoxBounds=function(){var t=this.diagram;return new E(t.firstInput.documentPoint,t.lastInput.documentPoint)},Gr.prototype.selectInRect=function(t){var e=this.diagram,i=e.lastInput;if(t=e.wx(t,this.isPartialInclusion),we?i.meta:i.control)if(i.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)e=t.value,e.isSelected=!e.isSelected;else if(i.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0);else{for(i=new q,e=e.selection.iterator;e.next();){var n=e.value;t.contains(n)||i.add(n)}for(e=i.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0)}},Y.Object.defineProperties(Gr.prototype,{delay:{get:function(){return this.Hk},set:function(t){this.Hk=t}},isPartialInclusion:{get:function(){return this.o},set:function(t){this.o=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),Gr.className="DragSelectingTool";function Hr(){Lt.call(this),this.name="Panning",this.Yt=new C,this.zy=new C,this.xg=!1;var t=this;this.Mw=function(){var e=t.diagram;e!==null&&e.removeEventListener($.document,"scroll",t.Mw,!1),t.stopTool()}}Z(Hr,Lt),Hr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Hr.prototype.doActivate=function(){var t=this.diagram;this.xg?(t.lastInput.bubbles=!0,t.addEventListener($.document,"scroll",this.Mw,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Yt.assign(t.position)),this.isActive=!0},Hr.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Hr.prototype.doCancel=function(){var t=this.diagram;t.position=this.Yt,t.isMouseCaptured=!1,this.stopTool()},Hr.prototype.doMouseMove=function(){this.move()},Hr.prototype.doMouseUp=function(){this.move(),this.stopTool()},Hr.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.xg)t.lastInput.bubbles=!0;else{var e=t.position,i=t.firstInput.documentPoint,n=t.lastInput.documentPoint,r=e.x+i.x-n.x;i=e.y+i.y-n.y,t.allowHorizontalScroll||(r=e.x),t.allowVerticalScroll||(i=e.y),t.position=this.zy.h(r,i)}},Y.Object.defineProperties(Hr.prototype,{bubbles:{get:function(){return this.xg},set:function(t){this.xg=t}},originalPosition:{get:function(){return this.Yt}}}),Hr.className="PanningTool",Ct("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.gb("ClickCreating",t,this.mouseUpTools)}),Ct("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.gb("ClickSelecting",t,this.mouseUpTools)}),Ct("panningTool",function(){return this.findTool("Panning")},function(t){this.gb("Panning",t,this.mouseMoveTools)}),Ct("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.gb("DragSelecting",t,this.mouseMoveTools)}),Ct("actionTool",function(){return this.findTool("Action")},function(t){this.gb("Action",t,this.mouseDownTools)});function Xo(){this.F=this.u=this.j=this.o=null}Y.Object.defineProperties(Xo.prototype,{mainElement:{get:function(){return this.u},set:function(t){this.u=t}},show:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.F},set:function(t){this.F=t}}}),Xo.className="HTMLInfo";function ur(t,e,i){this.text=t,this.jx=e,this.visible=i}ur.className="ContextMenuButtonInfo";function zi(){Lt.call(this),this.name="ContextMenu",this.o=this.it=this.j=null,this.Aw=new C,this.kt=null,this.Ft=!1;var t=this;this.uu=function(){t.stopTool()}}Z(zi,Lt);function _N(t){var e=new Xo;e.show=function(r,o,l){l.showDefaultContextMenu()},e.hide=function(r,o){o.hideDefaultContextMenu()},lh=e,t.uu=function(){t.stopTool()},e=J("div");var i=J("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",i.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var n=J("style");$.document.getElementsByTagName("head")[0].appendChild(n),n.sheet.insertRule(".goCXul { list-style: none; }",0),n.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),n.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),n=t.diagram,n!==null&&(n.addEventListener(e,"contextmenu",U0,!1),n.addEventListener(e,"selectstart",U0,!1),n.addEventListener(i,"contextmenu",U0,!1)),e.className="goCXforeground",i.className="goCXbackground",$.document.body&&($.document.body.appendChild(e),$.document.body.appendChild(i)),sf=e,of=i,Y0=!0}function U0(t){return t.preventDefault(),!1}zi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount?!1:!!(t.lastInput.isTouchEvent&&this.defaultTouchContextMenu!==null||this.findObjectWithContextMenu()!==null)},zi.prototype.doStart=function(){this.Aw.set(this.diagram.firstInput.documentPoint)},zi.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},zi.prototype.findObjectWithContextMenu=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.lastInput,n=null;if(t instanceof j||(t instanceof it?n=t:n=e.kc(i.documentPoint,null,function(r){return!r.layer.isTemporary})),n!==null){for(t=n;t!==null;){if(t.contextMenu!==null)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return n.part}else if(e.contextMenu!==null)return e;return null},zi.prototype.doActivate=function(){},zi.prototype.doMouseDown=function(){if(Lt.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Nt){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&tM(this)},zi.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Nt){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}tM(this)};function tM(t){var e=t.diagram;if(t.isActive){var i=t.currentContextMenu;if(i!==null){var n=null;i instanceof Xo||(n=e.kc(e.lastInput.documentPoint,null,null),n!==null&&n.rg(i)&&t.standardMouseClick(null,null)),t.maybeStopTool(n)}}else t.canStart()&&(eM(t,!0),t.isActive||t.stopTool())}zi.prototype.maybeStopTool=function(){this.stopTool(),this.canStart()&&(this.diagram.currentTool=this,this.doMouseUp())};function eM(t,e,i){if(i===void 0&&(i=null),!t.Ft&&(t.Ft=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Ft=!1,!e)){if(t.isActive=!0,e=lh,i===null&&(i=t.findObjectWithContextMenu()),i!==null){var n=i.contextMenu;n!==null?(t.currentObject=i instanceof it?i:null,t.showContextMenu(n,t.currentObject)):e!==null&&t.showContextMenu(e,t.currentObject)}else e!==null&&t.showContextMenu(e,null);t.currentContextMenu instanceof Nt&&!t.currentContextMenu.visible&&t.stopTool()}}zi.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},zi.prototype.showContextMenu=function(t,e){var i=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Nt){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category=this.name,t.placeholder!==null&&(t.placeholder.scale=i.scale);var n=t.diagram;n!==null&&n!==i&&n.remove(t),i.add(t),e!==null?t.adornedObject=e:t.data=i.model,t.Va(),this.positionContextMenu(t,e)}else t instanceof Xo&&t.show(e,i,this);this.currentContextMenu=t},zi.prototype.positionContextMenu=function(t){if(t.placeholder===null){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y+n.height>r.bottom&&(i.y-=n.height+5/e.scale),i.y<r.y&&(i.y=r.y),t.position=i}},zi.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;e!==null&&(e instanceof Nt?(t.remove(e),this.it!==null&&this.it.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof Xo&&(e.hide!==null?e.hide(t,this):e.mainElement!==null&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())};function WN(t){var e=new q;return e.add(new ur("Copy",function(i){i.commandHandler.copySelection()},function(i){return i.commandHandler.canCopySelection()})),e.add(new ur("Cut",function(i){i.commandHandler.cutSelection()},function(i){return i.commandHandler.canCutSelection()})),e.add(new ur("Delete",function(i){i.commandHandler.deleteSelection()},function(i){return i.commandHandler.canDeleteSelection()})),e.add(new ur("Paste",function(i){i.commandHandler.pasteSelection(t.mouseDownPoint)},function(i){return i.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new ur("Select All",function(i){i.commandHandler.selectAll()},function(i){return i.commandHandler.canSelectAll()})),e.add(new ur("Undo",function(i){i.commandHandler.undo()},function(i){return i.commandHandler.canUndo()})),e.add(new ur("Redo",function(i){i.commandHandler.redo()},function(i){return i.commandHandler.canRedo()})),e.add(new ur("Scroll To Part",function(i){i.commandHandler.scrollToPart()},function(i){return i.commandHandler.canScrollToPart()})),e.add(new ur("Zoom To Fit",function(i){i.commandHandler.zoomToFit()},function(i){return i.commandHandler.canZoomToFit()})),e.add(new ur("Reset Zoom",function(i){i.commandHandler.resetZoom()},function(i){return i.commandHandler.canResetZoom()})),e.add(new ur("Group Selection",function(i){i.commandHandler.groupSelection()},function(i){return i.commandHandler.canGroupSelection()})),e.add(new ur("Ungroup Selection",function(i){i.commandHandler.ungroupSelection()},function(i){return i.commandHandler.canUngroupSelection()})),e.add(new ur("Edit Text",function(i){i.commandHandler.editTextBlock()},function(i){return i.commandHandler.canEditTextBlock()})),e}zi.prototype.showDefaultContextMenu=function(){var t=this.diagram;this.kt===null&&(this.kt=WN(this)),sf.innerHTML="",of.addEventListener("pointerdown",this.uu,!1);var e=this,i=J("ul");i.className="goCXul",sf.appendChild(i),i.innerHTML="";for(var n=this.kt.iterator;n.next();){var r=n.value,o=r.visible;if(typeof r.jx=="function"&&(typeof o!="function"||o(t))){o=J("li"),o.className="goCXli";var l=J("a");l.className="goCXa",l.href="#",l.my=r.jx,l.addEventListener("pointerdown",function(u){return this.my(t),e.stopTool(),u.preventDefault(),!1},!1),l.textContent=r.text,o.appendChild(l),i.appendChild(o)}}sf.style.display="block",of.style.display="block"},zi.prototype.hideDefaultContextMenu=function(){if(this.currentContextMenu!==null&&this.currentContextMenu===lh){sf.style.display="none",of.style.display="none";var t=this.diagram;t!==null&&t.removeEventListener(of,"pointerdown",this.uu,!1),this.currentContextMenu=null}},Y.Object.defineProperties(zi.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.it=t instanceof Nt?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return Y0===!1&&lh===null&&$n&&_N(this),lh},set:function(t){t===null&&(Y0=!0),lh=t}},currentObject:{get:function(){return this.o},set:function(t){this.o=t}},mouseDownPoint:{get:function(){return this.Aw}}});var lh=null,Y0=!1,of=null,sf=null;zi.className="ContextMenuTool",Ct("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.gb("ContextMenu",t,this.mouseUpTools)});function _t(){Lt.call(this),this.name="TextEditing",this.Zh=new Ut,this.ia=null,this.V=Dp,this.wj=null,this.qa=uh,this.u=1,this.F=!0,this.o=null,this.j=new Xo,this.lt=null,$N(this,this.j)}Z(_t,Lt);function $N(t,e){if($n){var i=J("textarea");t.lt=i,i.addEventListener("input",function(){if(t.textBlock!==null){var n=t.Mx(this.value);this.style.width=20+n.measuredBounds.width*this.AA+"px",this.rows=n.lineCount}},!1),i.addEventListener("keydown",function(n){if(!n.isComposing&&t.textBlock!==null){var r=n.key;r==="Enter"?(t.textBlock.isMultiline===!1&&n.preventDefault(),t.acceptText(uf)):r==="Tab"?(t.acceptText(jp),n.preventDefault()):r==="Escape"&&(t.doCancel(),t.diagram!==null&&t.diagram.doFocus())}},!1),i.addEventListener("focus",function(){if(t.currentTextEditor!==null&&t.state!==uh){var n=t.lt;t.qa===hh&&(t.qa=hf),typeof n.select=="function"&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),i.addEventListener("blur",function(){if(t.currentTextEditor!==null&&t.state!==uh){var n=t.lt;typeof n.focus=="function"&&n.focus(),typeof n.select=="function"&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return i.value},e.mainElement=i,e.show=function(n,r,o){if(n instanceof Ut&&o instanceof _t)if(o.state===ah)i.style.border="3px solid red",i.focus();else{var l=n.ga(Et),u=r.position,h=r.scale,f=n.Df()*h;f<o.minimumEditorScale&&(f=o.minimumEditorScale);var c=n.naturalBounds.width*f+6,p=n.naturalBounds.height*f+2,g=(l.x-u.x)*h;l=(l.y-u.y)*h,u=n.verticalAlignment,h=(n.lineHeight+n.spacingAbove+n.spacingBelow)*n.lineCount*f,p=u.y*p-u.y*h+u.offsetY-(.5*p-.5*h)-h/2,i.value=n.text,r.div.style.font=n.font,i.style.position="absolute",i.style.zIndex="100",i.style.font="inherit",i.style.fontSize=100*f+"%",i.style.lineHeight="normal",i.style.width=c+"px",i.style.left=(g-c/2|0)-1+"px",i.style.top=(l+p|0)-1+"px",i.style.textAlign=n.textAlign,i.style.margin="0",i.style.padding="1px",i.style.border="0",i.style.outline="none",i.style.whiteSpace="pre-wrap",i.style.overflow="hidden",i.rows=n.lineCount,i.AA=f,i.className="goTXarea",r.div.appendChild(i),i.focus(),o.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},e.hide=function(n){n.div.removeChild(i)}}}_t.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||t.isReadOnly||ou&&ou!==this&&(ou.acceptText(lf),ou&&ou!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.kc(t.lastInput.documentPoint);return e!==null&&e instanceof Ut&&e.editable&&e.part.canEdit()?(e=e.part,!(e===null||this.starting===Dp&&!e.isSelected||this.starting===H0&&2>t.lastInput.clickCount)):!1},_t.prototype.doStart=function(){ou=this,this.textBlock!==null&&this.doActivate()},_t.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(t!==null){var e=this.textBlock;if(e===null&&(e=t.kc(t.lastInput.documentPoint)),e!==null&&e instanceof Ut&&(this.textBlock=e,e.part!==null)){t.animationManager.Cc(),this.isActive=!0,this.qa=hh;var i=this.defaultTextEditor;e.textEditor!==null&&(i=e.textEditor),this.Zh=this.textBlock.copy();var n=new E(this.textBlock.ga(Je),this.textBlock.ga(Yr));t.vv(n),i.show(e,t,this),this.currentTextEditor=i}}}},_t.prototype.doCancel=function(){this.stopTool()},_t.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},_t.prototype.doMouseDown=function(){this.isActive&&this.acceptText(lf)},_t.prototype.acceptText=function(t){switch(t){case lf:this.qa===Ip?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.qa===hh||this.qa===ah||this.qa===hf)&&(this.qa=Op,iM(this));break;case G0:case uf:case jp:(uf!==t||this.textBlock.isMultiline!==!0)&&(this.qa===hh||this.qa===ah||this.qa===hf)&&(this.qa=Op,iM(this))}};function iM(t){var e=t.textBlock,i=t.diagram,n=t.currentTextEditor;if(e!==null&&n!==null){var r=e.text,o="";n.valueFunction!==null&&(o=n.valueFunction()),t.isValidText(e,r,o)?(t.Ea(t.name),t.qa=Ip,t.transactionResult=t.name,e.text=o,t.doSuccess(r,o),i!==null&&i.S("TextEdited",e,r),t.stopTransaction(),t.stopTool(),i!==null&&i.doFocus()):(t.qa=ah,t.doError(r,o))}}_t.prototype.doError=function(t,e){var i=this.textBlock;i.errorFunction!==null&&i.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(i,this.diagram,this)},_t.prototype.doSuccess=function(t,e){var i=this.textBlock;i.textEdited!==null&&i.textEdited(i,t,e)},_t.prototype.doDeactivate=function(){var t=this.diagram;t!==null&&(this.qa=uh,this.currentTextEditor!==null&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},_t.prototype.doStop=function(){ou=null},_t.prototype.isValidText=function(t,e,i){var n=this.textValidation;return n!==null&&!n(t,e,i)?!1:(n=t.textValidation,!!(n===null||n(t,e,i)))},_t.prototype.Mx=function(t){var e=this.Zh;return e.text=t,e.measure(this.textBlock.Ih,1/0),e},Y.Object.defineProperties(_t.prototype,{textBlock:{get:function(){return this.ia},set:function(t){this.ia=t}},currentTextEditor:{get:function(){return this.o},set:function(t){this.o=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.V},set:function(t){this.V=t}},textValidation:{get:function(){return this.wj},set:function(t){this.wj=t}},minimumEditorScale:{get:function(){return this.u},set:function(t){this.u=t}},selectsTextOnActivate:{get:function(){return this.F},set:function(t){this.F=t}},state:{get:function(){return this.qa},set:function(t){this.qa!==t&&(this.qa=t)}}}),_t.prototype.measureTemporaryTextBlock=_t.prototype.Mx;var G0=new K(_t,"LostFocus",0),lf=new K(_t,"MouseDown",1),jp=new K(_t,"Tab",2),uf=new K(_t,"Enter",3),nM=new K(_t,"SingleClick",0),Dp=new K(_t,"SingleClickSelected",1),H0=new K(_t,"DoubleClick",2),uh=new K(_t,"StateNone",0),hh=new K(_t,"StateActive",1),hf=new K(_t,"StateEditing",2),Op=new K(_t,"StateValidating",3),ah=new K(_t,"StateInvalid",4),Ip=new K(_t,"StateValidated",5),ou=null;_t.className="TextEditingTool",_t.LostFocus=G0,_t.MouseDown=lf,_t.Tab=jp,_t.Enter=uf,_t.SingleClick=nM,_t.SingleClickSelected=Dp,_t.DoubleClick=H0,_t.StateNone=uh,_t.StateActive=hh,_t.StateEditing=hf,_t.StateValidating=Op,_t.StateInvalid=ah,_t.StateValidated=Ip,Ct("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.gb("TextEditing",t,this.mouseUpTools)});function fn(t){zp||(lM(),zp=!0),this.H=dh,this.Nk=this.Ab=this.vq=this.dc=!1,this.Sw=!0,this.Ok=af,this.Em=!1,this.Gh=this.Jd=!0,this.Dg=600,this.ew=this.Qw=!1,this.Zd=new _,this.ce=new qe,this.ce.Yd=this,this.Fi=new _,this.qu=new _,this.Sr=new _,this.pr=new _,t&&Object.assign(this,t)}fn.prototype.Xe=function(t){this.H=t},fn.prototype.canStart=function(){return!0};function Ko(t,e){t.Jd&&t.canStart(e)&&(t.Zd.add(e),t.defaultAnimation.isAnimating&&t.Cc(),yi(t.H),t.Ab=!0)}function X0(t){if(t.Jd&&t.Ab){var e=t.ce,i=t.H,n=t.Zd.contains("Model");n&&(t.Nk=!0,t.Ok===af?(e.isViewportUnconstrained=!0,e.vc.clear(),e.add(i,"position",i.position.copy().offset(0,-200),i.position),e.add(i,"opacity",0,1)):t.Ok===W0&&e.vc.clear(),t.Sw=!!(t.Ok===_0&&i.eu.D(i.pa)),i.S("InitialAnimationStarting",t)),n&&!t.Gh||e.vc.count===0?(t.Zd.clear(),t.Ab=!1,e.vc.clear(),Vp(e,i),t.Nk=!1,i.N()):(t.Zd.clear(),i.kg=!1,n=e.vc.get(i),i.autoScale!==tn&&n!==null&&(delete n.start.scale,delete n.end.scale),$.requestAnimationFrame(function(){t.Ab===!1||e.dc||(i.Gf("temporaryPixelRatio")&&cf(i),q0(i),t.Ab=!1,e.start(),e.dc&&(fh(t),i.Ya(),hM(e,0),_o(i,!0),ch(t),i.S("AnimationStarting",t)))}))}}function Ep(t){return t.Zd.contains("Trigger")&&t.Zd.count===1}function rM(t,e,i,n){t.isTicking||Ep(t)||e instanceof V&&(e.fromNode!==null||e.toNode!==null)||t.ce.add(e,"position",i,n,!1)}s=fn.prototype,s.Fs=function(t){return this.ce.Fs(t)},s.Zu=function(t){return this.ce.Zu(t)};function ZN(t,e){function i(){if(0<r.Sr.count&&(n.addAll(r.Sr),r.Sr.clear(),r.dc=!0),r.dc!==!1&&n.count!==0){r.qu.addAll(n);for(var o=r.qu.iterator;o.next();){var l=o.value;if(l.dc!==!1){t:if(0<l.yl.count)var u=!0;else{for(u=l.vc.iterator;u.next();){var h=u.key;if(h instanceof it&&h.diagram!==null||h instanceof j){u=!0;break t}}u=!1}u?uM(l,!1):l.Wk=!0}}r.qu.clear(),r.dc!==!1&&(fh(r),_o(r.H),ch(r)),$.requestAnimationFrame(i)}}var n=t.Fi,r=t;t.dc?t.Sr.add(e):(t.dc=!0,n.add(e),$.requestAnimationFrame(function(){i()}))}function QN(t){for(t=t.Fi.iterator;t.next();)t.value.Wk=!1}function fh(t){if(!t.vq){var e=t.H;t.Qw=e.skipsUndoManager,t.ew=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.vq=!0}}function ch(t){var e=t.H;e.skipsUndoManager=t.Qw,e.skipsModelSourceBindings=t.ew,t.vq=!1}s.Cc=function(t){var e=this.ce;if(this.Ab===!0&&(this.Nk=this.Ab=!1,this.Zd.clear(),0<e.vc.count&&this.H.Rb()),this.dc){if(e.Ml(!0),e.vc.clear(),Vp(e,null),t===!0)for(t=this.Fi.Fa(),e=0;e<t.length;e++)t[e].Ml(!0)}else e.vc.clear(),Vp(e,this.H)},s.Ml=function(t){t===this.defaultAnimation&&this.defaultAnimation.vc.clear(),this.Fi.remove(t),this.Fi.count===0&&(this.dc=!1,this.H.Rb()),t===this.defaultAnimation&&(this.defaultAnimation.vc.clear(),this.H.S("AnimationFinished",this))},s.Dj=function(t,e){this.Ab&&(this.Zd.contains("Expand Tree")||this.Zd.contains("Expand SubGraph"))&&(this.ce.Dj(t,e),sM(this,t))},s.Bj=function(t,e){this.Ab&&(this.Zd.contains("Collapse Tree")||this.Zd.contains("Collapse SubGraph"))&&(this.ce.Bj(t,e),$0(this.ce,e,"position",e.position,e.position),sM(this,t))};function oM(t,e,i){!t.Ab||e.D(i)||Ep(t)||(t.H.ri||(e=i.copy()),$0(t.ce,t.H,"position",e,i))}function K0(t,e,i){e.fd&&(e.Tg=i,t.pr.add(e))}function sM(t,e){for(e=e.findLinksConnected();e.next();){var i=e.value;i.fd&&(i.Tg=i.points.copy(),t.pr.add(i))}}function Bp(t,e,i,n,r){t===null&&(t=[0,0,0,0]),e===null&&(e=[0,0,0,0]);var o=t[0],l=t[1],u=t[2];t=t[3];var h=e[0],f=e[1],c=e[2];return e=e[3],u===0||u===100?(o=h,l=f):(c===0||c===100)&&(h=o,f=l),180<Math.abs(h-o)&&(h>o?o+=360:h+=360),o=r(i,o,h-o,n)%360,l=r(i,l,f-l,n),u=r(i,u,c-u,n),i=r(i,t,e-t,n),"hsla("+o+", "+l+"%, "+u+"%, "+i+")"}function lM(){function t(i,n,r,o,l,u){i.position=new C(o(l,n.x,r.x-n.x,u),o(l,n.y,r.y-n.y,u))}var e=new ct;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(i,n,r,o,l,u){l<u?i.nm(o(l,n.x,r.x-n.x,u),o(l,n.y,r.y-n.y,u),!1):i.position=new C(o(l,n.x,r.x-n.x,u),o(l,n.y,r.y-n.y,u))}),e.add("location",function(i,n,r,o,l,u){l<u?i.nm(o(l,n.x,r.x-n.x,u),o(l,n.y,r.y-n.y,u),!0):i.location=new C(o(l,n.x,r.x-n.x,u),o(l,n.y,r.y-n.y,u))}),e.add("position:placeholder",function(i,n,r,o,l,u){l<u?i.nm(o(l,n.x,r.x-n.x,u),o(l,n.y,r.y-n.y,u),!1):i.position=new C(o(l,n.x,r.x-n.x,u),o(l,n.y,r.y-n.y,u))}),e.add("position:nodeCollapse",function(i,n,r,o,l,u){var h=i.actualBounds,f=r.actualBounds;r=f.x+f.width/2-h.width/2,h=f.y+f.height/2-h.height/2,l<u?i.nm(o(l,n.x,r-n.x,u),o(l,n.y,h-n.y,u),!1):i.position=new C(o(l,n.x,r-n.x,u),o(l,n.y,h-n.y,u))}),e.add("desiredSize",function(i,n,r,o,l,u){i.desiredSize=new E(o(l,n.width,r.width-n.width,u),o(l,n.height,r.height-n.height,u))}),e.add("width",function(i,n,r,o,l,u){i.width=o(l,n,r-n,u)}),e.add("height",function(i,n,r,o,l,u){i.height=o(l,n,r-n,u)}),e.add("fill",function(i,n,r,o,l,u){i.fill=Bp(n,r,l,u,o)}),e.add("stroke",function(i,n,r,o,l,u){i.stroke=Bp(n,r,l,u,o)}),e.add("strokeWidth",function(i,n,r,o,l,u){i.strokeWidth=o(l,n,r-n,u)}),e.add("strokeDashOffset",function(i,n,r,o,l,u){i.strokeDashOffset=o(l,n,r-n,u)}),e.add("background",function(i,n,r,o,l,u){i.background=Bp(n,r,l,u,o)}),e.add("areaBackground",function(i,n,r,o,l,u){i.areaBackground=Bp(n,r,l,u,o)}),e.add("opacity",function(i,n,r,o,l,u){i.opacity=o(l,n,r-n,u)}),e.add("scale",function(i,n,r,o,l,u){i.scale=o(l,n,r-n,u)}),e.add("angle",function(i,n,r,o,l,u){i.angle=o(l,n,r-n,u)}),Rp=e}Y.Object.defineProperties(fn.prototype,{animationReasons:{get:function(){return this.Zd}},isEnabled:{get:function(){return this.Jd},set:function(t){(this.Jd=t)&&this.Fi.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.Dg},set:function(t){1>t&&at(t,">= 1",fn,"duration"),this.Dg=t}},isAnimating:{get:function(){return this.dc}},isTicking:{get:function(){return this.vq}},isInitial:{get:function(){return this.Gh},set:function(t){this.Gh=t}},defaultAnimation:{get:function(){return this.ce}},activeAnimations:{get:function(){return this.Fi}},initialAnimationStyle:{get:function(){return this.Ok},set:function(t){this.Ok=t}}}),fn.prototype.stopAnimation=fn.prototype.Cc;var Rp=null,zp=!1,af=new K(fn,"Default",1),_0=new K(fn,"AnimateLocations",2),W0=new K(fn,"None",3);fn.className="AnimationManager",fn.defineAnimationEffect=function(t,e){zp||(lM(),zp=!0),Rp.add(t,e)},fn.Default=af,fn.AnimateLocations=_0,fn.None=W0;function qe(t){this.wu=this.Pw=this.Yd=this.H=null,this.Wk=this.dc=this.j=!1,this.dn=this.Qd=0,this.Lp=this.pt=aM,this.Vk=this.io=!1,this.du=1,this.bu=0,this.Gd=this.Dg=NaN,this.iw=0,this.en=null,this.o=co,this.vc=new ct,this.Ut=new ct,this.yl=new _,this.Vt=new _,this.fw=Ss,t&&Object.assign(this,t)}qe.prototype.suspend=function(){this.Wk=!0},qe.prototype.advanceTo=function(t,e){e&&(this.Wk=!1),this.io&&t>=this.Gd&&(this.Vk=!0,t-=this.Gd),this.iw=t,uM(this,!0),fh(this.Yd),_o(this.H),ch(this.Yd),this.H.redraw()};function Vp(t,e){if(t.Ut.clear(),t.Vk=!1,t.bu=0,t.Gd=NaN,0<t.yl.count&&t.yl.clear(),0<t.Vt.count&&t.Vt.clear(),e!==null)for(t=e.links;t.next();)t.value.Tg=null}s=qe.prototype,s.start=function(){if(this.vc.count===0||this.dc)return this;for(var t=this.H,e=this.vc.iterator;e.next();){var i=e.key;t===null&&(i instanceof j?t=i:i instanceof it&&(t=i.diagram))}if(t!==null)this.H=t,this.Yd=t.animationManager;else return this;return e=this.Yd,e.isEnabled===!1?this:(this.Gd=isNaN(this.Dg)?e.duration:this.Dg,this.Lp=this.pt,e.Nk&&e.Ok===af&&this===e.defaultAnimation&&(this.Lp=fM,this.Gd=isNaN(this.Dg)?e.duration===600?900:e.duration:this.Dg),this.fw=t.scrollMode,this.isViewportUnconstrained&&(t.tj=Qp),fh(e),this.yl.each(function(n){n.data=null,t.add(n)}),ch(e),this.dc=!0,this.Qd=+new Date,this.dn=this.Qd+this.Gd,ZN(e,this),this)},s.Ky=function(t,e){return t.Zc()?(this.yl.add(t),this.H=e,this):this},s.add=function(t,e,i,n,r){if(e==="position"&&i.Xa(n))return this;if(this.H===null&&(t instanceof j?this.H=t:t instanceof it&&t.diagram!==null&&(this.H=t.diagram)),t instanceof ot){if(!t.isAnimated)return this;e==="position"&&(e="position:part")}return $0(this,t,e,i,n,r),this};function $0(t,e,i,n,r,o){var l=t.vc;if(e instanceof j&&i==="position"&&(i="position:diagram"),(i==="fill"||i==="stroke"||i==="background"||i==="areaBackground")&&(xo(n),Dm(),n=[nn.j,nn.u,nn.o,nn.F],xo(r),Dm(),r=[nn.j,nn.u,nn.o,nn.F]),l.contains(e)){var u=l.I(e),h=u.start,f=u.end;h[i]===void 0&&(h[i]=ph(n)),f[i]=ph(r)}else h={},f={},h[i]=ph(n),f[i]=ph(r),u=h.position,e instanceof it&&u instanceof C&&!u.w()&&e.diagram.animationManager.Zd.contains("Expand SubGraph")&&u.assign(f.position),u=new cM(h,f,o),l.add(e,u);l=h[i],l instanceof C&&!l.w()&&l.assign(t.o),o&&i.indexOf("position:")===0&&e instanceof ot?u.Mu.location=ph(e.location):o&&(u.Mu[i]=ph(n))}function ph(t){return t instanceof C||t instanceof ht?t.copy():t}s.Fs=function(t){return this.dc?(t=this.vc.I(t),t!==null&&t.pv):!1},s.Zu=function(t){return this.dc?(t=this.vc.I(t),t!==null&&(t.start.position||t.start.location)):!1};function uM(t,e){if(!t.Wk||e){var i=t.Yd;if(t.dc!==!1){var n=+new Date,r=n>t.dn?t.Gd:n-t.Qd;e&&(r=t.iw,r<t.Gd?(t.Qd=+new Date-r,t.dn=t.Qd+t.Gd):r=t.Gd),fh(i),hM(t,r),_o(t.H,!0),ch(i),n>t.dn&&(t.io&&!t.Vk?(t.Qd=+new Date,t.dn=t.Qd+t.Gd,t.Vk=!0):t.Ml(!1))}}}function hM(t,e){for(var i=t.Gd,n=t.vc.iterator,r=t.Vk;n.next();){var o=n.key;if(!(o instanceof it&&o.diagram===null)){var l=n.value,u=r?l.end:l.start;l=r?l.start:l.end;var h=Rp,f;for(f in l)f==="position"&&(l["position:placeholder"]||l["position:nodeCollapse"])||h.get(f)===null||h.get(f)(o,u[f],l[f],t.Lp,e,i,t)}}}s.stop=function(){return this.dc?(this.Ml(!0),this):this},s.Ml=function(t){if(this.wu!==null&&this.wu.ko.remove(this.Pw),this.dc){var e=this.H,i=this.Yd;this.Wk=this.dc=i.Nk=!1,fh(i);for(var n=this.vc,r=this.yl.iterator;r.next();)e.remove(r.value);for(r=this.Vt.iterator;r.next();)r.value.v();r=this.io,n=n.iterator;for(var o=Rp;n.next();){var l=n.key,u=n.value,h=r?u.end:u.start,f=r?u.start:u.end,c=u.Mu,p;for(p in f)if(o.get(p)!==null){var g=p;!u.Ju||g!=="position:nodeCollapse"&&g!=="position:placeholder"||(g="position"),o.get(g)(l,h[p],c[p]!==void 0?c[p]:u.Ju?h[p]:f[p],this.Lp,this.Gd,this.Gd,this)}u.Ju&&c.location!==void 0&&l instanceof ot&&(l.location=c.location),u.pv&&l instanceof ot&&l.bc(!1)}if(e.As.clear(),Gp(e,!1),e.Ya(),e.N(),_o(e,!0),i.defaultAnimation===this){for(p=i.pr.iterator;p.next();)r=p.value,r.Tg!==null&&(r.points=r.Tg,r.Tg=null);i.pr.clear()}_o(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.fw),ch(i),this.bu++,!t&&this.du>this.bu?(this.Vk=!1,this.start()):(this.en&&this.en(this),Vp(this,null),i.Ml(this),e.Rb())}},s.Dj=function(t,e){var i=e.actualBounds,n=null;if(e instanceof dt&&(n=e.placeholder),n!==null?(i=n.ga(Je),n=n.padding,i.x+=n.left,i.y+=n.top,this.add(t,"position",i,t.position,!1)):this.add(t,"position",new C(i.x+i.width/2,i.y+i.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof dt)for(t=t.memberParts;t.next();)n=t.value,n instanceof W&&this.Dj(n,e)},s.Bj=function(t,e){if(t.isVisible()){var i=null;if(e instanceof dt&&(i=e.placeholder),i!==null){var n=i.ga(Je);i=i.padding,n.x+=i.left,n.y+=i.top,this.add(t,"position:placeholder",t.position,n,!0)}else this.add(t,"position:nodeCollapse",t.position,e,!0);if(this.add(t,"scale",t.scale,.01,!0),n=this.vc,n.contains(t)&&(n.I(t).pv=!0),t instanceof dt)for(t=t.memberParts;t.next();)n=t.value,n instanceof W&&this.Bj(n,e)}},s.Jz=function(t){var e=this.Ut.get(t);return e===null&&(e={},this.Ut.add(t,e)),e},Y.Object.defineProperties(qe.prototype,{duration:{get:function(){return this.Dg},set:function(t){1>t&&at(t,">= 1",qe,"duration"),this.Dg=t}},reversible:{get:function(){return this.io},set:function(t){this.io=t}},runCount:{get:function(){return this.du},set:function(t){0<t?this.du=t:O("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t)}},easing:{get:function(){return this.pt},set:function(t){this.pt=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.dc}}}),qe.prototype.getTemporaryState=qe.prototype.Jz,qe.prototype.stop=qe.prototype.stop,qe.prototype.add=qe.prototype.add,qe.prototype.addTemporaryPart=qe.prototype.Ky;function aM(t,e,i,n){return t/=n/2,1>t?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function fM(t,e,i,n){return t===n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e}qe.className="Animation",qe.EaseLinear=function(t,e,i,n){return i*t/n+e},qe.EaseInOutQuad=aM,qe.EaseInQuad=function(t,e,i,n){return i*(t/=n)*t+e},qe.EaseOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},qe.EaseInExpo=function(t,e,i,n){return t===0?e:i*Math.pow(2,10*(t/n-1))+e},qe.EaseOutExpo=fM;function cM(t,e,i){this.start=t,this.end=e,this.Mu={},this.Ju=i,this.pv=!1}cM.className="AnimationState";function Xr(t,e,i){this.xd=null,this.rf=t,this.to=i||Z0,this.tk=null,e!==void 0&&(this.tk=e,i===void 0&&(this.to=Up))}Xr.prototype.copy=function(){var t=new Xr(this.rf);t.to=this.to;var e=this.tk;if(e!==null){var i={};e.duration!==void 0&&(i.duration=e.duration),e.finished!==void 0&&(i.finished=e.finished),e.easing!==void 0&&(i.easing=e.easing),t.tk=i}return t};function JN(t,e){t=t.tk,t!==null&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}Y.Object.defineProperties(Xr.prototype,{propertyName:{get:function(){return this.rf},set:function(t){this.rf=t}},animationSettings:{get:function(){return this.tk},set:function(t){this.tk=t}},startCondition:{get:function(){return this.to},set:function(t){this.to=t}}});var Z0=new K(Xr,"Default",1),Up=new K(Xr,"Immediate",2),Q0=new K(Xr,"Bundled",3);Xr.className="AnimationTrigger",Xr.Default=Z0,Xr.Immediate=Up,Xr.Bundled=Q0;function be(t){Te(this),this.H=null,this.Pa=new q,this.xa="",this.pb=1,this.o=!1,this.j=this.Uh=this.u=this.Pi=this.Oi=this.Ni=this.Mi=this.Ki=this.Li=this.Ji=this.Ri=this.Ii=this.Qi=this.Hi=this.Gi=!0,this.Zq=[],t&&Object.assign(this,t)}s=be.prototype,s.clear=function(){for(var t=this.Pa,e=0;e<t.length;e++){var i=t.s[e];i.Ig=null,Nm(i)}t.clear(),this.Zq.length=0},s.Xe=function(t){this.H=t},s.toString=function(t){t===void 0&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var i=0,n=0,r=0,o=0,l=0,u=this.Pa.iterator;u.next();){var h=u.value;h instanceof dt?r++:h instanceof W?n++:h instanceof V?o++:h instanceof Nt?l++:i++}if(u="",0<i&&(u+=i+" Parts "),0<n&&(u+=n+" Nodes "),0<r&&(u+=r+" Groups "),0<o&&(u+=o+" Links "),0<l&&(u+=l+" Adornments "),1<t)for(t=this.Pa.iterator;t.next();)i=t.value,u+=`
    `+i.toString(),n=i.data,n!==null&&Ci(n)&&(u+=" #"+Ci(n)),i instanceof W?u+=" "+Bi(n):i instanceof V&&(u+=" "+Bi(i.fromNode)+" "+Bi(i.toNode));return e+" "+this.Pa.count+": "+u},s.kc=function(t,e,i){if(e===void 0&&(e=null),i===void 0&&(i=null),this.Uh===!1)return null;var n=!1;this.diagram!==null&&this.diagram.viewportBounds.ca(t)&&(n=!0);for(var r=C.alloc(),o=this.Pa.s,l=o.length;l--;){var u=o[l];if((n!==!0||Ts(u)!==!1)&&u.isVisible()&&(r.assign(t),pi(r,u.oe),u=u.kc(r,e,i),u!==null&&(e!==null&&(u=e(u)),u!==null&&(i===null||i(u)))))return C.free(r),u}return C.free(r),null},s.ki=function(t,e,i,n){if(e===void 0&&(e=null),i===void 0&&(i=null),n instanceof q||n instanceof _||(n=new _),this.Uh===!1)return n;var r=!1;this.diagram!==null&&this.diagram.viewportBounds.ca(t)&&(r=!0);for(var o=C.alloc(),l=this.Pa.s,u=l.length;u--;){var h=l[u];if((r!==!0||Ts(h)!==!1)&&h.isVisible()){o.assign(t),pi(o,h.oe);var f=h;h.ki(o,e,i,n)&&(e!==null&&(f=e(f)),f===null||i!==null&&!i(f)||n.add(f))}}return C.free(o),n},s.Cf=function(t,e,i,n,r){if(e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof q||r instanceof _||(r=new _),this.Uh===!1)return r;var o=!1;this.diagram!==null&&this.diagram.viewportBounds.Re(t)&&(o=!0);for(var l=this.Pa.s,u=l.length;u--;){var h=l[u];if((o!==!0||Ts(h)!==!1)&&h.isVisible()){var f=h;h.Cf(t,e,i,n,r)&&(e!==null&&(f=e(f)),f===null||i!==null&&!i(f)||r.add(f))}}return r},s.Pu=function(t,e,i,n,r,o,l){if(this.Uh===!1)return r;for(var u=this.Pa.s,h=u.length;h--;){var f=u[h];if((l!==!0||Ts(f)!==!1)&&o(f)&&f.isVisible()){var c=f;f.Cf(t,e,i,n,r)&&(e!==null&&(c=e(c)),c===null||i!==null&&!i(c)||r.add(c))}}return r},s.og=function(t,e,i,n,r,o){if(i===void 0&&(i=null),n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof q||r instanceof _)&&(o=r),r=!0),o instanceof q||o instanceof _||(o=new _),this.Uh===!1)return o;var l=!1;this.diagram!==null&&this.diagram.viewportBounds.ca(t)&&(l=!0);for(var u=C.alloc(),h=C.alloc(),f=this.Pa.s,c=f.length;c--;){var p=f[c];if((l!==!0||Ts(p)!==!1)&&p.isVisible()){u.assign(t),pi(u,p.oe),h.h(t.x+e,t.y),pi(h,p.oe);var g=p;p.og(u,h,i,n,r,o)&&(i!==null&&(g=i(g)),g===null||n!==null&&!n(g)||o.add(g))}}return C.free(u),C.free(h),o},s.Fd=function(t,e){if(this.visible){var i=this.Pa.s,n=i.length;if(n!==0){t=Rt();for(var r=Rt(),o=0;o<n;o++){var l=i[o];if(l.xw=o,l instanceof V){if(l.fd===!1)continue}else if(l instanceof Nt&&l.adornedPart!==null)continue;var u=l.actualBounds;l.isVisible()&&Cw(u,e)?(l.Fd(!0),t.push(l)):(l.Fd(!1),l.adornments!==null&&0<l.adornments.count&&r.push(l))}for(e=0;e<t.length;e++)for(i=t[e],lv(i),i=i.adornments;i.next();)n=i.value,n.measure(1/0,1/0),n.arrange(),n.Fd(!0);for(e=0;e<r.length;e++)lv(r[e]);Bt(t),Bt(r)}}};function ff(t,e){var i=1;return t.pb!==1&&(i=e.globalAlpha,e.globalAlpha=i*t.pb),i}s.ic=function(t,e,i){if(this.visible&&this.pb!==0&&(i===void 0&&(i=!0),i||!this.isTemporary)){i=this.Pa.s;var n=i.length;if(n!==0){if(t.isTemporary)for(var r=0;r<n;r++)i[r].Gj();r=ff(this,t);var o=this.Zq;o.length=0;for(var l=e.scale,u=E.alloc(),h=0;h<n;h++)this.Nj(t,i[h],e,o,l,u,!0);if(E.free(u),t.isTemporary)for(e=0;e<n;e++)i[e].Gj();t.globalAlpha=r}}};function qN(t,e,i,n,r){if(t.visible&&t.pb!==0&&(r||!t.isTemporary)){r=t.Pa.s;var o=r.length;if(o!==0){var l=ff(t,e),u=t.Zq;u.length=0;for(var h=i.scale,f=E.alloc(),c=0;c<o;c++){var p=r[c];n.contains(p)&&t.Nj(e,p,i,u,h,f,!1)}E.free(f),e.globalAlpha=l}}}s.Nj=function(t,e,i,n,r,o,l){if(l&&!Ts(e))t.Is(e);else{if(n!==null&&e instanceof V&&(e.isOrthogonal&&n.push(e),e.fd===!1)){t.Is(e);return}for(l=!1,n=e.containingGroup;n!==null;)l?n.tb!==null&&o.Gx(n.tb):n.tb!==null&&(l=!0,o.assign(n.tb)),n=n.containingGroup;var u=e.actualBounds;if(n=!1,l&&e.isVisible()){if(!o.Yc(u)){t.Is(e);return}n=!o.Re(u)}n&&(t.save(),t instanceof Vi?t.ak=o.copy():(t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.clip())),u.width*r>i.Oq||u.height*r>i.Oq?e.ic(t,i):(r=e.actualBounds,o=e.naturalBounds,r.width===0||r.height===0||isNaN(r.x)||isNaN(r.y)||!e.isVisible()||(i=e.transform,e.areaBackground!==null&&(en(e,t,e.areaBackground,!0,!0,o,r),t.fillRect(r.x,r.y,r.width,r.height)),e.areaBackground===null&&e.background===null&&(en(e,t,"rgba(0,0,0,0.3)",!0,!1,o,r),t.fillRect(r.x,r.y,r.width,r.height)),e.background!==null&&(t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),en(e,t,e.background,!0,!1,o,r),t.fillRect(0,0,o.width/2,o.height/2),i.ws()||(e=1/(i.m11*i.m22-i.m12*i.m21),t.transform(i.m22*e,-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy)))))),n&&(t.restore(),t.Vc(!0))}},s.g=function(t,e,i,n,r){var o=this.diagram;o!==null&&o.cb(Wt,t,this,e,i,n,r)},s.pi=function(t,e,i){var n=this.Pa;if(e.Ig=this,this===null&&Nm(e),t>=n.count)t=n.count;else if(n.M(t)===e)return-1;return n.Hb(t,e),e.Wo(i),n=this.diagram,n!==null&&(i?n.N():n.pi(e)),Yp(this,t,e),t},s.qc=function(t,e,i){if(!i&&e.layer!==this&&e.layer!==null)return e.layer.qc(t,e,i);var n=this.Pa;if(0>t||t>=n.length){if(t=n.indexOf(e),0>t)return-1}else if(n.M(t)!==e&&(t=n.indexOf(e),0>t))return-1;return e.Xo(i),n.mb(t),n=this.diagram,n!==null&&(i?n.N():n.qc(e)),e.Ig=null,Nm(e),t};function Yp(t,e,i){if(e=bN(t,e,i),i instanceof dt&&i!==null&&isNaN(i.zOrder)){if(i.memberParts.count!==0){for(var n=-1,r=t.Pa.s,o=r.length,l=0;l<o;l++){var u=r[l];if(u===i&&(e=l,0<=n)||0>n&&u.containingGroup===i&&(n=l,0<=e))break}!(0>n)&&n<e&&(r=t.Pa,r.mb(e),r.Hb(n,i))}e=i.containingGroup,e!==null&&Yp(t,-1,e)}i.svg!==null&&i.svg.remove()}function bN(t,e,i){var n=i.zOrder;if(isNaN(n))return e;t=t.Pa;var r=t.count;if(1>=r)return e;if(0>e&&(e=t.indexOf(i)),0>e)return-1;for(var o=e-1,l=NaN;0<=o&&(l=t.M(o).zOrder,!!isNaN(l));)o--;for(var u=e+1,h=NaN;u<r&&(h=t.M(u).zOrder,!!isNaN(h));)u++;if(!isNaN(l)&&l>n)for(;;){if(o===-1||l<=n){if(o++,o===e)break;return t.mb(e),t.Hb(o,i),o}for(l=NaN;0<=--o&&(l=t.M(o).zOrder,isNaN(l)););}else if(!isNaN(h)&&h<n)for(;;){if(u===r||h>=n){if(u--,u===e)break;return t.mb(e),t.Hb(u,i),u}for(h=NaN;++u<r&&(h=t.M(u).zOrder,isNaN(h)););}return e}Y.Object.defineProperties(be.prototype,{parts:{get:function(){return this.Pa.iterator}},partsBackwards:{get:function(){return this.Pa.iteratorBackwards}},diagram:{get:function(){return this.H}},name:{get:function(){return this.xa},set:function(t){var e=this.xa;if(e!==t){var i=this.diagram;if(i!==null)for(e===""&&O("Cannot rename default Layer to: "+t),i=i.layers;i.next();)i.value.name===t&&O("Layer.name is already present in this diagram: "+t);for(this.xa=t,this.g("name",e,t),t=this.Pa.iterator;t.next();)t.value.layerName=this.xa}}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&at(t,"0 <= value <= 1",be,"opacity"),this.pb=t,this.g("opacity",e,t),t=this.diagram,t!==null&&t.N())}},isTemporary:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&((this.o=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.u},set:function(t){var e=this.u;if(e!==t){for(this.u=t,this.g("visible",e,t),e=this.Pa.iterator;e.next();)e.value.bc(t);t=this.diagram,t!==null&&t.N()}}},pickable:{get:function(){return this.Uh},set:function(t){var e=this.Uh;e!==t&&(this.Uh=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,this.diagram!==null&&this.diagram.Ya())}},allowCopy:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Qi},set:function(t){var e=this.Qi;e!==t&&(this.Qi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ri},set:function(t){var e=this.Ri;e!==t&&(this.Ri=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(this.Mi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Ni},set:function(t){var e=this.Ni;e!==t&&(this.Ni=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Oi},set:function(t){var e=this.Oi;e!==t&&(this.Oi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Pi},set:function(t){var e=this.Pi;e!==t&&(this.Pi=t,this.g("allowSelect",e,t))}}}),be.prototype.findObjectsNear=be.prototype.og,be.prototype.findObjectsIn=be.prototype.Cf,be.prototype.findObjectsAt=be.prototype.ki,be.prototype.findObjectAt=be.prototype.kc,be.className="Layer";function j(t,e){if(RM||(fT(),RM=!0),Te(this),dh=this,this.wb=!0,this.Ka=null,this.ya=this.Aa=0,this.ta=null,$n){var i=this,n=function(){i.removeEventListener($.document,"DOMContentLoaded",n,!1),i.setRTL()};$.document.body!==null?this.setRTL():i.addEventListener($.document,"DOMContentLoaded",n,!1)}this.ol=null,$p.add("Model",Ot);var r=this;return this.Ib=function(o){var l=r.partManager;if(o.model===l.diagram.model&&l.diagram.aa){l.diagram.aa=!1;try{var u=o.change;o.modelChange===""&&u===Wt&&l.updateDataBindings(o.object,o.propertyName)}finally{l.diagram.aa=!0}}},this.Pc=function(o){r.partManager.doModelChanged(o)},this.iu=this.lu=null,dM(this),this.model=jv(),this.Wg=!0,mM(this),this.layout=new Kt,this.Wg=!1,this.bk=this.dk=this.ek=this.ck=this.vi=this.fA=this.Zj=this.Qv=null,this.gk=function(){},this.preventDefault=null,this.sn=!1,this.Yf=new zM,t!==void 0&&(typeof t=="string"||$.Element&&t instanceof Element?J0(this,t):e=t),e&&this.om(e),this.wb=!1,this.Rb(),this}var pM,dh;function dM(t){t.Yd=new fn,t.Yd.Xe(t),t.Eb=17,t.Iw=!1,t.un=!1,t.cu="default",t.Wa=new q,t.qj=new ct,t.nl="default",t.Vx(),t.Ux(),t.pb=1,t.pa=new C(NaN,NaN).freeze(),t.eu=new C(NaN,NaN),t.Ca=1,t.Pp=1,t.At=new C(NaN,NaN).freeze(),t.Bt=NaN,t.Pt=1e-4,t.Nt=100,t.Bb=new vt,t.Au=new C(NaN,NaN).freeze(),t.vt=new E(NaN,NaN,NaN,NaN).freeze(),t.sj=new Dt(0,0,0,0).freeze(),t.tj=Ss,t.ou=!1,t.$t=null,t.gu=null,t.yh=tn,t.yk=_e,t.Fg=tn,t.pq=_e,t.zt=Je,t.Ct=Je,t.Fc=!0,t.qn=!1,t.De=new _,t.Eh=new ct,t.Ym=!0,t.vp=250,t.uk=-1,t.xp=new Dt(16,16,16,16).freeze(),t.kg=!1,t.Ik=!1,t.gn=!0,t.bq=new an,t.bq.diagram=t,t.Qg=new an,t.Qg.diagram=t,t.dj=new an,t.dj.diagram=t,t.zg=null,t.pf=null,t.ru=!1,hT(t),t.ai=new _,t.It=!0,t.vu=ol,t.rw=!1,t.xu=Zp,t.jt="auto",t.Op="auto",t.zh=null,t.Fh=null,t.Bh=null,t.Qh=null,t.Oh=null,t.Nh=null,t.Rt=null,t.Lh=null,t.yt=!1,t.Mh=null,t.Ph=null,t.$h=null,t.Ch=null,t.St=!1,t.Zt={},t.pj=[null,null],t.Wg=!1,t.Kw=!1,t.pu=!1,t.mt=!1,t.tw=!0,t.ld=!1,t.aj=!1,t.Vw=!0,t.Ce=-2,t.Og=new ct,t.Yn=new q,t.Gg=!1,t.Jd=!0,t.Vs=!0,t.Gi=!0,t.Hi=!0,t.Ws=!1,t.Xs=!0,t.Qi=!0,t.Ii=!0,t.Ri=!0,t.Zs=!0,t.Ji=!0,t.Li=!0,t.Ki=!0,t.Mi=!0,t.Ni=!0,t.Oi=!0,t.Pi=!0,t.$s=!0,t.bt=!0,t.sw=!1,t.Uk=!1,t.nn=!0,t.on=!0,t.Ys=!0,t.at=!0,t.ju=16,t.nu=16,t.qr=!1,t.hu=!1,t.mu=0,t.ku=0,t.zb=new Dt(5).freeze(),t.Jw=new _().freeze(),t.Ot=999999999,t.pw=new _().freeze(),t.$i=!0,t.Ee=!0,t.vd=!0,t.Be=!1,t.gf=!1,t.xh=!0,t.hf=!1,t.uy=new _,t.qw=new _,t.Xh=null,t.cw=new ht(8,8),t.dw=999,t.Dw=1,t.Lw=0,t.hc={scale:1,position:new C,bounds:new E,Uy:new ht,gA:new ht,Tz:!1},t.hc.canvasSize=t.hc.Uy,t.hc.newCanvasSize=t.hc.gA,t.hc.isScroll=!1,t.Tw=new E(NaN,NaN,NaN,NaN).freeze(),t.xo=new ht(NaN,NaN).freeze(),t.Sp=new E(NaN,NaN,NaN,NaN).freeze(),t.Jt=!1,t.Lg=new ct;var e=new W,i=new Ut;i.bind(new se("text","",Bi)),e.add(i),t.py=e,t.Lg.add("",e),e=new W,i=new Ut,i.stroke="brown",i.bind(new se("text","",Bi)),e.add(i),t.Lg.add("Comment",e),e=new W,e.selectable=!1,e.avoidable=!1,i=new yt,i.figure="Ellipse",i.fill="black",i.stroke=null,i.desiredSize=new ht(3,3).ja(),e.add(i),t.Lg.add("LinkLabel",e),t.Zi=new ct,e=new dt,e.selectionObjectName="GROUPPANEL",e.type=z.Vertical,i=new Ut,i.font="bold 12pt sans-serif",i.bind(new se("text","",Bi)),e.add(i),i=new z(z.Auto),i.name="GROUPPANEL";var n=new yt;n.figure="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",i.add(n),n=new vi,n.padding=new Dt(5,5,5,5).ja(),i.add(n),e.add(i),t.ny=e,t.Zi.add("",e),t.Kh=new ct,e=new V,i=new yt,i.isPanelMain=!0,e.add(i),i=new yt,i.toArrow="Standard",i.fill="black",i.stroke=null,i.strokeWidth=0,e.add(i),t.oy=e,t.Kh.add("",e),e=new V,i=new yt,i.isPanelMain=!0,i.stroke="brown",e.add(i),t.Kh.add("Comment",e),e=new Nt,e.type=z.Auto,i=new yt,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),i=new vi,i.margin=new Dt(1.5,1.5,1.5,1.5).ja(),e.add(i),t.Tt=e,t.xt=e,e=new Nt,e.type=z.Link,i=new yt,i.isPanelMain=!0,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),t.Lt=e,t.fe=null,t.mq=!1,t.Bk=null,t.partManager=new Ot,t.toolManager=new qt,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.ot=null,t.Xm=new wh,t.Wt=null,t.Xt=null,t.Mr=!1,t.commandHandler=yM(),t.eq=null,t.fq=Mp,t.Rw=!1,t.Nb=1,t.Yh=null,t.Oq=1,t.Sq=0,t.Bw=[0,0,0,0,0],t.Tq=0,t.yq=1,t.vw=0,t.ww=new C,t.By=500,t.wp=new C,t.wq=!1}j.prototype.clear=function(){this.animationManager.Cc(),this.model.clear(),mh=null,yf="",gM(this,!1),this.Yn.clear(),Rh(),this.Og.clear(),this.Xh=null,this.Ya(),this.Va(),this.N()};function gM(t,e){t.animationManager.Cc(!0),t.Jw=new _().freeze(),t.pw=new _().freeze();var i=t.skipsUndoManager,n=t.ec!==null&&t.ec!==void 0;n&&(t.skipsUndoManager=!0);var r=null;t.fe!==null&&(r=t.fe.part,r!==null&&t.remove(r));var o=[],l=t.Wa.length;if(e){for(e=0;e<l;e++)for(var u=t.Wa.s[e].parts;u.next();){var h=u.value;h!==r&&h.data===null&&o.push(h)}for(e=0;e<o.length;e++)t.remove(o[e])}for(e=0;e<l;e++)t.Wa.s[e].clear();return t.partManager.clear(),t.De.clear(),t.Eh.clear(),t.ai.clear(),t.Bk=null,t.Yn.clear(),Rh(),t.Og.clear(),li=[],r!==null&&(t.add(r),t.partManager.parts.remove(r)),n&&(t.skipsUndoManager=i),o}function yM(){return null}j.prototype.reset=function(){this.clear(),this.wb=!0,dM(this),Zo(this),this.Wg=!0,mM(this),this.layout=new Kt,this.Wg=!1,this.model=jv(),this.model.undoManager=new ne,this.wb=this.sn=!1,this.N()},j.prototype.setRTL=function(t){t=t===void 0?this.div:t,t===null&&(t=$.document.body);var e=J("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var i="reverse";0<e.scrollLeft?i="default":(e.scrollLeft=1,e.scrollLeft===0&&(i="negative")),t.removeChild(e),this.cu=i},j.prototype.setScrollWidth=function(t){t=t===void 0?this.div:t,t===null&&(t=$.document.body);var e=0;if($n){var i=IM;e=pM,i===null&&(i=IM=J("p"),i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box",e=pM=J("div"),e.style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(i)),e.style.overflow="hidden",t.appendChild(e);var n=i.offsetWidth;e.style.overflow="scroll",i=i.offsetWidth,n===i&&(i=e.clientWidth),t.removeChild(e),e=n-i,e!==0||we||(e=11)}this.Eb=e,this.Iw=!0},j.prototype.qb=function(t){t.classType===j&&(this.autoScale=t)},j.prototype.toString=function(t){t===void 0&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var i=this.Wa.iterator;i.next();)e+=`
  `+i.value.toString(t-1);return e};function J0(t,e){if($n){if(e!=null||O("Diagram setup requires an argument DIV."),t.Ka!==null&&O("Diagram has already completed setup."),typeof e=="string"?t.Ka=$.document.getElementById(e):e instanceof HTMLDivElement?t.Ka=e:O("No DIV or DIV id supplied: "+e),t.Ka===null&&O("Invalid DIV id; could not get element with id: "+e),t.Ka.H!==void 0&&O("Invalid div id; div already has a Diagram associated with it."),!t.ol&&$.ResizeObserver){var i=b(function(){t.Rb()},250);t.ol=new $.ResizeObserver(function(){i()}),t.ol.observe(t.Ka)}$.getComputedStyle(t.Ka,null).position==="static"&&(t.Ka.style.position="relative"),e=5;var n="rgba(2"+e+"5, 255, 255, 0)";e--,t.Ka.style["-webkit-tap-highlight-color"]=n,t.Ka.innerHTML="",t.Ka.H=t,t.Ka.goDiagram=t,t.Ka.go=$.go;var r=new An(t);if(r.style!==void 0&&(r.style.position="absolute",r.style.top="0px",r.style.left="0px",$.getComputedStyle(t.Ka,null).getPropertyValue("direction")==="rtl"&&(t.un=!0),r.style.zIndex="2",r.style.userSelect="none",r.style.MozUserSelect="none",r.style.touchAction="none",r.style.letterSpacing="normal !important",r.style.wordSpacing="normal !important"),t.ta=r,t.ib=r.context,n=t.ib,t.Nb=t.computePixelRatio(),t.viewSize.w()||(t.Aa=t.Ka.clientWidth||1,t.ya=t.Ka.clientHeight||1),MM(t,t.Aa,t.ya),t.Ka.insertBefore(r.Oa,t.Ka.firstChild),r=new An(null),r.width=1,r.height=1,t.lw=r,t.qy=r.context,$n){r=J("div");var o=J("div");r.style.position="absolute",r.style.overflow="auto",r.style.width=t.Aa+"px",r.style.height=t.ya+"px",r.style.zIndex="1",o.style.position="absolute",o.style.width="1px",o.style.height="1px",t.Ka.appendChild(r),r.appendChild(o),r.onscroll=eT,r.addEventListener("pointerdown",iT),r.H=t,r.wy=!0,r.xy=!0,t.lu=r,t.iu=o}t.gk=b(function(){t.Yh=null,t.N()},300),t.Qv=b(function(){q0(t)},250),t.preventDefault=function(l){return l.preventDefault(),!1},t.Zj=function(l){if(t.isEnabled){var u=su(t,l,!0);u.bubbles=!0;var h=0,f=0;u.delta=0,l.deltaX!==void 0?(l.deltaX!==0&&(h=0<l.deltaX?1:-1),l.deltaY!==0&&(f=0<l.deltaY?1:-1),u.delta=Math.abs(l.deltaX)>Math.abs(l.deltaY)?-h:-f):l.wheelDeltaX!==void 0?(l.wheelDeltaX!==0&&(h=0<l.wheelDeltaX?-1:1),l.wheelDeltaY!==0&&(f=0<l.wheelDeltaY?-1:1),u.delta=Math.abs(l.wheelDeltaX)>Math.abs(l.wheelDeltaY)?-h:-f):l.wheelDelta!==void 0&&l.wheelDelta!==0&&(u.delta=0<l.wheelDelta?1:-1),t.doMouseWheel(),rl(u,l)}},t.fA=function(l){t.isEnabled&&(t.Uk=!1,su(t,l,!0),l=t.currentTool,l.cancelWaitAfter(),l.standardMouseOver())},t.vi=function(l){if(t.isEnabled){t.Uk=!0;var u=t.Zt;u[l.pointerId]===void 0&&(u[l.pointerId]=l),u=t.pj;var h=!1;if(u[0]===null||u[0].pointerId!==l.pointerId&&u[0].pointerType===l.pointerType)if(u[1]!==null&&u[1].pointerId===l.pointerId)u[1]=l,h=!0;else if(u[0]===null)u[0]=l;else if(u[1]===null)u[1]=l,h=!0;else{l.preventDefault();return}else u[0]=l;(u=l.pointerType==="touch"||l.pointerType==="pen")&&(t.ru=!1,t.wq=!0);var f=h;h=im(t,l,!0,!1,!0,f),pf(t,l,h),h.targetDiagram=em(l,l.target),h.targetObject=null,f||h.clone(t.bq),f=t.ww,u=u?25:10,l.timeStamp-t.vw<t.By&&!(Math.abs(f.x-l.screenX)>u||Math.abs(f.y-l.screenY)>u)?t.yq++:t.yq=1,h.clickCount=t.yq,t.vw=l.timeStamp,t.ww.sg(l.screenX,l.screenY),t.doMouseDown(),l.button===1?l.preventDefault():rl(h,l)}},t.ck=function(l){if(t.isEnabled){t.Uk=!0;var u=t.pj;if(u[0]===null||u[0].pointerId!==l.pointerId&&u[0].pointerType===l.pointerType){if(u[1]!==null&&u[1].pointerId===l.pointerId){u[1]=l;return}if(u[0]===null)u[0]=l;else return}else u[0]=l;if(u[0].pointerId===l.pointerId){u=im(t,l,!1,!1,!1,u[1]!==null);var h=$.document.elementFromPoint(l.clientX,l.clientY)||null;h!==null&&h.shadowRoot!==void 0&&h.shadowRoot!==null&&(h=h.shadowRoot.elementFromPoint(l.clientX,l.clientY));var f=t,c=l;h&&h.H&&(c=l,f=h.H),u.targetDiagram=f,pf(t,c,u),u.targetObject=null,t.doMouseMove(),rl(u,l)}}},t.ek=function(l){if(t.isEnabled){t.Uk=!0;var u=l.pointerType==="touch"||l.pointerType==="pen",h=t.Zt;if(u&&t.ru)delete h[l.pointerId],l.preventDefault();else if(h=t.pj,h[0]===null||h[0].pointerId!==l.pointerId&&h[0].pointerType===l.pointerType)h[1]!==null&&h[1].pointerId===l.pointerId&&(h[1]=null);else{h[0]=null,h=im(t,l,!1,!0,!0,!1);var f=$.document.elementFromPoint(l.clientX,l.clientY)||null;f!==null&&f.shadowRoot!==void 0&&f.shadowRoot!==null&&(f=f.shadowRoot.elementFromPoint(l.clientX,l.clientY)),f!==null&&f.H instanceof j&&f.H!==t&&pf(f.H,l,h),f===null&&(f=l.target),pf(t,l,h),h.clickCount=t.yq,h.targetDiagram=em(l,f),h.targetObject=null,t.doMouseUp(),rl(h,l),u&&(t.wq=!1)}}},t.dk=function(l){if(t.isEnabled){t.Uk=!1;var u=t.Zt;u[l.pointerId]&&delete u[l.pointerId],u=t.pj,u[0]!==null&&u[0].pointerId===l.pointerId&&(u[0]=null),u[1]!==null&&u[1].pointerId===l.pointerId&&(u[1]=null),l.pointerType!=="touch"&&l.pointerType!=="pen"&&(l=t.currentTool,l.cancelWaitAfter(),l.standardMouseOver())}},t.bk=function(l){var u=t.pj;u[0]!==null&&u[0].pointerId===l.pointerId?(u[0]=null,t.wq=!1):u[1]!==null&&u[1].pointerId===l.pointerId&&(u[1]=null)},t.Vp=n.Z["d"+VM[1]+VM[2]+"wI"+vh.slice(1,5)]["b"+NT.slice(1,e)](n.Z,BM,e,e),n.Vc(!0),tT(t),t.nl==="svg"&&(e=t.qj.get("svg"),t.Ka.appendChild(e.Oa),t.ib=e.context)}}j.prototype.addEventListener=function(t,e,i,n){t.addEventListener(e,i,{capture:n,passive:!1})},j.prototype.removeEventListener=function(t,e,i,n){t.removeEventListener(e,i,{capture:n})};function tT(t){var e=t.ta.Oa;e instanceof HTMLCanvasElement||(e=t.div),t.addEventListener(e,"pointerdown",t.vi,!1),t.addEventListener(e,"pointermove",t.ck,!1),t.addEventListener(e,"pointerup",t.ek,!1),t.addEventListener(e,"pointerout",t.dk,!1),t.addEventListener(e,"pointercancel",t.bk,!1),t.addEventListener(e,"pointerenter",t.gz,!1),t.addEventListener(e,"pointerleave",t.hz,!1),t.addEventListener(e,"wheel",t.Zj,!1),t.addEventListener(e,"keydown",t.Vz,!1),t.addEventListener(e,"keyup",t.Wz,!1),t.addEventListener(e,"blur",t.Sy,!1),t.addEventListener(e,"focus",t.Ty,!1),t.addEventListener(e,"selectstart",function(i){return i.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(i){return i.preventDefault(),!1},!1),t.addEventListener($,"resize",t.Qv,!1)}function cf(t){30<t.Sq&&(t.Yh=1)}function Gp(t,e){t.Yh!==null&&(t.Yh=null,e&&t.gk(),ws&&ws.px||(t.Sq=0,t.Bw=[0,0,0,0,0],t.Tq=0))}j.prototype.computePixelRatio=function(){return this.Yh!==null?this.Yh:$.devicePixelRatio||1},j.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},j.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},j.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},j.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},j.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},j.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},j.prototype.doFocus=function(){this.focus()},j.prototype.focus=function(){if(this.ta)if(this.scrollsPageOnFocus)this.ta.focus();else{var t=$.scrollX||$.pageXOffset,e=$.scrollY||$.pageYOffset;this.ta.focus(),$.scrollTo(t,e)}},j.prototype.Ty=function(){this.H.S("GainedFocus")},j.prototype.Sy=function(){this.H.S("LostFocus")};function q0(t){if(t.ta!==null){var e=t.Ka;if(e!==null&&e.clientWidth!==0&&e.clientHeight!==0){t.Iw||t.setScrollWidth();var i=t.gf?t.Eb:0,n=t.Be?t.Eb:0,r=t.Nb;t.Nb=t.computePixelRatio(),t.Nb!==r&&(t.qn=!0,t.Rb()),(e.clientWidth!==t.Aa+i||e.clientHeight!==t.ya+n)&&(t.Ee=!0,t.Fc=!0,e=t.layout,e!==null&&e.isViewportSized&&t.autoScale===tn&&(t.Ik=!0,e.C()),t.ld||t.Rb())}}}function mM(t){var e=new be;e.name="Background",t.Al(e),e=new be,e.name="",t.Al(e),e=new be,e.name="Foreground",t.Al(e),e=new be,e.name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.Al(e),e=new be,e.name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.Al(e),e=new be,e.name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Yw(e,t.Pj("Background"))}function vM(t){var e=new z(z.Grid);e.name="GRID";var i=new yt;return i.figure="LineH",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),i=new yt,i.figure="LineH",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),i=new yt,i.figure="LineH",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),i=new yt,i.figure="LineV",i.stroke="lightgray",i.strokeWidth=.5,i.interval=1,e.add(i),i=new yt,i.figure="LineV",i.stroke="gray",i.strokeWidth=.5,i.interval=5,e.add(i),i=new yt,i.figure="LineV",i.stroke="gray",i.strokeWidth=1,i.interval=10,e.add(i),i=new ot,i.add(e),i.layerName="Grid",i.zOrder=0,i.isInDocumentBounds=!1,i.isAnimated=!1,i.pickable=!1,i.locationObjectName="GRID",t.add(i),t.partManager.parts.remove(i),e.visible=!1,e}function eT(){this.H.hu?this.H.hu=!1:this.H.isEnabled?this.H.mx(this):rm(this.H)}function iT(t){this.H.isEnabled?(this.H.mu=t.target.scrollTop,this.H.ku=t.target.scrollLeft):rm(this.H)}j.prototype.mx=function(t){if(this.ta!==null){var e=this.lu,i=this.iu;this.qr=!0;var n=this.documentBounds,r=this.viewportBounds,o=this.sj,l=n.x-o.left,u=n.y-o.top,h=n.width+o.left+o.right,f=n.height+o.top+o.bottom,c=n.right+o.right;o=n.bottom+o.bottom;var p=r.x;n=r.y;var g=r.width,m=r.height,v=r.right,x=r.bottom;r=this.scale;var k=t.scrollLeft;if(this.un)switch(this.cu){case"negative":k=k+t.scrollWidth-t.clientWidth;break;case"reverse":k=t.scrollWidth-k-t.clientWidth}var S=k;g<h||m<f?(k=C.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.ku!==S&&(k.x=S/r+l,this.ku=S),this.allowVerticalScroll&&this.mu!==t.scrollTop&&(k.y=t.scrollTop/r+u,this.mu=t.scrollTop),this.position=k,C.free(k),this.Ee=this.qr=!1):(k=C.alloc(),t.wy&&this.allowHorizontalScroll&&(l<p&&(this.position=k.h(S+l,this.position.y)),c>v&&(this.position=k.h(-(e.scrollWidth-this.Aa)+S-this.Aa/r+c,this.position.y))),t.xy&&this.allowVerticalScroll&&(u<n&&(this.position=k.h(this.position.x,t.scrollTop+u)),o>x&&(this.position=k.h(this.position.x,-(e.scrollHeight-this.ya)+t.scrollTop-this.ya/r+o))),C.free(k),this.vd=!0,this.Ee=this.qr=!1,n=this.documentBounds,r=this.viewportBounds,c=n.right,v=r.right,o=n.bottom,x=r.bottom,l=n.x,p=r.x,u=n.y,n=r.y,g>=h&&l>=p&&c<=v&&(i.style.width="1px"),m>=f&&u>=n&&o<=x&&(i.style.height="1px"))}},j.prototype.computeBounds=function(t){return t===void 0&&(t=new E),yi(this),xM(this,t)};function xM(t,e){if(t.fixedBounds.w())return e.assign(t.fixedBounds),e.Do(t.zb),e;for(var i=!0,n=t.Wa.s,r=n.length,o=0;o<r;o++){var l=n[o];if(l.visible&&l.isInDocumentBounds){l=l.Pa.s;for(var u=l.length,h=0;h<u;h++){var f=l[h];f.isInDocumentBounds&&f.isVisible()&&(f=f.actualBounds,f.w()&&(i?(i=!1,e.assign(f)):e.ed(f)))}}}return i&&e.h(0,0,0,0),e.Do(t.zb),e}j.prototype.computePartsBounds=function(t,e){e===void 0&&(e=!1);var i=null;if(Ht(t))for(var n=0;n<t.length;n++){var r=t[n];!e&&r instanceof V||(r.Va(),i===null?i=r.actualBounds.copy():i.ed(r.actualBounds))}else for(t=t.iterator;t.next();)n=t.value,!e&&n instanceof V||(n.Va(),i===null?i=n.actualBounds.copy():i.ed(n.actualBounds));return i===null?new E(NaN,NaN,0,0):i};function hr(t,e){if((e||t.hf)&&!t.wb&&t.ta!==null&&t.documentBounds.w()){if(t.wb=!0,e){var i=t.initialPosition;if(i.w()){t.wb=!1,t.position=i;return}i=C.alloc(),i.yi(t.documentBounds,t.initialDocumentSpot);var n=t.viewportBounds;n=E.allocAt(0,0,n.width,n.height);var r=C.alloc();r.yi(n,t.initialViewportSpot),r.h(i.x-r.x,i.y-r.y),t.position=r,E.free(n),C.free(r),C.free(i)}i=t.yh,e&&t.Fg!==tn&&(i=t.Fg);var o=i!==tn?gh(t,i):t.scale;i=t.pa.x,n=t.pa.y,r=t.Aa/o;var l=t.ya/o,u=t.yk,h=t.pq;e&&!u.sb()&&(h.sb()||h.$b())&&(u=h.$b()?Et:h),b0(t,t.documentBounds,r,l,u,e),e=t.scale,t.scale=o,t.wb=!1,o=t.viewportBounds,A.B(o.x,i)&&A.B(o.y,n)&&A.B(o.width,r)&&A.B(o.height,l)||t.onViewportBoundsChanged(new E(i,n,r,l),o,e,!1)}}function gh(t,e){var i=t.Pp;if(t.ta===null)return i;t.Va();var n=t.documentBounds;if(!n.w())return i;var r=n.width;n=n.height;var o=t.Aa+(t.gf?t.Eb:0),l=t.ya+(t.Be?t.Eb:0),u=o/r,h=l/n;return e===lu?(e=Math.min(h,u),e>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===mf?(e=h>u?(l-t.Eb)/n:(o-t.Eb)/r,e>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}j.prototype.zoomToFit=function(){var t=this.tj;this.tj=Ss,this.scale=gh(this,lu),t!==Ss&&(hr(this,!1),b0(this,this.documentBounds,this.Aa/this.Ca,this.ya/this.Ca,this.yk,!1)),this.tj=t},s=j.prototype,s.FA=function(t,e){e===void 0&&(e=lu);var i=t.width,n=t.height;if(!(i===0||n===0||isNaN(i)&&isNaN(n))){var r=1;if(e===lu||e===mf)if(isNaN(i))r=this.viewportBounds.height*this.scale/n;else if(isNaN(n))r=this.viewportBounds.width*this.scale/i;else{r=this.Aa;var o=this.ya;r=e===mf?o/n>r/i?(o-(this.Be?this.Eb:0))/n:(r-(this.gf?this.Eb:0))/i:Math.min(o/n,r/i)}this.scale=r,this.position=new C(t.x,t.y)}},s.Ly=function(t,e){this.Va();var i=this.documentBounds,n=this.viewportBounds;this.position=new C(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))},s.Ez=function(t){if(t instanceof it){this.eq=t;var e=C.alloc();this.fq=this.op(t.ga(Je,e)),C.free(e)}else this.eq=null,this.fq=Mp};function b0(t,e,i,n,r,o){var l=C.allocAt(t.pa.x,t.pa.y),u=l.x,h=l.y;if(t.eq!==null){var f=C.alloc();f=t.eq.ga(Je,f),u=f.x-t.fq.x/t.scale,h=f.y-t.fq.y/t.scale,r=Ke,C.free(f)}(o||t.scrollMode===Ss)&&(r.sb()&&(i>e.width&&(u=e.x+(r.x*e.width+r.offsetX)-(r.x*i-r.offsetX)),n>e.height&&(h=e.y+(r.y*e.height+r.offsetY)-(r.y*n-r.offsetY))),r=t.sj,o=i-e.width,i<e.width+r.left+r.right?(u=Math.min(u+i/2,e.right+Math.max(o,r.right)-i/2),u=Math.max(u,e.left-Math.max(o,r.left)+i/2),u-=i/2):u>e.left?u=e.left:u<e.right-i&&(u=e.right-i),i=n-e.height,n<e.height+r.top+r.bottom?(h=Math.min(h+n/2,e.bottom+Math.max(i,r.bottom)-n/2),h=Math.max(h,e.top-Math.max(i,r.top)+n/2),h-=n/2):h>e.top?h=e.top:h<e.bottom-n&&(h=e.bottom-n)),l.x=isFinite(u)?u:-t.zb.left,l.y=isFinite(h)?h:-t.zb.top,t.positionComputation!==null&&(e=t.positionComputation(t,l),l.x=e.x,l.y=e.y),oM(t.Yd,t.pa,l),t.pa.h(l.x,l.y),Zo(t),C.free(l)}s.Ol=function(t,e){if(e===void 0&&(e=!0),e){if(t=tm(this,t,function(i){return i.part},function(i){return i.canSelect()}),t instanceof ot)return t}else if(t=tm(this,t,function(i){return i.part}),t instanceof ot)return t;return null},s.kc=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null),yi(this);for(var n=this.Wa.iteratorBackwards;n.next();){var r=n.value;if(r.visible&&(r=r.kc(t,e,i),r!==null))return r}return null};function tm(t,e,i,n){for(i===void 0&&(i=null),n===void 0&&(n=null),yi(t),t=t.Wa.iteratorBackwards;t.next();){var r=t.value;if(r.visible&&!r.isTemporary&&(r=r.kc(e,i,n),r!==null))return r}return null}s.qz=function(t,e,i){return e===void 0&&(e=!0),nT(this,t,function(n){return n.part},e?function(n){return n instanceof ot&&n.canSelect()}:null,i)};function nT(t,e,i,n,r){for(i===void 0&&(i=null),n===void 0&&(n=null),r instanceof q||r instanceof _||(r=new _),yi(t),t=t.Wa.iteratorBackwards;t.next();){var o=t.value;o.visible&&!o.isTemporary&&o.ki(e,i,n,r)}return r}s.ki=function(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=null),n instanceof q||n instanceof _||(n=new _),yi(this);for(var r=this.Wa.iteratorBackwards;r.next();){var o=r.value;o.visible&&o.ki(t,e,i,n)}return n},s.wx=function(t,e,i,n){return e===void 0&&(e=!1),i===void 0&&(i=!0),rT(this,t,function(r){return r instanceof ot&&(!i||r.canSelect())},e,n)},s.Cf=function(t,e,i,n,r){e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof q||r instanceof _||(r=new _),yi(this);for(var o=this.Wa.iteratorBackwards;o.next();){var l=o.value;l.visible&&l.Cf(t,e,i,n,r)}return r},s.Pu=function(t,e,i,n,r,o){var l=new _;yi(this);for(var u=this.Wa.iteratorBackwards;u.next();){var h=u.value;h.visible&&h.Pu(t,e,i,n,l,r,o)}return l};function rT(t,e,i,n,r){var o=null;for(i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof q||r instanceof _||(r=new _),yi(t),t=t.Wa.iteratorBackwards;t.next();){var l=t.value;l.visible&&!l.isTemporary&&l.Cf(e,o,i,n,r)}return r}s.rz=function(t,e,i,n,r){return i===void 0&&(i=!0),n===void 0&&(n=!0),oT(this,t,e,function(o){return o instanceof ot&&(!n||o.canSelect())},i,r)},s.og=function(t,e,i,n,r,o){i===void 0&&(i=null),n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof q||r instanceof _)&&(o=r),r=!0),o instanceof q||o instanceof _||(o=new _),yi(this);for(var l=this.Wa.iteratorBackwards;l.next();){var u=l.value;u.visible&&u.og(t,e,i,n,r,o)}return o};function oT(t,e,i,n,r,o){var l=null;for(n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof q||r instanceof _)&&(o=r),r=!0),o instanceof q||o instanceof _||(o=new _),yi(t),t=t.Wa.iteratorBackwards;t.next();){var u=t.value;u.visible&&!u.isTemporary&&u.og(e,i,l,n,r,o)}return o}j.prototype.acceptEvent=function(t){return su(this,t,t instanceof MouseEvent)};function su(t,e,i){var n=t.Qg;return t.Qg=t.dj,t.dj=n,n.diagram=t,n.event=e,i?pf(t,e,n):(n.viewPoint=t.Qg.viewPoint,n.documentPoint=t.Qg.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),n.modifiers=t,n.button=e.button,e.buttons!==void 0&&(n.buttons=e.buttons),we&&e.button===0&&e.ctrlKey&&(n.button=2),n.down=!1,n.up=!1,n.clickCount=1,n.delta=0,n.handled=!1,n.bubbles=!1,n.timestamp=e.timeStamp,n.isMultiTouch=!1,n.targetDiagram=em(e,e.target),n.targetObject=null,n}function em(t,e){return e===null?null:(e=e.H)?e:((e=t.path)||typeof t.composedPath!="function"||(e=t.composedPath()),e&&e[0]&&e[0].H?e[0].H:null)}function im(t,e,i,n,r,o){var l=t.Qg;t.Qg=t.dj,t.dj=l,l.diagram=t,l.clickCount=1;var u=l.delta=0;return e.ctrlKey&&(u+=1),e.altKey&&(u+=2),e.shiftKey&&(u+=4),e.metaKey&&(u+=8),l.modifiers=u,l.event=e,l.timestamp=e.timeStamp,l.button=n?t.firstInput.button:e.button,l.buttons=e.buttons,we&&e.button===0&&e.ctrlKey&&(l.button=2),l.down=i,l.up=n,l.handled=!1,l.bubbles=r,l.isMultiTouch=o,l}function rl(t,e){return t.bubbles?!0:(e.stopPropagation!==void 0&&e.stopPropagation(),e.cancelable!==!1&&e.preventDefault(),e.cancelBubble=!0,!1)}j.prototype.Vz=function(t){var e=this.H;if(!this.H.isEnabled)return!1;var i=su(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.down=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return e.doKeyDown(),rl(i,t)},j.prototype.Wz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=su(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del"}return e.doKeyUp(),rl(i,t)},j.prototype.gz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=su(e,t,!0);return e.mouseEnter!==null&&e.mouseEnter(i),e.currentTool.standardMouseOver(),rl(i,t)},j.prototype.hz=function(t){var e=this.H;if(!e.isEnabled)return!1;var i=su(e,t,!0);return e.mouseLeave!==null&&e.mouseLeave(i),rl(i,t)},j.prototype.getMouse=function(t){var e=this.ta;if(e===null)return new C(0,0);var i=e.getBoundingClientRect();return e=this.Aa/i.width*(t.clientX-i.left),t=this.ya/i.height*(t.clientY-i.top),this.Bb!==null?pi(new C(e,t),this.Bb):new C(e,t)};function pf(t,e,i){var n=t.ta,r=0,o=0;n!==null&&(n=n.getBoundingClientRect(),r=t.Aa/n.width*(e.clientX-n.left),o=t.ya/n.height*(e.clientY-n.top)),i.viewPoint.h(r,o),t.Bb!==null?(e=C.allocAt(r,o),t.Bb.Cd(e),i.documentPoint.assign(e),C.free(e)):i.documentPoint.h(r,o)}function wM(t,e,i){if(t.pj[0]!==null){e=t.pj[e];var n=t.ta;n!==null&&(n=n.getBoundingClientRect(),i.h(t.Aa/n.width*(e.clientX-n.left),t.ya/n.height*(e.clientY-n.top)))}}j.prototype.Ya=function(){this.$i||(this.$i=!0,this.Rb(!1))};function sT(t){t.ld||yi(t),t.Va()}j.prototype.redraw=function(){this.wb||this.ld||(this.N(),this.bd())},s=j.prototype,s.Uz=function(){return this.kg},s.bz=function(t){t===void 0&&(t=null);var e=this.animationManager,i=e.isEnabled;e.Cc(),e.isEnabled=!1,_o(this),this.hf=!1,this.eu=new C(NaN,NaN),e.isEnabled=i,this.ld=!0;var n=this;t!==null&&G(function(){n.ld=!1,Ko(e,"Model"),t(n)},1)},s.Rb=function(t){if(t===void 0&&(t=!1),this.kg!==!0&&!(this.wb||t===!1&&this.ld)){this.kg=!0;var e=this;$.requestAnimationFrame(function(){e.kg&&e.bd()})}},s.bd=function(){(!this.gn||this.kg)&&(this.gn&&(this.gn=!1),_o(this))};function Hp(t,e,i){!t.Ee||t.wb||t.animationManager.defaultAnimation.isAnimating||rm(t)||(e&&yi(t),i&&hr(t,!1))}function _o(t,e){if(!t.ld&&(t.kg=!1,t.Ka!==null||t.xo.w())){t.ld=!0;var i=t.animationManager,n=t.Yn;if(!i.isAnimating&&n.length!==0){for(var r=n.s,o=r.length,l=0;l<o;l++){var u=r[l];pn(u,!1),u.v()}n.clear()}n=t.qw,0<n.count&&(n.each(function(h){h.Pv()}),n.clear()),r=n=!1,i.defaultAnimation.isAnimating&&(r=!0,n=t.skipsUndoManager,t.skipsUndoManager=!0),i.Ab||q0(t),Hp(t,!1,!0),t.fe!==null&&(t.fe.visible&&!t.mq&&($o(t),t.mq=!0),!t.fe.visible&&t.mq&&(t.mq=!1)),yi(t),o=!1,(!t.hf||t.xh)&&(t.hf?pm(t,!t.Ik):(t.Ea("Initial Layout"),i.isEnabled===!1&&i.Cc(),pm(t,!1)),o=!0),t.Ik=!1,yi(t),t.pu||sT(t),Hp(t,!0,!1),l=!1,o?(i=E.alloc(),i.assign(t.viewportBounds),t.hf||(l=t.hf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,lT(t)),t.S("LayoutCompleted"),Hp(t,!0,!1),E.free(i)):i.Nk&&i.Sw&&(t.Fg!==tn?t.scale=gh(t,t.Fg):t.yh!==tn?t.scale=gh(t,t.yh):(i=t.initialScale,isFinite(i)&&0<i&&(t.scale=i)),hr(t,!0)),o&&l&&t.eb("Initial Layout"),yi(t),e||t.ic(t.ib),r&&(t.skipsUndoManager=n),t.ld=!1}}function lT(t){if(t.Fg!==tn)t.scale=gh(t,t.Fg);else if(t.yh!==tn)t.scale=gh(t,t.yh);else{var e=t.initialScale;isFinite(e)&&0<e&&(t.scale=e)}hr(t,!0),e=t.Wa.s,t.Fd(e,e.length,t,t.viewportBounds),t.S("InitialLayoutCompleted"),t.eu.assign(t.pa),$o(t)}function yi(t){if(t.De.count!==0&&(t.ld||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var i=t.De.iterator;if(i===null||t.De.count===0)break;t.De=new _,t.Pv(i,t.De)}t.nodes.each(function(n){n instanceof dt&&n.R&65536&&(n.R=n.R^65536)})}}s.Pv=function(t,e){for(t.reset();t.next();){var i=t.value;!i.Zc()||i instanceof dt||(i.ti()?(i.measure(1/0,1/0),i.arrange()):e.add(i))}for(t.reset();t.next();)i=t.value,i instanceof dt&&i.isVisible()&&nm(this,i);for(t.reset();t.next();)i=t.value,i instanceof V&&i.isVisible()&&(i.ti()?(i.measure(1/0,1/0),i.arrange()):e.add(i));for(t.reset();t.next();)i=t.value,i instanceof Nt&&i.isVisible()&&(i.ti()?(i.measure(1/0,1/0),i.arrange()):e.add(i))};function nm(t,e){for(var i=Rt(),n=Rt(),r=e.memberParts;r.next();){var o=r.value;o.isVisible()&&(o instanceof dt?(Qo(o)||Zn(o)||Ns(o))&&nm(t,o):o instanceof V?o.fromNode===e||o.toNode===e?n.push(o):i.push(o):(o.measure(1/0,1/0),o.arrange()))}for(t=i.length,r=0;r<t;r++)o=i[r],o.measure(1/0,1/0),o.arrange();for(Bt(i),e.measure(1/0,1/0),e.arrange(),t=n.length,e=0;e<t;e++)i=n[e],i.measure(1/0,1/0),i.arrange();Bt(n)}s.Fd=function(t,e,i,n){if(this.vd||this.animationManager.isAnimating)for(var r=0;r<e;r++)t[r].Fd(i,n)},s.ic=function(t){if(this.Ka!==null){if(this.ta===null&&O("No canvas specified"),this.nl==="svg"){if(this.Ka!==null){var e=this.animationManager;if(!e.Ab&&(!e.isAnimating||e.isTicking)){yh(this);var i=this.Aa,n=this.ya;if(t.Iv.resize(i,n,i,n),i=this.Wa.s,n=i.length,this.Fd(i,n,this,this.viewportBounds),this.Fc||e.isAnimating){e=this.pa;var r=this.Ca,o=Math.round(e.x*r)/r,l=Math.round(e.y*r)/r,u=this.Bb;for(u.reset(),r!==1&&u.scale(r),e.x===0&&e.y===0||u.translate(-o,-l),t.ui=null,ZM(t,u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),this.pb!==1&&(t.globalAlpha=this.pb),Kp(this,t),e=this.Nb,this.ta.context.setTransform(e,0,0,e,0,0),this.ta.context.clearRect(0,0,this.Aa,this.ya),e=0;e<n;e++)i[e].ic(t,this);t=!1,this.Yf?xh(this.Yf,this)&&(t=this.Vp()):t=!0,t&&(vt.prototype.Cd=vt.prototype.Gu),this.Fc=this.vd=!1}}}}else t:if(o=this.animationManager,!o.Ab&&(!o.isAnimating||o.isTicking)&&(i=new Date,yh(this),this.Ka.style.opacity!=="0")){if(n=t!==this.ib,e=this.Wa.s,r=e.length,this.Fd(e,r,this,this.viewportBounds),n)t.Vc(!0),this.vd=!0;else if(!this.Fc&&!o.isAnimating)break t;o=this.Bb,o.reset(),l=this.Nb,u=this.pa;var h=this.Ca,f=Math.round(u.x*h)/h,c=Math.round(u.y*h)/h;for(h!==1&&o.scale(h),u.x===0&&u.y===0||o.translate(-f,-c),t.setTransform(l,0,0,l,0,0),t.clearRect(0,0,this.Aa,this.ya),this.pb!==1&&(t.globalAlpha=this.pb),Kp(this,t),u=0;u<r;u++)t.setTransform(l,0,0,l,0,0),t.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),t.yc(),e[u].ic(t,this);if(e=!1,this.Yf?xh(this.Yf,this)&&(e=this.Vp()):e=!0,e&&(vt.prototype.Cd=vt.prototype.Gu),n?(this.ib.Vc(!0),this.vd=!0):this.Fc=this.vd=!1,e=+new Date-+i,n=ws&&ws.px,i=this.Bw,n||this.Yh===null){for(i[this.Tq]=e,this.Tq=(this.Tq+1)%i.length,r=e=0;r<i.length;r++)e+=i[r];this.Sq=e/i.length}if(this.pb!==1&&(t.globalAlpha=1),n)for(t.setTransform(1,0,0,1,0,0),n=0;n<i.length;n++)t.fillText(i[n].toString(),20,150+ +(20*n))}}};function Xp(t,e,i,n,r,o,l,u,h,f){if(t.Ka!==null){t.ta===null&&O("No canvas specified"),l===void 0&&(l=null),u===void 0&&(u=null),h===void 0&&(h=!1),f===void 0&&(f=!1),yh(t),t.ib.Vc(!0),t.vd=!0,t.aj=!0;var c=t.Ca;t.Ca=r;var p=t.Wa.s,g=p.length;try{var m=new E(o.x,o.y,n.width/r,n.height/r),v=m.copy();v.Do(i),$o(t,v),yi(t),t.Fd(p,g,t,m),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),u!==null&&u!==""&&(e.fillStyle=u,e.qx(0,0,n.width,n.height));var x=t.Nb;e.scale(x,x);var k=vt.alloc();k.reset(),k.translate(i.left,i.top),k.scale(r),o.x===0&&o.y===0||k.translate(-o.x,-o.y),e.setTransform(k.m11,k.m12,k.m21,k.m22,k.dx,k.dy),e.yc(),e instanceof Vi&&ZM(e,k.m11,k.m12,k.m21,k.m22,k.dx,k.dy),vt.free(k),Kp(t,e),e.globalAlpha=t.pb;var S=t.Pj("Grid");if(l){var P=new _,N=l.iterator;for(N.reset();N.next();){var T=N.value;T instanceof ot&&(f||T.layer!==S)&&(T.Gj(),P.add(T))}for(f=0;f<g;f++)qN(p[f],e,t,P,h);P.each(function(D){return D.Gj()})}else for(P=0;P<g;P++){var F=p[P];F===S?f&&F.ic(e,t,!0):F.ic(e,t,h)}t.aj=!1,t.Yf&&xh(t.Yf,t)&&t.Vp()}finally{t.Ca=c,t.ib.Vc(!0),t.vd=!0,t.Fd(p,g,t,t.viewportBounds),$o(t),t.ib instanceof Vi&&(t.ib.hi.replaceChildren(),t.redraw())}}}s.Gf=function(t){return this.Rg[t]},s.Zx=function(t,e){t==="minDrawingLength"&&(this.Oq=e),this.Rg[t]=e,this.redraw()},s.Vx=function(){this.Rg=new Xe,this.Rg.drawShadows=!0,this.Rg.textGreeking=!0,this.Rg.viewportOptimizations=!(we||ie),this.Rg.temporaryPixelRatio=!0,this.Rg.pictureRatioOptimization=!0,this.Oq=this.Rg.minDrawingLength=1};function Kp(t,e){t=t.Rg,t!==null&&(t.imageSmoothingEnabled!==void 0&&e.Yx(!!t.imageSmoothingEnabled),t=t.defaultFont,t!=null&&(e.font=t))}s.Ql=function(t){return this.pn[t]},s.wA=function(t,e){this.pn[t]=e},s.Ux=function(){this.pn=new Xe,this.pn.extraTouchArea=10,this.pn.extraTouchThreshold=10,this.pn.hasGestureZoom=!0},s.set=function(t){return Object.assign(this,t),this},s.Fu=function(t){return this.om(t)},s.om=function(t){return df(this,t),this};function df(t,e){var i=t instanceof z,n=t instanceof j,r;for(r in e){r===""&&O("Setting properties requires non-empty property names");var o=t,l=r;if(i||n){var u=r.indexOf(".");if(0<u){var h=r.substring(0,u);i?o=t.fb(h):(o=t[h],o==null&&(o=t.toolManager[h])),gt(o)?l=r.substr(u+1):O("Unable to find object named: "+h+" in "+t.toString()+" when trying to set property: "+r)}}if(l[0]!=="_"&&!Qu(o,l))if(n&&l==="ModelChanged"){t.$w(e[l]);continue}else if(n&&l==="Changed"){t.Pe(e[l]);continue}else if(n&&Qu(t.toolManager,l))o=t.toolManager;else if(n&&LM(t,l)){t.Cj(l,e[l]);continue}else if(t instanceof nt&&l==="Changed"){t.Pe(e[l]);continue}else O('Trying to set undefined property "'+l+'" on object: '+o.toString());o[l]=e[r],l[0]==="_"&&o instanceof it&&o.Xw(l)}}s.gx=function(){if(this.Eh.count!==0&&!(1<this.undoManager.transactionLevel)){for(;0<this.Eh.count;){var t=this.Eh;for(this.Eh=new ct,t=t.iterator;t.next();){var e=t.key;e.Yo(t.value),e.rc()}}this.N()}},s.N=function(t){if(t===void 0)this.Fc=!0,this.Rb();else{var e=this.viewportBounds;t.w()&&e.Yc(t)&&(this.Fc=!0,this.Rb())}this.S("InvalidateDraw")},j.prototype.invalidateViewport=function(t,e){if(this.Fc!==!0)if(this.Fc=!0,this.nl==="svg")this.bd();else{var i=this.Gf("temporaryPixelRatio")===!0;if(this.Gf("viewportOptimizations")===!0&&this.scrollMode!==Qp&&this.sj.ii(0,0,0,0)&&e.width===t.width&&e.height===t.height){var n=this.scale,r=Math.max(t.y,e.y),o=Math.min(t.y+t.height,e.y+e.height);if(0<Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x))*n&&0<Math.max(0,o-r)*n){if(!(this.ld||(this.kg=!1,this.Ka===null||(this.ld=!0,this.documentBounds.w()||(n=E.alloc(),cm(this,this.computeBounds(n)),E.free(n)),n=this.ta,n===null||n instanceof Sr)))){var l=this.Nb;r=this.Aa*l;var u=this.ya*l,h=this.scale*l;o=Math.round(Math.round(e.x*h)-Math.round(t.x*h)),e=Math.round(Math.round(e.y*h)-Math.round(t.y*h)),h=this.lw,t=this.qy,h.width!==r&&(h.width=r),h.height!==u&&(h.height=u),t.clearRect(0,0,r,u),h=190*l;var f=70*l,c=Math.max(o,0),p=Math.max(e,0),g=Math.floor(r-c),m=Math.floor(u-p);t.drawImage(n.Oa,c,p,g,m,0,0,g,m),xh(this.Yf,this)&&t.clearRect(0,0,h,f),n=Rt(),t=Rt(),m=Math.abs(o),g=Math.abs(e);var v=c===0?0:r-m;c=C.allocAt(v,0),m=C.allocAt(m+v,u),t.push(new E(Math.min(c.x,m.x),Math.min(c.y,m.y),Math.abs(c.x-m.x),Math.abs(c.y-m.y)));var x=this.Bb;if(x.reset(),x.scale(l,l),this.Ca!==1&&x.scale(this.Ca),l=this.pa,(l.x!==0||l.y!==0)&&isFinite(l.x)&&isFinite(l.y)&&x.translate(-l.x,-l.y),pi(c,x),pi(m,x),n.push(new E(Math.min(c.x,m.x),Math.min(c.y,m.y),Math.abs(c.x-m.x),Math.abs(c.y-m.y))),v=p===0?0:u-g,c.h(0,v),m.h(r,g+v),t.push(new E(Math.min(c.x,m.x),Math.min(c.y,m.y),Math.abs(c.x-m.x),Math.abs(c.y-m.y))),pi(c,x),pi(m,x),n.push(new E(Math.min(c.x,m.x),Math.min(c.y,m.y),Math.abs(c.x-m.x),Math.abs(c.y-m.y))),xh(this.Yf,this)&&(r=0<o?0:-o,u=0<e?0:-e,c.h(r,u),m.h(h+r,f+u),t.push(new E(Math.min(c.x,m.x),Math.min(c.y,m.y),Math.abs(c.x-m.x),Math.abs(c.y-m.y))),pi(c,x),pi(m,x),n.push(new E(Math.min(c.x,m.x),Math.min(c.y,m.y),Math.abs(c.x-m.x),Math.abs(c.y-m.y)))),C.free(c),C.free(m),Hp(this,!1,!0),this.Ka===null&&O("No div specified"),this.ta===null&&O("No canvas specified"),!this.animationManager.Ab&&(r=this.ib,this.Fc)){for(yh(this),u=this.Nb,r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,this.Aa*u,this.ya*u),r.drawImage(this.lw.Oa,0<o?0:Math.round(-o),0<e?0:Math.round(-e)),o=this.pa,l=this.Ca,h=Math.round(o.x*l)/l,f=Math.round(o.y*l)/l,e=this.Bb,e.reset(),l!==1&&e.scale(l),o.x===0&&o.y===0||e.translate(-h,-f),r.save(),r.beginPath(),o=t.length,l=0;l<o;l++)h=t[l],h.width!==0&&h.height!==0&&r.rect(Math.floor(h.x),Math.floor(h.y),Math.ceil(h.width),Math.ceil(h.height));for(r.clip(),r.setTransform(u,0,0,u,0,0),r.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),r.yc(),e=this.Wa.s,o=e.length,this.Fd(e,o,this,this.viewportBounds),Kp(this,r),r.globalAlpha=this.pb,u=0;u<o;u++)if(l=e[u],h=n,l.visible&&l.pb!==0){f=ff(l,r),p=l.Zq,p.length=0,c=this.scale,g=E.alloc(),m=l.Pa.s,x=m.length,v=h.length;for(var k=0;k<x;k++){var S=m[k],P=dl(S,S.actualBounds);t:{for(var N=2/c,T=4/c,F=0;F<v;F++){var D=h[F];if(D.width!==0&&D.height!==0&&P.Xu(D.x-N,D.y-N,D.width+T,D.height+T)){P=!0;break t}}P=!1}P&&l.Nj(r,S,this,p,c,g,!0)}E.free(g),r.globalAlpha=f}r.restore(),r.Vc(!0),this.Yf&&xh(this.Yf,this)&&this.Vp(),this.Fc=this.vd=!1,this.gk()}Bt(n),Bt(t),this.ld=!1}}else this.bd();i&&(cf(this),this.bd(),Gp(this,!0))}else i?(cf(this),this.bd(),Gp(this,!0)):this.bd()}};function yh(t){t.qn!==!1&&(t.qn=!1,MM(t,t.Aa,t.ya))}function MM(t,e,i){Zo(t);var n=t.Nb;t.ta.resize(e*n,i*n,e,i)&&(t.Fc=!0,t.ib.Vc(!0))}function rm(t){var e=t.ta;if(e===null||t.xo.w())return!0;var i=t.Aa,n=t.ya,r=t.Ka,o=!1,l=t.gf?t.Eb:0,u=t.Be?t.Eb:0,h=r.clientWidth||i+l,f=r.clientHeight||n+u,c=t.viewportBounds;r=c.x;var p=c.y,g=c.width,m=c.height;if((h!==i+l||f!==n+u)&&(t.gf=!1,t.Be=!1,u=l=0,t.Aa=h,t.ya=f,o=t.qn=!0,Zo(t)),!t.hf||!t.viewportBounds.w())return!0;var v=t.lu,x=t.iu;if(t.Ee=!1,!(o||t.gf||t.Be||t.nn||t.on))return!0;var k=t.documentBounds,S=0,P=0,N=0,T=0,F=c.width,D=c.height,X=t.sj;t.contentAlignment.sb()?(k.width>F&&(S=X.left,P=X.right),k.height>D&&(N=X.top,T=X.bottom)):(S=X.left,P=X.right,N=X.top,T=X.bottom);var tt=k.width+S+P,et=k.height+N+T;X=t.scale;var U=tt>h/X,R=et>f/X;if(!(o||t.gf||t.Be||U||R))return!0;S=k.x-S,h=c.x,P=k.right+P,f=c.right+l,N=k.y-N;var pt=c.y;k=k.bottom+T,c=c.bottom+u;var ut="1px";if(T="1px",t.scrollMode===Ss&&(U||R)&&(U&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(U=1,S+1<h&&(U=Math.max((h-S)*X+t.Aa,U)),P>f+1&&(U=Math.max((P-f)*X+t.Aa,U)),F+l+1<tt&&(U=Math.max((tt-F)*X+t.Aa,U)),ut=U.toString()+"px"),R&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(U=1,N+1<pt&&(U=Math.max((pt-N)*X+t.ya,U)),k>c+1&&(U=Math.max((k-c)*X+t.ya,U)),D+u+1<et&&(U=Math.max((et-D)*X+t.ya,U)),T=U.toString()+"px")),U=ut!=="1px",R=T!=="1px",U&&R||!U&&!R||(R&&(f-=t.Eb),U&&(c-=t.Eb),tt<F+l||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(l=1,S+1<h&&(l=Math.max((h-S)*X+t.Aa,l)),P>f+1&&(l=Math.max((P-f)*X+t.Aa,l)),F+1<tt&&(l=Math.max((tt-F)*X+t.Aa,l)),ut=l.toString()+"px"),U=ut!=="1px",l=t.ya,U!==t.Be&&(l=U?t.ya-t.Eb:t.ya+t.Eb),et<D+u||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(u=1,N+1<pt&&(u=Math.max((pt-N)*X+l,u)),k>c+1&&(u=Math.max((k-c)*X+l,u)),D+1<et&&(u=Math.max((et-D)*X+l,u)),T=u.toString()+"px"),R=T!=="1px"),t.qr&&U===t.Be&&R===t.gf)return i===t.Aa&&n===t.ya||t.bd(),!1;if(U!==t.Be&&(ut==="1px"?t.ya=t.ya+t.Eb:t.ya=Math.max(t.ya-t.Eb,1),o=!0),t.Be=U,x.style.width=ut,R!==t.gf&&(T==="1px"?t.Aa=t.Aa+t.Eb:t.Aa=Math.max(t.Aa-t.Eb,1),o=!0,t.un&&(u=C.alloc(),R?(e.style.left=t.Eb+"px",t.position=u.h(t.pa.x+t.Eb/t.scale,t.pa.y)):(e.style.left="0px",t.position=u.h(t.pa.x-t.Eb/t.scale,t.pa.y)),C.free(u))),o&&Zo(t),t.gf=R,x.style.height=T,t.hu=!0,o&&(t.qn=!0),e=v.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(F+1<tt?e=(t.position.x-S)*X:S+1<h?e=v.scrollWidth-v.clientWidth:P>f+1&&(e=t.position.x*X)),t.un)switch(t.cu){case"negative":e=-(v.scrollWidth-e-v.clientWidth);break;case"reverse":e=v.scrollWidth-e-v.clientWidth}return v.scrollLeft=e,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(D+1<et?v.scrollTop=(t.position.y-N)*X:N+1<pt?v.scrollTop=v.scrollHeight-v.clientHeight:k>c+1&&(v.scrollTop=t.position.y*X)),h=t.Aa,f=t.ya,v.style.width=h+(t.gf?t.Eb:0)+"px",v.style.height=f+(t.Be?t.Eb:0)+"px",i!==h||n!==f||t.animationManager.Ab?(i=E.allocAt(r,p,g,m),t.onViewportBoundsChanged(i,t.viewportBounds,X,o),E.free(i),!1):!0}s=j.prototype,s.add=function(t){var e=t.diagram;if(e!==this&&(e!==null&&O("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),e=this.Pj(t.layerName),e===null&&(e=this.Pj("")),e===null&&O('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var i=e.pi(99999999,t,t.diagram===this);0<=i&&this.cb(de,"parts",e,null,t,null,i),e.isTemporary||this.Ya(),t.C(1),i=t.layerChanged,i!==null&&i(t,null,e)}},s.pi=function(t){this.partManager.pi(t);var e=this;fl(t,function(i){PM(e,i)}),(t instanceof Nt||t instanceof dt&&t.placeholder!==null)&&t.v(),t.data!==null&&fl(t,function(i){Lv(e.partManager,i)}),Zn(t)!==!0&&Ns(t)!==!0||this.De.add(t),IS(t,!0,this),BS(t)?(t.actualBounds.w()&&this.N(dl(t,t.actualBounds)),this.Ya()):t.isVisible()&&t.actualBounds.w()&&this.N(dl(t,t.actualBounds)),this.Rb()},s.qc=function(t){t.Ej(),this.partManager.qc(t);var e=this;t.data!==null&&fl(t,function(i){Fv(e.partManager,i,e)}),this.De.remove(t),BS(t)?(t.actualBounds.w()&&this.N(dl(t,t.actualBounds)),this.Ya()):t.isVisible()&&t.actualBounds.w()&&this.N(dl(t,t.actualBounds)),this.Rb()},s.remove=function(t){om(this,t,!0)};function om(t,e,i){var n=e.layer;n!==null&&n.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.C(2),i&&e.Lj(),i=n.qc(-1,e,!1),0<=i&&t.cb(Se,"parts",n,e,null,i,null),t=e.layerChanged,t!==null&&t(e,n,null))}s.Js=function(t,e){if(e===void 0&&(e=!1),Ht(t))for(var i=t.length,n=0;n<i;n++){var r=t[n];e&&!r.canDelete()||this.remove(r)}else for(i=new _,i.addAll(t),t=i.iterator;t.next();)i=t.value,e&&!i.canDelete()||this.remove(i)},s.Kj=function(t,e,i){return i===void 0&&(i=!1),this.partManager.Kj(t,e,i)},j.prototype.moveParts=function(t,e,i,n){if(i===void 0&&(i=!1),n===void 0&&(n=lm(this)),this.toolManager!==null){var r=new ct;if(t!==null)if(Ht(t))for(var o=0;o<t.length;o++)Wo(this,r,t[o],i,n);else for(t=t.iterator;t.next();)Wo(this,r,t.value,i,n);else{for(t=this.parts;t.next();)Wo(this,r,t.value,i,n);for(t=this.nodes;t.next();)Wo(this,r,t.value,i,n);for(t=this.links;t.next();)Wo(this,r,t.value,i,n)}sm(this,r,e,n,i)}};function Wo(t,e,i,n,r,o){if(!e.contains(i)&&(o===void 0&&(o=!1),!n||o||i.canMove()||i.canCopy()))if(r===void 0&&(r=lm(t)),i instanceof W){if(e.add(i,t.Pd(r,i,i.location)),i instanceof dt&&(i.placeholder!==null||r.dragsMembers))for(o=i.memberParts;o.next();)Wo(t,e,o.value,n,r,r.groupsAlwaysMove);for(o=i.linksConnected;o.next();){var l=o.value;if(!e.contains(l)){var u=l.fromNode,h=l.toNode;u!==null&&e.contains(u)&&h!==null&&e.contains(h)&&Wo(t,e,l,n,r)}}if(r.dragsTree)for(i=i.Qu();i.next();)Wo(t,e,i.value,n,r)}else if(i instanceof V)for(e.add(i,t.Pd(r,i)),i=i.labelNodes;i.next();)Wo(t,e,i.value,n,r);else i instanceof Nt||e.add(i,t.Pd(r,i,i.location))}function sm(t,e,i,n,r){if(e!==null&&e.count!==0){var o=C.alloc(),l=C.alloc();l.assign(i),isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),(i=t.Mr)||_p(t,e);for(var u=Rt(),h=Rt(),f=e.iterator,c=C.alloc();f.next();){var p=f.key,g=f.value;if(p.Zc()){var m=SM(t,p,e);m!==null?u.push(new UM(p,g,m)):(!r||p.canMove())&&(m=g.point,o.assign(m),t.computeMove(p,o.add(l),n,c),p.location=c,g.shifted===void 0&&(g.shifted=new C),g.shifted.assign(c.re(m)))}else f.key instanceof V&&h.push(f.sa)}for(C.free(c),r=u.length,f=0;f<r;f++)p=u[f],o.assign(p.info.point),p.Uu.shifted===void 0&&(p.Uu.shifted=new C),p.node.location=o.add(p.Uu.shifted);for(r=C.alloc(),f=C.alloc(),p=h.length,g=0;g<p;g++){var v=h[g];if(m=v.key,m instanceof V)if(m.suspendsRouting){m.Tg=null,c=m.fromNode;var x=m.toNode;if(t.draggedLink!==null&&n.dragsLink)if(x=v.value.point,m.dragComputation===null)e.add(m,t.Pd(n,m,l)),is(m,l.x-x.x,l.y-x.y);else{v=C.allocAt(0,0),(c=m.i(0))&&c.w()&&v.assign(c);var k=c=C.alloc().assign(v).add(l);n.isGridSnapEnabled&&(n.isGridSnapRealtime||t.lastInput.up)&&(k=C.alloc(),um(t,m,c,k,n)),c.assign(m.dragComputation(m,c,k)).re(v),e.add(m,t.Pd(n,m,c)),is(m,c.x-x.x,c.y-x.y),C.free(v),C.free(c),k!==c&&C.free(k)}else c!==null&&(r.assign(c.location),k=e.I(c),k!==null&&r.re(k.point)),x!==null&&(f.assign(x.location),k=e.I(x),k!==null&&f.re(k.point)),c!==null&&x!==null?r.Xa(f)?(c=v.value.point,x=o,x.assign(r),x.re(c),e.add(m,t.Pd(n,m,r)),is(m,x.x,x.y)):(m.suspendsRouting=!1,m.bb()):(v=v.value.point,c=c!==null?r:x!==null?f:l,e.add(m,t.Pd(n,m,c)),is(m,c.x-v.x,c.y-v.y))}else(m.fromNode===null||m.toNode===null)&&(c=v.value.point,e.add(m,t.Pd(n,m,l)),is(m,l.x-c.x,l.y-c.y))}C.free(o),C.free(l),C.free(r),C.free(f),Bt(u),Bt(h),i||(yi(t),gf(t,e))}}j.prototype.computeMove=function(t,e,i,n){if(n===void 0&&(n=new C),n.assign(e),t===null)return n;var r=e,o=i.isGridSnapEnabled;o&&(i.isGridSnapRealtime||this.lastInput.up)&&(r=C.alloc(),um(this,t,e,r,i)),i=t.dragComputation!==null?t.dragComputation(t,e,r):r;var l=t.minLocation,u=l.x;isNaN(u)&&(u=o?Math.round(1e3*t.location.x)/1e3:t.location.x),l=l.y,isNaN(l)&&(l=o?Math.round(1e3*t.location.y)/1e3:t.location.y);var h=t.maxLocation,f=h.x;return isNaN(f)&&(f=o?Math.round(1e3*t.location.x)/1e3:t.location.x),h=h.y,isNaN(h)&&(h=o?Math.round(1e3*t.location.y)/1e3:t.location.y),n.h(Math.max(u,Math.min(i.x,f)),Math.max(l,Math.min(i.y,h))),r!==e&&C.free(r),n};function lm(t){var e=t.toolManager.findTool("Dragging");return e!==null?e.dragOptions:t.Xm}function um(t,e,i,n,r){if(r===void 0&&(r=lm(t)),n.assign(i),e!==null){var o=t.grid;e=r.gridSnapCellSize,t=e.width,e=e.height;var l=r.gridSnapOrigin,u=l.x;if(l=l.y,r=r.gridSnapCellSpot,o!==null){var h=o.gridCellSize;isNaN(t)&&(t=h.width),isNaN(e)&&(e=h.height),o=o.gridOrigin,isNaN(u)&&(u=o.x),isNaN(l)&&(l=o.y)}o=C.allocAt(0,0),o.zi(0,0,t,e,r),A.Oo(i.x,i.y,u+o.x,l+o.y,t,e,n),C.free(o)}}function _p(t,e){if(e!==null)for(t.Mr=!0,t=e.iterator;t.next();)e=t.key,e instanceof V&&(e.suspendsRouting=!0)}function gf(t,e){if(e!==null){for(e=e.iterator;e.next();){var i=e.key;i instanceof V&&(i.suspendsRouting=!1,qS(i)&&i.bb())}t.Mr=!1}}function SM(t,e,i){return e=e.containingGroup,e!==null&&(t=SM(t,e,i),t!==null||(t=i.I(e),t!==null))?t:null}s=j.prototype,s.Pd=function(t,e,i){if(i===void 0)return new ks(co);var n=t.isGridSnapEnabled;return t.groupsSnapMembers||e.containingGroup===null||(n=!1),n?new ks(new C(Math.round(1e3*i.x)/1e3,Math.round(1e3*i.y)/1e3)):new ks(i.copy())};function hm(t,e,i){if(e.diagram!==null&&e.diagram!==t&&O("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),i===null?e.diagram!==null&&O("Cannot add an existing Layer to this Diagram again: "+e):(i.diagram!==t&&O("Existing Layer must be in this Diagram: "+i+" not in "+i.diagram),e===i&&O("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,t=t.Wa,i=t.count;for(var n=0;n<i;n++)t.M(n).name===e&&O("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}s.Al=function(t){hm(this,t,null),t.Xe(this);var e=this.Wa,i=e.count-1;if(!t.isTemporary)for(;0<=i&&e.M(i).isTemporary;)i--;return e.Hb(i+1,t),this.ec!==null&&this.cb(de,"layers",this,null,t,null,i+1),this.N(),this.Ya(),this},s.Yw=function(t,e){hm(this,t,e),t.Xe(this);var i=this.Wa,n=i.indexOf(t);0<=n&&(i.remove(t),this.ec!==null&&this.cb(Se,"layers",this,t,null,n,null));var r=i.count,o;for(o=0;o<r;o++)if(i.M(o)===e){i.Hb(o,t);break}return this.ec!==null&&this.cb(de,"layers",this,null,t,null,o),this.N(),0>n&&this.Ya(),this},s.Ey=function(t,e){hm(this,t,e),t.Xe(this);var i=this.Wa,n=i.indexOf(t);0<=n&&(i.remove(t),this.ec!==null&&this.cb(Se,"layers",this,t,null,n,null));var r=i.count,o;for(o=0;o<r;o++)if(i.M(o)===e){i.Hb(o+1,t);break}return this.ec!==null&&this.cb(de,"layers",this,null,t,null,o+1),this.N(),0>n&&this.Ya(),this},s.oA=function(t){if(t.diagram!==this&&O("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),t.name!==""){var e=this.Wa,i=e.indexOf(t);if(e.remove(t)){for(e=t.Pa.copy().iterator;e.next();){var n=e.value,r=n.layerName;r!==t.name?n.layerName=r:n.layerName=""}this.ec!==null&&this.cb(Se,"layers",this,t,null,i,null),this.N(),this.Ya()}}},s.Pj=function(t){for(var e=this.layers;e.next();){var i=e.value;if(i.name===t)return i}return null},s.$w=function(t){return this.pf===null&&(this.pf=new q),this.pf.add(t),this.model.Pe(t),this},s.qA=function(t){this.pf!==null&&(this.pf.remove(t),this.pf.count===0&&(this.pf=null)),this.model.hk(t)},s.Pe=function(t){return this.zg===null&&(this.zg=new q),this.zg.add(t),this},s.hk=function(t){this.zg!==null&&(this.zg.remove(t),this.zg.count===0&&(this.zg=null))},s.ds=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Vu(t),t.change!==Wn&&(this.isModified=!0),this.zg!==null)for(var e=this.zg,i=e.length,n=0;n<i;n++)e.M(n)(t)},s.cb=function(t,e,i,n,r,o,l){o===void 0&&(o=null),l===void 0&&(l=null);var u=new Jt;u.diagram=this,u.change=t,u.propertyName=e,u.object=i,u.oldValue=n,u.oldParam=o,u.newValue=r,u.newParam=l,this.ds(u)},s.g=function(t,e,i,n,r){this.cb(Wt,t,this,e,i,n,r)},j.prototype.changeState=function(t,e){if(t!==null&&t.diagram===this){var i=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var n=t.change;if(n===Wt){var r=t.object;if(Xt(r,t.propertyName,t.I(e)),r instanceof it){var o=r.part;o!==null&&o.Zb()}this.isModified=!0}else if(n===de){var l=t.object,u=t.newParam,h=t.newValue;if(l instanceof z)if(typeof u=="number"&&h instanceof it){e?l.qc(u):l.Hb(u,h);var f=l.part;f!==null&&f.Zb()}else typeof u=="number"&&h instanceof ce&&(h.isRow?aS(l,u,e?void 0:h):fS(l,u,e?void 0:h));else if(l instanceof be){var c=t.oldParam===!0;typeof u=="number"&&h instanceof ot&&(e?(h.isSelected=!1,h.isHighlighted=!1,h.Zb(),l.qc(c?u:-1,h,c)):l.pi(u,h,c))}else l instanceof j?typeof u=="number"&&h instanceof be&&(e?this.Wa.mb(u):(h.Xe(this),this.Wa.Hb(u,h))):O("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(n===Se){var p=t.object,g=t.oldParam,m=t.oldValue;if(p instanceof z)typeof g=="number"&&m instanceof it?e?p.Hb(g,m):p.qc(g):typeof g=="number"&&m instanceof ce&&(m.isRow?aS(p,g,e?m:void 0):fS(p,g,e?m:void 0));else if(p instanceof be){var v=t.newParam===!0;typeof g=="number"&&m instanceof ot&&(e?0>p.Pa.indexOf(m)&&p.pi(g,m,v):(m.isSelected=!1,m.isHighlighted=!1,m.Zb(),p.qc(v?g:-1,m,v)))}else p instanceof j?typeof g=="number"&&m instanceof be&&(e?(m.Xe(this),this.Wa.Hb(g,m)):this.Wa.mb(g)):O("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else n!==Wn&&O("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=i}}},j.prototype.Ea=function(t){return this.undoManager.Ea(t)},j.prototype.eb=function(t){return this.undoManager.eb(t)},j.prototype.Kf=function(){return this.undoManager.Kf()},j.prototype.commit=function(t,e){e===void 0&&(e="");var i=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ea(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.eb(e):this.undoManager.Kf(),this.skipsUndoManager=i}},j.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},j.prototype.rp=function(){this.partManager.rp()};function kM(t,e,i){var n=t.animationManager;if(t.wb||t.ld)t.Ca=i,Zo(t),t.N(),t.Ee=!0,n.Ab&&(Ep(n)||n.ce.add(n.H,"scale",e,t.Ca));else if(t.ta===null)t.Ca=i,Zo(t);else{t.wb=!0;var r=t.viewportBounds.copy(),o=t.Aa,l=t.ya,u=t.zoomPoint.x,h=t.zoomPoint.y,f=t.contentAlignment;isNaN(u)&&(f.$c()?f.Hf(eh)?u=0:f.Hf(ih)&&(u=o-1):u=f.sb()?f.x*(o-1):o/2),isNaN(h)&&(f.$c()?f.Hf(th)?h=0:f.Hf(nh)&&(h=l-1):h=f.sb()?f.y*(l-1):l/2),t.scaleComputation===null||t.animationManager.defaultAnimation.isAnimating||(i=t.scaleComputation(t,i)),i<t.minScale&&(i=t.minScale),i>t.maxScale&&(i=t.maxScale),o=C.allocAt(t.pa.x+u/e-u/i,t.pa.y+h/e-h/i),t.position=o,C.free(o),t.Ca=i,Zo(t),t.wb=!1,t.onViewportBoundsChanged(r,t.viewportBounds,e,!1),hr(t,!1),n.Ab&&(Ep(n)||n.ce.add(n.H,"scale",e,t.Ca))}}j.prototype.onViewportBoundsChanged=function(t,e,i,n){if(!t.D(e)){n===void 0&&(n=!1),n||(this.Ee=!0),this.vd=!0;var r=this.layout;r===null||!r.isViewportSized||this.autoScale!==tn||t.width===e.width&&t.height===e.height||r.C(),r=this.currentTool,this.Uk===!0&&r instanceof qt&&(this.lastInput.documentPoint=this.Qs(this.lastInput.viewPoint),Yw(r,this)),this.wb||this.invalidateViewport(t,e),$o(this),this.hc.scale=i,this.hc.position.x=t.x,this.hc.position.y=t.y,this.hc.bounds.assign(t),this.hc.canvasSize.width=Math.round(t.width*i),this.hc.canvasSize.height=Math.round(t.height*i),this.hc.newCanvasSize.width=this.Aa,this.hc.newCanvasSize.height=this.ya,this.hc.isScroll=n,this.S("ViewportBoundsChanged",this.hc,t),this.isVirtualized&&this.links.each(function(o){o.isAvoiding&&o.actualBounds.Yc(e)&&o.bb()})}};function $o(t,e){var i=t.fe;if(i!==null&&i.visible){for(var n=ht.alloc(),r=1,o=1,l=i.O.s,u=l.length,h=0;h<u;h++){var f=l[h],c=Math.abs(f.interval);2>c||(Gm(f.figure)?o=o*c/A.xx(o,c):r=r*c/A.xx(r,c))}if(l=i.gridCellSize,n.h(o*l.width,r*l.height),e!==void 0)r=e.width,o=e.height,t=e.x,l=e.y;else{if(e=E.alloc(),t=t.viewportBounds,e.h(t.x,t.y,t.width,t.height),!e.w()){E.free(e);return}r=e.width,o=e.height,t=e.x,l=e.y,E.free(e)}i.width=r+2*n.width,i.height=o+2*n.height,e=C.alloc(),A.Oo(t,l,0,0,n.width,n.height,e),e.offset(-n.width,-n.height),ht.free(n),i.part.location=e,C.free(e)}}j.prototype.clearSelection=function(t){t===void 0&&(t=!1);var e=this.selection;if(e.count!==0){t||this.S("ChangingSelection",e);for(var i=e.Fa(),n=i.length,r=0;r<n;r++)i[r].isSelected=!1;e.ka(),e.clear(),e.freeze(),t||this.S("ChangedSelection",e)}},j.prototype.select=function(t){t!==null&&t.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.S("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.S("ChangedSelection",this.selection))},j.prototype.vA=function(t){if(this.S("ChangingSelection",this.selection),this.clearSelection(!0),Ht(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];n instanceof ot||O("Diagram.selectCollection given something that is not a Part: "+n),n.isSelected=!0}else for(t=t.iterator;t.next();)e=t.value,e instanceof ot||O("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.S("ChangedSelection",this.selection)},j.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.Fa(),i=e.length,n=0;n<i;n++)e[n].isHighlighted=!1;t.ka(),t.clear(),t.freeze()}},s=j.prototype,s.Nz=function(t){t!==null&&t.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},s.Oz=function(t){t=new _().addAll(t);for(var e=this.highlighteds.copy().hp(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)e=t.value,e instanceof ot||O("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},s.scroll=function(t,e,i){i===void 0&&(i=1);var n=e==="up"||e==="down",r=0,o=C.alloc();if(t==="pixel")r=i;else if(t==="line")r=i*(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if(t==="page")t=n?this.viewportBounds.height:this.viewportBounds.width,t*=this.scale,t!==0&&(r=i*Math.max(t-(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if(t==="document"){r=this.documentBounds,i=this.viewportBounds,e==="up"?this.position=o.h(i.x,r.y):e==="left"?this.position=o.h(r.x,i.y):e==="down"?this.position=o.h(i.x,r.bottom-i.height):e==="right"&&(this.position=o.h(r.right-i.width,i.y)),C.free(o);return}O("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}r/=this.scale,i=this.position,e==="up"?this.position=o.h(i.x,i.y-r):e==="down"?this.position=o.h(i.x,i.y+r):e==="left"?this.position=o.h(i.x-r,i.y):e==="right"?this.position=o.h(i.x+r,i.y):O("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),C.free(o)},s.vv=function(t){var e=this.viewportBounds;e.Re(t)||(t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t)},s.es=function(t){var e=this.viewportBounds;t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t},s.op=function(t){var e=this.Bb;e.reset(),this.Ca!==1&&e.scale(this.Ca);var i=this.pa;return(i.x!==0||i.y!==0)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),t.copy().transform(this.Bb)},s.DA=function(t){var e=this.Bb,i=t.x,n=t.y,r=i+t.width,o=n+t.height,l=e.m11,u=e.m12,h=e.m21,f=e.m22,c=e.dx,p=e.dy,g=i*l+n*h+c;e=i*u+n*f+p;var m=r*l+n*h+c;return t=r*u+n*f+p,n=i*l+o*h+c,i=i*u+o*f+p,l=r*l+o*h+c,r=r*u+o*f+p,o=Math.min(g,m),g=Math.max(g,m),m=Math.min(e,t),e=Math.max(e,t),o=Math.min(o,n),g=Math.max(g,n),m=Math.min(m,i),e=Math.max(e,i),o=Math.min(o,l),g=Math.max(g,l),m=Math.min(m,r),e=Math.max(e,r),new E(o,m,g-o,e-m)},s.Qs=function(t){var e=this.Bb;e.reset(),this.Ca!==1&&e.scale(this.Ca);var i=this.pa;return(i.x!==0||i.y!==0)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),pi(t.copy(),this.Bb)};function CM(t){var e=t.isModified;t.Vw!==e&&(t.Vw=e,t.S("Modified"))}function uT(t){return t=$p.get(t),t!==null?new t:new Ot}j.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var i=t.change,n=t.propertyName;if(i===Wn&&n[0]==="S")if(n==="StartingFirstTransaction"){var r=this;t=this.toolManager,t.mouseDownTools.each(function(h){return h.diagram=r}),t.mouseMoveTools.each(function(h){return h.diagram=r}),t.mouseUpTools.each(function(h){return h.diagram=r}),this.ld||this.hf||(this.Ik=!0,this.gn&&(this.kg=!0))}else n==="StartingUndo"||n==="StartingRedo"?(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Cc(),this.S("ChangingSelection",this.selection)):n==="StartedTransaction"&&(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Cc());else if(this.aa){this.aa=!1;try{if(t.modelChange===""&&i===Wn){(n==="FinishedUndo"||n==="FinishedRedo")&&(this.S("ChangedSelection",this.selection),yi(this));var o=this.animationManager;n==="RolledBackTransaction"&&o.Cc(),this.gx(),this.Ik=!0,this.bd(),this.undoManager.transactionLevel!==0&&this.undoManager.transactionLevel!==1||X0(o),n==="CommittedTransaction"&&this.undoManager.isJustDiscarded&&(this.Ce=Math.min(this.Ce,this.undoManager.historyIndex-1)),n!=="CommittedTransaction"&&n!=="RolledBackTransaction"||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var l=t.isTransactionFinished;if(l&&(CM(this),this.As.clear(),QN(this.animationManager)),!this.St&&l&&this.lastInput.targetDiagram){this.St=!0;var u=this;G(function(){u.currentTool.standardMouseOver(),u.St=!1},10)}}}finally{this.aa=!0}}}};function PM(t,e){e=e.O.s;for(var i=e.length,n=0;n<i;n++)am(t,e[n])}function am(t,e){if(e instanceof Ni){var i=e.element;if(i!==null&&i instanceof HTMLImageElement){i.Bg instanceof _&&i.Bg.add(t);var n=e.Eg;if(n!==null&&n.sq===!0&&e.diagram!==null&&e.diagram.Yn.add(e),i.jn)if(i=i.getAttribute("src")||"",n=t.Og.I(i),n===null)n=[],n.push(e),t.Og.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}}function fm(t,e){if(e instanceof Ni){var i=e.element;if(i!==null&&i instanceof HTMLImageElement&&i.jn){var n=i.getAttribute("src")||"",r=t.Og.I(n);if(r!==null){for(var o=0;o<r.length;o++)if(r[o]===e){r.splice(o,1),r.length===0&&(t.Og.remove(n),i.Fq&&i.removeEventListener("load",i.Fq),i.Yp&&i.removeEventListener("error",i.Yp),delete i.Fq,delete i.Yp,i.Bg instanceof _&&i.Bg.remove(t),Rh(n));break}}}}}j.prototype.Wd=function(){this.partManager.Wd()},j.prototype.Bj=function(t,e){this.Yd.Bj(t,e)},j.prototype.Dj=function(t,e){this.Yd.Dj(t,e)},j.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},j.prototype.Yb=function(t){return this.partManager.Yb(t)},j.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},s=j.prototype,s.Mc=function(t){return this.partManager.Mc(t)},s.ji=function(t){return this.partManager.ji(t)},s.Lc=function(t){return this.partManager.Lc(t)},s.ms=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.ms.apply(this.partManager,e instanceof Array?e:y(d(e)))},s.ls=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.ls.apply(this.partManager,e instanceof Array?e:y(d(e)))};function Zo(t){var e=t.pa,i=t.Ca;t.Tw.h(e.x,e.y,Math.max(t.Aa,0)/i,Math.max(t.ya,0)/i),t.vd=!0}function cm(t,e){t.$i=!1;var i=t.Sp;i.D(e)||(i=i.copy(),t.Sp.assign(e),hr(t,!1),t.S("DocumentBoundsChanged",void 0,i),t.Ee=!0,t.N())}s.Va=function(){if(this.$i){var t=E.alloc();cm(this,this.computeBounds(t)),E.free(t)}},s.xz=function(){for(var t=new _,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&t.add(i)}for(e=this.links;e.next();)i=e.value,i.isTopLevel&&t.add(i);return t.iterator},s.wz=function(){return this.ai.iterator},s.Zz=function(t){yi(this),t&&Wp(this,!0),this.ld?pm(this,!1):(this.Ik=!0,_o(this))};function Wp(t,e){for(var i=t.ai.iterator;i.next();)NM(t,i.value,e);t.layout&&(e?t.layout.isValidLayout=!1:t.layout.C())}function NM(t,e,i){if(e!==null){for(var n=e.fl.iterator;n.next();)NM(t,n.value,i);e.layout!==null&&(i?e.layout.isValidLayout=!1:e.layout.C())}}function pm(t,e){if(t.xh&&!t.mt){var i=t.aa;t.aa=!0;var n=t.undoManager.transactionLevel,r=t.layout,o=t.animationManager;try{n===0&&(t.undoManager.isInternalTransaction=!0,t.Ea("Layout")),1>=n&&!o.defaultAnimation.isAnimating&&!o.Ab&&(e||Ko(o,"Layout")),t.xh=!1;for(var l=t.ai.iterator;l.next();)TM(t,l.value,e,n);r.isValidLayout||(!e||r.isRealtime||r.isRealtime===null||n===0?(r.doLayout(t),yi(t),r.isValidLayout=!0):t.xh=!0)}finally{e=t.undoManager.isInternalTransaction,n===0&&(t.eb("Layout"),t.undoManager.isInternalTransaction=!1),!e||n!==0&&n!==1||X0(o),t.aa=i}}}function TM(t,e,i,n){if(e!==null){for(var r=e.fl.iterator;r.next();)TM(t,r.value,i,n);r=e.layout,r===null||r.isValidLayout||(!i||r.isRealtime||n===0?(e.rh=!e.location.w(),r.doLayout(e),e.C(32),nm(t,e),r.isValidLayout=!0):t.xh=!0)}}s.Dz=function(){for(var t=new q,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&i.kh()===null&&t.add(i)}return t.iterator};function hT(t){function e(r){var o=r.toLowerCase(),l=new q;i.add(r,l),i.add(o,l),n.add(r,r),n.add(o,r)}var i=new ct,n=new ct;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.kw=i,t.jw=n}function LM(t,e){var i=t.jw.I(e);return i!==null?i:t.jw.I(e.toLowerCase())}function dm(t,e){var i=t.kw.I(e);if(i!==null||(i=t.kw.I(e.toLowerCase()),i!==null))return i;O("Unknown DiagramEvent name: "+e)}s.Cj=function(t,e){return t=dm(this,t),t!==null&&t.add(e),this},s.bm=function(t,e){t=dm(this,t),t!==null&&t.remove(e)},s.S=function(t,e,i){var n=dm(this,t),r=new bl;if(r.diagram=this,t=LM(this,t),t!==null&&(r.name=t),e!==void 0&&(r.subject=e),i!==void 0&&(r.parameter=i),e=n.length,e===1)n.M(0)(r);else if(e!==0)for(n=n.Fa(),i=0;i<e;i++)(0,n[i])(r)};function FM(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e===t.toolManager.findTool("Dragging")?!t.Mr||e.isComplexRoutingRealtime:!0}s.Xj=function(t,e){return gm(this,!1,null,e||null).Xj(t.x,t.y,t.width,t.height)},j.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.$i?xM(this,t):t.assign(this.documentBounds)};function gm(t,e,i,n){var r=t.Xh;if(r===null&&(t.Xh=r=new Uf(t.avoidanceCellSize)),r.vs||r.group!==i||r.$x!==n){if(r.Jx=Math.max(r.Ps+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.width)),r.Kx=Math.max(r.Ps+1,Math.floor(t.avoidanceLimit/t.avoidanceCellSize.height)),i!==null&&(i=AM(t,i)),i===null){e=E.alloc(),t.computeOccupiedArea(e),e.Bc(100,100),r.initialize(e);for(var o=t.nodes;o.next();){var l=o.value,u=l.layer;u!==null&&u.visible&&!u.isTemporary&&ym(t,l,n,e)}E.free(e)}else{for(0<i.memberParts.count&&(e=t.computePartsBounds(i.memberParts,!1),e.Bc(20,20),r.initialize(e)),e=E.alloc(),o=i.memberParts;o.next();)l=o.value,l instanceof W&&ym(t,l,n,e);E.free(e)}r.group=i,r.$x=n,r.vs=!1}else e&&o2(r);return r}function AM(t,e){return e.avoidable&&!e.isLinkLabel?e:e.containingGroup!==null?AM(t,e.containingGroup):null}function ym(t,e,i,n){if(e!==i&&e.isVisible()){var r=e.avoidable&&!e.isLinkLabel;if(r){var o=e.getAvoidableRect(n),l=t.Xh,u=o.x,h=o.y;if($h(l,u,h)){var f=(h-l.Od)/l.tc|0,c=Math.min((u+o.width-l.Nd)/l.sc|0,l.di);for(o=Math.min((h+o.height-l.Od)/l.tc|0,l.ei),u=(u-l.Nd)/l.sc|0;u<=c;u++)if(h=l.cc[u],h.fill)h.fill(ns,f,o+1);else for(var p=f;p<=o;p++)h[p]=ns}}if(e instanceof dt&&(!r||e.avoidableMembers))for(e=e.memberParts;e.next();)r=e.value,r instanceof W&&ym(t,r,i,n)}}function mm(t,e){t.Xh===null||t.Xh.vs||e!==void 0&&(!e.avoidable||e.isLinkLabel)||(t.Xh.vs=!0)}j.prototype.gs=function(t){this.wp.assign(t),this.computeAutoScrollPosition(this.wp).Xa(this.position)?this.ug():jM(this)};function jM(t){t.uk===-1&&(t.uk=G(function(){if(t.uk!==-1&&(t.ug(),t.lastInput.event!==null)){var e=t.computeAutoScrollPosition(t.wp);e.Xa(t.position)||(t.position=e,t.lastInput.documentPoint=t.Qs(t.wp),t.doMouseMove(),t.$i=!0,e=E.alloc(),t.computeBounds(e),e.ed(t.documentBounds),cm(t,e),E.free(e),t.Fc=!0,t.bd(),jM(t))}},t.vp))}j.prototype.ug=function(){this.uk!==-1&&($.clearTimeout(this.uk),this.uk=-1)},j.prototype.computeAutoScrollPosition=function(t){var e=this.position,i=this.xp;if(0>=i.top&&0>=i.left&&0>=i.right&&0>=i.bottom)return e;var n=this.viewportBounds,r=this.scale;n=E.allocAt(0,0,n.width*r,n.height*r);var o=C.allocAt(0,0);if(t.x>=n.x&&t.x<n.x+i.left&&this.allowHorizontalScroll){var l=Math.max(this.scrollHorizontalLineChange,1);l|=0,o.x-=l,t.x<n.x+i.left/2&&(o.x-=l),t.x<n.x+i.left/4&&(o.x-=4*l)}else t.x<=n.x+n.width&&t.x>n.x+n.width-i.right&&this.allowHorizontalScroll&&(l=Math.max(this.scrollHorizontalLineChange,1),l|=0,o.x+=l,t.x>n.x+n.width-i.right/2&&(o.x+=l),t.x>n.x+n.width-i.right/4&&(o.x+=4*l));return t.y>=n.y&&t.y<n.y+i.top&&this.allowVerticalScroll?(l=Math.max(this.scrollVerticalLineChange,1),l|=0,o.y-=l,t.y<n.y+i.top/2&&(o.y-=l),t.y<n.y+i.top/4&&(o.y-=4*l)):t.y<=n.y+n.height&&t.y>n.y+n.height-i.bottom&&this.allowVerticalScroll&&(l=Math.max(this.scrollVerticalLineChange,1),l|=0,o.y+=l,t.y>n.y+n.height-i.bottom/2&&(o.y+=l),t.y>n.y+n.height-i.bottom/4&&(o.y+=4*l)),o.Xa(co)||(e=new C(e.x+o.x/r,e.y+o.y/r)),E.free(n),C.free(o),e},s=j.prototype,s.Cs=function(){return null},s.cv=function(){return null},s.bs=function(t,e){this.qj.add(t,e)},s.Hu=function(t){(this.Rw=t)||this.nodes.each(function(e){e instanceof dt&&(e.$p=null)})};function DM(t,e,i){function n(){var c=+new Date;for(o=!0,l.reset();l.next();)if(!l.value[0].$k){o=!1;break}o||c-f>h?e(i,r,u):$.requestAnimationFrame(n)}for(var r=i.callback,o=!0,l=t.Og.iterator;l.next();)if(!l.value[0].$k){o=!1;break}if(typeof r!="function"||o)return e(i,r,t);var u=t,h=i.callbackTimeout||300,f=+new Date;return $.requestAnimationFrame(function(){n()}),null}s.aA=function(t){return $n?(t===void 0&&(t={}),t.returnType="Image",this.Lx(t)):null},s.Lx=function(t){return t===void 0&&(t={}),DM(this,this.bA,t)},s.bA=function(t,e,i){var n=OM(i,t,"canvas",null);if(n===null)return null;i=n.Z.canvas;var r=null;if(i!==null)switch(r=t.returnType,r===void 0?r="string":r=r.toLowerCase(),r){case vh+"data":r=n.getImageData(0,0,i.width,i.height);break;case vh:n=(t.document||document).createElement("img"),n.src=i.toDataURL(t.type,t.details),r=n;break;case"blob":return typeof e!="function"&&O('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),typeof i.toBlob=="function"?(i.toBlob(e,t.type,t.details),"toBlob"):(e(null),null);default:r=i.toDataURL(t.type,t.details)}return typeof e=="function"?(e(r),null):r};function OM(t,e,i,n){if(t.animationManager.Cc(),t.bd(),t.ta===null)return null;typeof e!="object"&&O("properties argument must be an Object.");var r=e.size||null,o=e.scale||null;e.scale!==void 0&&isNaN(e.scale)&&(o="NaN");var l=e.maxSize;e.maxSize===void 0&&(l=i==="SVG"?new ht(1/0,1/0):new ht(2e3,2e3));var u=e.position||null,h=e.parts||null,f=e.padding===void 0?1:e.padding,c=e.background||null,p=e.omitTemporary;p===void 0&&(p=!0);var g=e.document||document,m=e.elementFinished||null,v=e.showTemporary;v===void 0&&(v=!p),e=e.showGrid,e===void 0&&(e=v),r!==null&&isNaN(r.width)&&isNaN(r.height)&&(r=null),typeof f=="number"?f=new Dt(f):f instanceof Dt||O("MakeImage padding must be a Margin or a number."),f.left=Math.max(f.left,0),f.right=Math.max(f.right,0),f.top=Math.max(f.top,0),f.bottom=Math.max(f.bottom,0),t.ib.Vc(!0),p=new An(null,g,void 0,!0);var x=p.context;if(!(r||o||h||u))return p.width=t.Aa+Math.ceil(f.left+f.right),p.height=t.ya+Math.ceil(f.top+f.bottom),i==="SVG"?n===null?null:(n.resize(p.width,p.height,p.width,p.height),n.ownerDocument=g,n.hs=m,Xp(t,n.context,f,new ht(p.width,p.height),t.Ca,t.pa,h,c,v,e),n.context):(t.Ym=!1,Xp(t,x,f,new ht(p.width,p.height),t.Ca,t.pa,h,c,v,e),t.Ym=!0,p.context);var k=t.Pp,S=t.documentBounds.copy();if(S.Hv(t.zb),v)for(var P=t.Wa.s,N=P.length,T=0;T<N;T++){var F=P[T];if(F.visible&&F.isTemporary){F=F.Pa.s;for(var D=F.length,X=0;X<D;X++){var tt=F[X];tt.isInDocumentBounds&&tt.isVisible()&&(tt=tt.actualBounds,tt.w()&&S.ed(tt))}}}if(P=new C(S.x,S.y),h!==null){for(N=new E(0,0,0,0),T=!0,F=h.iterator,F.reset();F.next();)D=F.value,D instanceof ot&&(X=D.layer,X!==null&&!X.visible||X!==null&&!v&&X.isTemporary||!D.isVisible()||(D=D.actualBounds,D.w()&&(T?(T=!1,N.assign(D)):N.ed(D))));S.width=N.width,S.height=N.height,P.x=N.x,P.y=N.y}return u!==null&&u.w()&&(P=u,o||(o=k)),N=u=0,f!==null&&(u=f.left+f.right,N=f.top+f.bottom),T=F=0,r!==null&&(F=r.width,T=r.height,isFinite(F)&&(F=Math.max(0,F-u)),isFinite(T)&&(T=Math.max(0,T-N))),r!==null&&o!==null?(o==="NaN"&&(o=k),r.w()?(r=F,S=T):isNaN(T)?(r=F,S=S.height*o):(r=S.width*o,S=T)):r!==null?r.w()?(o=Math.min(F/S.width,T/S.height),r=F,S=T):isNaN(T)?(o=F/S.width,r=F,S=S.height*o):(o=T/S.height,r=S.width*o,S=T):o!==null?o==="NaN"&&l.w()?(o=Math.min((l.width-u)/S.width,(l.height-N)/S.height),o>k?(o=k,r=S.width,S=S.height):(r=l.width,S=l.height)):(r=S.width*o,S=S.height*o):(o=k,r=S.width,S=S.height),f!==null?(r+=u,S+=N):f=new Dt(0),l!==null&&(k=l.width,l=l.height,isNaN(k)&&(k=2e3),isNaN(l)&&(l=2e3),isFinite(k)&&(r=Math.min(r,k)),isFinite(l)&&(S=Math.min(S,l))),p.width=Math.ceil(r),p.height=Math.ceil(S),i==="SVG"?n===null?null:(n.resize(p.width,p.height,p.width,p.height),n.ownerDocument=g,n.hs=m,Xp(t,n.context,f,new ht(Math.ceil(r),Math.ceil(S)),o,P,h,c,v,e),n.context):(t.Ym=!1,Xp(t,x,f,new ht(Math.ceil(r),Math.ceil(S)),o,P,h,c,v,e),t.Ym=!0,p.context)}Y.Object.defineProperties(j.prototype,{renderer:{get:function(){return this.nl},set:function(t){this instanceof Kr||(t===""&&(t="default"),t=t.toLowerCase(),t!==this.nl&&(this.nl=t,t==="default"||t==="canvas"?(t=this.qj.get("svg"),t!==null&&t.Oa.remove(),this.ta&&(this.ib=this.ta.context)):t==="svg"?(this.qj.contains("svg")?t=this.qj.get("svg"):(t=new Sr(this,$.document),this.bs("svg",t)),this.div!==null&&this.div.appendChild(t.Oa),this.ib=t.context,this.ta&&(this.ta.context.setTransform(this.Nb,0,0,this.Nb,0,0),this.ta.context.clearRect(0,0,this.Aa,this.ya))):t!=="debug"||this.qj.contains("SVG")||(t=new Sr(this,$.document),this.bs("SVG",t),t.Oa.style.backgroundColor="whitesmoke",this.div!==null&&this.div.after(t.Oa)),this.gk()))}},div:{get:function(){return this.Ka},set:function(t){if(this.Ka!==t){var e=this.Ka;e!==null?(e.H=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",this.ta!==null&&(e=this.ta.Oa,this.removeEventListener(e,"pointermove",this.ck,!1),this.removeEventListener(e,"pointerdown",this.vi,!1),this.removeEventListener(e,"pointerup",this.ek,!1),this.removeEventListener(e,"pointerout",this.dk,!1),this.removeEventListener(e,"pointercancel",this.bk,!1),this.ta.ox()),this.ol&&(this.ol.disconnect(),this.ol=null),e=this.toolManager,e!==null&&(e.mouseDownTools.each(function(i){i.cancelWaitAfter()}),e.mouseMoveTools.each(function(i){i.cancelWaitAfter()}),e.mouseUpTools.each(function(i){i.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.ta=null,this.removeEventListener($,"resize",this.Qv,!1),this.removeEventListener($,"wheel",this.Zj,!0),dh===this&&(dh=null)):this.vi===null&&(this.hf=!1),this.Ka=null,t!==null&&((e=t.H)&&(e.div=null),J0(this,t),this.gk())}}},bx:{get:function(){return this.Sq}},ri:{get:function(){return this.hf}},draggedLink:{get:function(){return this.ot},set:function(t){this.ot!==t&&(this.ot=t,t!==null&&(this.Wt=t.fromPort,this.Xt=t.toPort))}},Ox:{get:function(){return this.Wt},set:function(t){this.Wt=t}},Px:{get:function(){return this.Xt},set:function(t){this.Xt=t}},animationManager:{get:function(){return this.Yd}},undoManager:{get:function(){return this.ec.undoManager}},skipsUndoManager:{get:function(){return this.Wg},set:function(t){this.Wg=t,this.ec.skipsUndoManager=t}},delaysLayout:{get:function(){return this.mt},set:function(t){this.mt=t}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&at(t,"0 <= value <= 1",j,"opacity"),this.pb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.xu},set:function(t){var e=this.xu;e!==t&&(this.xu=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Wa.iterator}},isModelReadOnly:{get:function(){var t=this.ec;return t===null?!1:t.isReadOnly},set:function(t){var e=this.ec;e!==null&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.Gg},set:function(t){var e=this.Gg;e!==t&&(this.Gg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.Jd},set:function(t){var e=this.Jd;e!==t&&(this.Jd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.Vs},set:function(t){var e=this.Vs;e!==t&&(this.Vs=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.Ws},set:function(t){var e=this.Ws;e!==t&&(this.Ws=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.Xs},set:function(t){var e=this.Xs;e!==t&&(this.Xs=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Qi},set:function(t){var e=this.Qi;e!==t&&(this.Qi=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Ri},set:function(t){var e=this.Ri;e!==t&&(this.Ri=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(this.Zs=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(this.Li=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Ki},set:function(t){var e=this.Ki;e!==t&&(this.Ki=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(this.Mi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Ni},set:function(t){var e=this.Ni;e!==t&&(this.Ni=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Oi},set:function(t){var e=this.Oi;e!==t&&(this.Oi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Pi},set:function(t){var e=this.Pi;e!==t&&(this.Pi=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.$s},set:function(t){var e=this.$s;e!==t&&(this.$s=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.bt},set:function(t){var e=this.bt;e!==t&&(this.bt=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.on},set:function(t){var e=this.on;e!==t&&(this.on=t,this.Ee=!0,this.N(),this.g("hasVerticalScrollbar",e,t),hr(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.nn},set:function(t){var e=this.nn;e!==t&&(this.nn=t,this.Ee=!0,this.N(),this.g("hasHorizontalScrollbar",e,t),hr(this,!1))}},allowHorizontalScroll:{get:function(){return this.Ys},set:function(t){var e=this.Ys;e!==t&&(this.Ys=t,this.g("allowHorizontalScroll",e,t),hr(this,!1))}},allowVerticalScroll:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(this.at=t,this.g("allowVerticalScroll",e,t),hr(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.ju},set:function(t){var e=this.ju;e!==t&&(0>t&&at(t,">= 0",j,"scrollHorizontalLineChange"),this.ju=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.nu},set:function(t){var e=this.nu;e!==t&&(0>t&&at(t,">= 0",j,"scrollVerticalLineChange"),this.nu=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.dj},set:function(t){this.dj=t}},previousInput:{get:function(){return this.Qg},set:function(t){this.Qg=t}},firstInput:{get:function(){return this.bq},set:function(t){this.bq=t}},currentCursor:{get:function(){return this.jt},set:function(t){if(t===""&&(t=this.Op),this.jt!==t){var e=this.ta,i=this.Ka;if(e!==null&&i!==null){this.jt=t;var n=e.style.cursor;e.style.cursor=t,i.style.cursor=t,e.style.cursor===n&&(e.style.cursor="-webkit-"+t,i.style.cursor="-webkit-"+t,e.style.cursor===n&&(e.style.cursor="-moz-"+t,i.style.cursor="-moz-"+t,e.style.cursor===n&&(e.style.cursor=t,i.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.Op},set:function(t){t===""&&(t="auto");var e=this.Op;e!==t&&(this.Op=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.zh},set:function(t){var e=this.zh;e!==t&&(this.zh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Fh},set:function(t){var e=this.Fh;e!==t&&(this.Fh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Bh},set:function(t){var e=this.Bh;e!==t&&(this.Bh=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Qh},set:function(t){var e=this.Qh;e!==t&&(this.Qh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Oh},set:function(t){var e=this.Oh;e!==t&&(this.Oh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Nh},set:function(t){var e=this.Nh;e!==t&&(this.Nh=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.Rt},set:function(t){var e=this.Rt;e!==t&&(this.Rt=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Lh},set:function(t){var e=this.Lh;e!==t&&(this.Lh=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.yt},set:function(t){var e=this.yt;e!==t&&(this.yt=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(this.Mh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Ph},set:function(t){var e=this.Ph;e!==t&&(this.Ph=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Ch},set:function(t){var e=this.Ch;e!==t&&(this.Ch=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.nb},set:function(t){this.nb!==t&&(this.nb=t,t.Xe(this))}},toolManager:{get:function(){return this.te},set:function(t){this.te!==t&&(this.te=t,t.diagram=this)}},defaultTool:{get:function(){return this.ob},set:function(t){var e=this.ob;e!==t&&(this.ob=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.hb},set:function(t){var e=this.hb;e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),t===null&&(t=this.defaultTool),t!==null&&(this.hb=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.Jw}},maxSelectionCount:{get:function(){return this.Ot},set:function(t){var e=this.Ot;if(e!==t)if(0<=t&&!isNaN(t)){if(this.Ot=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&(t=this.selection.count-t,0<t)){this.S("ChangingSelection",this.selection),e=this.selection.Fa();for(var i=0;i<t;i++)e[i].isSelected=!1;this.S("ChangedSelection",this.selection)}}else at(t,">= 0",j,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.Tt},set:function(t){var e=this.Tt;e!==t&&(this.Tt=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.xt},set:function(t){var e=this.xt;e!==t&&(this.xt=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.Lt},set:function(t){var e=this.Lt;e!==t&&(this.Lt=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.pw}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?t.currentTransaction!==null?!0:this.sn&&this.Ce!==t.historyIndex:this.sn},set:function(t){if(this.sn!==t){this.sn=t;var e=this.undoManager;!t&&e.isEnabled&&(this.Ce=e.historyIndex),t||CM(this)}}},model:{get:function(){return this.ec},set:function(t){var e=this.ec;if(e!==t){this.currentTool.doCancel(),e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&O("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.Cc(!0);var i=gM(this,!0);this.hf=!1,this.gn=!0,this.Ce=-2,this.kg=!1;var n=this.wb;this.wb=!0,Ko(this.animationManager,"Model"),e&&(this.pf!==null&&this.pf.each(function(o){return e.hk(o)}),e.hk(this.Pc)),this.ec=t,this.partManager=uT(this.ec.type);for(var r=0;r<i.length;r++)this.add(i[r]);t.Pe(this.Ib),this.partManager.addAllModeledParts(),t.hk(this.Ib),t.Pe(this.Pc),this.pf!==null&&this.pf.each(function(o){return t.Pe(o)}),this.wb=n,this.Ya(),this.wb||this.N(),e&&t.undoManager.copyProperties(e.undoManager)}}},aa:{get:function(){return this.tw},set:function(t){this.tw=t}},As:{get:function(){return this.uy}},skipsModelSourceBindings:{get:function(){return this.Kw},set:function(t){this.Kw=t}},Os:{get:function(){return this.pu},set:function(t){this.pu=t}},nodeTemplate:{get:function(){return this.Lg.I("")},set:function(t){var e=this.Lg.I("");e!==t&&(this.Lg.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},nodeTemplateMap:{get:function(){return this.Lg},set:function(t){var e=this.Lg;e!==t&&(this.Lg=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},groupTemplate:{get:function(){return this.Zi.I("")},set:function(t){var e=this.Zi.I("");e!==t&&(this.Zi.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},groupTemplateMap:{get:function(){return this.Zi},set:function(t){var e=this.Zi;e!==t&&(this.Zi=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},linkTemplate:{get:function(){return this.Kh.I("")},set:function(t){var e=this.Kh.I("");e!==t&&(this.Kh.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},linkTemplateMap:{get:function(){return this.Kh},set:function(t){var e=this.Kh;e!==t&&(this.Kh=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Wd())}},isMouseCaptured:{get:function(){return this.sw},set:function(t){var e=this.ta;e!==null&&(e=e.Oa,e instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.ck,!1),this.removeEventListener(e,"pointerdown",this.vi,!1),this.removeEventListener(e,"pointerup",this.ek,!1),this.removeEventListener(e,"pointerout",this.dk,!1),this.removeEventListener(e,"pointercancel",this.bk,!1),this.addEventListener($,"pointermove",this.ck,!0),this.addEventListener($,"pointerdown",this.vi,!0),this.addEventListener($,"pointerup",this.ek,!0),this.addEventListener($,"pointerout",this.dk,!0),this.addEventListener($,"pointercancel",this.bk,!0),this.removeEventListener(e,"wheel",this.Zj,!1),this.addEventListener($,"wheel",this.Zj,!0),this.addEventListener($,"selectstart",this.preventDefault,!1)):(this.removeEventListener($,"pointermove",this.ck,!0),this.removeEventListener($,"pointerdown",this.vi,!0),this.removeEventListener($,"pointerup",this.ek,!0),this.removeEventListener($,"pointerout",this.dk,!0),this.removeEventListener($,"pointercancel",this.bk,!0),this.addEventListener(e,"pointermove",this.ck,!1),this.addEventListener(e,"pointerdown",this.vi,!1),this.addEventListener(e,"pointerup",this.ek,!1),this.addEventListener(e,"pointerout",this.dk,!1),this.addEventListener(e,"pointercancel",this.bk,!1),this.removeEventListener($,"wheel",this.Zj,!0),this.removeEventListener($,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Zj,!1)),this.sw=t))}},position:{get:function(){return this.pa},set:function(t){var e=C.alloc().assign(this.pa);if(!e.D(t)){var i=this.viewportBounds.copy();this.pa.assign(t),oM(this.animationManager,e,this.pa),this.wb||this.ta===null&&!this.xo.w()?Zo(this):(this.wb=!0,t=this.scale,b0(this,this.Sp,this.Aa/t,this.ya/t,this.yk,!1),this.wb=!1),this.wb||this.onViewportBoundsChanged(i,this.viewportBounds,this.Ca,!1)}C.free(e)}},initialPosition:{get:function(){return this.At},set:function(t){this.At.D(t)||(this.At=t.J())}},initialScale:{get:function(){return this.Bt},set:function(t){this.Bt!==t&&(this.Bt=t)}},grid:{get:function(){return this.fe===null&&(this.fe=vM(this)),this.fe},set:function(t){var e=this.fe;if(e!==t){e===null&&(e=this.fe=vM(this)),t.type!==z.Grid&&O("Diagram.grid must be a Panel of type Panel.Grid");var i=e.panel;i!==null&&i.remove(e),this.fe=t,t.name="GRID",i!==null&&i.add(t),$o(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.Tw}},viewSize:{get:function(){return this.xo},set:function(t){var e=this.viewSize;e.D(t)||(this.xo=t=t.J(),this.ya=this.Aa=0,t.w()?(this.Aa=t.width,this.ya=t.height):this.Ka!==null&&(this.Aa=this.Ka.clientWidth||1,this.ya=this.Ka.clientHeight||1),Zo(this),this.Ya(),this.g("viewSize",e,t),this.N())}},fixedBounds:{get:function(){return this.vt},set:function(t){var e=this.vt;e.D(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||O("fixedBounds width/height must not be Infinity"),this.vt=t=t.J(),this.Ya(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.sj},set:function(t){typeof t=="number"&&(t=new Dt(t));var e=this.sj;e.D(t)||(this.sj=t=t.J(),this.g("scrollMargin",e,t),this.gk())}},scrollMode:{get:function(){return this.tj},set:function(t){var e=this.tj;e!==t&&(this.tj=t,t===Ss&&hr(this,!1),this.g("scrollMode",e,t),this.Ee=!0,this.N())}},scrollsPageOnFocus:{get:function(){return this.ou},set:function(t){var e=this.ou;e!==t&&(this.ou=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.$t},set:function(t){var e=this.$t;e!==t&&(this.$t=t,hr(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.gu},set:function(t){var e=this.gu;e!==t&&(this.gu=t,kM(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.Sp}},isVirtualized:{get:function(){return this.Jt},set:function(t){var e=this.Jt;e!==t&&(this.Jt=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.Ca},set:function(t){var e=this.Ca;e!==t&&kM(this,e,t)}},defaultScale:{get:function(){return this.Pp},set:function(t){this.Pp=t}},autoScale:{get:function(){return this.yh},set:function(t){var e=this.yh;e!==t&&(this.yh=t,this.g("autoScale",e,t),t!==tn&&hr(this,!1))}},initialAutoScale:{get:function(){return this.Fg},set:function(t){var e=this.Fg;e!==t&&(this.Fg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.Ct},set:function(t){var e=this.Ct;e!==t&&(t.sb()||O("initialViewportSpot must be a specific Spot: "+t),this.Ct=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.zt},set:function(t){var e=this.zt;e!==t&&(t.sb()||O("initialViewportSpot must be a specific Spot: "+t),this.zt=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.Pt},set:function(t){var e=this.Pt;e!==t&&(0<t?(this.Pt=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):at(t,"> 0",j,"minScale"))}},maxScale:{get:function(){return this.Nt},set:function(t){var e=this.Nt;e!==t&&(0<t?(this.Nt=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):at(t,"> 0",j,"maxScale"))}},zoomPoint:{get:function(){return this.Au},set:function(t){this.Au.D(t)||(this.Au=t=t.J())}},contentAlignment:{get:function(){return this.yk},set:function(t){var e=this.yk;e.D(t)||(this.yk=t=t.J(),this.g("contentAlignment",e,t),hr(this,!1))}},initialContentAlignment:{get:function(){return this.pq},set:function(t){var e=this.pq;e.D(t)||(this.pq=t=t.J(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.zb},set:function(t){typeof t=="number"&&(t=new Dt(t));var e=this.zb;e.D(t)||(this.zb=t=t.J(),this.Ya(),this.g("padding",e,t))}},partManager:{get:function(){return this.Qc},set:function(t){var e=this.Qc;e!==t&&(t.diagram!==null&&O("Cannot share PartManagers between Diagrams: "+t.toString()),e&&e.Xe(null),this.Qc=t,t.Xe(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.Tc},set:function(t){var e=this.Tc;e!==t&&(this.Tc=t,t.diagram=this,t.group=null,this.xh=!0,this.g("layout",e,t),this.Rb())}},isTreePathToChildren:{get:function(){return this.It},set:function(t){var e=this.It;if(e!==t&&(this.It=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)jf(t.value)}},treeCollapsePolicy:{get:function(){return this.vu},set:function(t){var e=this.vu;e!==t&&(t!==ol&&t!==Jp&&t!==qp&&O("Unknown Diagram.treeCollapsePolicy: "+t),this.vu=t,this.g("treeCollapsePolicy",e,t))}},Ue:{get:function(){return this.rw},set:function(t){this.rw=t}},avoidanceCellSize:{get:function(){return this.cw},set:function(t){this.Xh=null,this.cw=new ht(Math.max(1,t.width),Math.max(1,t.height))}},avoidanceLimit:{get:function(){return this.dw},set:function(t){this.dw=Math.max(1,t)}},autoScrollInterval:{get:function(){return this.vp},set:function(t){var e=this.vp;e!==t&&(this.vp=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.xp},set:function(t){typeof t=="number"&&(t=new Dt(t));var e=this.xp;e.D(t)||(this.xp=t=t.J(),this.Ya(),this.g("autoScrollRegion",e,t))}}}),Y.Object.defineProperties(j,{licenseKey:{get:function(){return Sm.lc()},set:function(t){Sm.add(t.replace(/\s/g,""))}},version:{get:function(){return aT}}}),j.prototype.makeImageData=j.prototype.Lx,j.prototype.makeImage=j.prototype.aA,j.prototype.cacheGroupExternalLinks=j.prototype.Hu,j.prototype.addRenderer=j.prototype.bs,j.prototype.makeSVG=j.prototype.cv,j.prototype.makeSvg=j.prototype.Cs,j.prototype.stopAutoScroll=j.prototype.ug,j.prototype.doAutoScroll=j.prototype.gs,j.prototype.isUnoccupied=j.prototype.Xj,j.prototype.raiseDiagramEvent=j.prototype.S,j.prototype.removeDiagramListener=j.prototype.bm,j.prototype.addDiagramListener=j.prototype.Cj,j.prototype.findTreeRoots=j.prototype.Dz,j.prototype.layoutDiagram=j.prototype.Zz,j.prototype.findTopLevelGroups=j.prototype.wz,j.prototype.findTopLevelNodesAndLinks=j.prototype.xz,j.prototype.ensureBounds=j.prototype.Va,j.prototype.findLinksByExample=j.prototype.ls,j.prototype.findNodesByExample=j.prototype.ms,j.prototype.findLinkForData=j.prototype.Lc,j.prototype.findNodeForData=j.prototype.ji,j.prototype.findPartForData=j.prototype.Mc,j.prototype.findLinkForKey=j.prototype.findLinkForKey,j.prototype.findNodeForKey=j.prototype.Yb,j.prototype.findPartForKey=j.prototype.findPartForKey,j.prototype.rebuildParts=j.prototype.Wd,j.prototype.transformViewToDoc=j.prototype.Qs,j.prototype.transformRectDocToView=j.prototype.DA,j.prototype.transformDocToView=j.prototype.op,j.prototype.centerRect=j.prototype.es,j.prototype.scrollToRect=j.prototype.vv,j.prototype.scroll=j.prototype.scroll,j.prototype.highlightCollection=j.prototype.Oz,j.prototype.highlight=j.prototype.Nz,j.prototype.selectCollection=j.prototype.vA,j.prototype.select=j.prototype.select,j.prototype.updateAllRelationshipsFromData=j.prototype.rp,j.prototype.updateAllTargetBindings=j.prototype.updateAllTargetBindings,j.prototype.commit=j.prototype.commit,j.prototype.rollbackTransaction=j.prototype.Kf,j.prototype.commitTransaction=j.prototype.eb,j.prototype.startTransaction=j.prototype.Ea,j.prototype.raiseChanged=j.prototype.g,j.prototype.raiseChangedEvent=j.prototype.cb,j.prototype.removeChangedListener=j.prototype.hk,j.prototype.addChangedListener=j.prototype.Pe,j.prototype.removeModelChangedListener=j.prototype.qA,j.prototype.addModelChangedListener=j.prototype.$w,j.prototype.findLayer=j.prototype.Pj,j.prototype.removeLayer=j.prototype.oA,j.prototype.addLayerAfter=j.prototype.Ey,j.prototype.addLayerBefore=j.prototype.Yw,j.prototype.addLayer=j.prototype.Al,j.prototype.moveParts=j.prototype.moveParts,j.prototype.copyParts=j.prototype.Kj,j.prototype.removeParts=j.prototype.Js,j.prototype.remove=j.prototype.remove,j.prototype.add=j.prototype.add,j.prototype.clearDelayedGeometries=j.prototype.gx,j.prototype.setProperties=j.prototype.om,j.prototype.attach=j.prototype.Fu,j.prototype.set=j.prototype.set,j.prototype.resetInputOptions=j.prototype.Ux,j.prototype.setInputOption=j.prototype.wA,j.prototype.getInputOption=j.prototype.Ql,j.prototype.resetRenderingHints=j.prototype.Vx,j.prototype.setRenderingHint=j.prototype.Zx,j.prototype.getRenderingHint=j.prototype.Gf,j.prototype.maybeUpdate=j.prototype.bd,j.prototype.requestUpdate=j.prototype.Rb,j.prototype.delayInitialization=j.prototype.bz,j.prototype.isUpdateRequested=j.prototype.Uz,j.prototype.invalidateDocumentBounds=j.prototype.Ya,j.prototype.findObjectsNear=j.prototype.og,j.prototype.findPartsNear=j.prototype.rz,j.prototype.findObjectsIn=j.prototype.Cf,j.prototype.findPartsIn=j.prototype.wx,j.prototype.findObjectsAt=j.prototype.ki,j.prototype.findPartsAt=j.prototype.qz,j.prototype.findObjectAt=j.prototype.kc,j.prototype.findPartAt=j.prototype.Ol,j.prototype.focusObject=j.prototype.Ez,j.prototype.alignDocument=j.prototype.Ly,j.prototype.zoomToRect=j.prototype.FA,j.prototype.zoomToFit=j.prototype.zoomToFit,j.prototype.diagramScroll=j.prototype.mx,j.prototype.focus=j.prototype.focus;var $p=new ct,IM=null,$n=$.document!==void 0,mh=null,yf="",tn=new K(j,"None",0),lu=new K(j,"Uniform",1),mf=new K(j,"UniformToFill",2),Zp=new K(j,"CycleAll",10),vm=new K(j,"CycleNotDirected",11),EM=new K(j,"CycleNotDirectedFast",12),xm=new K(j,"CycleNotUndirected",13),wm=new K(j,"CycleDestinationTree",14),Mm=new K(j,"CycleSourceTree",15),Ss=new K(j,"DocumentScroll",1),Qp=new K(j,"InfiniteScroll",2),ol=new K(j,"TreeParentCollapsed",21),Jp=new K(j,"AllParentsCollapsed",22),qp=new K(j,"AnyParentsCollapsed",23),Sm=new q,aT="2.3.18",vh="image",BM=null,RM=!1;function fT(){if($n){var t=$.document.createElement("canvas"),e=t.getContext("2d"),i=ft("7ca11abfd022028846");e[i]=ft("398c3597c01238");for(var n=["5da73c80a36455d7038e4972187c3cae51fd22",xe.Dx+"4ae6247590da4bb21c324ba3a84e385776",vt.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",A.za],r=1;5>r;r++)e[ft("7ca11abfd7330390")](ft(n[r-1]),10,15*r);for(e[i]=ft("39f046ebb36e4b"),i=1;5>i;i++)e[ft("7ca11abfd7330390")](ft(n[i-1]),10,15*i);(n.length!==4||n[0][0]!=="5"||n[3][0]!=="7")&&(vt.prototype.Cd=vt.prototype.Gu),BM=t}}j.className="Diagram",j.fromDiv=function(t){var e=t;return typeof t=="string"&&(e=$.document.getElementById(t)),e instanceof HTMLDivElement&&e.H instanceof j?e.H:null},j.inherit=function(t,e){function i(){}if(Object.getPrototypeOf(t).prototype)throw Error(`Used go.Diagram.inherit defining already defined class 
`+t);i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},j.useDOM=function(t){$n=t?$.document!==void 0:!1},j.isUsingDOM=function(){return $n},j.None=tn,j.Uniform=lu,j.UniformToFill=mf,j.CycleAll=Zp,j.CycleNotDirected=vm,j.CycleNotDirectedFast=EM,j.CycleNotUndirected=xm,j.CycleDestinationTree=wm,j.CycleSourceTree=Mm,j.DocumentScroll=Ss,j.InfiniteScroll=Qp,j.TreeParentCollapsed=ol,j.AllParentsCollapsed=Jp,j.AnyParentsCollapsed=qp;function zM(){this.yy=null,this.j="zz@orderNum",this._tk==="63ad05bbe23a1786468a4c741b6d2"?this.Sc=this.j=!0:this.Sc=null}function xh(t,e){if(e.ib.setTransform(e.Nb,0,0,e.Nb,0,0),e.ib.yc(),t.Sc===null)t:{e="f";var i=$[ft("76a715b2f73f148a")][ft("72ba13b5")]||"";if(t.Sc=!0,$n){var n=j[ft("76a115b6ed251eaf4692")];if(n)for(var r=Sm.iterator;r.next()&&(n=r.value,n=ft(n).split(ft("39e9")),!(6>n.length));){var o=ft(n[1]).split(".");if(n[4]!=="7da71ca0")break;var l=ft(xe[ft("6cae19")]).split(".");if(o[0]>l[0]||o[0]===l[0]&&o[1]>=l[1]){var u=$[ft("74a900bae4370f8b51")][ft("6fbb13a1c2311e8a57")].toLowerCase();if(l=u[ft("73a612b6fb191d")](ft("3aad1ab6e022098b4dc4")),o=ft(n[2]),-1<l&&(u=u[ft("73a612b6fb191d")](o.toLowerCase()+"/"),t.Sc=!(-1<u&&u<l),!t.Sc))break;for(l=i[ft("76ad18b4f73e")],u=i[ft("73a612b6fb191d")](ft("35e7"))+2;u<l;u++)e+=i[u];if(l=e[ft("73a612b6fb191d")](o),0>l&&o!==ft("7da71ca0ad381e90")&&(l=e[ft("73a612b6fb191d")](ft("76a715b2ef3e149757"))),0>l&&(l=e[ft("73a612b6fb191d")](ft("76a715b2ef3e149757"))),0>l&&(l=e[ft("73a612b6fb191d")](ft("2bfa41fdb3784bca12"))),0>l&&(l=i[ft("73a612b6fb191d")](ft("7baa19a6f76c1988428554"))),t.Sc=!(0<=l&&l<e[ft("73a612b6fb191d")](ft("35"))||e[ft("73a612b6fb191d")](ft("35"))===-1),!t.Sc||i[ft("73a612b6fb191d")](ft("7fb002b6ed25128b4da25b2e"))&&(t.Sc=!(-1<i[ft("73a612b6fb191d")](o)),!t.Sc)||(l=$[ft("76a715b2f73f148a")][ft("69ad17a1e03e")],u=l[ft("73a612b6fb191d")](ft("7fb002b6ed25128b4da25b2e")),-1<u&&(t.Sc=!(l[ft("73a612b6fb191d")](o)>u),!t.Sc)))break;if(o[0]==="#"){l=$.document.createElement("div");for(var h=n[0].replace(/[A-Za-z]/g,"");4>h.length;)h+="9";if(u=h,h=h.substr(h.length-4),n="",n+=["gsh","gsf"][parseInt(h.substr(0,1),10)%2],n+=["Header","Background","Display","Feedback"][parseInt(h.substr(0,1),10)%4],l[ft("79a417a0f0181a8946")]=n,$.document[ft("78a712aa")]){$.document[ft("78a712aa")][ft("7bb806b6ed32388c4a875b")](l),h=$.getComputedStyle(l).getPropertyValue(ft("78a704b7e62456904c9b12701b6532a8"));var f=$.getComputedStyle(l).getPropertyValue(ft("75b817b0ea2202"));if($.document[ft("78a712aa")][ft("68ad1bbcf533388c4a875b")](l),h){if(l=$[ft("77a902b0eb1b1e804a8a")],f==="0."+parseInt(u,10)%100||h.indexOf(parseInt(o[1]+o[2],16))!==-1&&h.indexOf(parseInt(o[3]+o[4],16))!==-1){t.Sc=!1;break}else if(l&&l(ft("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(n="."+n,o=0;o<document.styleSheets.length;o++){l=document.styleSheets[o].rules||document.styleSheets[o].cssRules;for(var c in l)if(n===l[c].selectorText){t.Sc=!1;break t}}}}else t.Sc=null,t.Sc=!1}}}else{for(c=i[ft("76ad18b4f73e")],r=i[ft("73a612b6fb191d")](ft("35e7"))+2;r<c;r++)e+=i[r];i=e[ft("73a612b6fb191d")](ft("7da71ca0ad381e90")),t.Sc=!(0<=i&&i<e[ft("73a612b6fb191d")](ft("35")))}}}return 0<t.Sc&&t!==t.yy}zM.className="DiagramHelper";function ks(t){this.j=t===void 0?new C:t,this.o=new C}Y.Object.defineProperties(ks.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.o},set:function(t){this.o=t}}});var VM="DraggingInfo";ks.className="DraggingInfo";function UM(t,e,i){this.node=t,this.info=e,this.Uu=i}UM.className="DraggingNodeInfoPair";function wh(){this.reset()}wh.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new ht(NaN,NaN).freeze(),this.gridSnapCellSpot=Je,this.gridSnapOrigin=new C(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},wh.className="DraggingOptions";function bp(t,e){if(typeof t=="string"||$.Element&&t instanceof Element)var i=j.call(this,t)||this;else i=j.call(this)||this,e=t;return YM(i),e&&i.om(e),i}Z(bp,j);function YM(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=yo,t.layout=new je}bp.prototype.reset=function(){j.prototype.reset.call(this),YM(this)},bp.className="Palette";function Kr(t,e){if(typeof t=="string"||$.Element&&t instanceof Element)var i=j.call(this,t)||this;else i=j.call(this)||this,e=t;var n=i;i.animationManager.isEnabled=!1,i.wb=!0,i.V=null,i.nn=!1,i.on=!1,i.F=!0,i.u=!0,i.ia=0,i.o=!1,i.ql=null,i.Zx("drawShadows",!1),t=new ot;var r=new yt;return r.stroke="magenta",r.strokeWidth=2,r.fill="transparent",r.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(r),i.j=t,i.allowCopy=!1,i.allowDelete=!1,i.allowSelect=!0,i.autoScrollRegion=new Dt(0,0,0,0),i.pa.h(0,0),i.toolManager.gb("Dragging",new uu,i.toolManager.mouseMoveTools),i.click=function(){var o=n.observed;if(o!==null){var l=o.viewportBounds,u=n.lastInput.documentPoint;o.position=new C(u.x-l.width/2,u.y-l.height/2)}},i.Pf=function(){n.Ya(),vf(n)},i.Xd=function(){n.observed!==null&&(n.Ya(),n.N())},i.Ha=function(){1>n.updateDelay?n.N():n.o||(n.o=!0,setTimeout(function(){return n.redraw()},n.updateDelay))},i.Of=function(){n.observed!==null&&vf(n)},i.autoScale=lu,i.wb=!1,e&&Object.assign(i,e),i}Z(Kr,j),Kr.prototype.computePixelRatio=function(){return 1},Kr.prototype.redraw=function(){if(this.o&&1<=this.updateDelay){this.o=!1;var t=this.ta,e=this.ib;if(t!==null&&e!==null){if(yh(this),this.ql===null){var i=new An(null);i.width=t.width,i.height=t.height,this.ql=i}try{this.ta=this.ql,this.ib=this.ta.context,this.ib.Vc(!0),this.ib.setTransform(1,0,0,1,0,0),this.ib.clearRect(0,0,this.ta.width,this.ta.height),GM(this)}finally{this.ta=t,this.ib=e}}}j.prototype.redraw.call(this)},Kr.prototype.ic=function(){if(this.Ka===null&&O("No div specified"),this.ta===null&&O("No canvas specified"),!(this.ta instanceof Sr)&&(lv(this.box),this.Fc)){var t=this.observed;if(t!==null&&!t.animationManager.defaultAnimation.isAnimating&&t.ri){yh(this);var e=this.ta;t=this.ib,t.Vc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?GM(this):this.ql!==null&&(t.drawImage(this.ql.Oa,0,0),e=this.Bb,e.reset(),this.scale!==1&&e.scale(this.scale),this.position.x===0&&this.position.y===0||e.translate(-this.position.x,-this.position.y),t.scale(this.Nb,this.Nb),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.yc()),e=this.Wa.s;for(var i=e.length,n=0;n<i;n++)e[n].ic(t,this);this.Fc=this.vd=!1}}};function GM(t){var e=t.observed;if(e!==null){var i=t.drawsTemporaryLayers,n=t.drawsGrid&&i,r=e.grid;n&&r!==null&&r.visible&&!isNaN(r.width)&&!isNaN(r.height)&&(r=E.alloc().assign(t.viewportBounds).ed(e.viewportBounds),$o(e,r),E.free(r),yi(e));var o=t.Bb;o.reset(),t.scale!==1&&o.scale(t.scale),t.position.x===0&&t.position.y===0||o.translate(-t.position.x,-t.position.y),r=t.ib,r.scale(t.Nb,t.Nb),r.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),r.yc(),e=e.Wa.s,o=e.length;for(var l=0;l<o;l++){var u=e[l],h=t;if(u.visible&&u.opacity!==0){var f=u.diagram.grid.part;if(!i&&u.isTemporary)n&&f.layer===u&&(u=ff(u,r),f.ic(r,h),r.globalAlpha=u);else{for(var c=ff(u,r),p=h.scale,g=E.alloc(),m=u.Pa.s,v=m.length,x=0;x<v;x++){var k=m[x];(n||k!==f)&&u.Nj(r,k,h,null,p,g,!1)}E.free(g),r.globalAlpha=c}}}}}function vf(t){var e=t.box;if(e!==null){var i=t.observed;if(i!==null){t.Fc=!0,i=i.viewportBounds;var n=e.selectionObject,r=ht.alloc();r.h(i.width,i.height),n.desiredSize=r,ht.free(r),t=2/t.scale,n instanceof yt&&(n.strokeWidth=t),e.location=new C(i.x-t/2,i.y-t/2),e.isSelected=!0}}}Kr.prototype.computeBounds=function(){var t=this.observed;if(t===null)return Pp;var e=t.documentBounds.copy();return e.ed(t.viewportBounds),e},Kr.prototype.invalidateViewport=function(){this.Fc!==!0&&(this.Fc=!0,this.Rb())},Kr.prototype.onViewportBoundsChanged=function(t,e,i,n){this.wb||(this.vd=!0,this.N(),this.Ee=!0,this.Ya(),vf(this),this.hc.scale=i,this.hc.position.x=t.x,this.hc.position.y=t.y,this.hc.bounds.assign(t),this.hc.Tz=n,this.S("ViewportBoundsChanged",this.hc,t))},Y.Object.defineProperties(Kr.prototype,{observed:{get:function(){return this.V},set:function(t){var e=this.V;if(t instanceof Kr&&O("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(e!==null&&(this.remove(this.box),e.bm("ViewportBoundsChanged",this.Pf),e.bm("DocumentBoundsChanged",this.Xd),e.bm("InvalidateDraw",this.Ha),e.bm("AnimationFinished",this.Of)),this.V=t,t!==null&&(t.Cj("ViewportBoundsChanged",this.Pf),t.Cj("DocumentBoundsChanged",this.Xd),t.Cj("InvalidateDraw",this.Ha),t.Cj("AnimationFinished",this.Of),this.add(this.box)),this.Ya(),t===null){this.ql=null;var i=this.ta,n=this.ib;i&&n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height))}else this.Ha(null),vf(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.remove(e),this.add(this.j),vf(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t,this.redraw())}},drawsGrid:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.redraw())}},updateDelay:{get:function(){return this.ia},set:function(t){0>t&&(t=0),this.ia!==t&&(this.ia=t)}}}),Kr.className="Overview";function uu(){bt.call(this),this.j=null}Z(uu,bt),uu.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(e===null)return!1;var i=t.lastInput;return!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.delay)?!1:(this.findDraggablePart()===null&&(i=e.viewportBounds,this.j=new C(i.width/2,i.height/2),t=t.firstInput.documentPoint,e.position=new C(t.x-this.j.x,t.y-this.j.y)),!0)},uu.prototype.doActivate=function(){this.j=null,bt.prototype.doActivate.call(this)},uu.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;e!==null&&e.cursor&&(t.currentCursor=e.cursor)},uu.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(e!==null){var i=t.box;if(i!==null){if(this.j===null){var n=t.firstInput.documentPoint;i=i.location,this.j=new C(n.x-i.x,n.y-i.y)}t=t.lastInput.documentPoint,e.position=new C(t.x-this.j.x,t.y-this.j.y)}}},uu.className="OverviewDraggingTool";function zt(){Te(this),this.H=dh,this.Ha=this.u=this.o=!0,this.F=this.V=this.nb=this.ia=!1,this.jj=this.j=null,this.Ib=1.05,this.Kt=NaN,this.uw=null,this.Bu=NaN,this.zu=Pp,this.hb=!0,this.cg=null,this.ob=200}zt.prototype.toString=function(){return"CommandHandler"},zt.prototype.Xe=function(t){this.H=t},zt.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,i=we?e.meta:e.control,n=e.shift,r=e.alt,o=e.key;!i||o!=="C"&&o!=="Insert"?i&&o==="X"||n&&o==="Del"?this.canCutSelection()&&this.cutSelection():i&&o==="V"||n&&o==="Insert"?this.canPasteSelection()&&this.pasteSelection():i&&o==="Y"||r&&n&&o==="Backspace"?this.canRedo()&&this.redo():i&&o==="Z"||r&&o==="Backspace"?this.canUndo()&&this.undo():o==="Del"||o==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():i&&o==="A"?this.canSelectAll()&&this.selectAll():o==="Esc"?this.canStopCommand()&&this.stopCommand():o==="Up"?t.allowVerticalScroll&&(i?t.scroll("pixel","up"):t.scroll("line","up")):o==="Down"?t.allowVerticalScroll&&(i?t.scroll("pixel","down"):t.scroll("line","down")):o==="Left"?t.allowHorizontalScroll&&(i?t.scroll("pixel","left"):t.scroll("line","left")):o==="Right"?t.allowHorizontalScroll&&(i?t.scroll("pixel","right"):t.scroll("line","right")):o==="PageUp"?n&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):o==="PageDown"?n&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):o==="Home"?i&&t.allowVerticalScroll?t.scroll("document","up"):!i&&t.allowHorizontalScroll&&t.scroll("document","left"):o==="End"?i&&t.allowVerticalScroll?t.scroll("document","down"):!i&&t.allowHorizontalScroll&&t.scroll("document","right"):o===" "?this.canScrollToPart()&&this.scrollToPart():o==="Subtract"?this.canDecreaseZoom()&&this.decreaseZoom():o==="Add"?this.canIncreaseZoom()&&this.increaseZoom():i&&o==="0"?this.canResetZoom()&&this.resetZoom():n&&o==="Z"?this.canZoomToFit()&&this.zoomToFit():i&&!n&&o==="G"?this.canGroupSelection()&&this.groupSelection():i&&n&&o==="G"?this.canUngroupSelection()&&this.ungroupSelection():o==="F2"||e.event&&e.event.key==="F2"?this.canEditTextBlock()&&this.editTextBlock():o==="ContextMenu"||e.event&&e.event.key==="ContextMenu"?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},zt.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},zt.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof qt&&t.allowSelect&&t.clearSelection(),e!==null&&e.doCancel()},zt.prototype.canStopCommand=function(){return!0},zt.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.S("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var i=t.nodes;i.next();)i.value.isSelected=!0;for(var n=t.links;n.next();)n.value.isSelected=!0}finally{t.S("ChangedSelection",t.selection),t.currentCursor=""}},zt.prototype.canSelectAll=function(){return this.diagram.allowSelect},zt.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.Ea("Delete"),t.S("SelectionDeleting",t.selection);for(var e=new _,i=t.selection.iterator;i.next();)Ls(e,i.value,!0,this.deletesTree?1/0:0,this.deletesConnectedLinks?null:!1,function(n){return n.canDelete()});t.Js(e,!0),t.S("SelectionDeleted",e)}finally{t.eb("Delete"),t.S("ChangedSelection",t.selection),t.currentCursor=""}},zt.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||t.selection.count===0)},zt.prototype.copySelection=function(){var t=this.diagram,e=new _;for(t=t.selection.iterator;t.next();)Ls(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(i){return i.canCopy()});this.copyToClipboard(e)},zt.prototype.canCopySelection=function(){var t=this.diagram;return!!(t.allowCopy&&t.allowClipboard&&t.selection.count!==0)},zt.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},zt.prototype.canCutSelection=function(){var t=this.diagram;return!!(!t.isReadOnly&&!t.isModelReadOnly&&t.allowCopy&&t.allowDelete&&t.allowClipboard&&t.selection.count!==0)},zt.prototype.copyToClipboard=function(t){var e=this.diagram,i=null;if(t===null)mh=null,yf="";else{i=e.model;var n=!1,r=!1,o=null;try{i.Tl()&&(n=i.Jj,i.Jj=this.copiesParentKey),i.Vj()&&(r=i.Ij,i.Ij=this.copiesGroupKey),o=e.Kj(t,null,!0)}finally{i.Tl()&&(i.Jj=n),i.Vj()&&(i.Ij=r),i=new q,i.addAll(o),mh=i,yf=e.model.dataFormat}}e.S("ClipboardChanged",i)},zt.prototype.pasteFromClipboard=function(){var t=new _,e=mh;if(e===null)return t;var i=this.diagram;if(yf!==i.model.dataFormat)return t;var n=i.model,r=!1,o=!1,l=null;try{n.Tl()&&(r=n.Jj,n.Jj=this.copiesParentKey),n.Vj()&&(o=n.Ij,n.Ij=this.copiesGroupKey),l=i.Kj(e,i,!1)}finally{for(n.Tl()&&(n.Jj=r),n.Vj()&&(n.Ij=o),e=l.iterator;e.next();)i=e.value,n=e.key,i.location.w()||(n.location.w()?i.location=n.location:!i.position.w()&&n.position.w()&&(i.position=n.position)),t.add(i)}return t},zt.prototype.pasteSelection=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.Ea("Paste");var i=this.pasteFromClipboard();0<i.count&&e.clearSelection(!0);for(var n=i.iterator;n.next();)n.value.isSelected=!0;if(t!==null){var r=e.computePartsBounds(e.selection);if(r.w()){var o=this.computeEffectiveCollection(e.selection,e.Xm);sm(e,o,new C(t.x-r.centerX,t.y-r.centerY),e.Xm,!1)}}e.S("ClipboardPasted",i)}finally{e.eb("Paste"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},zt.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||mh===null||mh.count===0||yf!==t.model.dataFormat)},zt.prototype.undo=function(){this.diagram.undoManager.undo()},zt.prototype.canUndo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canUndo()},zt.prototype.redo=function(){this.diagram.undoManager.redo()},zt.prototype.canRedo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canRedo()},zt.prototype.decreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===tn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},zt.prototype.canDecreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale!==tn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},zt.prototype.increaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===tn&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},zt.prototype.canIncreaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale!==tn?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},zt.prototype.resetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},zt.prototype.canResetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;return t<e.minScale||t>e.maxScale?!1:e.allowZoom},zt.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.Cc(),t.redraw();var i=t.position,n=t.scale;Ko(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&n===this.Bu&&!isNaN(this.Kt)&&t.documentBounds.D(this.zu)?(t.scale=this.Kt,t.position=this.uw,this.Bu=NaN,this.zu=Pp):(this.Kt=n,this.uw=i.copy(),t.zoomToFit(),this.Bu=t.scale,this.zu=t.documentBounds.copy()),X0(e)},zt.prototype.canZoomToFit=function(){return this.diagram.allowZoom},zt.prototype.scrollToPart=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.Va(),t===null){try{this.cg!==null&&(this.cg.next()?t=this.cg.value:this.cg=null)}catch{this.cg=null}t===null&&(0<e.highlighteds.count?this.cg=e.highlighteds.iterator:0<e.selection.count&&(this.cg=e.selection.iterator),this.cg!==null&&this.cg.next()&&(t=this.cg.value))}if(t!==null){var i=e.animationManager;Ko(i,"Scroll To Part");var n=this.scrollToPartPause;if(0<n){var r=hu(this,t,[t]);if(r.length===1)e.Ea(),e.es(t.actualBounds),e.eb("Scroll To Part");else{var o=function(){e.Ea();for(var h=r.pop();0<r.length&&h instanceof W&&h.isTreeExpanded&&(!(h instanceof dt)||h.isSubGraphExpanded);)h=r.pop();0<r.length?(h instanceof ot&&e.vv(h.actualBounds),h instanceof W&&!h.isTreeExpanded&&(h.isTreeExpanded=!0),h instanceof dt&&!h.isSubGraphExpanded&&(h.isSubGraphExpanded=!0)):(h instanceof ot&&e.es(h.actualBounds),e.bm("LayoutCompleted",l)),e.eb("Scroll To Part")},l=function(){G(o,(i.isEnabled?i.duration:0)+n)};e.Cj("LayoutCompleted",l),o()}}else{var u=e.position.copy();e.es(t.actualBounds),u.Xa(e.position)&&i.Cc()}}};function hu(t,e,i){if(e.isVisible())return i;if(e instanceof Nt)hu(t,e.adornedPart,i);else if(e instanceof V){var n=e.fromNode;n!==null&&hu(t,n,i),e=e.toNode,e!==null&&hu(t,e,i)}else e instanceof W&&(n=e.labeledLink,n!==null&&hu(t,n,i),n=e.pg(),n!==null&&(n.isTreeExpanded||n.wasTreeExpanded||i.push(n),hu(t,n,i))),e=e.containingGroup,e!==null&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||i.push(e),hu(t,e,i));return i}zt.prototype.canScrollToPart=function(t){return t===void 0&&(t=null),t!==null&&!(t instanceof ot)?!1:(t=this.diagram,t.selection.count===0&&t.highlighteds.count===0?!1:t.allowHorizontalScroll&&t.allowVerticalScroll)},zt.prototype.collapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Collapse Tree"),Ko(e.animationManager,"Collapse Tree");var i=new q;if(t!==null&&t.isTreeExpanded)t.collapseTree(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof W&&r.isTreeExpanded&&(r.collapseTree(),i.add(r))}e.S("TreeCollapsed",i)}finally{e.eb("Collapse Tree")}},zt.prototype.canCollapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof W&&t.isTreeExpanded))return!1;if(0<t.Ro().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof W&&e.isTreeExpanded&&0<e.Ro().count)return!0;return!1},zt.prototype.expandTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Expand Tree"),Ko(e.animationManager,"Expand Tree");var i=new q;if(t!==null&&!t.isTreeExpanded)t.expandTree(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof W&&!r.isTreeExpanded&&(r.expandTree(),i.add(r))}e.S("TreeExpanded",i)}finally{e.eb("Expand Tree")}},zt.prototype.canExpandTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof W)||t.isTreeExpanded)return!1;if(0<t.Ro().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof W&&!e.isTreeExpanded&&0<e.Ro().count)return!0;return!1},zt.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.Wj()){var i=this.archetypeGroupData;if(i!==null){var n=null;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.Ea("Group");for(var r=new q,o=t.selection.iterator;o.next();){var l=o.value;l.Zc()&&l.canGroup()&&r.add(l)}for(var u=new q,h=r.iterator;h.next();){var f=h.value;o=!1;for(var c=r.iterator;c.next();)if(f.Td(c.value)){o=!0;break}o||u.add(f)}if(0<u.count){var p=u.first().containingGroup;if(p!==null)for(;p!==null;){r=!1;for(var g=u.iterator;g.next();)if(!g.value.Td(p)){r=!0;break}if(r)p=p.containingGroup;else break}if(i instanceof dt)jn(i),n=i.copy(),n!==null&&t.add(n);else if(e.$u(i)){var m=e.copyNodeData(i);gt(m)&&(e.xf(m),n=t.ji(m))}if(n!==null){p!==null&&this.isValidMember(p,n)&&(n.containingGroup=p);for(var v=u.iterator;v.next();){var x=v.value;this.isValidMember(n,x)&&(x.containingGroup=n)}t.clearSelection(!0),n.isSelected=!0}}t.S("SelectionGrouped",n)}finally{t.eb("Group"),t.S("ChangedSelection",t.selection),t.currentCursor=""}}}},zt.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.Wj()||this.archetypeGroupData===null)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Zc()&&e.canGroup())return!0}return!1};function km(t){var e=Rt();for(t=t.iterator;t.next();){var i=t.value;i instanceof V||e.push(i)}t=new _,i=e.length;for(var n=0;n<i;n++){for(var r=e[n],o=!0,l=0;l<i;l++)if(r.Td(e[l])){o=!1;break}o&&t.add(r)}return Bt(e),t}zt.prototype.isValidMember=function(t,e){if(e===null||t===e||e instanceof V)return!1;if(t!==null){if(t===e||t.Td(e))return!1;var i=t.memberValidation;if(i!==null&&!i(t,e)||t.data===null&&e.data!==null||t.data!==null&&e.data===null)return!1}return i=this.memberValidation,i!==null?i(t,e):!0},zt.prototype.ungroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.model;if(i.Wj())try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.Ea("Ungroup");var n=new q;if(t!==null)n.add(t);else for(var r=e.selection.iterator;r.next();){var o=r.value;o instanceof dt&&o.canUngroup()&&n.add(o)}var l=new q;if(0<n.count){e.clearSelection(!0);for(var u=n.iterator;u.next();){var h=u.value;h.expandSubGraph();var f=h.containingGroup,c=f!==null&&f.data!==null?i.wa(f.data):void 0;l.addAll(h.memberParts);for(var p=l.iterator;p.next();){var g=p.value;if(g.isSelected=!0,!(g instanceof V)){var m=g.data;m!==null?i.mp(m,c):g.containingGroup=f}}e.remove(h)}}e.S("SelectionUngrouped",n,l)}finally{e.eb("Ungroup"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},zt.prototype.canUngroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.Wj())return!1;if(t!==null){if(!(t instanceof dt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof dt&&e.canUngroup())return!0;return!1},zt.prototype.addTopLevelParts=function(t,e){var i=!0;for(t=km(t).iterator;t.next();){var n=t.value;n.containingGroup!==null&&(!e||this.isValidMember(null,n)?n.containingGroup=null:i=!1)}return i},zt.prototype.collapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Collapse SubGraph"),Ko(e.animationManager,"Collapse SubGraph");var i=new q;if(t!==null&&t.isSubGraphExpanded)t.collapseSubGraph(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof dt&&r.isSubGraphExpanded&&(r.collapseSubGraph(),i.add(r))}e.S("SubGraphCollapsed",i)}finally{e.eb("Collapse SubGraph")}},zt.prototype.canCollapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return!!(t instanceof dt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof dt&&e.isSubGraphExpanded)return!0;return!1},zt.prototype.expandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.Ea("Expand SubGraph"),Ko(e.animationManager,"Expand SubGraph");var i=new q;if(t!==null&&!t.isSubGraphExpanded)t.expandSubGraph(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof dt&&!r.isSubGraphExpanded&&(r.expandSubGraph(),i.add(r))}e.S("SubGraphExpanded",i)}finally{e.eb("Expand SubGraph")}},zt.prototype.canExpandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return t instanceof dt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof dt&&!e.isSubGraphExpanded)return!0;return!1},zt.prototype.editTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.toolManager.findTool("TextEditing");if(i!==null){if(t===null){t=null;for(var n=e.selection.iterator;n.next();){var r=n.value;if(r.canEdit()){t=r;break}}if(t===null)return;t=t.Nl(function(o){return o instanceof Ut&&o.editable})}t!==null&&(e.currentTool=null,i.textBlock=t,e.currentTool=i)}},zt.prototype.canEditTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||e.toolManager.findTool("TextEditing")===null)return!1;if(t!==null){if(!(t instanceof Ut))return!1;if(t=t.part,t!==null&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if(t=e.value,t.canEdit()&&(t=t.Nl(function(i){return i instanceof Ut&&i.editable}),t!==null))return!0;return!1},zt.prototype.showContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");if(i!==null&&(t===void 0&&(t=0<e.selection.count?e.selection.first():e),t=i.findObjectWithContextMenu(t),t!==null)){var n=e.lastInput,r=null;t instanceof it?r=t.ga(Et):e.viewportBounds.ca(n.documentPoint)||(r=e.viewportBounds,r=new C(r.x+r.width/2,r.y+r.height/2)),r!==null&&(n.viewPoint=e.op(r),n.documentPoint=r,n.left=!1,n.right=!0,n.up=!0),e.currentTool=i,eM(i,!1,t)}},zt.prototype.canShowContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");return i===null?!1:(t===void 0&&(t=0<e.selection.count?e.selection.first():e),i.findObjectWithContextMenu(t)!==null)},zt.prototype.computeEffectiveCollection=function(t,e){var i=this.diagram,n=i.toolManager.findTool("Dragging"),r=i.currentTool===n;if(e===void 0&&(e=r?n.dragOptions:i.Xm),n=new ct,t===null)return n;for(var o=t.iterator;o.next();)Wo(i,n,o.value,r,e);if(i.draggedLink!==null&&e.dragsLink)return n;for(o=t.iterator;o.next();)t=o.value,t instanceof V&&(e=t.fromNode,e===null||n.contains(e)?(e=t.toNode,e===null||n.contains(e)||n.remove(t)):n.remove(t));return n},Y.Object.defineProperties(zt.prototype,{diagram:{get:function(){return this.H}},copiesClipboardData:{get:function(){return this.o},set:function(t){this.o=t}},copiesConnectedLinks:{get:function(){return this.u},set:function(t){this.u=t}},deletesConnectedLinks:{get:function(){return this.Ha},set:function(t){this.Ha=t}},copiesTree:{get:function(){return this.ia},set:function(t){this.ia=t}},deletesTree:{get:function(){return this.nb},set:function(t){this.nb=t}},copiesParentKey:{get:function(){return this.V},set:function(t){this.V=t}},copiesGroupKey:{get:function(){return this.F},set:function(t){this.F=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.jj},set:function(t){this.jj=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Ib},set:function(t){1<t||O("zoomFactor must be larger than 1.0, not: "+t),this.Ib=t}},isZoomToFitRestoreEnabled:{get:function(){return this.hb},set:function(t){this.hb=t}},scrollToPartPause:{get:function(){return this.ob},set:function(t){this.ob=t}}}),zt.className="CommandHandler",yM=function(){return new zt};function it(){Te(this),this.l=30723,this.pb=1,this.cn="",this.Ma=this.Me=null,this.pa=new C(NaN,NaN).freeze(),this.jd=kp,this.Bb=new vt,this.wh=new vt,this.Mb=null,this.Ca=this.Jk=1,this.Lb=0,this.Kg=Ju,this.uc=new E(NaN,NaN,NaN,NaN).freeze(),this.Jb=new E(NaN,NaN,NaN,NaN).freeze(),this.fc=new E(0,0,NaN,NaN).freeze(),this.ba=this.Zn=this.$n=null,this.rk=this.Kb=_e,this.Ag=this.jo=0,this.V=this.tb=this.Dh=this.A=this.Ua=null,this.Hc=!1,this.ko=this.Ng=null}var oe,te,Fn,Re,Ue,cn,au,Mh,Sh,kh;it.prototype.cloneProtected=function(t){t.l=this.l|6144,t.pb=this.pb,t.cn=this.cn,t.Ma=this.Ma,t.pa.assign(this.pa),t.jd=this.jd.J(),this.Mb!==null?t.Mb=this.Mb.copy():t.Mb=null,t.Ca=this.Ca,t.Lb=this.Lb,t.Kg=this.Kg.J(),t.uc.assign(this.uc),t.Jb.assign(this.Jb),t.fc.assign(this.fc),t.Zn=this.Zn,this.ba!==null&&(t.ba=this.ba.copy()),t.Kb=this.Kb.J(),t.rk=this.rk.J(),t.jo=this.jo,t.Ag=this.Ag,this.Ua!==null&&(t.Ua=this.Ua.copy()),this.A!==null&&(t.A=this.A.pc?this.A:this.A.copy()),this.Dh!==null&&(t.Dh=Qt(this.Dh)),this.tb!==null&&(t.tb=this.tb.copy())},it.prototype.Xw=function(t){var e=this.Dh;if(Ht(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return}else this.Dh=e=[];e.push(t)},it.prototype.Af=function(t){t.$n=null,t.Ng=null,t.v()},it.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),this.Dh!==null)for(var e=0;e<this.Dh.length;e++){var i=this.Dh[e];t[i]=this[i]}return t},it.prototype.copy=function(){return this.clone()},s=it.prototype,s.qb=function(t){t.classType===V?t.name.indexOf("Orient")===0?this.segmentOrientation=t:O("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===it&&(this.stretch=t)},s.toString=function(){return Go(this.constructor)+"#"+Ci(this)},s.th=function(){this.A!==null&&(this.A.pc=!0)};function Me(t){t.A===null?t.A=new cu:t.A.pc&&(t.A=t.A.copy())}s.Xc=function(){if(this.ba===null){var t=new wf;t.Yi=Ke,t.zj=Ke,t.Wi=10,t.xj=10,t.Xi=0,t.yj=0,this.ba=t}},s.cb=function(t,e,i,n,r,o,l){var u=this.part;if(u!==null&&(u.fk(t,e,i,n,r,o,l),i===this&&t===Wt&&fu(this)&&sl(this,u,e),o=this.diagram,this.animationTriggers===null||o===null||!o.ri||o.undoManager.isUndoingRedoing||o.animationManager.Em||(t=this.animationTriggers.get(e),t!==null&&o.animationManager.isEnabled&&!o.animationManager.isTicking&&(this.ko===null&&(this.ko=new ct),l=o.undoManager.transactionLevel===0,t.startCondition===Up?l=!0:t.startCondition===Q0&&(l=!1),l?(o=new qe,JN(t,o),l=this.ko.get(t),l!==null&&l.stop(),this.ko.add(t,o),o.wu=this,o.Pw=t,o.add(this,e,n,r),o.start()):(Ko(o.animationManager,"Trigger"),o.animationManager.defaultAnimation.add(this,e,n,r)))),this instanceof z&&i===u&&(u.l&16777216)!==0&&u.data!==null))for(i=this.O.s,n=i.length,r=0;r<n;r++)u=i[r],u instanceof z&&fl(u,function(h){h.data!==null&&h.l&16777216&&h.La(e)})};function sl(t,e,i){var n=t.ih();if(n!==null)for(var r=t.localBindings.iterator;r.next();){var o=r.value,l=null;if(o.sourceName!==null){if(l=T2(o,n,t),l===null)continue;o.sp(t,l,i,null)}else if(o.isToModel){var u=e.diagram;u===null||u.skipsModelSourceBindings||o.sp(t,u.model.modelData,i,n)}else{if(u=n.data,u===null)continue;var h=e.diagram;h===null||h.skipsModelSourceBindings||o.sp(t,u,i,n)}l===t&&(u=n.ks(o.Bi),u!==null&&o.Ov(u,l,i))}}s.ks=function(t){return this.bindingId===t?this:null},s.g=function(t,e,i){this.cb(Wt,t,this,e,i)},s.Ge=function(t,e,i,n){var r=this.uc;if(r.h(t,e,i,n),this.Ca!==1||this.Lb!==0){this.Mb===null&&(this.Mb=new vt);var o=this.Mb;o.reset(),this.oo(o,t,e,i,n),o.pp(r)}};function HM(t,e,i,n){return t.pickable===!1?!1:(n.multiply(t.transform),i?t.Yc(e,n):t.fh(e,n))}s.vx=function(t,e,i){if(this.pickable===!1)return!1;var n=this.naturalBounds;return e=t.Bf(e),i?di(t.x,t.y,0,0,0,n.height)<=e||di(t.x,t.y,0,n.height,n.width,n.height)<=e||di(t.x,t.y,n.width,n.height,n.width,0)<=e||di(t.x,t.y,n.width,0,0,0)<=e:t.zd(0,0)<=e&&t.zd(0,n.height)<=e&&t.zd(n.width,0)<=e&&t.zd(n.width,n.height)<=e},s.se=function(){return!0},s.ca=function(t){var e=C.alloc();e.assign(t),this.transform.Ga(e);var i=this.actualBounds;if(!i.w())return C.free(e),!1;var n=this.diagram;if(n!==null&&n.wq){var r=n.Ql("extraTouchThreshold"),o=n.Ql("extraTouchArea"),l=o/2,u=this.naturalBounds;n=this.Df()*n.scale;var h=1/n;if(u.width*n<r&&u.height*n<r)return t=sr(i.x-l*h,i.y-l*h,i.width+o*h,i.height+o*h,e.x,e.y),C.free(e),t}return r=!1,(this instanceof Nt||this instanceof yt?sr(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.ca(e))&&(this.tb&&!this.tb.ca(e)?r=!1:this.areaBackground!==null&&i.ca(e)||this.Ma!==null&&this.fc.ca(t)?r=!0:r=this.gh(t)),C.free(e),r},s.gh=function(t){var e=this.naturalBounds;return sr(0,0,e.width,e.height,t.x,t.y)},s.Re=function(t){if(this.angle===0)return this.actualBounds.Re(t);var e=this.naturalBounds;e=E.allocAt(0,0,e.width,e.height);var i=this.transform,n=!1,r=C.allocAt(t.x,t.y);return e.ca(i.Cd(r))&&(r.h(t.x,t.bottom),e.ca(i.Cd(r))&&(r.h(t.right,t.bottom),e.ca(i.Cd(r))&&(r.h(t.right,t.y),e.ca(i.Cd(r))&&(n=!0)))),C.free(r),E.free(e),n},s.fh=function(t,e){if(e===void 0)return t.Re(this.actualBounds);var i=this.naturalBounds,n=!1,r=C.allocAt(0,0);return t.ca(e.Ga(r))&&(r.h(0,i.height),t.ca(e.Ga(r))&&(r.h(i.width,i.height),t.ca(e.Ga(r))&&(r.h(i.width,0),t.ca(e.Ga(r))&&(n=!0)))),C.free(r),n},s.Yc=function(t,e){if(e===void 0&&(e=this.transform,this.angle===0))return t.Yc(this.actualBounds);var i=this.naturalBounds,n=C.allocAt(0,0),r=C.allocAt(0,i.height),o=C.allocAt(i.width,i.height),l=C.allocAt(i.width,0),u=!1;if(t.ca(e.Ga(n))||t.ca(e.Ga(r))||t.ca(e.Ga(o))||t.ca(e.Ga(l)))u=!0;else{i=E.allocAt(0,0,i.width,i.height);var h=C.allocAt(t.x,t.y);i.ca(e.Cd(h))?u=!0:(h.h(t.x,t.bottom),i.ca(e.Cd(h))?u=!0:(h.h(t.right,t.bottom),i.ca(e.Cd(h))?u=!0:(h.h(t.right,t.y),i.ca(e.Cd(h))&&(u=!0)))),C.free(h),E.free(i),!u&&(A.us(t,n,r)||A.us(t,r,o)||A.us(t,o,l)||A.us(t,l,n))&&(u=!0)}return C.free(n),C.free(r),C.free(o),C.free(l),u},s.ga=function(t,e){if(e===void 0&&(e=new C),t instanceof lt){var i=this.naturalBounds;e.h(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else e.set(t);return this.oe.Ga(e),e},s.ni=function(t){t===void 0&&(t=new E);var e=this.naturalBounds,i=this.oe,n=C.allocAt(0,0).transform(i);return t.h(n.x,n.y,0,0),n.h(e.width,0).transform(i),Oe(t,n.x,n.y,0,0),n.h(e.width,e.height).transform(i),Oe(t,n.x,n.y,0,0),n.h(0,e.height).transform(i),Oe(t,n.x,n.y,0,0),C.free(n),t},s.mi=function(){var t=this.oe;return t.m11===1&&t.m12===0?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},s.Df=function(){if(!(this.l&4096))return this.Jk;var t=this.Ca;return this.panel!==null?t*this.panel.Df():t},s.qs=function(t,e){return e===void 0&&(e=new C),e.assign(t),this.oe.Cd(e),e},s.rs=function(t,e,i){return this.Rj(t.x,t.y,e.x,e.y,i)},s.Rj=function(t,e,i,n,r){var o=this.transform,l=1/(o.m11*o.m22-o.m12*o.m21),u=o.m22*l,h=-o.m12*l,f=-o.m21*l,c=o.m11*l,p=l*(o.m21*o.dy-o.m22*o.dx),g=l*(o.m12*o.dx-o.m11*o.dy);return this.areaBackground!==null?(o=this.actualBounds,A.Ff(o.left,o.top,o.right,o.bottom,t,e,i,n,r)):(l=t*u+e*f+p,t=t*h+e*c+g,e=i*u+n*f+p,i=i*h+n*c+g,r.h(0,0),n=this.naturalBounds,i=A.Ff(0,0,n.width,n.height,l,t,e,i,r),r.transform(o),i)},it.prototype.measure=function(t,e,i,n){if(Qo(this)!==!1){var r=this.Kg,o=r.right+r.left;r=r.top+r.bottom,t=Math.max(t-o,0),e=Math.max(e-r,0),i=Math.max((i||0)-o,0),n=Math.max((n||0)-r,0),o=this.angle,r=this.desiredSize;var l=this.kq();o===90||o===270?(t=isFinite(r.height)?r.height+l:t,e=isFinite(r.width)?r.width+l:e):(t=isFinite(r.width)?r.width+l:t,e=isFinite(r.height)?r.height+l:e),r=i||0,l=n||0;var u=this instanceof z;switch(ar(this,!0)){case te:l=r=0,u&&(e=t=1/0);break;case oe:isFinite(t)&&t>i&&(r=t),isFinite(e)&&e>n&&(l=e);break;case Re:isFinite(t)&&t>i&&(r=t),l=0,u&&(e=1/0);break;case Ue:isFinite(e)&&e>n&&(l=e),r=0,u&&(t=1/0)}u=this.maxSize;var h=this.minSize;r>u.width&&h.width<u.width&&(r=u.width),l>u.height&&h.height<u.height&&(l=u.height),i=Math.max(r,h.width),n=Math.max(l,h.height),u.width<i&&(i=Math.min(h.width,i)),u.height<n&&(n=Math.min(h.height,n)),t=Math.min(u.width,t),e=Math.min(u.height,e),t=Math.max(i,t),e=Math.max(n,e),(o===90||o===270)&&(o=t,t=e,e=o,o=i,i=n,n=o),this.uc.ka(),this.Wl(t,e,i,n),this.uc.freeze(),this.uc.w()||O("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.uc.toString()),pn(this,!1)}},it.prototype.Wl=function(){},it.prototype.Dd=function(){return!1},it.prototype.arrange=function(t,e,i,n,r){this.Tk();var o=E.alloc();o.assign(this.Jb),this.Jb.ka(),Zn(this)===!1?this.Jb.h(t,e,i,n):this.eh(t,e,i,n),this.Jb.freeze(),r===void 0?this.tb=null:this.tb=r,i=!1,r!==void 0?i=!0:(r=this.panel,r!==null&&qo(r)&&(r=r.panel),r!==null&&(r=r.fc,n=this.measuredBounds,this.areaBackground!==null&&(n=this.Jb),i=e+n.height,n=t+n.width,i=!(0<=t+.05&&n<=r.width+.05&&0<=e+.05&&i<=r.height+.05),this instanceof Ut&&(t=this.naturalBounds,this.Lq>t.height||this.Db>t.width))&&(i=!0)),this.l=i?this.l|256:this.l&-257,this.Jb.w()||O("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Jb.toString()),this.Yl(o,this.Jb),ll(this,!1),E.free(o)},s=it.prototype,s.eh=function(){};function Cm(t,e,i,n,r){if(t.Jb.h(e,i,n,r),!t.desiredSize.w()){var o=t.uc;i=t.Kg,e=i.right+i.left;var l=i.top+i.bottom;switch(i=o.width+e,o=o.height+l,n+=e,r+=l,e=ar(t,!0),i===n&&o===r&&(e=te),e){case te:(i>n||o>r)&&(pn(t,!0),t.measure(i>n?n:i,o>r?r:o,0,0));break;case oe:pn(t,!0),t.measure(n,r,0,0);break;case Re:pn(t,!0),t.measure(n,o,0,0);break;case Ue:pn(t,!0),t.measure(i,r,0,0)}}}s.Yl=function(t,e){var i=this.part;i!==null&&i.diagram!==null&&(i.selectionObject!==this&&i.resizeObject!==this&&i.rotateObject!==this||av(i,!0),this.N(),c0(t,e)||(i.oh(),this.Qn(i)))},s.Qn=function(t){this.portId!==null&&(av(t,!0),t instanceof W&&US(t,this))},s.ic=function(t,e){if(!cT(this,t,e)&&this.visible){var i=this.opacity;if(i!==0){var n=1;i!==1&&(n=t.globalAlpha,t.globalAlpha=n*i);var r="";this.filter!==""&&(r=t.filter,t.filter=this.filter);var o=this.part,l=this.panel,u=!1,h=0;if(o&&e.Gf("drawShadows")&&(u=o.isShadowed)){var f=o.shadowOffset;h=Math.max(f.y,f.x)*e.scale*e.Nb}f=this.Dd();var c=this instanceof z&&qo(this),p=this.Jb;if(c){XM(this,u,t,l);var g=this.Jb,m=this.fc,v=this.areaBackground,x=this.Ma;v===null&&x===null||t.yc(),v!==null&&(en(this,t,v,!0,!0,m,g),v instanceof jt&&v.type===rn?(t.beginPath(),t.rect(g.x,g.y,g.width,g.height),t.ng(v)):t.fillRect(g.x,g.y,g.width,g.height)),x!==null&&(en(this,t,x,!0,!1,m,g),x instanceof jt&&x.type===rn?(t.beginPath(),t.rect(g.x,g.y,g.width,g.height),t.ng(x)):t.fillRect(g.x,g.y,g.width,g.height)),this.hh(t,e),u&&this.l&512&&Cr(t)}if(!c&&(c||p.width!==0&&p.height!==0&&!isNaN(p.x)&&!isNaN(p.y))){if(c=this.transform,this.l&4096&&id(this),!(g=e.aj||!f)){var k=this.naturalBounds;g=this.wh;var S=g.m11,P=g.m21,N=g.dx,T=g.m12,F=g.m22,D=g.dy,X,tt=X=0;g=X*S+tt*P+N,m=X*T+tt*F+D,X=k.width+h,tt=0;var et=X*S+tt*P+N;X=X*T+tt*F+D,tt=Math.min(g,et);var U=Math.min(m,X);v=Math.max(g+0,et)-tt,x=Math.max(m+0,X)-U,g=tt,m=U,X=k.width+h,tt=k.height+h,et=X*S+tt*P+N,X=X*T+tt*F+D,tt=Math.min(g,et),U=Math.min(m,X),v=Math.max(g+v,et)-tt,x=Math.max(m+x,X)-U,g=tt,m=U,X=0,tt=k.height+h,et=X*S+tt*P+N,X=X*T+tt*F+D,tt=Math.min(g,et),U=Math.min(m,X),v=Math.max(g+v,et)-tt,x=Math.max(m+x,X)-U,g=tt,m=U,h=e.viewportBounds,k=h.x,S=h.y,g=!(g>h.width+k||k>v+g||m>h.height+S||S>x+m)}if(g){if(h=(this.l&256)!==0,t.clipInsteadOfFill&&(h=!1),this instanceof Ut&&(t.font=this.font),h){if(g=l.se()?l.naturalBounds:l.actualBounds,m=Math.max(p.x,g.x),v=Math.max(p.y,g.y),x=Math.min(p.right,g.right)-m,k=Math.min(p.bottom,g.bottom)-v,S=this.tb,S!==null&&(m=S.x,v=S.y,x=S.width,k=S.height),m>p.width+p.x||p.x>g.width+g.x){i!==1&&(t.globalAlpha=n),this.filter!==""&&(t.filter=r);return}t.save(),t.beginPath(),t.rect(m,v,x,k),t.clip()}if(f){if(!o.isVisible()){i!==1&&(t.globalAlpha=n),this.filter!==""&&(t.filter=r);return}u&&(g=o.shadowOffset,t.Gv(g.x*e.scale*this.scale*e.Nb,g.y*e.scale*this.scale*e.Nb,o.shadowBlur),Cr(t),t.shadowColor=o.shadowColor)}XM(this,u,t,l),o=this.naturalBounds,this.areaBackground!==null&&(t.yc(),Pm(this,t,o,p)),t.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy),this.Ma!==null&&(t.yc(),ed(this,t,o,p)),this.hh(t,e),(e=u)&&this.l&512&&Cr(t),f&&e&&kr(t),u&&this.l&512&&Cr(t),f&&u&&kr(t),h&&(t.restore(),t.Vc(this instanceof z)),c.ws()||(u=1/(c.m11*c.m22-c.m12*c.m21),t.transform(c.m22*u,-c.m12*u,-c.m21*u,c.m11*u,u*(c.m21*c.dy-c.m22*c.dx),u*(c.m12*c.dx-c.m11*c.dy)))}}i!==1&&(t.globalAlpha=n),this.filter!==""&&(t.filter=r)}}};function XM(t,e,i,n){e&&t.shadowVisible===!0?Cr(i):e&&t.shadowVisible===!1&&kr(i),e&&td(t,n)&&t.shadowVisible===null&&kr(i),e&&(t.Ma!==null||td(t,n))?(nd(t,!0),t.shadowVisible===null&&kr(i)):nd(t,!1)}function td(t,e){return e===null?!1:(qo(e)&&(e=e.panel),(e.l&512)!==0||(e.type===z.Auto||e.type===z.Spot)&&e.Qb()!==t)}s.Fv=function(){};function Pm(t,e,i,n){en(t,e,t.areaBackground,!0,!0,i,n),t.areaBackground instanceof jt&&t.areaBackground.type===rn?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.ng(t.areaBackground)):e.fillRect(n.x,n.y,n.width,n.height)}function ed(t,e,i,n){var r=t.kq(),o=i.x,l=i.y,u=i.width+r,h=i.height+r;en(t,e,t.Ma,!0,!1,i,n),t.Ma instanceof jt&&t.Ma.type===rn?(e.beginPath(),e.rect(o-r/2,l-r/2,u,h),e.ng(t.Ma)):e.fillRect(o-r/2,l-r/2,u,h)}function KM(t,e,i){for(var n=e.O.s,r=n.length,o=-1,l=0;l<r;l++)if(n[l]===t){o=l;break}if(t=o,t!==-1)if(t===0)e.svg.gd?e.svg.gd.after(i):e.svg.Ma?e.svg.Ma.after(i):e.type===z.Table?(e=e.svg.getElementsByClassName("gojs-ts"),e=e.length!==0?e[0]:null,e!==null&&e.after(i)):e.svg.prepend(i);else{for(;t!==0&&!e.M(t-1).Ed();)t--;t===0?e.svg.prepend(i):(t=e.M(t-1).svg,t!==null?t.after(i):e.svg.appendChild(i))}}function cT(t,e,i){if(!(e instanceof Vi))return!1;if(!t.visible||t.opacity===0||t.Dd()&&!t.isVisible())return t.svg!==null&&t.svg.parentNode!==null&&t.svg.remove(),!0;var n=t.panel,r=t.mk(e);if(t.jk(e,i,r))return _M(t,t.svg),t.svg.parentElement!==null?(t.Dd()&&(e.ui=t.svg),!0):(t.Dd()?(e.ui!==null?e.ui.after(t.svg):e.hi.prepend(t.svg),e.ui=t.svg):n&&KM(t,n,t.svg),!0);if(t.Dd()&&t.isShadowed){var o=t.shadowOffset;e.Gv(o.x*i.scale*t.scale*i.Nb,o.y*i.scale*t.scale*i.Nb,t.shadowBlur),Cr(e),e.shadowColor=t.shadowColor}t instanceof Ut&&(e.font=t.font),e.yd=null;var l=t.transform,u=t instanceof z,h=t instanceof z?qo(t):!1;o=t.svg,t.l&4096&&id(t);var f=t.Jb;if(e.rb.ha=[1,0,0,1,0,0],e.o=!1,r&&(e.o=!0,u&&h?(Mf(e,1,0,0,1,0,0),t.svg=e.ad):u?(Mf(e,l.m11,l.m12,l.m21,l.m22,l.dx,l.dy),t.svg=e.ad):Mf(e,1,0,0,1,0,0)),r=t.naturalBounds,t.areaBackground!==null){var c=l.copy().Uj();e.rb.ha=[c.m11,c.m12,c.m21,c.m22,c.dx,c.dy],Pm(t,e,r,f),e.rb.ha=[1,0,0,1,0,0],e.yd.gd=e.ad,e.yd.prepend(e.ad)}return u||(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy]),t.background!==null&&(u?(h&&(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy]),ed(t,e,r,f),h&&(e.rb.ha=[1,0,0,1,0,0])):(e.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy],ed(t,e,r,f)),e.yd.Ma=e.ad,e.yd.prepend(e.ad)),l=e.yd,r=t.part,h=!1,r&&i.Gf("drawShadows")&&(h=r.isShadowed),e.clipInsteadOfFill&&(h=!1),t.Dd()&&h&&Cr(e),h&&t.shadowVisible===!0?Cr(e):h&&t.shadowVisible===!1&&kr(e),r=t.panel,h&&td(t,r)&&t.shadowVisible===null&&kr(e),e.Il&&(c=i.computePixelRatio(),c="drop-shadow("+e.shadowOffsetX/c+"px "+e.shadowOffsetY/c+"px "+e.shadowBlur/c/2+"px "+e.shadowColor+")",t.background!==null&&l.Ma.setAttributeNS(null,"filter",c),t.areaBackground!==null&&l.gd.setAttributeNS(null,"filter",c)),h&&(t.Ma!==null||t.areaBackground!==null||td(t,r))?(nd(t,!0),t.shadowVisible===null&&kr(e)):nd(t,!1),r=h,t.hh(e,i),u&&e.nh.pop(),e.o&&e.nh.pop(),h=e.Iv.hs,l=u?t.svg:e.yd,!u&&o!==null&&l!==o&&o.parentNode===t.panel.svg?(i=t.svg.getAttribute("filter"),i!==null&&l.setAttribute("filter",i),t.svg.replaceWith(l),t.svg=l,l!==null&&t.ap(e,n,f,l),WM(e,o),!0):(t.svg=l,h!==null&&l===null&&(od(e),e.nh.pop()),l===null||(t.ap(e,n,f,l),e.Il&&(i=i.computePixelRatio(),t.Fv(l,"drop-shadow("+e.shadowOffsetX/i+"px "+e.shadowOffsetY/i+"px "+e.shadowBlur/i/2+"px "+e.shadowColor+")")),r&&t.l&512&&Cr(e),t.Dd()&&kr(e),i=t.Dd()?t.opacity*e.globalAlpha:t.opacity,i!==1&&l.setAttributeNS(null,"opacity",i.toString()),t.filter!==""&&l.setAttributeNS(null,"filter",t.filter),t.Dd()?(o!==null&&l!==o&&o.parentNode===e.hi?(n=o.getAttribute("filter"),n!==null&&l.setAttribute("filter",n),o.replaceWith(l)):e.ui?e.ui.after(l):e.hi.prepend(l),e.ui=l):n!==null&&KM(t,n,l),h!==null&&h(t,l),_M(t,l)),!0)}function _M(t,e){e=e.dataset,t instanceof it&&(t.portId!==null&&(e.portId=t.portId),t instanceof z&&(isNaN(t.itemIndex)||(e.itemIndex=t.itemIndex.toString()),t instanceof ot&&(e.className=Go(t),t.key!==void 0&&(e.key=t.key.toString()),t instanceof V&&(t.fromNode!==null&&t.fromNode.key!==void 0&&(e.fromKey=t.fromNode.key.toString()),t.fromPortId!==""&&(e.fromPortId=t.fromPortId),t.toNode!==null&&t.toNode.key!==void 0&&(e.toKey=t.toNode.key.toString()),t.toPortId!==""&&(e.toPortId=t.toPortId)))))}s.ap=function(t,e,i,n){var r=(this.l&256)!==0;if(t.clipInsteadOfFill&&(r=!1),r){var o=e.se()?e.naturalBounds:e.actualBounds;e=Math.max(i.x,o.x),r=Math.max(i.y,o.y);var l=Math.min(i.right,o.right)-e;i=Math.min(i.bottom,o.bottom)-r,o=this.tb,o!==null&&(e=o.x,r=o.y,l=o.width,i=o.height),o=n.getAttribute("clip-path");var u=null;o!==null&&(u=t.svg.getElementById(o.split("#")[1].slice(0,-1))),u===null?(o="CLIP"+Zl++,u=t.Ud("clipPath",{id:o}),e=t.Ud("rect",{x:e,y:r,width:l,height:i}),this instanceof z&&(r=this.transform.copy().Uj(),e.setAttribute("transform","matrix("+r.m11+", "+r.m12+", "+r.m21+", "+r.m22+", "+r.dx+", "+r.dy+")")),u.appendChild(e),t.svg.appendChild(u),n.setAttributeNS(null,"clip-path","url(#"+o+")")):(t=u.firstElementChild,t.setAttribute("x",e.toString()),t.setAttribute("y",r.toString()),t.setAttribute("width",l.toString()),t.setAttribute("height",i.toString()))}else n.removeAttributeNS(null,"clip-path"),WM(t,n)};function WM(t,e){e=e.getAttribute("clip-path"),e!==null&&(t=t.svg.getElementById(e.split("#")[1].slice(0,-1)),t!==null&&t.remove())}function Nm(t){if(t.svg!==null){var e=t.svg.innerHTML.match(/url\(#((CLIP|GRAD).+?)\)/g),i=t.svg.ownerDocument;if(e!==null){e=d(e);for(var n=e.next();!n.done;n=e.next())n=i.getElementById(n.value.split("#")[1].slice(0,-1)),n!==null&&n.remove()}t.svg.remove()}}s.hh=function(){},s.nv=function(){this.Hc=!0},s.jk=function(t,e,i){if(e=this.svg,this.Hc)return this.nv(),this.Hc=!1,e===null||(i=this.svg.getAttribute("clip-path"),i!==null&&(t=t.svg.getElementById(i.split("#")[1].slice(0,-1)),t!==null&&t.remove())),!1;if(e===null)return!1;if(!this.visible)return e.remove(),!1;if(e.nodeName!=="g"&&i||e.nodeName==="g"&&!i)return!1;var n=this.transform,r=this instanceof z?qo(this):!1;if(!(this instanceof z&&r))if(this instanceof Ni){var o=this.ct;t.rb.ha=[n.m11,n.m12,n.m21,n.m22,n.dx,n.dy],o!==null&&QM(t,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]),i?e.lastElementChild.setAttributeNS(null,"transform",JM(t)):e.setAttributeNS(null,"transform",JM(t))}else if(!i||this instanceof z)e.setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")");else if(this instanceof yt){o=e.getElementsByTagName("path");for(var l=0;l<o.length;l++)o[l].setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")")}else(e.lastElementChild||e).setAttributeNS(null,"transform","matrix("+n.m11+", "+n.m12+", "+n.m21+", "+n.m22+", "+n.dx+", "+n.dy+")");return o=this.Dd()?this.opacity*t.globalAlpha:this.opacity,o===1?e.removeAttribute("opacity"):e.setAttributeNS(null,"opacity",o.toString()),t.rb.ha=[1,0,0,1,0,0],(this.areaBackground!==null||e.gd!==void 0)&&(o=e.gd,this.areaBackground===null?(e.gd.remove(),e.gd=void 0):(l=n.copy().Uj(),t.rb.ha=[l.m11,l.m12,l.m21,l.m22,l.dx,l.dy],Pm(this,t,this.naturalBounds,this.actualBounds),t.rb.ha=[1,0,0,1,0,0],e.gd?(l=e.gd.getAttribute("filter"),l!==null&&t.ad.setAttribute("filter",l),e.gd.replaceWith(t.ad)):e.prepend(t.ad),e.gd=t.ad),o&&sd(t,o)),(this.background!==null||e.Ma!==void 0)&&(o=e.Ma,this.background===null?(sd(t,e.Ma),e.Ma.remove(),e.Ma=void 0):((r||i&&!(this instanceof z))&&(t.rb.ha=[n.m11,n.m12,n.m21,n.m22,n.dx,n.dy]),ed(this,t,this.naturalBounds,this.actualBounds),e.Ma?(sd(t,e.Ma),i=e.Ma.getAttribute("filter"),i!==null&&t.ad.setAttribute("filter",i),e.Ma.replaceWith(t.ad)):e.prepend(t.ad),e.Ma=t.ad),o&&sd(t,o)),this.ap(t,this.panel,this.actualBounds,e),!0},s.mk=function(t){if(this.background!==null||this.areaBackground!==null)return!0;var e=(this.l&256)!==0;return t.clipInsteadOfFill&&(e=!1),!!e};function en(t,e,i,n,r,o,l){if(i!==null){var u=1,h=1;if(typeof i=="string")n?e.fillStyle=i:e.strokeStyle=i;else if(i.type===wo)n?e.fillStyle=i.color:e.strokeStyle=i.color;else{var f=t.kq();if(u=o.width,h=o.height,r?(u=l.width,h=l.height):n||(u+=f,h+=f),(o=e instanceof al)&&i.xe&&(i.type===gu||i.xk===u&&i.gt===h))var c=i.xe;else{var p=0,g=0,m=0,v=0,x=0,k=0;if(k=x=0,r?(x=l.x,k=l.y):n||(x-=f/2,k-=f/2),p=i.start.x*u+i.start.offsetX,g=i.start.y*h+i.start.offsetY,m=i.end.x*u+i.end.offsetX,v=i.end.y*h+i.end.offsetY,p+=x,m+=x,g+=k,v+=k,i.type===Wr)c=e.createLinearGradient(p,g,m,v);else if(i.type===rn)k=isNaN(i.endRadius)?Math.max(u,h)/2:i.endRadius,isNaN(i.startRadius)?(x=0,k=Math.max(u,h)/2):x=i.startRadius,c=e.createRadialGradient(p,g,x,m,v,k);else if(i.type===gu)try{c=e.createPattern(i.pattern,"repeat")}catch{c=null}if(i.type!==gu&&(r=i.colorStops,r!==null))for(r=r.iterator;r.next();)c.addColorStop(r.key,r.value);if(o&&(i.xe=c,c!==null&&(i.xk=u,i.gt=h),c===null&&i.type===gu&&i.xk!==-1)){i.xk=-1;var S=t.diagram;S!==null&&i.xk===-1&&G(function(){S.redraw()},600)}}n?e.fillStyle=c:e.strokeStyle=c}}}s.rg=function(t){if(t instanceof z)t:{if(this!==t&&t!==null)for(var e=this.panel;e!==null;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},s.Ed=function(){if(!this.visible)return!1;var t=this.panel;return t!==null?t.Ed():!0},s.If=function(){for(var t=this instanceof z?this:this.panel;t!==null&&t.isEnabled;)t=t.panel;return t===null};function id(t){if(t.l&2048){var e=t.Bb;if(e.reset(),!t.Jb.w()||!t.uc.w()){Ph(t,!1);return}if(e.translate(t.Jb.x-t.uc.x,t.Jb.y-t.uc.y),t.scale!==1||t.angle!==0){var i=t.naturalBounds;t.oo(e,i.x,i.y,i.width,i.height)}Ph(t,!1),Cs(t,!0)}t.l&4096&&(e=t.panel,e===null?(t.wh.set(t.Bb),t.Jk=t.scale,Cs(t,!1)):e.oe!==null&&(i=t.wh,i.reset(),e.se()?i.multiply(e.wh):e.panel!==null&&i.multiply(e.panel.wh),i.multiply(t.Bb),t.Jk=t.scale*e.Jk,Cs(t,!1)))}s.oo=function(t,e,i,n,r){if(this.Ca!==1&&t.scale(this.Ca),this.Lb!==0){var o=C.alloc();o.zi(e,i,n,r,Et),t.rotate(this.Lb,o.x,o.y),C.free(o)}},s.v=function(t){if(!Qo(this)){t===void 0&&(t=!1),pn(this,!0),ll(this,!0);var e=this.panel;e===null||t||e.v()}},s.Tj=function(){Qo(this)||(pn(this,!0),ll(this,!0))};function Ch(t){if(!Zn(t)){var e=t.panel;e!==null?e.v():t.Dd()&&(e=t.diagram,e!==null&&(e.De.add(t),t instanceof W&&t.Bd(),e.Rb())),ll(t,!0)}}s.Tk=function(){!(this.l&2048)&&(Ph(this,!0),Cs(this,!0))},s.Yu=function(){Cs(this,!0)},s.N=function(){var t=this.part;t!==null&&t.N()};function ar(t,e){var i=t.stretch,n=t.panel;return n!==null&&n.type===z.Table?xf(t,n.Gb(t.row),n.Fb(t.column),e):n!==null&&n.type===z.Auto&&n.Qb()===t?vo(t,oe,e):i===cn?n!==null?n.type===z.Spot&&n.Qb()===t?vo(t,oe,e):(i=n.defaultStretch,i===cn?vo(t,te,e):vo(t,i,e)):vo(t,te,e):vo(t,i,e)}function xf(t,e,i,n){var r=t.stretch;if(r!==cn)return vo(t,r,n);var o=r=null;switch(e.stretch){case Ue:o=!0;break;case oe:o=!0}switch(i.stretch){case Re:r=!0;break;case oe:r=!0}return e=t.panel.defaultStretch,r===null&&(r=e===Re||e===oe),o===null&&(o=e===Ue||e===oe),r===!0&&o===!0?vo(t,oe,n):r===!0?vo(t,Re,n):o===!0?vo(t,Ue,n):vo(t,te,n)}function vo(t,e,i){if(i)return e;if(e===te||(i=t.desiredSize,i.w()))return te;if(t=t.angle,!isNaN(i.width))if(t!==90&&t!==270){if(e===Re)return te;if(e===oe)return Ue}else{if(e===Ue)return te;if(e===oe)return Re}if(!isNaN(i.height))if(t!==90&&t!==270){if(e===Ue)return te;if(e===oe)return Re}else{if(e===Re)return te;if(e===oe)return Ue}return e}function nd(t,e){t.l=e?t.l|512:t.l&-513}function fu(t){return(t.l&1024)!==0}function Tm(t,e){t.l=e?t.l|1024:t.l&-1025}function Ph(t,e){t.l=e?t.l|2048:t.l&-2049}function Cs(t,e){t.l=e?t.l|4096:t.l&-4097}function Qo(t){return(t.l&8192)!==0}function pn(t,e){t.l=e?t.l|8192:t.l&-8193}function Zn(t){return(t.l&16384)!==0}function ll(t,e){t.l=e?t.l|16384:t.l&-16385}s.Gj=function(){this.svg=null},s.xi=function(t){this.Me=t,this.svg!==null&&this.svg.remove()},s.Cv=function(){},s.Bv=function(t){return this.pa=t,Ch(this),!0},s.nm=function(t,e){(this.pa.x!==t||this.pa.y!==e)&&(this.pa.h(t,e),this.Tk())},s.kq=function(){return 0};function ul(t){var e=t.part;if(e instanceof W&&(t.portId!==null||t===e.port)){var i=e.diagram;i===null||i.undoManager.isUndoingRedoing||US(e,t)}}function $M(t){var e=t.diagram;e===null||e.undoManager.isUndoingRedoing||(t instanceof z?t instanceof W?t.Bd():t.rm(t,function(i){ul(i)}):ul(t))}s.bind=function(t,e,i,n){var r=null;return typeof t=="string"?r=new se(t,e,i,n):r=t,r.xd=this,t=this.ih(),t!==null&&cS(t)&&O("Cannot add a Binding to a template that has already been copied: "+r),this.localBindings===null&&(this.localBindings=new q),this.localBindings.add(r),this},s.Ry=function(t,e,i,n){var r=null;return typeof t=="string"?r=new se(t,e,i,n):r=t,this.bind(r.dv())},s.Qy=function(t,e,i,n,r){var o=null;return typeof t=="string"?o=new se(t,e,i,n):o=t,this.bind(o.Xl(r))},s.Py=function(t,e,i,n){var r=null;return typeof t=="string"?r=new se(t,e,i,n):r=t,this.bind(r.Nx())},s.set=function(t){return Object.assign(this,t),this},s.Fu=function(t){return Lm(this,t),this},s.apply=function(t){return t(this),this},s.om=function(t){return df(this,t),this},s.vz=function(){return this.ih()},s.ih=function(){for(var t=this instanceof z?this:this.panel;t!==null;){if(t.allBindings!==null)return t;t=t.panel}return null},s.Lv=function(t){return t.xd=this,this.animationTriggers===null&&(this.animationTriggers=new ct),this.animationTriggers.add(t.propertyName,t),this};function dn(t,e){for(var i=1;i<arguments.length;++i);i=arguments;var n=null,r=null;if(typeof t=="function")r=t;else if(typeof t=="string"){var o=Nh.I(t);typeof o=="function"?(i=Qt(arguments),n=o(i),gt(n)||O('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):r=$.go[t]}if(n===null&&(r!=null&&r.constructor||O("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),n=new r),r=1,n instanceof j&&1<i.length){o=n;var l=i[1];(typeof l=="string"||l instanceof HTMLDivElement)&&(J0(o,l),r++)}for(;r<i.length;r++)o=i[r],o===void 0?O("Undefined value at argument "+r+" for object being constructed by GraphObject.make: "+n):Lm(n,o);return n}function Lm(t,e){if(typeof e=="string")if(t instanceof Ut)t.text=e;else if(t instanceof yt)t.figure=e;else if(t instanceof Ni)t.source=e;else if(t instanceof z)e=Qn.I(e),e!==null&&(t.type=e);else if(t instanceof jt){var i=Xn(jt,e);i!==null?t.type=i:O("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof H?(e=Xn(H,e),e!==null&&(t.type=e)):t instanceof Ft&&(e=Xn(Ft,e),e!==null&&(t.type=e));else if(e instanceof it)t instanceof z||O("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof ce){var n;e.isRow&&typeof t.getRowDefinition=="function"?n=t.getRowDefinition(e.index):e.isRow||typeof t.getColumnDefinition!="function"||(n=t.getColumnDefinition(e.index)),n instanceof ce?Sd(n,e):O("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof K)typeof t.qb=="function"&&t.qb(e);else if(e instanceof ye)t.type=e;else if(e instanceof se)t instanceof it||t instanceof ce?t.bind(e):O("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof Xr)t instanceof it?t.Lv(e):O("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof Ae)t instanceof H&&t.type===H.j?t.figures.add(e):O("A PathFigure can only be added to a Path Geometry, not to: "+t);else if(e instanceof Ft)t instanceof Ae?t.segments.add(e):O("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Kt)t instanceof j||t instanceof dt?t.layout=e:O("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(i=0;i<e.length;i++)Lm(t,e[i]);else if(typeof e=="object"&&e!==null)if(t instanceof jt){i=new Xe;for(var r in e)n=parseFloat(r),isNaN(n)?i[r]=e[r]:t.addColorStop(n,e[r]);df(t,i)}else if(t instanceof ce){e.row!==void 0?(r=e.row,(r==null||r===1/0||isNaN(r)||0>r)&&O("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+r),t.isRow=!0,t.index=r):e.column!==void 0&&(r=e.column,(r==null||r===1/0||isNaN(r)||0>r)&&O("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+r),t.isRow=!1,t.index=r),r=new Xe;for(i in e)i!=="row"&&i!=="column"&&(r[i]=e[i]);df(t,r)}else df(t,e);else O('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function Jo(t,e){Nh.add(t,e)}function rd(t,e,i){i===void 0&&(i=null);var n=t[1];if(typeof i=="function"?i(n):typeof n=="string")return t.splice(1,1),n;if(e===void 0)throw Error("no "+(typeof i=="function"?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}Y.Object.defineProperties(it.prototype,{bindingId:{get:function(){return this.A!==null?this.A.zp:-1},set:function(t){this.bindingId!==t&&(this.A===null&&(this.A=new cu),this.A.zp=t)}},localBindings:{get:function(){return this.A!==null?this.A.te:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new cu),this.A.te=t)}},srcBindings:{get:function(){return this.A!==null?this.A.xm:null},set:function(t){this.srcBindings!==t&&(this.A===null&&(this.A=new cu),this.A.xm=t)}},shadowVisible:{get:function(){return this.A!==null?this.A.Di:null},set:function(t){var e=this.shadowVisible;e!==t&&(Me(this),this.A.Di=t,this.Hc=!0,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return this.A!==null?this.A.Ib:null},set:function(t){var e=this.enabledChanged;e!==t&&(Me(this),this.A.Ib=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Ua!==null?this.Ua.rr:Ye},set:function(t){var e=this.segmentOrientation;e!==t&&(this.Ua===null&&(this.Ua=new Ps),this.Ua.rr=t,this.v(),this.g("segmentOrientation",e,t),t===Ye&&(this.angle=0))}},segmentIndex:{get:function(){return this.Ua!==null?this.Ua.u:-1/0},set:function(t){t=Math.round(t);var e=this.segmentIndex;e!==t&&(this.Ua===null&&(this.Ua=new Ps),this.Ua.u=t,this.v(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Ua!==null?this.Ua.o:0},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.segmentFraction;e!==t&&(this.Ua===null&&(this.Ua=new Ps),this.Ua.o=t,this.v(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Ua!==null?this.Ua.F:co},set:function(t){var e=this.segmentOffset;e.D(t)||(t=t.J(),this.Ua===null&&(this.Ua=new Ps),this.Ua.F=t,this.v(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.A!==null?this.A.hg:cn},set:function(t){var e=this.stretch;e!==t&&(Me(this),this.A.hg=t,this.v(),this.g("stretch",e,t))}},name:{get:function(){return this.A!==null?this.A.xa:""},set:function(t){var e=this.name;e!==t&&(Me(this),this.A.xa=t,this.part!==null&&(this.part.Rh=null),this.g("name",e,t))}},opacity:{get:function(){return this.pb},set:function(t){var e=this.pb;e!==t&&((0>t||1<t)&&at(t,"0 <= value <= 1",it,"opacity"),this.pb=t,this.g("opacity",e,t),t=this.diagram,e=this.part,t!==null&&e!==null&&t.N(dl(e,e.actualBounds)))}},filter:{get:function(){return this.cn},set:function(t){var e=this.cn;e!==t&&(this.cn=t,this.Hc=!0,this.g("filter",e,t),t=this.diagram,e=this.part,t!==null&&e!==null&&t.N(dl(e,e.actualBounds)))}},visible:{get:function(){return(this.l&1)!==0},set:function(t){var e=(this.l&1)!==0;e!==t&&(this.l^=1,this.g("visible",e,t),e=this.panel,e!==null?e.v():this.Dd()&&this.bc(t),this.N(),$M(this))}},pickable:{get:function(){return(this.l&2)!==0},set:function(t){var e=(this.l&2)!==0;e!==t&&(this.l^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return(this.l&4)!==0},set:function(t){var e=(this.l&4)!==0;e!==t&&(this.l^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return(this.l&8)!==0},set:function(t){var e=(this.l&8)!==0;e!==t&&(this.l^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return(this.l&16)!==0},set:function(t){var e=(this.l&16)!==0;e!==t&&(this.l^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return(this.l&32)!==0},set:function(t){var e=(this.l&32)!==0;e!==t&&(this.l^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return(this.l&64)!==0},set:function(t){var e=(this.l&64)!==0;e!==t&&(this.l^=64,this.v(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return(this.l&128)!==0},set:function(t){var e=(this.l&128)!==0;e!==t&&(this.l^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.A!==null?this.A.gd:null},set:function(t){var e=this.areaBackground;e!==t&&(t!==null&&du(t,"GraphObject.areaBackground"),t instanceof jt&&t.freeze(),Me(this),this.A.gd=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(t!==null&&du(t,"GraphObject.background"),t instanceof jt&&t.freeze(),this.Ma=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.Dd())return this;if(this.Ng!==null)return this.Ng;var t;for(t=this.panel;t;){if(t instanceof ot)return this.Ng=t;t=t.panel}return null}},svg:{get:function(){return this.V},set:function(t){this.V=t}},panel:{get:function(){return this.Me}},layer:{get:function(){var t=this.part;return t!==null?t.layer:null}},diagram:{get:function(){var t=this.part;return t!==null?t.diagram:null}},position:{get:function(){return this.pa},set:function(t){var e=t.x,i=t.y,n=this.pa,r=n.x;n=n.y,(r===e||isNaN(r)&&isNaN(e))&&(n===i||isNaN(n)&&isNaN(i))?this.Cv():(t=t.copy(),this.Bv(t,r,n)&&this.g("position",new C(r,n),t))}},actualBounds:{get:function(){return this.Jb}},scale:{get:function(){return this.Ca},set:function(t){var e=this.Ca;e!==t&&(0>=t&&O("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.Ca=t,this.v(),this.g("scale",e,t))}},angle:{get:function(){return this.Lb},set:function(t){var e=this.Lb;e!==t&&(t%=360,0>t&&(t+=360),e!==t&&(this.Lb=t,$M(this),this.v(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.jd},set:function(t){var e=t.width,i=t.height,n=this.jd,r=n.width,o=n.height;(r===e||isNaN(r)&&isNaN(e))&&(o===i||isNaN(o)&&isNaN(i))||(this.jd=t=t.J(),this.v(),this instanceof yt&&this.rc(),this.g("desiredSize",n,t),fu(this)&&(t=this.part,t!==null&&(sl(this,t,"width"),sl(this,t,"height"))))}},width:{get:function(){return this.jd.width},set:function(t){var e=this.jd.width;e===t||isNaN(e)&&isNaN(t)||(e=this.jd,this.jd=t=new ht(t,this.jd.height).freeze(),this.v(),this instanceof yt&&this.rc(),this.g("desiredSize",e,t),fu(this)&&(t=this.part,t!==null&&sl(this,t,"width")))}},height:{get:function(){return this.jd.height},set:function(t){var e=this.jd.height;e===t||isNaN(e)&&isNaN(t)||(e=this.jd,this.jd=t=new ht(this.jd.width,t).freeze(),this.v(),this instanceof yt&&this.rc(),this.g("desiredSize",e,t),fu(this)&&(t=this.part,t!==null&&sl(this,t,"height")))}},minSize:{get:function(){return this.A!==null?this.A.u:Ql},set:function(t){var e=this.minSize;e.D(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),Me(this),this.A.u=t,this.v(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.A!==null?this.A.o:f0},set:function(t){var e=this.maxSize;e.D(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),Me(this),this.A.o=t,this.v(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.uc}},naturalBounds:{get:function(){return this.fc}},margin:{get:function(){return this.Kg},set:function(t){typeof t=="number"&&(t=new Dt(t));var e=this.Kg;e.D(t)||(this.Kg=t=t.J(),this.v(),this.g("margin",e,t))}},transform:{get:function(){return this.l&2048&&id(this),this.Bb}},oe:{get:function(){return this.l&4096&&id(this),this.wh}},animationTriggers:{get:function(){return this.A!==null?this.A.hb:null},set:function(t){this.animationTriggers!==t&&(Me(this),this.A.hb=t)}},reshapingBehavior:{get:function(){return this.A!==null?this.A.Pf:te},set:function(t){this.reshapingBehavior!==t&&(Me(this),this.A.Pf=t)}},alignment:{get:function(){return this.Kb},set:function(t){var e=this.Kb;e.D(t)||(t.Nc()&&!t.$b()&&O("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.Kb=t=t.J(),Ch(this),this.g("alignment",e,t))}},column:{get:function(){return this.Ag},set:function(t){t=Math.round(t);var e=this.Ag;e!==t&&(0>t&&at(t,">= 0",it,"column"),this.Ag=t,this.v(),this.g("column",e,t),this.svg!==null&&this.svg.remove())}},columnSpan:{get:function(){return this.A!==null?this.A.ob:1},set:function(t){t=Math.round(t);var e=this.columnSpan;e!==t&&(1>t&&at(t,">= 1",it,"columnSpan"),Me(this),this.A.ob=t,this.v(),this.g("columnSpan",e,t))}},row:{get:function(){return this.jo},set:function(t){t=Math.round(t);var e=this.jo;e!==t&&(0>t&&at(t,">= 0",it,"row"),this.jo=t,this.v(),this.g("row",e,t),this.svg!==null&&this.svg.remove())}},rowSpan:{get:function(){return this.A!==null?this.A.Ci:1},set:function(t){t=Math.round(t);var e=this.rowSpan;e!==t&&(1>t&&at(t,">= 1",it,"rowSpan"),Me(this),this.A.Ci=t,this.v(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.A!==null?this.A.Ei:null},set:function(t){var e=this.spanAllocation;e!==t&&(Me(this),this.A.Ei=t,this.v(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.rk},set:function(t){var e=this.rk;e.D(t)||(this.rk=t=t.J(),this.v(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Zn},set:function(t){var e=this.Zn;if(e!==t){var i=this.part;i===null||i instanceof W||O("Cannot set portID on a Link: "+t),e!==null&&i!==null&&dv(i,this),this.Zn=t,t!==null&&i!==null&&(i.Te=!0,HS(i,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return this.ba!==null?this.ba.zj:Ke},set:function(t){var e=this.toSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.zj=t,this.g("toSpot",e,t),ul(this))}},toEndSegmentLength:{get:function(){return this.ba!==null?this.ba.xj:10},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&at(t,">= 0",it,"toEndSegmentLength"),this.Xc(),this.ba.xj=t,this.g("toEndSegmentLength",e,t),ul(this))}},toShortLength:{get:function(){return this.ba!==null?this.ba.yj:0},set:function(t){var e=this.toShortLength;e!==t&&(this.Xc(),this.ba.yj=t,this.g("toShortLength",e,t),ul(this))}},toLinkable:{get:function(){return this.ba!==null?this.ba.Tr:null},set:function(t){var e=this.toLinkable;e!==t&&(this.Xc(),this.ba.Tr=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return this.ba!==null?this.ba.Ur:1/0},set:function(t){var e=this.toMaxLinks;e!==t&&(0>t&&at(t,">= 0",it,"toMaxLinks"),this.Xc(),this.ba.Ur=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return this.ba!==null?this.ba.Yi:Ke},set:function(t){var e=this.fromSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.Yi=t,this.g("fromSpot",e,t),ul(this))}},fromEndSegmentLength:{get:function(){return this.ba!==null?this.ba.Wi:10},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&at(t,">= 0",it,"fromEndSegmentLength"),this.Xc(),this.ba.Wi=t,this.g("fromEndSegmentLength",e,t),ul(this))}},fromShortLength:{get:function(){return this.ba!==null?this.ba.Xi:0},set:function(t){var e=this.fromShortLength;e!==t&&(this.Xc(),this.ba.Xi=t,this.g("fromShortLength",e,t),ul(this))}},fromLinkable:{get:function(){return this.ba!==null?this.ba.hq:null},set:function(t){var e=this.fromLinkable;e!==t&&(this.Xc(),this.ba.hq=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return this.ba!==null?this.ba.iq:1/0},set:function(t){var e=this.fromMaxLinks;e!==t&&(0>t&&at(t,">= 0",it,"fromMaxLinks"),this.Xc(),this.ba.iq=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.A!==null?this.A.j:""},set:function(t){var e=this.cursor;e!==t&&(Me(this),this.A.j=t,this.g("cursor",e,t))}},click:{get:function(){return this.A!==null?this.A.zh:null},set:function(t){var e=this.click;e!==t&&(Me(this),this.A.zh=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.A!==null?this.A.Fh:null},set:function(t){var e=this.doubleClick;e!==t&&(Me(this),this.A.Fh=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.A!==null?this.A.Bh:null},set:function(t){var e=this.contextClick;e!==t&&(Me(this),this.A.Bh=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return this.A!==null?this.A.Mh:null},set:function(t){var e=this.mouseEnter;e!==t&&(Me(this),this.A.Mh=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.A!==null?this.A.Ph:null},set:function(t){var e=this.mouseLeave;e!==t&&(Me(this),this.A.Ph=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return this.A!==null?this.A.Qh:null},set:function(t){var e=this.mouseOver;e!==t&&(Me(this),this.A.Qh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.A!==null?this.A.Oh:null},set:function(t){var e=this.mouseHover;e!==t&&(Me(this),this.A.Oh=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.A!==null?this.A.Nh:null},set:function(t){var e=this.mouseHold;e!==t&&(Me(this),this.A.Nh=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return this.A!==null?this.A.Of:null},set:function(t){var e=this.mouseDragEnter;e!==t&&(Me(this),this.A.Of=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return this.A!==null?this.A.Xd:null},set:function(t){var e=this.mouseDragLeave;e!==t&&(Me(this),this.A.Xd=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return this.A!==null?this.A.Lh:null},set:function(t){var e=this.mouseDrop;e!==t&&(Me(this),this.A.Lh=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return this.A!==null?this.A.V:null},set:function(t){var e=this.actionDown;e!==t&&(Me(this),this.A.V=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return this.A!==null?this.A.ia:null},set:function(t){var e=this.actionMove;e!==t&&(Me(this),this.A.ia=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return this.A!==null?this.A.Ha:null},set:function(t){var e=this.actionUp;e!==t&&(Me(this),this.A.Ha=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return this.A!==null?this.A.F:null},set:function(t){var e=this.actionCancel;e!==t&&(Me(this),this.A.F=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return this.A!==null?this.A.$h:null},set:function(t){var e=this.toolTip;e!==t&&(Me(this),this.A.$h=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.A!==null?this.A.Ch:null},set:function(t){var e=this.contextMenu;e!==t&&(Me(this),this.A.Ch=t,this.g("contextMenu",e,t))}}}),it.prototype.trigger=it.prototype.Lv,it.prototype.findBindingPanel=it.prototype.ih,it.prototype.findTemplateBinder=it.prototype.vz,it.prototype.setProperties=it.prototype.om,it.prototype.apply=it.prototype.apply,it.prototype.attach=it.prototype.Fu,it.prototype.set=it.prototype.set,it.prototype.bindModel=it.prototype.Py,it.prototype.bindObject=it.prototype.Qy,it.prototype.bindTwoWay=it.prototype.Ry,it.prototype.isEnabledObject=it.prototype.If,it.prototype.isVisibleObject=it.prototype.Ed,it.prototype.isContainedBy=it.prototype.rg,it.prototype.getNearestIntersectionPoint=it.prototype.rs,it.prototype.getLocalPoint=it.prototype.qs,it.prototype.getDocumentScale=it.prototype.Df,it.prototype.getDocumentAngle=it.prototype.mi,it.prototype.getDocumentBounds=it.prototype.ni,it.prototype.getDocumentPoint=it.prototype.ga,it.prototype.intersectsRect=it.prototype.Yc,it.prototype.containedInRect=it.prototype.fh,it.prototype.containsRect=it.prototype.Re,it.prototype.containsPoint=it.prototype.ca,it.prototype.raiseChanged=it.prototype.g,it.prototype.raiseChangedEvent=it.prototype.cb,it.prototype.addCopyProperty=it.prototype.Xw;var Nh=null;it.className="GraphObject",Nh=new ct,Jo("Button",function(){function t(i,n){return i.diagram.kc(i.documentPoint,function(r){for(;r.panel!==null&&!r.isActionable;)r=r.panel;return r},function(r){return r===n})!==null}var e=dn(z,z.Auto,{isActionable:!0,enabledChanged:function(i,n){if(i instanceof z){var r=i.fb("ButtonBorder");r!==null&&(r.fill=n?i._buttonFillNormal:i._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},dn(yt,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new lt(0,0,2.76142374915397,2.761423749153969),spot2:new lt(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(i,n){if(n.If()&&n instanceof z&&(i=n.fb("ButtonBorder"),i instanceof yt)){var r=n._buttonFillOver;n._buttonFillNormal=i.fill,i.fill=r,r=n._buttonStrokeOver,n._buttonStrokeNormal=i.stroke,i.stroke=r}},e.mouseLeave=function(i,n){n.If()&&n instanceof z&&(i=n.fb("ButtonBorder"),i instanceof yt&&(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal))},e.actionDown=function(i,n){if(n.If()&&n instanceof z&&n._buttonFillPressed!==null&&i.button===0){var r=n.fb("ButtonBorder");if(r instanceof yt){i=i.diagram;var o=i.skipsUndoManager;i.skipsUndoManager=!0;var l=n._buttonFillPressed;n._buttonFillOver=r.fill,r.fill=l,l=n._buttonStrokePressed,n._buttonStrokeOver=r.stroke,r.stroke=l,i.skipsUndoManager=o}}},e.actionUp=function(i,n){if(n.If()&&n instanceof z&&n._buttonFillPressed!==null&&i.button===0){var r=n.fb("ButtonBorder");if(r instanceof yt){var o=i.diagram,l=o.skipsUndoManager;o.skipsUndoManager=!0,t(i,n)?(r.fill=n._buttonFillOver,r.stroke=n._buttonStrokeOver):(r.fill=n._buttonFillNormal,r.stroke=n._buttonStrokeNormal),o.skipsUndoManager=l}}},e.actionCancel=function(i,n){if(n.If()&&n instanceof z&&n._buttonFillPressed!==null){var r=n.fb("ButtonBorder");if(r instanceof yt){var o=i.diagram,l=o.skipsUndoManager;o.skipsUndoManager=!0,t(i,n)?(r.fill=n._buttonFillOver,r.stroke=n._buttonStrokeOver):(r.fill=n._buttonFillNormal,r.stroke=n._buttonStrokeNormal),o.skipsUndoManager=l}}},e.actionMove=function(i,n){if(n.If()&&n instanceof z&&n._buttonFillPressed!==null){var r=i.diagram;if(r.firstInput.button===0&&(r.currentTool.standardMouseOver(),t(i,n)&&(i=n.fb("ButtonBorder"),i instanceof yt))){var o=r.skipsUndoManager;r.skipsUndoManager=!0;var l=n._buttonFillPressed;i.fill!==l&&(i.fill=l),l=n._buttonStrokePressed,i.stroke!==l&&(i.stroke=l),r.skipsUndoManager=o}}},e}),Jo("TreeExpanderButton",function(){var t=dn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},dn(yt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Jl},new se("figure","isTreeExpanded",function(e,i){return i=i.panel,e?i._treeExpandedFigure:i._treeCollapsedFigure}).Xl()),{visible:!1},new se("visible","isTreeLeaf",function(e){return!e}).Xl());return t.click=function(e,i){if(i=i.part,i instanceof Nt&&(i=i.adornedPart),i instanceof W){var n=i.diagram;if(n!==null){if(n=n.commandHandler,i.isTreeExpanded){if(!n.canCollapseTree(i))return}else if(!n.canExpandTree(i))return;e.handled=!0,i.isTreeExpanded?n.collapseTree(i):n.expandTree(i)}}},t}),Jo("SubGraphExpanderButton",function(){var t=dn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},dn(yt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Jl},new se("figure","isSubGraphExpanded",function(e,i){return i=i.panel,e?i._subGraphExpandedFigure:i._subGraphCollapsedFigure}).Xl()));return t.click=function(e,i){if(i=i.part,i instanceof Nt&&(i=i.adornedPart),i instanceof dt){var n=i.diagram;if(n!==null){if(n=n.commandHandler,i.isSubGraphExpanded){if(!n.canCollapseSubGraph(i))return}else if(!n.canExpandSubGraph(i))return;e.handled=!0,i.isSubGraphExpanded?n.collapseSubGraph(i):n.expandSubGraph(i)}}},t}),Jo("ToolTip",function(){return dn(Nt,z.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new C(0,3),shadowBlur:5},dn(yt,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new lt(0,0,4,6),spot2:new lt(1,1,-4,-4)}))}),Jo("ContextMenu",function(){return dn(Nt,z.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new C(0,3),shadowBlur:5},new se("background","",function(t){return t.adornedPart!==null&&t.placeholder!==null?null:"#F5F5F5"}))}),Jo("ContextMenuButton",function(){var t=dn("Button");t.stretch=Re;var e=t.fb("ButtonBorder");return e instanceof yt&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new lt(0,0,2,3),e.spot2=new lt(1,1,-2,-2)),t}),Jo("PanelExpanderButton",function(t){var e=rd(t,"COLLAPSIBLE"),i=dn("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},dn(yt,{name:"ButtonIcon",strokeWidth:2},new se("geometryString","visible",function(n){return n?i._buttonExpandedFigure:i._buttonCollapsedFigure}).Xl(e)));return t=i.fb("ButtonBorder"),t instanceof yt&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),i.click=function(n,r){var o=r.diagram;if(o!==null&&!o.isReadOnly){var l=r.ih();l===null&&(l=r.part),l!==null&&(r=l.fb(e),r!==null&&(n.handled=!0,o.Ea("Collapse/Expand Panel"),r.visible=!r.visible,o.eb("Collapse/Expand Panel")))}},i}),Jo("CheckBoxButton",function(t){var e=rd(t);return t=dn("Button",{desiredSize:new ht(14,14)},dn(yt,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:oe,geometryStretch:Fn,visible:!1},e!==""?new se("visible",e).dv():[])),t.click=function(i,n){if(n instanceof z){var r=i.diagram;if(!(r===null||r.isReadOnly||e!==""&&r.model.isReadOnly)){i.handled=!0;var o=n.fb("ButtonIcon");r.Ea("checkbox"),o.visible=!o.visible,typeof n._doClick=="function"&&n._doClick(i,n),r.eb("checkbox")}}},t}),Jo("CheckBox",function(t){t=rd(t),t=dn("CheckBoxButton",t,{name:"Button",isActionable:!1,margin:new Dt(0,1,0,0)});var e=dn(z,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:new Dt(1),_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),it.None=te=new K(it,"None",0),it.Default=cn=new K(it,"Default",0),it.Vertical=Ue=new K(it,"Vertical",4),it.Horizontal=Re=new K(it,"Horizontal",5),it.Fill=oe=new K(it,"Fill",3),it.Uniform=Fn=new K(it,"Uniform",1),it.UniformToFill=au=new K(it,"UniformToFill",2),it.FlipVertical=Mh=new K(it,"FlipVertical",1),it.FlipHorizontal=Sh=new K(it,"FlipHorizontal",2),it.FlipBoth=kh=new K(it,"FlipBoth",3),it.make=dn,it.getBuilders=function(){var t=new ct,e;for(e in Nh)if(e!==e.toLowerCase()){var i=Nh.I(e);typeof i=="function"&&t.add(e,i)}return t.freeze(),t},it.defineBuilder=Jo,it.build=function(t,e,i){for(var n=[],r=2;r<arguments.length;++r)n[r-2]=arguments[r];if(r=Nh.I(t),typeof r=="function"&&(n=r([t].concat(n)),n instanceof it))return e&&n.set(e),n;O('GraphObject.build invoked object builder "'+t+'", but it did not return an Object')},it.takeBuilderArgument=rd;function cu(){this.pc=!1,this.xa="",this.zp=-1,this.nb=this.xm=this.te=null,this.j="",this.hb=this.Ei=this.Ib=this.Ch=this.$h=this.F=this.Ha=this.ia=this.V=this.Lh=this.Xd=this.Of=this.Nh=this.Oh=this.Qh=this.Ph=this.Mh=this.Bh=this.Fh=this.zh=null,this.u=Ql,this.o=f0,this.hg=cn,this.ob=this.Ci=1,this.Pf=te,this.Qc=this.Di=this.gd=null,this.Pc="category"}cu.prototype.copy=function(){var t=new cu;return t.xa=this.xa,t.zp=this.zp,t.te=this.te,t.nb=this.nb,t.j=this.j,t.zh=this.zh,t.Fh=this.Fh,t.Bh=this.Bh,t.Mh=this.Mh,t.Ph=this.Ph,t.Qh=this.Qh,t.Oh=this.Oh,t.Nh=this.Nh,t.Of=this.Of,t.Xd=this.Xd,t.Lh=this.Lh,t.V=this.V,t.ia=this.ia,t.Ha=this.Ha,t.F=this.F,t.$h=this.$h,t.Ch=this.Ch,t.Ib=this.Ib,t.Ei=this.Ei,t.hb=this.hb,t.u=this.u.J(),t.o=this.o.J(),t.hg=this.hg,t.Ci=this.Ci,t.ob=this.ob,t.Pf=this.Pf,t.gd=this.gd,t.Di=this.Di,t.Qc=this.Qc,t.Pc=this.Pc,t};function Ps(){this.u=-1/0,this.o=0,this.F=co,this.rr=Ye,this.j=this.V="None"}Ps.prototype.copy=function(){var t=new Ps;return t.u=this.u,t.o=this.o,t.F=this.F.J(),t.rr=this.rr,t.V=this.V,t.j=this.j,t},Ps.className="LinkElementSettings";function wf(){this.zj=this.Yi=_e,this.yj=this.Xi=this.xj=this.Wi=NaN,this.Tr=this.hq=null,this.Ur=this.iq=1/0}wf.prototype.copy=function(){var t=new wf;return t.Yi=this.Yi.J(),t.zj=this.zj.J(),t.Wi=this.Wi,t.xj=this.xj,t.Xi=this.Xi,t.yj=this.yj,t.hq=this.hq,t.Tr=this.Tr,t.iq=this.iq,t.Ur=this.Ur,t},wf.className="LinkSettings";function hl(){this.ha=[1,0,0,1,0,0]}hl.prototype.copy=function(){var t=new hl;return t.ha[0]=this.ha[0],t.ha[1]=this.ha[1],t.ha[2]=this.ha[2],t.ha[3]=this.ha[3],t.ha[4]=this.ha[4],t.ha[5]=this.ha[5],t},hl.prototype.translate=function(t,e){this.ha[4]+=this.ha[0]*t+this.ha[2]*e,this.ha[5]+=this.ha[1]*t+this.ha[3]*e},hl.prototype.scale=function(t,e){this.ha[0]*=t,this.ha[1]*=t,this.ha[2]*=e,this.ha[3]*=e},hl.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),t!==0){if(this.translate(e,i),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var r=this.ha[1]*t+this.ha[3]*n,o=this.ha[0]*-n+this.ha[2]*t,l=this.ha[1]*-n+this.ha[3]*t;this.ha[0]=this.ha[0]*t+this.ha[2]*n,this.ha[1]=r,this.ha[2]=o,this.ha[3]=l,this.translate(-e,-i)}},hl.className="STransform";function pu(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.ix=[],this.pattern=null}pu.prototype.addColorStop=function(t,e){this.ix.push({offset:t,color:e})},pu.className="SGradient";function Sr(t,e,i){this.ownerDocument=t=e===void 0?$.document:e,this.hA="http://www.w3.org/2000/svg",t!==void 0&&(this.Oa=this.Ud("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.style.display="block",this.style.letterSpacing="normal",this.style.wordSpacing="normal",this.style.position="absolute",this.Oa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Oa.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.hs=null,this.context=new Vi(this,i)}Sr.prototype.resize=function(t,e,i,n){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",this.Oa.setAttributeNS(null,"width",i+"px"),this.Oa.setAttributeNS(null,"height",n+"px"),this.Oa.setAttributeNS(null,"viewBox","0 0 "+i+" "+n),this.context.yw.firstElementChild.setAttributeNS(null,"width",i+"px"),this.context.yw.firstElementChild.setAttributeNS(null,"height",n+"px"),!0):!1},Sr.prototype.Ud=function(t,e,i){if(t=this.ownerDocument.createElementNS(this.hA,t),gt(e))for(var n in e)t.setAttributeNS(n==="href"?"http://www.w3.org/1999/xlink":"",n,e[n]);return i!==void 0&&(t.textContent=i),t},Sr.prototype.getBoundingClientRect=function(){return this.Oa.getBoundingClientRect()},Sr.prototype.focus=function(){this.Oa.focus()},Sr.prototype.ox=function(){this.ownerDocument=null},Y.Object.defineProperties(Sr.prototype,{width:{get:function(){return this.Oa.width.baseVal.value},set:function(t){this.Oa.setAttribute("width",t+"px")}},height:{get:function(){return this.Oa.height.baseVal.value},set:function(t){this.Oa.setAttribute("height",t+"px")}},style:{get:function(){return this.Oa.style}}}),Sr.className="SVGSurface";function Vi(t,e){this.Iv=t,this.svg=t.Oa,this.stack=[],this.nh=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.Il=!1,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Vg=this.Br=this.Ar=0,this.yd=this.ad=null,this.path=[],this.Zl={},this.Dt=!1,this.Yg=null,this.vj=0,this.rb=new hl,this.j=od(this),this.hi=od(this,"gojs-diagram"),this.Hl=this.ui=null;var i=Zl++,n=this.Ud("clipPath",{id:"mainClip"+i});n.appendChild(this.Ud("rect",{x:0,y:0,width:t.width,height:t.height})),this.yw=n,this.svg.appendChild(this.j),this.j.appendChild(this.hi),this.svg.appendChild(n),this.j.setAttributeNS(null,"clip-path","url(#mainClip"+i+")"),this.iA={},this.isTemporary=!!e,this.filter="",this.ak=null}function ZM(t,e,i,n,r,o,l){t.hi===void 0?Mf(t,e,i,n,r,o,l):t.hi.setAttribute("transform","matrix("+e+", "+i+", "+n+", "+r+", "+o+", "+l+")")}s=Vi.prototype,s.arc=function(t,e,i,n,r,o,l,u){var h=2*Math.PI,f=h-1e-6,c=i*Math.cos(n),p=i*Math.sin(n),g=t+c,m=e+p,v=o?0:1;n=o?n-r:r-n,(1e-6<Math.abs(l-g)||1e-6<Math.abs(u-m))&&this.path.push(["L",g,+m]),0>n&&(n=n%h+h),n>f?(this.path.push(["A",i,i,0,1,v,t-c,e-p]),this.path.push(["A",i,i,0,1,v,g,m])):1e-6<n&&this.path.push(["A",i,i,0,+(n>=Math.PI),v,t+i*Math.cos(r),e+i*Math.sin(r)])},s.beginPath=function(){this.path=[],this.Zl={stroke:"none",fill:"none"}},s.Se=function(t){this.addPath(this.path,this.rb,t||0)},s.bezierCurveTo=function(t,e,i,n,r,o){this.path.push(["C",t,e,i,n,r,o])},s.clearRect=function(){},s.clip=function(){this.Zl.clipPath=!0},s.closePath=function(){this.path.push(["z"])},s.createLinearGradient=function(t,e,i,n){var r=new pu("linear");return r.x1=t,r.y1=e,r.x2=i,r.y2=n,r},s.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var i=this.iA;if(i[e])return"url(#"+i[e]+")";var n="PATTERN"+Zl++,r={x:0,y:0,width:t.width,height:t.height,href:e};return t=this.Ud("pattern",{width:t.width,height:t.height,id:n,patternUnits:"userSpaceOnUse"}),t.appendChild(this.Ud(vh,r)),this.svg.appendChild(t),i[e]=n,"url(#"+n+")"},s.createRadialGradient=function(t,e,i,n,r,o){var l=new pu("radial");return l.x1=t,l.y1=e,l.r1=i,l.x2=n,l.y2=r,l.r2=o,l};function QM(t,e,i,n,r,o,l,u,h){n=u/n,r=h/r,o===0&&l===0||t.rb.translate(o,l),n===1&&r===1||t.rb.scale(n,r),e===0&&i===0||t.rb.translate(-e,-i)}s.drawImage=function(t,e,i,n,r,o,l,u,h){var f="";t instanceof HTMLCanvasElement&&(f=t.toDataURL()),t instanceof HTMLImageElement&&(f=t.getAttribute("src"));var c=t instanceof HTMLImageElement?t.naturalWidth:t.width;t=t instanceof HTMLImageElement?t.naturalHeight:t.height,n===void 0&&(o=e,l=i,u=n=c,h=r=t),n=n||0,r=r||0,u=u||0,h=h||0,QM(this,e,i,n,r,o||0,l||0,u,h),o={x:0,y:0,width:c||n,height:t||r,href:f},A.$(n,u)&&A.$(r,h)?f.toLowerCase().indexOf(".svg")===-1&&f.toLowerCase().indexOf("data:image/svg")===-1&&(o.preserveAspectRatio="xMidYMid slice"):o.preserveAspectRatio="none",(e!==0||i!==0||n!==c||r!==t)&&(n+=e,r+=i,o["clip-path"]="path('M "+e+","+i+" L "+n+" "+i+" L "+n+" "+r+" L "+e+" "+r+" z')"),Th(this,vh,o,this.rb),this.addElement(vh,o)},s.fill=function(t){t&&(this.Zl["fill-rule"]="evenodd"),Fm(this,this.Zl)},s.ng=function(t,e){this.clipInsteadOfFill?this.clip():this.fill(e)},s.fillRect=function(t,e,i,n){t=[t,e,i,n],t={x:t[0],y:t[1],width:t[2],height:t[3]},Th(this,"fill",t,this.rb),this.addElement("rect",t)},s.qx=function(t,e,i,n){t={x:t,y:e,width:i,height:n},Th(this,"fill",t,this.rb),Fm(this,t),this.svg.prepend(this.Ud("rect",t))},s.fillText=function(t,e,i){t=[t,e,i],e=this.textAlign,e==="left"?e="start":e==="right"?e="end":e==="center"&&(e="middle"),e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},Th(this,"fill",e,this.rb),this.addElement("text",e,t[0])},s.lineTo=function(t,e){this.path.push(["L",t,e])},s.moveTo=function(t,e){this.path.push(["M",t,e])},s.quadraticCurveTo=function(t,e,i,n){this.path.push(["Q",t,e,i,n])},s.rect=function(t,e,i,n){this.path.push(["M",t,e],["L",t+i,e],["L",t+i,e+n],["L",t,e+n],["z"])},s.restore=function(){this.rb=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign,this.ak=t.ak},s.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign,ak:this.ak});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.rb.copy())},s.setTransform=function(t,e,i,n,r,o){t===1&&e===0&&i===0&&n===1&&r===0&&o===0||Mf(this,t,e,i,n,r,o)};function JM(t){return t=t.rb.ha,"matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}s.scale=function(t,e){this.rb.scale(t,e)},s.translate=function(t,e){this.rb.translate(t,e)},s.transform=function(){},s.yc=function(){},s.stroke=function(){bM(this,this.Zl)},s.ik=function(){this.clipInsteadOfFill||this.stroke()},s.Ud=function(t,e,i){return this.Iv.Ud(t,e,i)},s.addElement=function(t,e,i){return t=this.Ud(t,e,i),this.yd!==null?this.yd.appendChild(t):this.yd=t,this.ad=t};function Th(t,e,i,n){e==="fill"?Fm(t,i):e==="stroke"&&bM(t,i),n!==null&&(t=n.ha,i.transform="matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")")}function Fm(t,e){t.fillStyle instanceof pu?e.fill=Am(t,t.fillStyle,!0):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",e["fill-opacity"]=t[4]):e.fill=t.fillStyle}function qM(t,e,i){i=i?"fill":"stroke",t.fillStyle instanceof pu?e.setAttributeNS(null,"fill",Am(t,t.fillStyle,!0)):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),e.setAttributeNS(null,i,"rgb("+t[1]+","+t[2]+","+t[3]+")"),e.setAttributeNS(null,i+"-opacity",t[4])):e.setAttributeNS(null,i,t.fillStyle)}function bM(t,e){if(t.strokeStyle instanceof pu)e.stroke=Am(t,t.strokeStyle,!1);else if(/^rgba\(/.test(t.strokeStyle)){var i=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle);e.stroke="rgb("+i[1]+","+i[2]+","+i[3]+")",e["stroke-opacity"]=i[4]}else e.stroke=t.strokeStyle;e["stroke-width"]=t.lineWidth,e["stroke-linecap"]=t.lineCap,e["stroke-linejoin"]=t.lineJoin,e["stroke-miterlimit"]=t.miterLimit,t.Dt&&(e["stroke-dasharray"]=t.Yg.toString(),e["stroke-dashoffset"]=t.vj)}function Am(t,e,i){var n="";if(n=t.Hl!==null?t.Hl.getAttribute(i?"fill":"stroke"):null,n!==null&&n.indexOf("GRAD")!==-1?(n=n.split("#")[1].slice(0,-1),i=t.svg.getElementById(n),i!==null&&i.remove()):n="GRAD"+Zl++,e.type==="linear")i=t.Ud("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else if(e.type==="radial")i=t.Ud("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n});else throw Error("invalid gradient");var r=e.ix;e=r.length;for(var o=[],l=0;l<e;l++){var u=r[l],h=u.color;u={offset:u.offset,"stop-color":h},/^rgba\(/.test(h)&&(h=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(h),u["stop-color"]="rgb("+h[1]+","+h[2]+","+h[3]+")",u["stop-opacity"]=h[4]),o.push(u)}for(o.sort(function(f,c){return f.offset>c.offset?1:-1}),r=0;r<e;r++)i.appendChild(t.Ud("stop",o[r]));return t.svg.appendChild(i),"url(#"+n+")"}s.addPath=function(t,e,i){for(var n=[],r=0;r<t.length;r++){var o=Qt(t[r]),l=[o.shift()];if(l[0]==="A")l.push(o.shift()+","+o.shift(),o.shift(),o.shift()+","+o.shift(),o.shift()+","+o.shift());else for(;o.length;)l.push(o.shift()+","+o.shift());n.push(l.join(" "))}if(n=n.join(" "),t=this.Zl,t.clipPath)0<this.nh.length&&this.nh[this.nh.length-1].setAttributeNS(null,"clip-path",'path("'+n+'")');else if(t.d=n,Th(this,"",t,e),this.Hl!==null)if(e=this.Hl,e.nodeName!=="g")for(var u in t)u!=="transform"&&e.setAttributeNS(null,u,t[u]);else{u=e.getElementsByTagName("path");for(var h in t)h!=="transform"&&u[i].setAttributeNS(null,h,t[h])}else this.addElement("path",t)};function Mf(t,e,i,n,r,o,l){var u=new hl;u.ha=[e,i,n,r,o,l],e={},Th(t,"g",e,u),u=t.addElement("g",e),t.nh.push(u)}function od(t,e){var i={};return e&&(i.class=e),e=t.addElement("g",i),t.nh.push(e),e}s.Gv=function(t,e,i){this.Ar=t,this.Br=e,this.Vg=i};function kr(t){t.Il=!1,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function Cr(t){t.Il=!0,t.shadowOffsetX=t.Ar,t.shadowOffsetY=t.Br,t.shadowBlur=t.Vg}s.js=function(t,e){this.Dt=!0,this.Yg=t,this.vj=e},s.fs=function(){this.Dt=!1},s.Vc=function(){},s.Yx=function(){},Vi.prototype.rotate=function(t){this.rb.rotate(57.2958*t,0,0)},Vi.prototype.getImageData=function(){return null},Vi.prototype.measureText=function(){return null};function sd(t,e){e=e.getAttribute("fill"),e!==null&&(e=e.split("#"),e.length!==1&&(e=t.svg.getElementById(e[1].slice(0,-1)),e!==null&&t.svg.innerHTML.match(new RegExp(e.id,"g")).length===1&&e.remove()))}Vi.prototype.Is=function(t){t.svg!==null&&t.svg.parentNode===this.hi&&t.svg.remove()},Vi.className="SVGContext",j.prototype.Cs=function(t){this.qj.contains("SVG")||this.bs("SVG",new Sr(this,$.document));var e=new Sr(this,$.document,!0);t===void 0&&(t=new Xe);var i=this;return DM(this,function(n,r){return n=OM(i,n,"SVG",e),n=n!==null?n.svg:null,typeof r=="function"?(r(n),null):n},t)},j.prototype.makeSvg=j.prototype.Cs,j.prototype.cv=function(t){return this.Cs(t)},j.prototype.makeSVG=j.prototype.cv;function An(t,e,i,n){this.ownerDocument=e=e===void 0?$.document:e,this.hs=null,e=e.createElement("canvas"),e.tabIndex=0,this.Oa=e,this.context=new al(e,i,n),e.H=t}An.prototype.resize=function(t,e,i,n){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",!0):!1},An.prototype.toDataURL=function(t,e){return this.Oa.toDataURL(t,e)},An.prototype.getBoundingClientRect=function(){return this.Oa.getBoundingClientRect()},An.prototype.focus=function(){this.Oa.focus()},An.prototype.ox=function(){this.ownerDocument=this.Oa.H=null},Y.Object.defineProperties(An.prototype,{width:{get:function(){return this.Oa.width},set:function(t){this.Oa.width=t}},height:{get:function(){return this.Oa.height},set:function(t){this.Oa.height=t}},style:{get:function(){return this.Oa.style}}}),An.className="CanvasSurface";function al(t,e,i){this.Z=t.getContext?t.getContext("2d",e):null,this.Z===null&&O("Browser does not support HTML Canvas Element"),this.dt=this.ft=this.et="",this.Im=!1,this.Vg=this.Br=this.Ar=0,this.Il=!1,this.El=new vt,this.isTemporary=!!i}s=al.prototype,s.Yx=function(t){this.Z.imageSmoothingEnabled=t},s.arc=function(t,e,i,n,r,o){this.Z.arc(t,e,i,n,r,o)},s.beginPath=function(){this.Z.beginPath()},s.Se=function(){},s.bezierCurveTo=function(t,e,i,n,r,o){this.Z.bezierCurveTo(t,e,i,n,r,o)},s.clearRect=function(t,e,i,n){this.yc(),this.Z.clearRect(t,e,i,n)},s.clip=function(){this.Z.clip()},s.closePath=function(){this.Z.closePath()},s.createLinearGradient=function(t,e,i,n){return this.Z.createLinearGradient(t,e,i,n)},s.createPattern=function(t,e){return this.Z.createPattern(t,e)},s.createRadialGradient=function(t,e,i,n,r,o){return this.Z.createRadialGradient(t,e,i,n,r,o)},s.drawImage=function(t,e,i,n,r,o,l,u,h){n===void 0?this.Z.drawImage(t,e,i):this.Z.drawImage(t,e,i,n,r,o,l,u,h)},s.fill=function(t){this.Z.fill(t?"evenodd":"nonzero")},s.fillRect=function(t,e,i,n){this.Z.fillRect(t,e,i,n)},s.qx=function(t,e,i,n){this.Z.fillRect(t,e,i,n)},s.fillText=function(t,e,i){this.Z.fillText(t,e,i)},s.getImageData=function(t,e,i,n){return this.Z.getImageData(t,e,i,n)},s.lineTo=function(t,e){this.Z.lineTo(t,e)},s.measureText=function(t){return this.Z.measureText(t)},s.moveTo=function(t,e){this.Z.moveTo(t,e)},s.quadraticCurveTo=function(t,e,i,n){this.Z.quadraticCurveTo(t,e,i,n)},s.rect=function(t,e,i,n){this.Z.rect(t,e,i,n)},s.restore=function(){this.Z.restore()},s.save=function(){this.yc(),this.Z.save()},al.prototype.rotate=function(t){this.El.rotate(57.2958*t,0,0)},s=al.prototype,s.setTransform=function(t,e,i,n,r,o){this.El.setTransform(t,e,i,n,r,o)},s.scale=function(t,e){this.El.scale(t,e)},s.translate=function(t,e){this.El.translate(t,e)},s.stroke=function(){this.Z.stroke()},s.transform=function(t,e,i,n,r,o){if(t!==1||e!==0||i!==0||n!==1||r!==0||o!==0){var l=this.El,u=l.m11*t+l.m21*e;t=l.m12*t+l.m22*e,e=l.m11*i+l.m21*n,i=l.m12*i+l.m22*n,l.dx=l.m11*r+l.m21*o+l.dx,l.dy=l.m12*r+l.m22*o+l.dy,l.m11=u,l.m12=t,l.m21=e,l.m22=i}},s.yc=function(){var t=this.El;this.Z.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},s.ng=function(t,e){if(t instanceof jt&&t.type===rn){var i=t.xk;t=t.gt,t>i?(this.scale(i/t,1),this.translate((t-i)/2,0)):i>t&&(this.scale(1,t/i),this.translate(0,(i-t)/2)),this.Im?this.clip():this.fill(e),t>i?(this.translate(-(t-i)/2,0),this.scale(1/(i/t),1)):i>t&&(this.translate(0,-(i-t)/2),this.scale(1,1/(t/i)))}else this.Im?this.clip():this.fill(e)},s.ik=function(){this.Im||this.stroke()},s.Gv=function(t,e,i){this.Ar=t,this.Br=e,this.Vg=i},s.js=function(t,e){var i=this.Z;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)},s.fs=function(){var t=this.Z;t.setLineDash!==void 0&&(t.setLineDash(pT),t.lineDashOffset=0)},s.Vc=function(t){t&&(this.et=""),this.dt=this.ft=""},s.Is=function(){},Y.Object.defineProperties(al.prototype,{fillStyle:{get:function(){return this.Z.fillStyle},set:function(t){this.dt!==t&&(this.dt=this.Z.fillStyle=t)}},font:{get:function(){return this.Z.font},set:function(t){this.et!==t&&(this.et=this.Z.font=t)}},globalAlpha:{get:function(){return this.Z.globalAlpha},set:function(t){this.Z.globalAlpha=t}},lineCap:{get:function(){return this.Z.lineCap},set:function(t){this.Z.lineCap=t}},lineDashOffset:{get:function(){return this.Z.lineDashOffset},set:function(t){this.Z.lineDashOffset=t}},lineJoin:{get:function(){return this.Z.lineJoin},set:function(t){this.Z.lineJoin=t}},lineWidth:{get:function(){return this.Z.lineWidth},set:function(t){this.Z.lineWidth=t}},miterLimit:{get:function(){return this.Z.miterLimit},set:function(t){this.Z.miterLimit=t}},shadowBlur:{get:function(){return this.Z.shadowBlur},set:function(t){this.Z.shadowBlur=t}},shadowColor:{get:function(){return this.Z.shadowColor},set:function(t){this.Z.shadowColor=t}},shadowOffsetX:{get:function(){return this.Z.shadowOffsetX},set:function(t){this.Z.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Z.shadowOffsetY},set:function(t){this.Z.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Z.strokeStyle},set:function(t){this.ft!==t&&(this.ft=this.Z.strokeStyle=t)}},textAlign:{get:function(){return this.Z.textAlign},set:function(t){this.Z.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Z.imageSmoothingEnabled},set:function(t){this.Z.imageSmoothingEnabled=t}},filter:{get:function(){return this.Z.filter},set:function(t){this.Z.filter=t===""?"none":t}},clipInsteadOfFill:{get:function(){return this.Im},set:function(t){this.Im=t}}});var pT=Object.freeze([]);al.className="CanvasSurfaceContext";function Sf(){this.F=this.o=this.u=this.j=0}Sf.className="ColorNumbers";function jt(t,e){jh||(Bm(),jh=!0),Te(this),this._isFrozen=!1,t===void 0?(this.na=wo,this.wk="black"):typeof t=="string"?(this.na=wo,this.wk=t):(this.na=t,this.wk="black"),t=this.na,t===Wr?(this.Qd=yo,this.Kk=ql):this.Kk=t===rn?this.Qd=Et:this.Qd=Ke,this.Gr=0,this.Xp=NaN,this.xe=this.cr=this.we=null,this.gt=this.xk=0,e&&Object.assign(this,e)}jt.prototype.copy=function(){var t=new jt;return t.na=this.na,t.wk=this.wk,t.Qd=this.Qd.J(),t.Kk=this.Kk.J(),t.Gr=this.Gr,t.Xp=this.Xp,this.we!==null&&(t.we=this.we.copy()),t.cr=this.cr,t},s=jt.prototype,s.freeze=function(){return this._isFrozen=!0,this.we!==null&&this.we.freeze(),this},s.ka=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this._isFrozen=!1,this.we!==null&&this.we.ka(),this},s.qb=function(t){t.classType===jt&&(this.type=t)},s.toString=function(){var t="Brush(";if(this.type===wo)t+=this.color;else if(t=this.type===Wr?t+"Linear ":this.type===rn?t+"Radial ":this.type===gu?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,this.colorStops!==null)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},s.addColorStop=function(t,e){return this._isFrozen&&rt(this),(typeof t!="number"||!isFinite(t)||1<t||0>t)&&at(t,"0 <= loc <= 1",jt,"addColorStop:loc"),this.we===null&&(this.we=new ct),this.we.add(t,e),this.na===wo&&(this.type=Wr),this.xe=null,this},s.$z=function(t,e){if(this._isFrozen&&rt(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?yu:e,this.type===wo)xo(this.color),this.color=Fh(t,e);else if((this.type===Wr||this.type===rn)&&this.colorStops!==null)for(var i=this.colorStops.iterator;i.next();)xo(i.value),this.addColorStop(i.key,Fh(t,e));return this};function tS(t,e,i){return e=e===void 0||typeof e!="number"?.2:e,i=i===void 0?yu:i,xo(t),Fh(e,i)}s.az=function(t,e){if(this._isFrozen&&rt(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?yu:e,this.type===wo)xo(this.color),this.color=Fh(-t,e);else if((this.type===Wr||this.type===rn)&&this.colorStops!==null)for(var i=this.colorStops.iterator;i.next();)xo(i.value),this.addColorStop(i.key,Fh(-t,e));return this};function eS(t,e,i){return e=e===void 0||typeof e!="number"?.2:e,i=i===void 0?yu:i,xo(t),Fh(-e,i)}function jm(t,e,i){xo(t),t=Gt.j;var n=Gt.u,r=Gt.o,o=Gt.F;return xo(e),i===void 0&&(i=.5),"rgba("+Math.round((Gt.j-t)*i+t)+", "+Math.round((Gt.u-n)*i+n)+", "+Math.round((Gt.o-r)*i+r)+", "+Math.round((Gt.F-o)*i+o)+")"}s.Ix=function(){if(this.type===wo)return Lh(this.color);if((this.type===Wr||this.type===rn)&&this.colorStops!==null){var t=this.colorStops;if(this.type===rn)return Lh(t.first().value);if(t.get(.5)!==null)return Lh(t.get(.5));if(t.count===2)return t=t.Fa(),Lh(jm(t[0].value,t[1].value));for(var e=t.iterator,i=-1,n=-1,r=1,o=1;e.next();){var l=e.key,u=Math.abs(.5-e.key);r>o&&u<r?(i=l,r=u):o>=r&&u<o&&(n=l,o=u)}return i>n&&(o=i,i=n,n=o,o=r),r=n-i,Lh(jm(t.get(i),t.get(n),1-o/r))}return!1};function Lh(t){return t?t instanceof jt?t.Ix():(xo(t),128>(299*Gt.j+587*Gt.u+114*Gt.o)/1e3):!1}function Fh(t,e){switch(e){case yu:e=100*Om(Gt.j);var i=100*Om(Gt.u),n=100*Om(Gt.o);return mi.j=.4124564*e+.3575761*i+.1804375*n,mi.u=.2126729*e+.7151522*i+.072175*n,mi.o=.0193339*e+.119192*i+.9503041*n,mi.F=Gt.F,e=Em(mi.j/Ah[0]),i=Em(mi.u/Ah[1]),n=Em(mi.o/Ah[2]),_r.j=116*i-16,_r.u=500*(e-i),_r.o=200*(i-n),_r.F=mi.F,_r.j=Math.min(100,Math.max(0,_r.j+100*t)),t=(_r.j+16)/116,e=t-_r.o/200,mi.j=Ah[0]*iS(_r.u/500+t),mi.u=Ah[1]*(_r.j>ld*Rm?Math.pow(t,3):_r.j/ld),mi.o=Ah[2]*iS(e),mi.F=_r.F,t=-.969266*mi.j+1.8760108*mi.u+.041556*mi.o,e=.0556434*mi.j+-.2040259*mi.u+1.0572252*mi.o,Gt.j=255*Im((3.2404542*mi.j+-1.5371385*mi.u+-.4985314*mi.o)/100),Gt.u=255*Im(t/100),Gt.o=255*Im(e/100),Gt.F=mi.F,Gt.j=Math.round(Gt.j),255<Gt.j?Gt.j=255:0>Gt.j&&(Gt.j=0),Gt.u=Math.round(Gt.u),255<Gt.u?Gt.u=255:0>Gt.u&&(Gt.u=0),Gt.o=Math.round(Gt.o),255<Gt.o?Gt.o=255:0>Gt.o&&(Gt.o=0),"rgba("+Gt.j+", "+Gt.u+", "+Gt.o+", "+Gt.F+")";case Vm:return Dm(),nn.o=Math.min(100,Math.max(0,nn.o+100*t)),"hsla("+nn.j+", "+nn.u+"%, "+nn.o+"%, "+nn.F+")";default:O("Unknown color space: "+e)}}function xo(t){jh||(Bm(),jh=!0);var e=zm;if(e!==null){e.clearRect(0,0,1,1),e.fillStyle="#000000";var i=e.fillStyle;e.fillStyle=t,e.fillStyle!==i?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Gt.j=t[0],Gt.u=t[1],Gt.o=t[2],Gt.F=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,Gt.j=0,Gt.u=0,Gt.o=0,Gt.F=1)}}function Dm(){var t=Gt.j/255,e=Gt.u/255,i=Gt.o/255,n=Math.max(t,e,i),r=Math.min(t,e,i),o=n-r;if(r=(n+r)/2,o===0)var l=t=0;else{switch(n){case t:l=(e-i)/o%6;break;case e:l=(i-t)/o+2;break;case i:l=(t-e)/o+4}l*=60,0>l&&(l+=360),t=o/(1-Math.abs(2*r-1))}nn.j=Math.round(l),nn.u=Math.round(100*t),nn.o=Math.round(100*r),nn.F=Gt.F}function Om(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Im(t){return .0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Em(t){return t>Rm?Math.pow(t,1/3):(ld*t+16)/116}function iS(t){var e=t*t*t;return e>Rm?e:(116*t-16)/ld}function du(t,e){typeof t!="string"&&(t instanceof jt||O("Value for "+e+" must be a color string or a Brush, not "+t))}function Bm(){zm=$n?new An(null,void 0,{willReadFrequently:!0}).context:null}Y.Object.defineProperties(jt.prototype,{type:{get:function(){return this.na},set:function(t){this._isFrozen&&rt(this,t),this.na=t,this.start.Nc()&&(t===Wr?this.start=yo:t===rn&&(this.start=Et)),this.end.Nc()&&(t===Wr?this.end=ql:t===rn&&(this.end=Et)),this.xe=null}},color:{get:function(){return this.wk},set:function(t){this._isFrozen&&rt(this,t),this.wk=t,this.xe=null}},start:{get:function(){return this.Qd},set:function(t){this._isFrozen&&rt(this,t),this.Qd=t.J(),this.xe=null}},end:{get:function(){return this.Kk},set:function(t){this._isFrozen&&rt(this,t),this.Kk=t.J(),this.xe=null}},startRadius:{get:function(){return this.Gr},set:function(t){this._isFrozen&&rt(this,t),0>t&&at(t,">= zero",jt,"startRadius"),this.Gr=t,this.xe=null}},endRadius:{get:function(){return this.Xp},set:function(t){this._isFrozen&&rt(this,t),0>t&&at(t,">= zero",jt,"endRadius"),this.Xp=t,this.xe=null}},colorStops:{get:function(){return this.we},set:function(t){this._isFrozen&&rt(this,t),this.we=t,this.xe=null}},pattern:{get:function(){return this.cr},set:function(t){this._isFrozen&&rt(this,t),this.cr=t,this.xe=null}}}),jt.prototype.isDark=jt.prototype.Ix,jt.prototype.darkenBy=jt.prototype.az,jt.prototype.lightenBy=jt.prototype.$z,jt.prototype.addColorStop=jt.prototype.addColorStop;var Rm=216/24389,ld=24389/27,Ah=[95.047,100,108.883],zm=null,Gt=new Sf,nn=new Sf,mi=new Sf,_r=new Sf,jh=!1;jt.className="Brush";var wo;jt.Solid=wo=new K(jt,"Solid",0);var Wr;jt.Linear=Wr=new K(jt,"Linear",1);var rn;jt.Radial=rn=new K(jt,"Radial",2);var gu;jt.Pattern=gu=new K(jt,"Pattern",4);var yu;jt.Lab=yu=new K(jt,"Lab",5);var Vm;jt.HSL=Vm=new K(jt,"HSL",6),jt.randomColor=function(t,e){t===void 0&&(t=128),e===void 0&&(e=Math.max(t,255));var i=Math.abs(e-t);e=Math.floor(t+Math.random()*i).toString(16);var n=Math.floor(t+Math.random()*i).toString(16);return t=Math.floor(t+Math.random()*i).toString(16),2>e.length&&(e="0"+e),2>n.length&&(n="0"+n),2>t.length&&(t="0"+t),"#"+e+n+t},jt.isValidColor=function(t){if(t==="black")return!0;if(t==="")return!1;jh||(Bm(),jh=!0);var e=zm;if(e===null)return!0;e.fillStyle="#000000";var i=e.fillStyle;return e.fillStyle=t,e.fillStyle!==i?!0:(e.fillStyle="#FFFFFF",i=e.fillStyle,e.fillStyle=t,e.fillStyle!==i)},jt.lighten=function(t){return tS(t)},jt.lightenBy=tS,jt.darken=function(t){return eS(t)},jt.darkenBy=eS,jt.mix=jm,jt.isDark=Lh;function ye(){this.xa="Base"}ye.prototype.measure=function(){},ye.prototype.cA=function(t,e,i,n,r){t.measure(e,i,n,r)},ye.prototype.arrange=function(){},ye.prototype.Ny=function(t,e,i,n,r,o){t.arrange(e,i,n,r,o)},ye.prototype.mA=function(t){t.Tj()},ye.prototype.ic=function(){},Y.Object.defineProperties(ye.prototype,{name:{get:function(){return this.xa},set:function(t){this.xa=t}},classType:{get:function(){return z}}}),ye.prototype.remeasureObject=ye.prototype.mA,ye.prototype.arrangeElement=ye.prototype.Ny,ye.prototype.measureElement=ye.prototype.cA,ye.className="PanelLayout";function ud(){this.xa="Base"}Z(ud,ye),ud.prototype.measure=function(t,e,i,n,r,o,l){var u=n.length;t=Mo(t);for(var h=0;h<u;h++){var f=n[h];if(f.visible||f===t){var c=f.margin,p=c.right+c.left;c=c.top+c.bottom,f.measure(e,i,o,l);var g=f.measuredBounds;p=Math.max(g.width+p,0),c=Math.max(g.height+c,0),g=f.position.x;var m=f.position.y;isFinite(g)||(g=0),isFinite(m)||(m=0),f instanceof yt&&f.isGeometryPositioned&&(f=f.strokeWidth/2,g-=f,m-=f),Oe(r,g,m,p,c)}}},ud.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding;for(t=i.x-r.left,i=i.y-r.top,r=0;r<n;r++){var o=e[r],l=o.measuredBounds,u=o.margin,h=o.position.x,f=o.position.y;if(h=isNaN(h)?-t:h-t,f=isNaN(f)?-i:f-i,o instanceof yt&&o.isGeometryPositioned){var c=o.strokeWidth/2;h-=c,f-=c}o.visible&&o.arrange(h+u.left,f+u.top,l.width,l.height)}};function hd(){this.xa="Base"}Z(hd,ye),hd.prototype.measure=function(t,e,i,n,r,o,l){var u=n.length;e=Rt(),o=Mo(t);for(var h=0;h<u;h++){var f=n[h];if(f.visible||f===o){var c=ar(f,!1);if(c!==te&&c!==Re)e.push(f);else{f.measure(1/0,i,0,l),c=f.margin,f=f.measuredBounds;var p=Math.max(f.height+c.top+c.bottom,0);r.width+=Math.max(f.width+c.right+c.left,0),r.height=Math.max(r.height,p)}}}for(n=e.length,t.desiredSize.height?i=Math.min(t.desiredSize.height,t.maxSize.height):r.height!==0&&(i=Math.min(r.height,t.maxSize.height)),t=0;t<n;t++)h=e[t],(h.visible||h===o)&&(c=h.margin,u=c.right+c.left,c=c.top+c.bottom,h.measure(1/0,i,0,l),h=h.measuredBounds,c=Math.max(h.height+c,0),r.width+=Math.max(h.width+u,0),r.height=Math.max(r.height,c));Bt(e)},hd.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,o=r.top,l=t.isOpposite,u=l?i.width:r.left,h=0;h<n;h++){var f=o,c=e[h];if(c.visible){var p=c.measuredBounds,g=c.margin,m=g.top+g.bottom,v=o+r.bottom,x=p.height,k=ar(c,!1);(isNaN(c.desiredSize.height)&&k===oe||k===Ue)&&(x=Math.max(i.height-m-v,0)),m=x+m+v,v=c.alignment,v.$b()&&(v=t.defaultAlignment),v.sb()||(v=Et),l&&(u-=p.width+g.left+g.right),c.arrange(u+v.offsetX+g.left,f+v.offsetY+g.top+(i.height*v.y-m*v.y),p.width,x),l||(u+=p.width+g.left+g.right)}}};function ad(){this.xa="Base"}Z(ad,ye),ad.prototype.measure=function(t,e,i,n,r,o){var l=n.length;i=Rt();for(var u=Mo(t),h=0;h<l;h++){var f=n[h];if(f.visible||f===u){var c=ar(f,!1);if(c!==te&&c!==Ue)i.push(f);else{var p=f.margin;c=p.right+p.left,p=p.top+p.bottom,f.measure(e,1/0,o,0),f=f.measuredBounds,go(r,Math.max(r.width,Math.max(f.width+c,0)),r.height+Math.max(f.height+p,0))}}}if(n=i.length,n!==0){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):r.width!==0&&(e=Math.min(r.width,t.maxSize.width)),t=0;t<n;t++)h=i[t],(h.visible||h===u)&&(f=h.margin,l=f.right+f.left,f=f.top+f.bottom,h.measure(e,1/0,o,0),h=h.measuredBounds,f=Math.max(h.height+f,0),r.width=Math.max(r.width,Math.max(h.width+l,0)),r.height+=f);Bt(i)}},ad.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,o=r.left,l=t.isOpposite,u=l?i.height:r.top,h=0;h<n;h++){var f=o,c=e[h];if(c.visible){var p=c.measuredBounds,g=c.margin,m=g.left+g.right,v=o+r.right,x=p.width,k=ar(c,!1);(isNaN(c.desiredSize.width)&&k===oe||k===Re)&&(x=Math.max(i.width-m-v,0)),m=x+m+v,v=c.alignment,v.$b()&&(v=t.defaultAlignment),v.sb()||(v=Et),l&&(u-=p.height+g.bottom+g.top),c.arrange(f+v.offsetX+g.left+(i.width*v.x-m*v.x),u+v.offsetY+g.top,x,p.height),l||(u+=p.height+g.bottom+g.top)}}};function fd(){this.xa="Base"}Z(fd,ye),fd.prototype.measure=function(t,e,i,n,r,o,l){var u=n.length;if(u!==0){var h=t.Qb(),f=h.margin,c=f.right+f.left,p=f.top+f.bottom;h.measure(e,i,o,l);var g=h.measuredBounds;o=g.width,l=g.height;var m=Math.max(o+c,0),v=Math.max(l+p,0),x=t.isClipping,k=E.allocAt(-f.left,-f.top,m,v),S=E.allocAt(0,0,o,l);Um(h,S,!0),o=S.width,l=S.height;for(var P=!0,N=Mo(t),T=0;T<u;T++){var F=n[T];g=e;var D=i;if(F!==h&&(F.visible||F===N)){f=F.margin;var X=f.left,tt=f.top;switch(m=f.right+f.left,v=f.top+f.bottom,f=ar(F,!1),f){case oe:g=o,D=l,tt=X=v=m=0;break;case Re:g=o,X=m=0;break;case Ue:D=l,tt=v=0}F.measure(g,D,0,0),g=F.measuredBounds,m=Math.max(g.width+m,0),v=Math.max(g.height+v,0),f=F.alignment,f.$b()&&(f=t.defaultAlignment),f.sb()||(f=Et);var et=F.alignmentFocus;if(et.$b()&&(et=Et),D=null,F instanceof z&&F.$e!==""&&(D=F.fb(F.$e),D===F&&(D=null)),X=S.x-X,tt=S.y-tt,D!==null){for(F.arrange(0,0,g.width,g.height),g=D.actualBounds,g=C.allocAt(g.x+(et.x*g.width-et.offsetX),g.y+(et.y*g.height-et.offsetY)),D=D.panel;D!==F;)D.transform.Ga(g),D=D.panel;X+=f.x*o+f.offsetX-g.x,tt+=f.y*l+f.offsetY-g.y,C.free(g)}else X+=f.x*o+f.offsetX-(et.x*g.width+et.offsetX),tt+=f.y*l+f.offsetY-(et.y*g.height+et.offsetY);P?(P=!1,r.h(X,tt,m,v)):Oe(r,X,tt,m,v)}}switch(P?r.assign(k):x?r.Wu(S.x,S.y,S.width,S.height):Oe(r,k.x,k.y,k.width,k.height),E.free(k),E.free(S),f=h.stretch,f===cn&&(f=ar(h,!1)),f){case te:return;case oe:if(!isFinite(e)&&!isFinite(i))return;break;case Re:if(!isFinite(e))return;break;case Ue:if(!isFinite(i))return}for(g=h.measuredBounds,o=g.width,l=g.height,m=Math.max(o+c,0),v=Math.max(l+p,0),f=h.margin,S=E.allocAt(-f.left,-f.top,m,v),Um(h,S,!0),o=S.width,l=S.height,e=0;e<u;e++)i=n[e],i===h||!i.visible&&i!==N||(f=i.margin,m=f.right+f.left,v=f.top+f.bottom,g=i.measuredBounds,m=Math.max(g.width+m,0),v=Math.max(g.height+v,0),c=i.alignment,c.$b()&&(c=t.defaultAlignment),c.sb()||(c=Et),i=i.alignmentFocus,i.$b()&&(i=Et),P?(P=!1,r.h(c.x*o+c.offsetX-(i.x*g.width+i.offsetX)-f.left,c.y*l+c.offsetY-(i.y*g.height+i.offsetY)-f.top,m,v)):Oe(r,c.x*o+c.offsetX-(i.x*g.width+i.offsetX)-f.left,c.y*l+c.offsetY-(i.y*g.height+i.offsetY)-f.top,m,v));P?r.assign(k):x?r.Wu(S.x,S.y,S.width,S.height):Oe(r,k.x,k.y,k.width,k.height),E.free(S)}},fd.prototype.arrange=function(t,e,i){var n=e.length;if(n!==0){var r=t.Qb(),o=r.measuredBounds,l=o.width,u=o.height,h=t.padding;o=h.left,h=h.top;var f=o-i.x,c=h-i.y;for(r.arrange(f,c,l,u),l=E.allocAt(0,0,l,u),Um(r,l,!1),u=0;u<n;u++){var p=e[u];if(p!==r){f=p.measuredBounds;var g=f.width,m=f.height;c=p.alignment,c.$b()&&(c=t.defaultAlignment),c.sb()||(c=Et);var v=p.alignmentFocus;if(v.$b()&&(v=Et),f=null,p instanceof z&&p.$e!==""&&(f=p.fb(p.$e),f===p&&(f=null)),f!==null){var x=f.actualBounds;for(v=C.allocAt(x.x+(v.x*x.width-v.offsetX),x.y+(v.y*x.height-v.offsetY)),f=f.panel;f!==p;)f.transform.Ga(v),f=f.panel;f=c.x*l.width+c.offsetX-v.x,c=c.y*l.height+c.offsetY-v.y,C.free(v)}else f=c.x*l.width+c.offsetX-(v.x*g+v.offsetX),c=c.y*l.height+c.offsetY-(v.y*m+v.offsetY);f+=l.x-i.x,c+=l.y-i.y,p.visible&&p.arrange(o+f,h+c,g,m)}}E.free(l)}};function Um(t,e,i){var n=null;if(t instanceof z&&t.$e!==""&&(n=t.fb(t.$e),n===t&&(n=null)),n!==null)for(i&&t.arrange(0,0,e.width,e.height),e.assign(n.actualBounds),n=n.panel;n!==t;)n.transform.pp(e),n=n.panel}function cd(){this.xa="Base"}Z(cd,ye),cd.prototype.measure=function(t,e,i,n,r,o,l){var u=n.length;if(u!==0){var h=t.Qb(),f=h.margin,c=e,p=i,g=f.right+f.left,m=f.top+f.bottom;h.measure(e,i,o,l),f=h.measuredBounds;var v=0,x=null;h instanceof yt&&(x=h,v=x.strokeWidth*x.scale);var k=Math.max(f.width+g,0);f=Math.max(f.height+m,0);var S=Xm(h),P=S.x*k+S.offsetX;S=S.y*f+S.offsetY;var N=Km(h),T=N.x*k+N.offsetX;for(N=N.y*f+N.offsetY,isFinite(e)&&(c=Math.max(Math.abs(P-T)-v,0)),isFinite(i)&&(p=Math.max(Math.abs(S-N)-v,0)),v=ht.alloc(),v.h(0,0),t=Mo(t),N=0;N<u;N++)S=n[N],S===h||!S.visible&&S!==t||(f=S.margin,k=f.right+f.left,P=f.top+f.bottom,S.measure(c,p,0,0),f=S.measuredBounds,k=Math.max(f.width+k,0),f=Math.max(f.height+P,0),v.h(Math.max(k,v.width),Math.max(f,v.height)));if(u===1)r.width=k,r.height=f,ht.free(v);else{switch(S=Xm(h),N=Km(h),u=n=0,N.x!==S.x&&N.y!==S.y&&(n=v.width/Math.abs(N.x-S.x),u=v.height/Math.abs(N.y-S.y)),ht.free(v),v=0,x!==null&&(v=x.strokeWidth*x.scale,Qm(x)===Fn&&(n=u=Math.max(n,u))),n+=Math.abs(S.offsetX)+Math.abs(N.offsetX)+v,u+=Math.abs(S.offsetY)+Math.abs(N.offsetY)+v,x=h.stretch,x===cn&&(x=ar(h,!1)),x){case te:l=o=0;break;case oe:isFinite(e)&&(n=e),isFinite(i)&&(u=i);break;case Re:isFinite(e)&&(n=e),l=0;break;case Ue:o=0,isFinite(i)&&(u=i)}h.Tj(),h.measure(n,u,o,l),r.width=h.measuredBounds.width+g,r.height=h.measuredBounds.height+m}}},cd.prototype.arrange=function(t,e){var i=e.length;if(i!==0){var n=t.Qb(),r=n.measuredBounds,o=E.alloc();o.h(0,0,1,1);var l=n.margin,u=l.left;l=l.top;var h=t.padding,f=h.left;h=h.top,n.arrange(f+u,h+l,r.width,r.height);var c=Xm(n),p=Km(n),g=c.y*r.height+c.offsetY,m=p.x*r.width+p.offsetX;for(p=p.y*r.height+p.offsetY,o.x=c.x*r.width+c.offsetX,o.y=g,Oe(o,m,p,0,0),o.x+=u+f,o.y+=l+h,r=0;r<i;r++)u=e[r],u!==n&&(f=u.measuredBounds,l=u.margin,h=Math.max(f.width+l.right+l.left,0),c=Math.max(f.height+l.top+l.bottom,0),g=u.alignment,g.$b()&&(g=t.defaultAlignment),g.sb()||(g=Et),h=o.width*g.x+g.offsetX-h*g.x+l.left+o.x,l=o.height*g.y+g.offsetY-c*g.y+l.top+o.y,u.visible&&(sr(o.x,o.y,o.width,o.height,h,l,f.width,f.height)?u.arrange(h,l,f.width,f.height):u.arrange(h,l,f.width,f.height,new E(o.x,o.y,o.width,o.height))));E.free(o)}};function pd(){this.xa="Base",this.name="Table"}Z(pd,ye),pd.prototype.measure=function(t,e,i,n,r){for(var o=n.length,l=Rt(),u=Rt(),h=0;h<o;h++){var f=n[h],c=f instanceof z?f:null;if(c!==null&&qo(c)&&f.visible){u.push(c);for(var p=c.O.s,g=p.length,m=0;m<g;m++){var v=p[m];c.type===z.TableRow?v.row=f.row:c.type===z.TableColumn&&(v.column=f.column),l.push(v)}}else l.push(f)}o=l.length,o===0&&(t.Gb(0),t.Fb(0));for(var x=[],k=0;k<o;k++){var S=l[k];S.visible&&(pn(S,!0),ll(S,!0),x[S.row]||(x[S.row]=[]),x[S.row][S.column]||(x[S.row][S.column]=[]),x[S.row][S.column].push(S))}Bt(l);var P=Rt(),N=Rt(),T=Rt(),F={count:0},D={count:0},X=e,tt=i,et=t.rowDefs,U=t.colDefs,R=null;o=et.length;for(var pt=0;pt<o;pt++)R=et[pt],R!==void 0&&(R.actual=0,R.Wb=0);o=U.length;for(var ut=0;ut<o;ut++)R=U[ut],R!==void 0&&(R.actual=0,R.Wb=0);for(var Tt=x.length,Vt=0,ke=0;ke<Tt;ke++)x[ke]&&(Vt=Math.max(Vt,x[ke].length));var Ne=Math.min(t.topIndex,Tt-1),ei=Math.min(t.leftIndex,Vt-1),Ce=0;Tt=x.length;for(var ss=Mo(t),ae=0;ae<Tt;ae++)if(x[ae]){Vt=x[ae].length;var dr=t.Gb(ae);dr.actual=0;for(var ii=dr.Wb=0;ii<Vt;ii++)if(x[ae][ii]){var ls=t.Fb(ii);P[ii]===void 0&&(ls.actual=0,ls.Wb=0,P[ii]=!0);for(var sn=x[ae][ii],Bn=sn.length,Hi=0;Hi<Bn;Hi++){var Di=sn[Hi];if(Di.visible||Di===ss){var us=1<Di.rowSpan,gr=1<Di.columnSpan;(us||gr)&&(ae<Ne||ii<ei||N.push(Di));var zs=Di.margin,Xi=zs.right+zs.left,jg=zs.top+zs.bottom,ni=xf(Di,dr,ls,!1),Ml=Di.desiredSize,jr=!isNaN(Ml.height),Ki=!isNaN(Ml.width)&&jr;if(ni===te||Ki||ae<Ne||ii<ei||(gr||F[ii]!==void 0||ni!==oe&&ni!==Re||(F[ii]=-1,F.count++),us||D[ae]!==void 0||ni!==oe&&ni!==Ue||(D[ae]=-1,D.count++),us||gr||T.push(Di)),Di.measure(1/0,1/0,0,0),!(ae<Ne||ii<ei)){var Vs=Di.measuredBounds,_i=Math.max(Vs.width+Xi,0),Au=Math.max(Vs.height+jg,0);if(Di.rowSpan===1&&(ni===te||ni===Re)){R=t.Gb(ae);var fa=R.Wc(),Dg=R.oa===0;Ce=Math.max(Au-R.actual,0),Ce+(Dg?fa:0)>tt&&(Ce=Math.max(tt-fa,0)),R.Wb=R.Wb+Ce,R.actual=R.oa+Ce,tt=Math.max(tt-(Ce+(Dg?fa:0)),0)}if(Di.columnSpan===1&&(ni===te||ni===Ue)){R=t.Fb(ii);var xc=R.Wc(),wc=R.oa===0;Ce=Math.max(_i-R.actual,0),Ce+(wc?xc:0)>X&&(Ce=Math.max(X-xc,0)),R.Wb=R.Wb+Ce,R.actual=R.oa+Ce,X=Math.max(X-(Ce+(wc?xc:0)),0)}(us||gr)&&Di.Tj()}}}}}Bt(P);var To=0,Dr=0;o=t.columnCount;for(var ca=0;ca<o;ca++){var Us=U[ca];Us!==void 0&&(To+=isNaN(Us.Ic)?Us.Wb:Us.Ic,Us.Wb!==0&&(To+=Us.Wc()))}o=t.rowCount;for(var pa=0;pa<o;pa++){var er=et[pa];er!==void 0&&(Dr+=isNaN(er.Ic)?er.Wb:er.Ic,er.Wb!==0&&(Dr+=er.Wc()))}X=Math.max(e-To,0);var hs=tt=Math.max(i-Dr,0),Oi=X;o=T.length;for(var da=0;da<o;da++){var Or=T[da],Lo=t.Gb(Or.row),Mc=t.Fb(Or.column),br=Or.measuredBounds,Fo=Or.margin,Ir=Fo.right+Fo.left,Sc=Fo.top+Fo.bottom;F[Or.column]=Mc.Wb===0&&F[Or.column]!==void 0?Math.max(br.width+Ir,F[Or.column]):null,D[Or.row]=Lo.Wb===0&&D[Or.row]!==void 0?Math.max(br.height+Sc,D[Or.row]):null}var ga=0,to=0,Ys;for(Ys in D)Ys!=="count"&&(ga+=D[Ys]);for(Ys in F)Ys!=="count"&&(to+=F[Ys]);for(var Ee=ht.alloc(),Sl=0;Sl<o;Sl++){var ue=T[Sl];if(ue.visible||ue===ss){var Si=t.Gb(ue.row),Wi=t.Fb(ue.column),as=0;isFinite(Wi.width)?as=Wi.width:(isFinite(X)&&F[ue.column]!==null?to===0?as=Wi.actual+X:as=F[ue.column]/to*Oi:F[ue.column]!==null?as=X:as=Wi.actual||X,as=Math.max(0,as-Wi.Wc()));var eo=0;switch(isFinite(Si.height)?eo=Si.height:(isFinite(tt)&&D[ue.row]!==null?ga===0?eo=Si.actual+tt:eo=D[ue.row]/ga*hs:D[ue.row]!==null?eo=tt:eo=Si.actual||tt,eo=Math.max(0,eo-Si.Wc())),Ee.h(Math.max(Wi.minimum,Math.min(as,Wi.maximum)),Math.max(Si.minimum,Math.min(eo,Si.maximum))),ni=xf(ue,Si,Wi,!1),ni){case Re:Ee.height=Math.max(Ee.height,Si.actual+tt);break;case Ue:Ee.width=Math.max(Ee.width,Wi.actual+X)}var ya=ue.margin,Og=ya.right+ya.left,kc=ya.top+ya.bottom;ue.Tj(),ue.measure(Ee.width,Ee.height,Wi.minimum,Si.minimum);var ma=ue.measuredBounds,ju=Math.max(ma.width+Og,0),Ii=Math.max(ma.height+kc,0);isFinite(X)&&(ju=Math.min(ju,Ee.width)),isFinite(tt)&&(Ii=Math.min(Ii,Ee.height));var Gs=0;Gs=Si.actual,Si.actual=Math.max(Si.actual,Ii),Si.Wb=Math.max(Si.Wb,Ii),Ce=Si.actual-Gs,tt=Math.max(tt-Ce,0),D[ue.row]===null&&(hs=Math.max(hs-Ce,0)),Gs=Wi.actual,Wi.actual=Math.max(Wi.actual,ju),Wi.Wb=Math.max(Wi.Wb,ju),Ce=Wi.actual-Gs,X=Math.max(X-Ce,0),F[ue.column]===null&&(Oi=Math.max(Oi-Ce,0))}}Bt(T);var Ao=ht.alloc(),xn=Rt(),jo=Rt();if(o=N.length,o!==0){for(var io=0;io<Tt;io++)if(x[io]){Vt=x[io].length;var Cc=t.Gb(io);xn[io]=Cc.actual;for(var kl=0;kl<Vt;kl++)if(x[io][kl]){var Ig=t.Fb(kl);jo[kl]=Ig.actual}}}for(var va=0;va<o;va++){var ee=N[va];if(ee.visible||ee===ss){var Rn=t.Gb(ee.row),no=t.Fb(ee.column);switch(Ee.h(Math.max(no.minimum,Math.min(e,no.maximum)),Math.max(Rn.minimum,Math.min(i,Rn.maximum))),ni=xf(ee,Rn,no,!1),ni){case oe:jo[no.index]!==0&&(Ee.width=Math.min(Ee.width,jo[no.index])),xn[Rn.index]!==0&&(Ee.height=Math.min(Ee.height,xn[Rn.index]));break;case Re:jo[no.index]!==0&&(Ee.width=Math.min(Ee.width,jo[no.index]));break;case Ue:xn[Rn.index]!==0&&(Ee.height=Math.min(Ee.height,xn[Rn.index]))}isFinite(no.width)&&(Ee.width=no.width),isFinite(Rn.height)&&(Ee.height=Rn.height),Ao.h(0,0);for(var $i=no.minimum,xa=Rn.minimum,zn=1;zn<ee.rowSpan&&!(ee.row+zn>=t.rowCount);zn++)R=t.Gb(ee.row+zn),Ce=0,Ce=ni===oe||ni===Ue?Math.max(R.minimum,xn[ee.row+zn]===0?R.maximum:Math.min(xn[ee.row+zn],R.maximum)):Math.max(R.minimum,isNaN(R.Ic)?R.maximum:Math.min(R.Ic,R.maximum)),Ao.height+=Ce,xa+=R.minimum;for(var Cl=1;Cl<ee.columnSpan&&!(ee.column+Cl>=t.columnCount);Cl++)R=t.Fb(ee.column+Cl),Ce=0,Ce=ni===oe||ni===Re?Math.max(R.minimum,jo[ee.column+Cl]===0?R.maximum:Math.min(jo[ee.column+Cl],R.maximum)):Math.max(R.minimum,isNaN(R.Ic)?R.maximum:Math.min(R.Ic,R.maximum)),Ao.width+=Ce,$i+=R.minimum;Ee.width+=Ao.width,Ee.height+=Ao.height;var ro=ee.margin,Pc=ro.right+ro.left,Nc=ro.top+ro.bottom;ee.measure(Ee.width,Ee.height,$i,xa);for(var oo=ee.measuredBounds,Pl=Math.max(oo.width+Pc,0),Nl=Math.max(oo.height+Nc,0),wa=0,Hs=0;Hs<ee.rowSpan&&!(ee.row+Hs>=t.rowCount);Hs++)R=t.Gb(ee.row+Hs),wa+=R.total||0;if(wa<Nl){var Vn=Nl-wa,fs=Nl-wa;if(ee.spanAllocation!==null)for(var Tl=ee.spanAllocation,Do=0;Do<ee.rowSpan&&!(0>=Vn)&&!(ee.row+Do>=t.rowCount);Do++){R=t.Gb(ee.row+Do);var cs=R.oa||0,Oo=Tl(ee,R,fs);R.actual=Math.min(R.maximum,cs+Oo),R.oa!==cs&&(Vn-=R.oa-cs)}for(;0<Vn;){var Du=R.oa||0;if(isNaN(R.height)&&R.maximum>Du&&(R.actual=Math.min(R.maximum,Du+Vn),R.oa!==Du&&(Vn-=R.oa-Du)),R.index===0)break;R=t.Gb(R.index-1)}}for(var ps=0,Ma=0;Ma<ee.columnSpan&&!(ee.column+Ma>=t.columnCount);Ma++)R=t.Fb(ee.column+Ma),ps+=R.total||0;if(ps<Pl){var Ou=Pl-ps,Io=Pl-ps;if(ee.spanAllocation!==null)for(var Tc=ee.spanAllocation,Sa=0;Sa<ee.columnSpan&&!(0>=Ou)&&!(ee.column+Sa>=t.columnCount);Sa++){R=t.Fb(ee.column+Sa);var Lc=R.oa||0,_T=Tc(ee,R,Io);R.actual=Math.min(R.maximum,Lc+_T),R.oa!==Lc&&(Ou-=R.oa-Lc)}for(;0<Ou;){var Eg=R.oa||0;if(isNaN(R.width)&&R.maximum>Eg&&(R.actual=Math.min(R.maximum,Eg+Ou),R.oa!==Eg&&(Ou-=R.oa-Eg)),R.index===0)break;R=t.Fb(R.index-1)}}}}Bt(N),ht.free(Ao),ht.free(Ee),xn!==void 0&&Bt(xn),jo!==void 0&&Bt(jo);var Iu=0,Eu=0,Bg=t.desiredSize,gk=t.maxSize;ni=ar(t,!0);var Fc=Dr=To=0,Ac=0;o=t.columnCount;for(var Rg=0;Rg<o;Rg++)U[Rg]!==void 0&&(R=t.Fb(Rg),isFinite(R.width)?(Fc+=R.width,Fc+=R.Wc()):kd(R)===Dh?(Fc+=R.oa,Fc+=R.Wc()):R.oa!==0&&(To+=R.oa,To+=R.Wc()));isFinite(Bg.width)?Iu=Math.min(Bg.width,gk.width):Iu=ni!==te&&isFinite(e)?e:To,Iu=Math.max(Iu,t.minSize.width),Iu=Math.max(Iu-Fc,0);for(var WT=To===0?1:Math.max(Iu/To,1),zg=0;zg<o;zg++)U[zg]!==void 0&&(R=t.Fb(zg),isFinite(R.width)||kd(R)===Dh||(R.actual=R.oa*WT),R.position=r.width,R.oa!==0&&(r.width+=R.oa,r.width+=R.Wc()));o=t.rowCount;for(var Vg=0;Vg<o;Vg++)et[Vg]!==void 0&&(R=t.Gb(Vg),isFinite(R.height)?(Ac+=R.height,Ac+=R.Wc()):kd(R)===Dh?(Ac+=R.oa,Ac+=R.Wc()):R.oa!==0&&(Dr+=R.oa,Dr+=R.Wc()));isFinite(Bg.height)?Eu=Math.min(Bg.height,gk.height):Eu=ni!==te&&isFinite(i)?i:Dr,Eu=Math.max(Eu,t.minSize.height),Eu=Math.max(Eu-Ac,0);for(var $T=Dr===0?1:Math.max(Eu/Dr,1),Ug=0;Ug<o;Ug++)et[Ug]!==void 0&&(R=t.Gb(Ug),isFinite(R.height)||kd(R)===Dh||(R.actual=R.oa*$T),R.position=r.height,R.oa!==0&&(r.height+=R.oa,r.height+=R.Wc()));o=u.length;for(var Zv=0;Zv<o;Zv++){var jc=u[Zv],Qv=0,Jv=0;jc.type===z.TableRow?(Qv=r.width,R=t.Gb(jc.row),Jv=R.actual):(R=t.Fb(jc.column),Qv=R.actual,Jv=r.height),jc.measuredBounds.h(0,0,Qv,Jv),pn(jc,!1)}Bt(u),t.inRowsCols=x},pd.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding,o=r.left;r=r.top;var l=t.inRowsCols;if(l!==null){for(var u,h,f=l.length,c=0,p=0;p<f;p++)l[p]&&(c=Math.max(c,l[p].length));h=t.rowDefs,u=t.colDefs;var g=p=0,m=Math.min(t.topIndex,f-1);if(0<h.length){for(;m!==f&&(h[m]===void 0||h[m].oa===0);)m++;m=Math.max(Math.min(m,f-1),0),p=-h[m].position}var v=Math.min(t.leftIndex,c-1);if(0<u.length){for(;v!==c&&(u[v]===void 0||u[v].oa===0);)v++;v=Math.max(Math.min(v,c-1),0),g=-u[v].position}for(var x=0,k=0;x!==f&&h[x]===void 0;)x++;for(;k!==f&&u[k]===void 0;)k++;c=t.part,t.Gb(x),t.Fb(k);for(var S=0;S<e.length;S++){var P=e[S];if(P instanceof z&&P.visible&&qo(P)){if(P.type===z.TableRow){u=t.Gb(P.row);var N=t.Fb(k)}else u=t.Gb(x),N=t.Fb(P.column);h=u.position+p+r,u.oa!==0&&(h+=u.Jo(Math.max(x,m))),u=N.position+g+o,N.oa!==0&&(u+=N.Jo(Math.max(k,v))),N=P.measuredBounds,P.Tk(),P.actualBounds.ka();var T=P.actualBounds,F=E.allocAt(T.x,T.y,T.width,T.height);T.x=P.type===z.TableRow?o:u,T.y=P.type===z.TableColumn?r:h,T.width=N.width,T.height=N.height,P.actualBounds.freeze(),ll(P,!1),c0(F,T)||c===null||(c.oh(),P.Qn(c)),E.free(F)}}for(S=ht.alloc(),P=0;P<f;P++)if(l[P]){for(c=l[P].length,N=t.Gb(P),h=N.position+p+r,N.oa!==0&&(h+=N.Jo(Math.max(x,m))),T=0;T<c;T++)if(l[P][T]){F=t.Fb(T),u=F.position+g+o,F.oa!==0&&(u+=F.Jo(Math.max(k,v)));for(var D=l[P][T],X=D.length,tt=0;tt<X;tt++){var et=D[tt],U=et.measuredBounds;S.h(0,0);for(var R=1;R<et.rowSpan&&!(P+R>=t.rowCount);R++){var pt=t.Gb(P+R);pt.oa!==0&&(S.height+=pt.total)}for(R=1;R<et.columnSpan&&!(T+R>=t.columnCount);R++)pt=t.Fb(T+R),pt.oa!==0&&(S.width+=pt.total);var ut=F.oa+S.width,Tt=N.oa+S.height;R=u,pt=h;var Vt=ut,ke=Tt,Ne=u,ei=h,Ce=ut,ss=Tt;u+ut>i.width&&(Ce=Math.max(i.width-u,0)),h+Tt>i.height&&(ss=Math.max(i.height-h,0));var ae=et.alignment;if(ae.$b()){ae=t.defaultAlignment,ae.sb()||(ae=Et);var dr=ae.x,ii=ae.y,ls=ae.offsetX;ae=ae.offsetY;var sn=F.alignment,Bn=N.alignment;sn.sb()&&(dr=sn.x,ls=sn.offsetX),Bn.sb()&&(ii=Bn.y,ae=Bn.offsetY)}else dr=ae.x,ii=ae.y,ls=ae.offsetX,ae=ae.offsetY;(isNaN(dr)||isNaN(ii))&&(ii=dr=.5,ae=ls=0),sn=U.width,Bn=U.height;var Hi=et.margin,Di=Hi.left+Hi.right,us=Hi.top+Hi.bottom,gr=xf(et,N,F,!1);!isNaN(et.desiredSize.width)||gr!==oe&&gr!==Re||(sn=Math.max(ut-Di,0)),!isNaN(et.desiredSize.height)||gr!==oe&&gr!==Ue||(Bn=Math.max(Tt-us,0)),ut=et.maxSize,Tt=et.minSize,sn=Math.min(ut.width,sn),Bn=Math.min(ut.height,Bn),sn=Math.max(Tt.width,sn),Bn=Math.max(Tt.height,Bn),ut=Bn+us,R+=Vt*dr-(sn+Di)*dr+ls+Hi.left,pt+=ke*ii-ut*ii+ae+Hi.top,et.visible&&(sr(Ne,ei,Ce,ss,R,pt,U.width,U.height)?et.arrange(R,pt,sn,Bn):et.arrange(R,pt,sn,Bn,new E(Ne,ei,Ce,ss)))}}}for(ht.free(S),t=0;t<n;t++)i=e[t],o=i instanceof z?i:null,o!==null&&qo(o)&&(o=i.actualBounds,i.naturalBounds.ka(),i.naturalBounds.h(0,0,o.width,o.height),i.naturalBounds.freeze())}};function dd(){this.xa="Base"}Z(dd,ye),dd.prototype.measure=function(){},dd.prototype.arrange=function(){};function gd(){this.xa="Base"}Z(gd,ye),gd.prototype.measure=function(){},gd.prototype.arrange=function(){};function yd(){this.xa="Base"}Z(yd,ye),yd.prototype.measure=function(t,e,i,n,r,o,l){1<n.length&&O("Viewbox Panel cannot contain more than one GraphObject."),n=n[0],n.Ca=1,n.Tj(),n.measure(1/0,1/0,o,l);var u=n.measuredBounds,h=n.margin,f=h.right+h.left;if(h=h.top+h.bottom,isFinite(e)||isFinite(i)){var c=n.scale,p=u.width;u=u.height;var g=Math.max(e-f,0),m=Math.max(i-h,0),v=1;t.viewboxStretch===Fn?p!==0&&u!==0&&(v=Math.min(g/p,m/u)):p!==0&&u!==0&&(v=Math.max(g/p,m/u)),v===0&&(v=1e-4),n.Ca*=v,c!==n.scale&&(pn(n,!0),n.measure(1/0,1/0,o,l))}u=n.measuredBounds,r.width=isFinite(e)?e:Math.max(u.width+f,0),r.height=isFinite(i)?i:Math.max(u.height+h,0)},yd.prototype.arrange=function(t,e,i){e=e[0];var n=e.measuredBounds,r=e.margin,o=Math.max(n.width+(r.right+r.left),0);r=Math.max(n.height+(r.top+r.bottom),0);var l=e.alignment;l.$b()&&(l=t.defaultAlignment),l.sb()||(l=Et),e.arrange(i.width*l.x-o*l.x+l.offsetX,i.height*l.y-r*l.y+l.offsetY,n.width,n.height)};function kf(){this.xa="Base"}Z(kf,ye),kf.prototype.measure=function(){},kf.prototype.arrange=function(){},kf.prototype.ic=function(t,e,i){i=t.Df()*i.scale,0>=i&&(i=1);var n=t.gridCellSize,r=n.width;n=n.height;var o=t.naturalBounds,l=t.actualBounds,u=o.width,h=o.height,f=Math.ceil(u/r),c=Math.ceil(h/n),p=t.gridOrigin,g=p.x;p=p.y,e.save(),e.beginPath(),e.rect(0,0,u,h),e.clip(),e.Se();for(var m=[],v=t.O.s,x=v.length,k=0;k<x;k++){var S=v[k],P=[];if(m.push(P),S.visible){var N=S.interval;if(!(0>N)){S=Gm(S.figure);for(var T=0;T<x;T++)if(T!==k){var F=v[T];F.visible&&Gm(F.figure)===S&&(F=F.interval,F>N&&P.push(F))}}}}for(v=t.O.s,x=v.length,k=0;k<x;k++){var D=v[k];if(D.visible&&(P=D.interval||1,S=Math.abs(P),!(2>r*S*i))){if(N=D.segmentIndex,(!isFinite(N)||isNaN(N))&&(N=0),0>N&&(N=S-Math.min(-N,S)),N=Math.round(N%S),S=D.opacity,T=1,S!==1){if(S===0)continue;T=e.globalAlpha,e.globalAlpha=T*S}F=m[k];var X=!1,tt=D.strokeDashArray;if(tt!==null&&(X=!0,e.js(tt,D.strokeDashOffset)),D.figure==="LineV"&&D.stroke!==null&&0<D.strokeWidth){for(e.lineWidth=D.strokeWidth,en(t,e,D.stroke,!1,!1,o,l),e.beginPath(),tt=D=Math.floor((g-r)/r);tt<=D+f;tt++){var et=tt*r+g;0<=et&&et<=u&&md(tt,P,N,F)&&(e.moveTo(et,0),e.lineTo(et,h))}e.stroke(),e.Se()}else if(D.figure==="LineH"&&D.stroke!==null&&0<D.strokeWidth){for(e.lineWidth=D.strokeWidth,en(t,e,D.stroke,!1,!1,o,l),e.beginPath(),tt=D=Math.floor((p-n)/n);tt<=D+c;tt++)et=tt*n+p,0<=et&&et<=h&&md(tt,P,N,F)&&(e.moveTo(0,et),e.lineTo(u,et));e.stroke(),e.Se()}else if(D.figure==="BarV"&&D.fill!==null)for(en(t,e,D.fill,!0,!1,o,l),D=D.width,isNaN(D)&&(D=r),et=tt=Math.floor((g-r)/r);et<=tt+f;et++){var U=et*r+g;0<=U+D&&U<=u&&md(et,P,N,F)&&e.fillRect(U,0,D,h)}else if(D.figure==="BarH"&&D.fill!==null)for(en(t,e,D.fill,!0,!1,o,l),D=D.height,isNaN(D)&&(D=n),et=tt=Math.floor((p-n)/n);et<=tt+c;et++)U=et*n+p,0<=U+D&&U<=h&&md(et,P,N,F)&&e.fillRect(0,U,u,D);X&&e.fs(),S!==1&&(e.globalAlpha=T)}}e.restore(),e.Vc(!1)};function md(t,e,i,n){if(0>e)return t%e===i;if(t%e!==i)return!1;e=n.length;for(var r=0;r<e;r++)if(t%n[r]===i)return!1;return!0}function vd(){this.xa="Base"}Z(vd,ye),vd.prototype.measure=function(t,e,i,n,r){var o=n.length;if(t instanceof Nt||t instanceof V){var l=null,u=null;if(t instanceof V&&(l=t),t instanceof Nt&&(u=t,l=u.adornedPart,t.j===null&&(t.j=[])),l instanceof V){var h=l;if(o===0)go(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var f=t instanceof Nt?null:l.path;e=l.routeBounds,i=t.jg,i.h(0,0,e.width,e.height);var c=h.points,p=l.pointsCount;u!==null?u.Ul(!1):l!==null&&l.Ul(!1),u=e.width;var g=e.height,m=t.j;if(m.length=0,f!==null){nS(t,u,g,f);var v=f.measuredBounds;i.ed(v),m.push(v)}v=vt.alloc();for(var x=C.alloc(),k=C.alloc(),S=0;S<o;S++){var P=n[S];if(P!==f)if(P.isPanelMain&&P instanceof yt){nS(t,u,g,P);var N=P.measuredBounds;i.ed(N),m.push(N)}else if(2>p)P.measure(1/0,1/0,0,0),N=P.measuredBounds,i.ed(N),m.push(N);else{var T=P.segmentIndex,F=P.segmentFraction,D=P.alignmentFocus;D.Nc()&&(D=Et);var X=P.segmentOrientation,tt=P.segmentOffset;if(isNaN(T)){var et=h.ua;N=Rt(),et.Su(F,N);var U=C.allocAt(N[0],N[1]);if(U.offset(e.x,e.y),et=N[2],X!==Ye){var R=h.computeAngle(P,X,et);P.Lb=R}R=U.x-e.x;var pt=U.y-e.y;C.free(U),Bt(N)}else if(T<-p||T>=p)N=C.alloc(),h.vg(),h.computeMidPoint(N),et=h.midAngle,X!==Ye&&(R=h.computeAngle(P,X,et),P.Lb=R),R=N.x-e.x,pt=N.y-e.y,C.free(N);else{if(R=0,0<=T?(pt=c.M(T),N=T<p-1?c.M(T+1):pt):(R=p+T,pt=c.M(R),N=0<R?c.M(R-1):pt),pt.Xa(N)){0<=T?(et=0<T?c.M(T-1):pt,R=T<p-2?c.M(T+2):N):(et=R<p-1?c.M(R+1):pt,R=1<R?c.M(R-2):N),U=et.Bf(pt);var ut=N.Bf(R);et=U>ut+10?0<=T?et.ab(pt):pt.ab(et):ut>U+10?0<=T?N.ab(R):R.ab(N):0<=T?et.ab(R):R.ab(et)}else et=0<=T?pt.ab(N):N.ab(pt);X!==Ye&&(R=h.computeAngle(P,X,et),P.Lb=R),R=pt.x+(N.x-pt.x)*F-e.x,pt=pt.y+(N.y-pt.y)*F-e.y}P.measure(1/0,1/0,0,0),N=P.measuredBounds,U=P.naturalBounds;var Tt=0;P instanceof yt&&(Tt=P.strokeWidth),ut=U.width+Tt;var Vt=U.height+Tt;v.reset(),v.translate(-N.x,-N.y),v.scale(P.scale,P.scale),v.rotate(X===Ye?P.angle:et,ut/2,Vt/2),X!==Xh&&X!==_h||v.rotate(90,ut/2,Vt/2),X!==Kh&&X!==Wh||v.rotate(-90,ut/2,Vt/2),X===zf&&(45<et&&135>et||225<et&&315>et)&&v.rotate(-et,ut/2,Vt/2),U=new E(0,0,ut,Vt),x.yi(U,D),v.Ga(x),D=-x.x+Tt/2*P.scale,P=-x.y+Tt/2*P.scale,k.assign(tt),Tt=isNaN(tt.x);var ke=isNaN(tt.y);if(Tt||ke){ut=ut/2+3,Vt=Vt/2+3;var Ne=45<=et&&135>=et,ei=225<=et&&315>=et;X===Ye&&(Ne||ei)?(k.x=ke?ut:tt.y,k.y=Tt?Vt:tt.x,Ne?0<=T||isNaN(T)&&.5>F||!Tt||(k.y=-Vt):ei&&((0<=T||isNaN(T)&&.5>F)&&Tt&&(k.y=-Vt),ke&&(k.x=-ut))):(Tt&&(k.x=0<=T||isNaN(T)&&.5>F?ut:-ut),ke&&(k.y=-Vt),k.rotate(et))}else k.rotate(et);R+=k.x,pt+=k.y,U.set(N),U.h(R+D,pt+P,N.width,N.height),m.push(U),i.ed(U)}}if(l!==null)for(n=l.labelNodes;n.next();)n.value.measure(1/0,1/0);t.jg=i,t.position.h(e.x+i.x,e.y+i.y),go(r,i.width||0,i.height||0),vt.free(v),C.free(x),C.free(k)}}}},vd.prototype.arrange=function(t,e){var i=e.length;if(t instanceof Nt||t instanceof V){var n=t,r=null;t instanceof Nt&&(r=t,n=r.adornedPart);var o=t instanceof Nt?null:n.path,l=t.j;if(l.length!==0){var u=0;if(o!==null&&u<l.length){var h=l[u];u++,o.arrange(h.x-t.jg.x,h.y-t.jg.y,h.width,h.height)}for(h=0;h<i;h++){var f=e[h];if(f!==o&&u<l.length){var c=l[u];u++,f.arrange(c.x-t.jg.x,c.y-t.jg.y,c.width,c.height)}}}if(e=n.points,i=e.count,2<=i&&t instanceof V)for(o=t.labelNodes;o.next();){var p=t;l=o.value,u=l.segmentIndex,h=l.segmentFraction;var g=l.alignmentFocus;if(f=l.segmentOrientation,c=l.segmentOffset,isNaN(u)){var m=p.ua,v=Rt();m.Su(h,v);var x=C.allocAt(v[0],v[1]);x.add(p.i(0)),m.type===H.o||(m=m.figures.first()),x.offset(-m.startX,-m.startY),m=v[2],f!==Ye&&(p=p.computeAngle(l,f,m),l.angle=p),p=x.x;var k=x.y;C.free(x),Bt(v)}else if(u<-i||u>=i)v=C.alloc(),m=p,k=v,m.vg(),m.computeMidPoint(k),m=p.midAngle,f!==Ye&&(p=p.computeAngle(l,f,m),l.angle=p),p=v.x,k=v.y,C.free(v);else{if(x=0,0<=u?(v=e.s[u],k=u<i-1?e.s[u+1]:v):(x=i+u,v=e.s[x],k=0<x?e.s[x-1]:v),v.Xa(k)){0<=u?(m=0<u?e.s[u-1]:v,x=u<i-2?e.s[u+2]:k):(m=x<i-1?e.s[x+1]:v,x=1<x?e.s[x-2]:k);var S=m.Bf(v),P=k.Bf(x);m=S>P+10?0<=u?m.ab(v):v.ab(m):P>S+10?0<=u?k.ab(x):x.ab(k):0<=u?m.ab(x):x.ab(m)}else m=0<=u?v.ab(k):k.ab(v);f!==Ye&&(p=p.computeAngle(l,f,m),l.angle=p),p=v.x+(k.x-v.x)*h,k=v.y+(k.y-v.y)*h}if(g.ys())l.location=new C(p,k);else{g.Nc()&&(g=Et),v=vt.alloc(),v.reset(),v.scale(l.scale,l.scale),v.rotate(l.angle,0,0);var N=l.naturalBounds;x=E.allocAt(0,0,N.width,N.height),S=C.alloc(),S.yi(x,g),v.Ga(S),g=-S.x,P=-S.y;var T=N.width,F=N.height;N=C.alloc(),N.assign(c);var D=isNaN(c.x),X=isNaN(c.y);if(D||X){T=T/2+3,F=F/2+3;var tt=45<=m&&135>=m,et=225<=m&&315>=m;f===Ye&&(tt||et)?(N.x=X?T:c.y,N.y=D?F:c.x,tt?0<=u||isNaN(u)&&.5>h||!D||(N.y=-F):et&&((0<=u||isNaN(u)&&.5>h)&&D&&(N.y=-F),X&&(N.x=-T))):(D&&(N.x=0<=u||isNaN(u)&&.5>h?T:-T),X&&(N.y=-F),N.rotate(m))}else N.rotate(m);p+=N.x,k+=N.y,v.pp(x),g+=x.x,P+=x.y,u=C.allocAt(p+g,k+P),l.move(u),C.free(u),C.free(N),C.free(S),E.free(x),vt.free(v)}}r!==null?r.Ul(!1):n.Ul(!1),n=FS(t),t.location.h(t.position.x+n.x,t.position.y+n.y),C.free(n)}};function nS(t,e,i,n){if(Qo(n)!==!1){var r=n.strokeWidth;r===0&&t instanceof Nt&&t.type===z.Link&&t.adornedObject instanceof yt&&(r=t.adornedObject.strokeWidth),r*=n.Ca,t instanceof V&&t.ua!==null?(t=t.geometry.bounds,n.Ge(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):t instanceof Nt&&t.adornedPart.ua!==null?(t=t.adornedPart.ua.bounds,n.Ge(t.x-r/2,t.y-r/2,t.width+r,t.height+r)):n.Ge(-(r/2),-(r/2),e+r,i+r),r=n.desiredSize,r.w()||n.ua===null?n.fc.h(0,0,r.width,r.height):n.fc.assign(n.ua.bounds),pn(n,!1)}}function Cf(){this.xa="Base"}Z(Cf,ye),Cf.prototype.measure=function(t,e,i,n,r,o,l){var u=t.Qb();t.graduatedBounds=[];var h=u.margin,f=h.right+h.left,c=h.top+h.bottom;u.measure(e,i,o,l);var p=u.measuredBounds,g=new E(-h.left,-h.top,Math.max(p.width+f,0),Math.max(p.height+c,0));t.graduatedBounds.push(g),r.assign(g);for(var m=u.geometry,v=u.strokeWidth,x=m.flattenedSegments,k=m.flattenedLengths,S=m.flattenedTotalLength,P=x.length,N=0,T=0,F=Rt(),D=0;D<P;D++){var X=x[D],tt=[];T=N=0;for(var et=X.length,U=0;U<et;U+=2){var R=X[U],pt=X[U+1];if(U!==0){var ut=180*Math.atan2(pt-T,R-N)/Math.PI;0>ut&&(ut+=360),tt.push(ut)}N=R,T=pt}F.push(tt)}if(t.graduatedIntervals===null){for(var Tt=[],Vt=t.O.s,ke=Vt.length,Ne=0;Ne<ke;Ne++){var ei=Vt[Ne],Ce=[];if(Tt.push(Ce),ei.visible){var ss=ei.interval;if(!(0>ss)){for(var ae=0;ae<ke;ae++)if(ae!==Ne){var dr=Vt[ae];if(dr.visible&&ei.constructor===dr.constructor){var ii=dr.interval;ii>ss&&Ce.push(ii)}}}}}t.graduatedIntervals=Tt}var ls=t.graduatedIntervals,sn=t.O.s,Bn=sn.length,Hi=0,Di=0,us=S;t.graduatedMarks=[];for(var gr,zs=0;zs<Bn;zs++){var Xi=sn[zs];if(gr=[],Xi.visible&&Xi!==u){var jg=Math.abs(Xi.interval),ni=t.graduatedTickUnit;if(!(2>ni*jg*S/t.graduatedRange&&Xi.graduatedSkip===null)){var Ml=k[0][0],jr=0,Ki=0;Di=S*Xi.graduatedStart-1e-4,us=S*Xi.graduatedEnd+1e-4;var Vs=ni*jg,_i=t.graduatedTickBase;if(_i<t.graduatedMin){var Au=(t.graduatedMin-_i)/Vs;Au=Au%1===0?Au:Math.floor(Au+1),_i+=Au*Vs}else _i>t.graduatedMin+Vs&&(_i-=Math.floor((_i-t.graduatedMin)/Vs)*Vs);for(var fa=ls[zs],Dg=_i,xc=1e-6*t.graduatedMax,wc=1;_i<=t.graduatedMax+xc;wc++){t:{for(var To=fa.length,Dr=0;Dr<To;Dr++){var ca=(_i-t.graduatedTickBase)%(fa[Dr]*t.graduatedTickUnit),Us=1e-6*t.graduatedTickUnit;if(ca<Us&&ca>-Us){var pa=!1;break t}}pa=!0}if(pa&&(_i>t.graduatedMax&&(_i=t.graduatedMax),Xi.graduatedSkip===null||Xi instanceof Ut&&!Xi.graduatedSkip(_i,Xi)||Xi instanceof yt&&!Xi.graduatedSkip(_i,Xi))&&(Hi=(_i-t.graduatedMin)*S/t.graduatedRange,Hi>S&&(Hi=S),Di<=Hi&&Hi<=us)){for(var er=F[jr][Ki],hs=k[jr][Ki];jr<k.length;){for(;Hi>Ml&&Ki<k[jr].length-1;)Ki++,er=F[jr][Ki],hs=k[jr][Ki],Ml+=hs;if(Hi<=Ml)break;jr++,Ki=0,er=F[jr][Ki],hs=k[jr][Ki],Ml+=hs}var Oi=x[jr],da=Oi[2*Ki],Or=Oi[2*Ki+1],Lo=(Hi-(Ml-hs))/hs,Mc=new C(da+(Oi[2*Ki+2]-da)*Lo+v/2-m.bounds.x,Or+(Oi[2*Ki+3]-Or)*Lo+v/2-m.bounds.y);Mc.scale(u.scale,u.scale);t:{var br=er,Fo=F[jr];if(!(.5005>Lo&&.4995<Lo)){var Ir=br;if(.5>Lo?0<Ki?Ir=Fo[Ki-1]:A.$(Oi[0],Oi[Oi.length-2])&&A.$(Oi[1],Oi[Oi.length-1])&&(Ir=Fo[Fo.length-1]):.5<Lo&&(Ki+1<Fo.length?Ir=Fo[Ki+1]:A.$(Oi[0],Oi[Oi.length-2])&&A.$(Oi[1],Oi[Oi.length-1])&&(Ir=Fo[0])),br!==Ir){var Sc=Math.abs(br-Ir);if(180<Sc&&(br<Ir?br+=360:Ir+=360,Sc=Math.abs(br-Ir)),5e-4>Lo||.9995<Lo){er=(br+Ir)/2%360;break t}if(10>Sc){var ga=1-Math.abs(.5-Lo);er=(br*ga+Ir*(1-ga))%360;break t}}}er=br}if(Xi instanceof Ut){var to="";Xi.graduatedFunction!==null?(to=Xi.graduatedFunction(_i,Xi),to=to!=null?to.toString():""):to=(+_i.toFixed(2)).toString(),to!==""&&gr.push({am:Mc,angle:er,text:to})}else gr.push({am:Mc,angle:er})}_i=Dg+wc*Vs}}}t.graduatedMarks.push(gr)}Bt(F);var Ys=t.graduatedMarks;if(Ys!==null)for(var Ee=n.length,Sl=0;Sl<Ee;Sl++){var ue=n[Sl],Si=Ys[Sl];if(ue.visible&&ue!==u&&Si.length!==0){if(ue instanceof yt){var Wi=t,as=r,eo=ue.alignmentFocus;eo.Nc()&&(eo=yo);var ya=ue.angle;ue.Lb=0,ue.measure(1/0,1/0,0,0),ue.Lb=ya;var Og=ue.measuredBounds,kc=Og.width,ma=Og.height,ju=E.allocAt(0,0,kc,ma),Ii=C.alloc();Ii.yi(ju,eo),E.free(ju);for(var Gs=-Ii.x,Ao=-Ii.y,xn=new E,jo=Si.length,io=0;io<jo;io++)for(var Cc=Si[io],kl=Cc.am.x,Ig=Cc.am.y,va=Cc.angle,ee=0;4>ee;ee++){switch(ee){case 0:Ii.h(Gs,Ao);break;case 1:Ii.h(Gs+kc,Ao);break;case 2:Ii.h(Gs,Ao+ma);break;case 3:Ii.h(Gs+kc,Ao+ma)}Ii.rotate(va+ue.angle),Ii.offset(kl,Ig),io===0&&ee===0?xn.h(Ii.x,Ii.y,0,0):xn.Ye(Ii),Ii.offset(-kl,-Ig),Ii.rotate(-va-ue.angle)}C.free(Ii),Wi.graduatedBounds!==null&&Wi.graduatedBounds.push(xn),Oe(as,xn.x,xn.y,xn.width,xn.height)}else if(ue instanceof Ut){var Rn=t,no=r;Rn.temporaryTextBlock===null&&(Rn.temporaryTextBlock=new Ut);var $i=Rn.temporaryTextBlock;vS($i,ue);var xa=ue.alignmentFocus;xa.Nc()&&(xa=yo);for(var zn=ue.segmentOrientation,Cl=ue.segmentOffset,ro=new E,Pc=0,Nc=0,oo=0,Pl=0,Nl=0,wa=Si.length,Hs=0;Hs<wa;Hs++){var Vn=Si[Hs];Pc=Vn.am.x,Nc=Vn.am.y,oo=Vn.angle,Nl=Pl=ue.angle,zn!==Ye&&(Nl=zn===Hh||zn===Rf?oo+ue.angle:oo,Pl=V.computeAngle(zn,Nl)),$i.Lb=Pl,$i.text=Vn.text||"",$i.measure(1/0,1/0,0,0);var fs=$i.measuredBounds,Tl=$i.naturalBounds,Do=Tl.width,cs=Tl.height,Oo=vt.alloc();Oo.reset(),Oo.translate(-fs.x,-fs.y),Oo.scale($i.scale,$i.scale),Oo.rotate(Nl,Do/2,cs/2),zn!==Xh&&zn!==_h||Oo.rotate(90,Do/2,cs/2),zn!==Kh&&zn!==Wh||Oo.rotate(-90,Do/2,cs/2),zn===zf&&(45<oo&&135>oo||225<oo&&315>oo)&&Oo.rotate(-oo,Do/2,cs/2);var Du=E.allocAt(0,0,Do,cs),ps=C.alloc();ps.yi(Du,xa),Oo.Ga(ps);var Ma=-ps.x,Ou=-ps.y,Io=C.alloc();Io.assign(Cl),isNaN(Io.x)&&(Io.x=Do/2+3),isNaN(Io.y)&&(Io.y=-(cs/2+3)),Io.rotate(oo),Pc+=Io.x+Ma,Nc+=Io.y+Ou;var Tc=new E(Pc,Nc,fs.width,fs.height),Sa=new E(fs.x,fs.y,fs.width,fs.height),Lc=new E(Tl.x,Tl.y,Tl.width,Tl.height);Vn.Xz=Pl,Vn.lineCount=$i.lineCount,Vn.lines=[$i.Db,$i.Ih,$i.df,$i.Le,$i.Rc,$i.Sb,$i.ze],Vn.actualBounds=Tc,Vn.measuredBounds=Sa,Vn.naturalBounds=Lc,Hs===0?ro.assign(Tc):ro.ed(Tc),C.free(Io),C.free(ps),E.free(Du),vt.free(Oo)}Rn.graduatedBounds!==null&&Rn.graduatedBounds.push(ro),Oe(no,ro.x,ro.y,ro.width,ro.height)}pn(ue,!1)}}},Cf.prototype.arrange=function(t,e,i){if(t.graduatedBounds!==null){var n=t.Qb(),r=t.graduatedMarks;if(r!==null){var o=t.graduatedBounds,l=0,u=o[l];l++,n!==null&&n.arrange(u.x-i.x,u.y-i.y,u.width,u.height);for(var h=e.length,f=0;f<h;f++){var c=e[f];u=r[f],c.visible&&c!==n&&u.length!==0&&(u=o[l],l++,c.arrange(u.x-i.x,u.y-i.y,u.width,u.height))}t.graduatedBounds=null}}},Cf.prototype.ic=function(t,e,i){var n=i.aj;i.aj=!0;var r=t.naturalBounds,o=r.width,l=r.height;r=e instanceof Vi,e.save(),e.beginPath(),e.rect(-1,-1,o+1,l+1),e.clip(),e.Se(),o=t.Qb(),o.ic(e,i),l=t.Df()*i.scale,0>=l&&(l=1);for(var u=o.actualBounds,h=t.O.s,f=t.graduatedMarks,c=h.length,p=0;p<c;p++){var g=h[p],m=f[p],v=m.length;if(g.visible&&g!==o&&m.length!==0){if(g instanceof yt){if(!(2>t.graduatedTickUnit*g.interval*o.geometry.flattenedTotalLength/t.graduatedRange*l&&g.graduatedSkip===null)){var x=g.measuredBounds,k=g.strokeWidth*g.scale,S=g.alignmentFocus;S.Nc()&&(S=yo);for(var P=0;P<v;P++){var N=m[P].am,T=m[P].angle,F=S,D=g.Bb;D.reset(),D.translate(N.x+u.x,N.y+u.y),D.rotate(T+g.angle,0,0),D.translate(-x.width*F.x+F.offsetX+k/2,-x.height*F.y+F.offsetY+k/2),D.scale(g.scale,g.scale),Ph(g,!1),g.wh.set(g.Bb),g.Jk=g.scale,Cs(g,!1),g.ic(e,i),r&&(t.svg.appendChild(g.svg),g.svg=null),g.Bb.reset()}}}else if(g instanceof Ut)for(t.temporaryTextBlock===null&&(t.temporaryTextBlock=new Ut),x=t.temporaryTextBlock,vS(x,g),k=0;k<v;k++)S=m[k],S.actualBounds&&S.measuredBounds&&S.naturalBounds&&(x.gc=S.text||"",x.Lb=S.Xz||0,x.Gc=S.lineCount||0,P=S.lines,P!==void 0&&(x.Db=P[0],x.Ih=P[1],x.df=P[2],x.Le=P[3],x.Rc=P[4],x.Sb=P[5],x.ze=P[6]),S.naturalBounds&&(x.fc=S.naturalBounds),S.actualBounds&&(P=S.actualBounds,x.arrange(P.x,P.y,P.width,P.height)),P=S.actualBounds,x.arrange(P.x,P.y,P.width,P.height),N=S.measuredBounds,S=S.naturalBounds,T=x.Bb,T.reset(),T.translate(P.x+u.x,P.y+u.y),T.translate(-N.x,-N.y),x.oo(T,S.x,S.y,S.width,S.height),Ph(x,!1),x.wh.set(x.Bb),x.Jk=x.scale,Cs(x,!1),x.Ng=g.part,x.Me=g.panel,x.ic(e,i),x.Me=null,x.Ng=null,r&&(t.svg.appendChild(x.svg),x.svg=null))}}i.aj=n,e.restore(),e.Vc(!0)};function z(t,e){if(it.call(this),this.na=null,t===void 0)this.na=z.Position;else if(typeof t=="string"){var i=Qn.I(t);i!==null&&(this.na=i)}else t instanceof ye?this.na=t:t&&(this.na=z.Position,e=t);this.na===null&&O("Panel type not specified or PanelLayout not loaded: "+t),this.l=this.l|4194304|(this.na===z.Grid?1048576:0),this.O=new q,this.zb=Ju,this.Um=_e,this.Uf=cn,this.$g=null,this.$e="",this.jg=new E(NaN,NaN,NaN,NaN),this.U=this.F=null,this.yo=Fn,this.kn=mw,this.ln=co,this.ub=this.ra=null,this.An=NaN,this.ge=this.Hh=null,e&&Object.assign(this,e)}Z(z,it),z.prototype.cloneProtected=function(t){it.prototype.cloneProtected.call(this,t),t.na=this.na,t.zb=this.zb.J(),t.Um=this.Um.J(),t.Uf=this.Uf,t.$e=this.$e,t.jg.assign(this.jg),this.U!==null&&(t.U=this.U.copy(t)),t.yo=this.yo,t.kn=this.kn.J(),t.ln=this.ln.J(),this.ra!==null&&(t.ra=this.ra.copy()),t.ub=this.ub,t.An=this.An,t.Hh=this.Hh},z.prototype.Af=function(t){it.prototype.Af.call(this,t),t.O=this.O;for(var e=t.O.s,i=e.length,n=0;n<i;n++)e[n].Me=t;t.$g=null},z.prototype.copy=function(){var t=it.prototype.copy.call(this);if(t!==null){for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n].copy();r.xi(t),r.Ng=null;var o=t.O,l=o.count;if(o.Hb(l,r),o=t.part,o!==null){o.Rh=null,r.portId!==null&&o instanceof W&&(o.Te=!0);var u=t.diagram;u!==null&&u.undoManager.isUndoingRedoing||o.cb(de,"elements",t,null,r,null,l)}}return t}return null},s=z.prototype,s.toString=function(){return"Panel("+this.type.name+")#"+Ci(this)},s.Qn=function(t){it.prototype.Qn.call(this,t);for(var e=this.O.s,i=e.length,n=0;n<i;n++)e[n].Qn(t)},s.hh=function(t,e){if(this.na===z.Grid)t.yc(),this.na.ic(this,t,e);else if(this.na===z.Graduated)t.yc(),this.na.ic(this,t,e);else{if(this.na===z.Table)if(t.yc(),t instanceof Vi){var i=t.yd;t.yd=od(t,"gojs-ts"),Ym(this,t),t.nh.pop(),t.yd=i}else Ym(this,t);(i=this.isClipping&&this.na===z.Spot)&&t.save();for(var n=this.Qb(),r=this.O.s,o=r.length,l=0;l<o;l++){var u=r[l];i&&u===n&&(t.clipInsteadOfFill=!0),u.ic(t,e),i&&u===n&&(t.clipInsteadOfFill=!1)}i&&(t.restore(),t.Vc(!0))}};function Ym(t,e){e.lineCap="butt";var i=0<t.rowCount?t.rowDefs:null,n=0<t.columnCount?t.colDefs:null;i!==null&&xd(t,e,!0,i,!0),n!==null&&xd(t,e,!1,n,!0),i!==null&&rS(t,e,!0,i),n!==null&&rS(t,e,!1,n),i!==null&&xd(t,e,!0,i,!1),n!==null&&xd(t,e,!1,n,!1)}function rS(t,e,i,n){for(var r=n.length,o=t.actualBounds,l=t.naturalBounds,u=!0,h=0;h<r;h++){var f=n[h];if(f!==void 0&&f.actual!==0)if(u)u=!1;else{if(i){if(f.position>l.height)continue}else if(f.position>l.width)continue;var c=f.separatorStrokeWidth;isNaN(c)&&(c=i?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var p=f.separatorStroke;if(p===null&&(p=i?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),c!==0&&p!==null){en(t,e,p,!1,!1,l,o),p=!1;var g=f.separatorDashArray;g===null&&(g=i?t.defaultRowSeparatorDashArray:t.defaultColumnSeparatorDashArray),g!==null&&(p=!0,e.js(g,0)),e.beginPath(),g=f.position+c,i?g>l.height&&(c-=g-l.height):g>l.width&&(c-=g-l.width),f=f.position+c/2,e.lineWidth=c,c=t.zb,i?(f+=c.top,g=l.width-c.right,e.moveTo(c.left,f),e.lineTo(g,f)):(f+=c.left,g=l.height-c.bottom,e.moveTo(f,c.top),e.lineTo(f,g)),e.stroke(),e.Se(),p&&e.fs()}}}}function xd(t,e,i,n,r){for(var o=n.length,l=t.actualBounds,u=t.naturalBounds,h=oS(t,!0),f=oS(t,!1),c=0;c<o;c++){var p=n[c];if(p!==void 0&&p.background!==null&&p.coversSeparators!==r&&p.actual!==0){var g=i?l.height:l.width;if(!(p.position>g)){var m=p.Wc(),v=p.separatorStrokeWidth;isNaN(v)&&(v=i?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth);var x=p.separatorStroke;x===null&&(x=i?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),(x===null||p.index===(i?h:f))&&(v=0),m-=v,v=p.position+v,m+=p.actual,v+m>g&&(m=g-v),0>=m||(g=t.zb,en(t,e,p.background,!0,!1,u,l),i?e.fillRect(g.left,v+g.top,l.width-(g.left+g.right),m):e.fillRect(v+g.left,g.top,m,l.height-(g.top+g.bottom)))}}}}function oS(t,e){for(var i=e?t.rowCount:t.columnCount,n=0;n<i;n++){var r=e?t.rowDefs[n]:t.colDefs[n];if(r!==void 0)return r.index}return 0}function Gm(t){return t==="LineV"||t==="BarV"}s.nv=function(){for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].nv();this.Hc=!0},s.jk=function(t,e,i){if(!it.prototype.jk.call(this,t,e,i))return!1;if(this.type===z.Table)i=this.svg.getElementsByClassName("gojs-ts"),i=i.length!==0?i[0]:null,i!==null&&(i.innerHTML=""),t.yd=i,Ym(this,t),t.yd=null;else if(this.na===z.Grid||this.na===z.Graduated)return this.svg.innerHTML="",this.svg.remove(),!1;i=this.O.s;for(var n=i.length,r=0;r<n;r++)i[r].ic(t,e);return!0},s.mk=function(){return!0},s.ap=function(t,e,i,n){if(!this.isClipping)if(this.Dd()&&t.ak!==null){t=t.ak,e=this.O.s;for(var r=0,o=0,l=0;l<e.length;l++)if(e[l].Ed()){var u=e[l].actualBounds;r=l===0?u.x:Math.min(u.x,r),o=l===0?u.y:Math.min(u.y,o)}n.setAttributeNS(null,"clip-path","path('M "+(t.x-i.x-r)+","+(t.y-i.y-o)+" l "+t.width+" 0 l 0 "+t.height+" l -"+t.width+" 0 z')")}else it.prototype.ap.call(this,t,e,i,n)},s.Rj=function(t,e,i,n,r){var o=this.se(),l=this.transform,u=1/(l.m11*l.m22-l.m12*l.m21),h=l.m22*u,f=-l.m12*u,c=-l.m21*u,p=l.m11*u,g=u*(l.m21*l.dy-l.m22*l.dx),m=u*(l.m12*l.dx-l.m11*l.dy);if(this.areaBackground!==null)return l=this.actualBounds,A.Ff(l.left,l.top,l.right,l.bottom,t,e,i,n,r);if(this.background!==null)return o=t*h+e*c+g,u=t*f+e*p+m,t=i*h+n*c+g,h=i*f+n*p+m,r.h(0,0),i=this.naturalBounds,o=A.Ff(0,0,i.width,i.height,o,u,t,h,r),r.transform(l),o;o||(h=1,c=f=0,p=1,m=g=0),u=t*h+e*c+g,t=t*f+e*p+m,h=i*h+n*c+g,i=i*f+n*p+m,r.h(h,i),n=(h-u)*(h-u)+(i-t)*(i-t),f=!1,p=this.O.s,m=p.length,c=C.alloc(),g=null,e=1/0;var v=null,x=this.isClipping&&this.na===z.Spot;x&&(v=C.alloc(),g=this.Qb(),(f=g.Rj(u,t,h,i,v))&&(e=(u-v.x)*(u-v.x)+(t-v.y)*(t-v.y)));for(var k=0;k<m;k++){var S=p[k];S.visible&&S!==g&&S.Rj(u,t,h,i,c)&&(f=!0,S=(u-c.x)*(u-c.x)+(t-c.y)*(t-c.y),S<n&&(n=S,r.set(c)))}return x&&(e>n&&r.set(v),C.free(v)),C.free(c),o&&r.transform(l),f},s.Gj=function(){for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Gj();it.prototype.Gj.call(this)},s.v=function(t){if(!Qo(this)){it.prototype.v.call(this,t),t=null,(this.na===z.Auto||this.na===z.Link)&&(t=this.Qb());for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];if((r===t||r.isPanelMain)&&r.v(!0),!r.desiredSize.w()){var o=ar(r,!1);(r instanceof vi||r instanceof z||r instanceof Ut||o!==te)&&r.v(!0)}}}},s.Tj=function(){if(!Qo(this)){pn(this,!0),ll(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Tj()}},s.Tk=function(){if(!(this.l&2048)){Ph(this,!0),Cs(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Yu()}},s.Yu=function(){Cs(this,!0);for(var t=this.O.s,e=t.length,i=0;i<e;i++)t[i].Yu()},s.Wl=function(t,e,i,n){var r=this.jg;r.h(0,0,0,0);var o=this.desiredSize,l=this.minSize;i===void 0&&(i=l.width,n=l.height),i=Math.max(i,l.width),n=Math.max(n,l.height);var u=this.maxSize;isNaN(o.width)||(t=Math.min(o.width,u.width)),isNaN(o.height)||(e=Math.min(o.height,u.height)),t=Math.max(i,t),e=Math.max(n,e);var h=this.zb;t=Math.max(t-h.left-h.right,0),e=Math.max(e-h.top-h.bottom,0),this.na.measure(this,t,e,this.O.s,r,i,n),t=r.width+h.left+h.right,h=r.height+h.top+h.bottom,isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(h=o.height),t=Math.min(u.width,t),h=Math.min(u.height,h),t=Math.max(l.width,t),h=Math.max(l.height,h),t=Math.max(i,t),h=Math.max(n,h),go(r,t,h),go(this.naturalBounds,t,h),this.Ge(0,0,t,h)},s.Qb=function(){if(this.$g===null){var t=this.O.s,e=t.length;if(e===0)return null;for(var i=0;i<e;i++){var n=t[i];if(n.isPanelMain===!0)return this.$g=n}this.$g=t[0]}return this.$g};function Mo(t){return t.part!==null?t.part.locationObject:null}s.eh=function(t,e,i,n){var r=this.O.s;if(this.actualBounds.h(t,e,i,n),r.length!==0){if(!this.desiredSize.w()){t=ar(this,!0);var o=this.measuredBounds;e=o.width,o=o.height;var l=this.Kg,u=l.left+l.right;switch(l=l.top+l.bottom,e===i&&o===n&&(t=te),t){case te:(e>i||o>n)&&(this.v(),this.measure(e>i?i:e,o>n?n:o,0,0));break;case oe:this.v(!0),this.measure(i+u,n+l,0,0);break;case Re:this.v(!0),this.measure(i+u,o+l,0,0);break;case Ue:this.v(!0),this.measure(e+u,n+l,0,0)}}this.na.arrange(this,r,this.jg)}},s.gh=function(t){var e=this.naturalBounds,i=Mo(this);if(sr(0,0,e.width,e.height,t.x,t.y)){e=this.O.s;for(var n=e.length,r=C.allocAt(0,0);n--;){var o=e[n];if((o.visible||o===i)&&(pi(r.set(t),o.transform),o.ca(r)))return C.free(r),!0}return C.free(r),!(this.Ma===null&&this.areaBackground===null)}return!1},s.ks=function(t){if(this.bindingId===t)return this;for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n].ks(t);if(r!==null)return r}return null},s.rm=function(t,e){if(e(this,t),t instanceof z){t=t.O.s;for(var i=t.length,n=0;n<i;n++)this.rm(t[n],e)}};function fl(t,e){sS(t,t,e)}function sS(t,e,i){i(e),e=e.O.s;for(var n=e.length,r=0;r<n;r++){var o=e[r];o instanceof z&&sS(t,o,i)}}function dT(t,e){lS(t,t,e)}function lS(t,e,i){if(i(e),e instanceof z){e=e.O.s;for(var n=e.length,r=0;r<n;r++)lS(t,e[r],i)}}s.Nl=function(t){return uS(this,this,t)};function uS(t,e,i){if(i(e))return e;if(e instanceof z){e=e.O.s;for(var n=e.length,r=0;r<n;r++){var o=uS(t,e[r],i);if(o!==null)return o}}return null}s.fb=function(t){if(this.name===t)return this;var e=this.O.s,i=e.length;this.Hh===null&&this.itemTemplateMap===null||(i=Pf(this));for(var n=0;n<i;n++){var r=e[n];if(r instanceof z){var o=r.fb(t);if(o!==null)return o}if(r.name===t)return r}return null};function hS(t){t=t.O.s;for(var e=t.length,i=0,n=0;n<e;n++){var r=t[n];r instanceof z?i=Math.max(i,hS(r)):r instanceof yt&&(i=Math.max(i,r.ig/2*r.strokeMiterLimit*r.Df()))}return i}s.se=function(){return!(this.type===z.TableRow||this.type===z.TableColumn)};function qo(t){return t.type===z.TableRow||t.type===z.TableColumn}s.kc=function(t,e,i){if(this.pickable===!1||(e===void 0&&(e=null),i===void 0&&(i=null),Zn(this)))return null;var n=this.naturalBounds,r=1/this.Df(),o=this.se(),l=o?t:pi(C.allocAt(t.x,t.y),this.transform),u=this.diagram,h=10,f=5;if(u!==null&&(h=u.Ql("extraTouchArea"),f=h/2),sr(-(f*r),-(f*r),n.width+h*r,n.height+h*r,l.x,l.y)){if(!this.isAtomic){r=this.O.s;var c=r.length;if(u=C.alloc(),f=(h=this.isClipping&&this.na===z.Spot)?this.Qb():null,h&&(f.se()?pi(u.set(t),f.transform):u.set(t),!f.ca(u)))return C.free(u),o||C.free(l),null;for(var p=Mo(this);c--;){var g=r[c];if((g.visible||g===p)&&(g.se()?pi(u.set(t),g.transform):u.set(t),!h||g!==f)){var m=null;if(g instanceof z?m=g.kc(u,e,i):g.pickable===!0&&g.ca(u)&&(m=g),m!==null&&(e!==null&&(m=e(m)),m!==null&&(i===null||i(m))))return C.free(u),o||C.free(l),m}}C.free(u)}return this.background===null&&this.areaBackground===null?(o||C.free(l),null):(t=sr(0,0,n.width,n.height,l.x,l.y)?this:null,o||C.free(l),t)}return o||C.free(l),null},s.ki=function(t,e,i,n){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var r=this.naturalBounds,o=this.se(),l=o?t:pi(C.allocAt(t.x,t.y),this.transform);if(r=sr(0,0,r.width,r.height,l.x,l.y),qo(this)||r){if(!this.isAtomic){for(var u=this.O.s,h=u.length,f=C.alloc(),c=Mo(this);h--;){var p=u[h];if(p.visible||p===c){p.se()?pi(f.set(t),p.transform):f.set(t);var g=p;p=p instanceof z?p:null,(p!==null?p.ki(f,e,i,n):g.ca(f))&&g.pickable!==!1&&(e!==null&&(g=e(g)),g===null||i!==null&&!i(g)||n.add(g))}}C.free(f)}return o||C.free(l),r&&(this.background!==null||this.areaBackground!==null)}return o||C.free(l),!1},s.Cf=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var l=o;if(o===void 0&&(l=vt.alloc(),l.reset()),l.multiply(this.transform),this.fh(t,l))return Hm(this,e,i,r),o===void 0&&vt.free(l),!0;if(this.Yc(t,l)){if(!this.isAtomic)for(var u=Mo(this),h=this.O.s,f=h.length;f--;){var c=h[f];if(c.visible||c===u){var p=c.actualBounds,g=this.naturalBounds;p.x>g.width||p.y>g.height||0>p.x+p.width||0>p.y+p.height||(p=c,c=c instanceof z?c:null,g=vt.alloc(),g.set(l),(c!==null?c.Cf(t,e,i,n,r,g):HM(p,t,n,g))&&(e!==null&&(p=e(p)),p===null||i!==null&&!i(p)||r.add(p)),vt.free(g))}}return o===void 0&&vt.free(l),n}return o===void 0&&vt.free(l),!1};function Hm(t,e,i,n){for(var r=t.O.s,o=r.length;o--;){var l=r[o];if(l.visible){var u=l.actualBounds,h=t.naturalBounds;u.x>h.width||u.y>h.height||0>u.x+u.width||0>u.y+u.height||(l instanceof z&&Hm(l,e,i,n),e!==null&&(l=e(l)),l===null||i!==null&&!i(l)||n.add(l))}}}s.og=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);var l=this.naturalBounds,u=this.se(),h=u?t:pi(C.allocAt(t.x,t.y),this.transform),f=u?e:pi(C.allocAt(e.x,e.y),this.transform),c=h.Bf(f),p=0<h.x&&h.x<l.width&&0<h.y&&h.y<l.height||di(h.x,h.y,0,0,0,l.height)<=c||di(h.x,h.y,0,l.height,l.width,l.height)<=c||di(h.x,h.y,l.width,l.height,l.width,0)<=c||di(h.x,h.y,l.width,0,0,0)<=c;if(l=h.zd(0,0)<=c&&h.zd(0,l.height)<=c&&h.zd(l.width,0)<=c&&h.zd(l.width,l.height)<=c,u||(C.free(h),C.free(f)),p){if(!this.isAtomic){h=C.alloc(),f=C.alloc(),c=Mo(this);for(var g=this.O.s,m=g.length;m--;){var v=g[m];if(v.visible||v===c){var x=v.actualBounds,k=this.naturalBounds;(!u||!(x.x>k.width||x.y>k.height||0>x.x+x.width||0>x.y+x.height))&&(v.se()?(x=v.transform,pi(h.set(t),x),pi(f.set(e),x)):(h.set(t),f.set(e)),x=v,v=v instanceof z?v:null,(v!==null?v.og(h,f,i,n,r,o):x.vx(h,f,r))&&(i!==null&&(x=i(x)),x===null||n!==null&&!n(x)||o.add(x)))}}C.free(h),C.free(f)}return r?p:l}return!1};function Xm(t){var e=null;return t instanceof yt&&(e=t.spot1,e===_e&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot1)),e===null&&(e=Je),e}function Km(t){var e=null;return t instanceof yt&&(e=t.spot2,e===_e&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot2)),e===null&&(e=Yr),e}s.add=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];for(i=0;i<e.length;i++)this.Hb(this.O.count,e[i]);return this},s.M=function(t){return this.O.M(t)},s.Hb=function(t,e){e instanceof ot&&O("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.rg(e))&&(this===e&&O("Cannot make a Panel contain itself: "+this.toString()),O("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var i=e.panel;if(i!==null&&i!==this&&O("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.na!==z.Grid||e instanceof yt||O("Can only add Shapes to a Grid Panel, not: "+e),this.na!==z.Graduated||e instanceof yt||e instanceof Ut||O("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.xi(this),e.Ng=null,this.itemArray!==null){var n=e.data;n!==null&&typeof n=="object"&&(this.ge===null&&(this.ge=new ct),this.ge.add(n,e))}var r=this.O;if(n=-1,i===this){for(var o=-1,l=this.O.s,u=l.length,h=0;h<u;h++)if(l[h]===e){o=h;break}if(o!==-1){if(o===t||o+1>=r.count&&t>=r.count)return;r.mb(o),n=o}else O("element "+e.toString()+" has panel "+i.toString()+" but is not contained by it.")}(0>t||t>r.count)&&(t=r.count),r.Hb(t,e),(t===0||e.isPanelMain)&&(this.$g=null),Qo(this)||this.v(),e.v(!1),e.portId!==null?this.Te=!0:e instanceof z&&e.Te===!0&&(this.Te=!0),this.graduatedIntervals=null,this.If()||Md(this,e,!1),i=this.part,i!==null&&(i.Rh=null,i.ag=NaN,this.Te&&i instanceof W&&(i.Te=!0),i.Te&&i instanceof W&&(i.wc=null),r=this.diagram,r!==null&&r.undoManager.isUndoingRedoing||(n!==-1&&i.cb(Se,"elements",this,e,null,n,null),i.cb(de,"elements",this,null,e,null,t)))};function _m(t,e){t.l=e?t.l|16777216:t.l&-16777217}s.remove=function(t){for(var e=this.O.s,i=e.length,n=-1,r=0;r<i;r++)if(e[r]===t){n=r;break}n!==-1&&this.qc(n,!0)},s.mb=function(t){0<=t&&this.qc(t,!0)},s.qc=function(t,e){var i=this.O,n=i.M(t);if(n.Ng=null,n.xi(null),this.ge!==null){var r=n.data;typeof r=="object"&&this.ge.remove(r)}i.mb(t),pn(this,!1),this.v(),this.$g===n&&(this.$g=null),this.graduatedIntervals=null;var o=this.part;o!==null&&(o.Rh=null,o.ag=NaN,o.Zb(),o instanceof W&&(n instanceof z?n.rm(n,function(l,u){dv(o,u,e)}):dv(o,n,e)),i=this.diagram,i!==null&&i.undoManager.isUndoingRedoing||o.cb(Se,"elements",this,n,null,t,null))},s.Gb=function(t){0>t&&at(t,">= 0",z,"getRowDefinition:idx"),t=Math.round(t);var e=this.rowDefs;if(e[t]===void 0){var i=new ce;i.xi(this),i.isRow=!0,i.index=t,e[t]=i,this.cb(de,"rowdefs",this,null,i,null,t)}return e[t]},s.sA=function(t){if(0>t&&at(t,">= 0",z,"removeRowDefinition:idx"),this.rowCount!==0){t=Math.round(t);var e=this.rowDefs,i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&e[n--]===void 0;)e.length--;this.cb(Se,"rowdefs",this,i,null,t,null),this.v()}}};function aS(t,e,i){var n=t.rowDefs;if(!(0>e)){if(n[e]=i instanceof ce?i:void 0,!i)for(e=n.length-1;0<=e&&n[e--]===void 0;)n.length--;t.v()}}s.Fb=function(t){0>t&&at(t,">= 0",z,"getColumnDefinition:idx"),t=Math.round(t);var e=this.colDefs;if(e[t]===void 0){var i=new ce;i.xi(this),i.isRow=!1,i.index=t,e[t]=i,this.cb(de,"coldefs",this,null,i,null,t)}return e[t]},s.nA=function(t){if(0>t&&at(t,">= 0",z,"removeColumnDefinition:idx"),this.columnCount!==0){t=Math.round(t);var e=this.colDefs,i=e[t];if(i){e[t]=void 0;for(var n=e.length-1;0<=n&&e[n--]===void 0;)e.length--;this.cb(Se,"coldefs",this,i,null,t,null),this.v()}}};function fS(t,e,i){var n=t.colDefs;if(!(0>e)){if(n[e]=i instanceof ce?i:void 0,!i)for(e=n.length-1;0<=e&&n[e--]===void 0;)n.length--;t.v()}}s.Iy=function(t){var e=null;return t.isRow?e=this.Gb(t.index):t.isRow||(e=this.Fb(t.index)),e&&Sd(e,t),this},s.Jy=function(t,e){return(t=this.Gb(t))&&Sd(t,new ce(e)),this},s.Dy=function(t,e){return(t=this.Fb(t))&&Sd(t,new ce(e)),this},s.sz=function(t){if(0>t||this.type!==z.Table||this.rowCount===0)return-1;for(var e=0,i=this.rowDefs,n=i.length,r=this.topIndex;r<n;r++){var o=i[r];if(o!==void 0&&(e+=o.total,t<e))break}return r},s.kz=function(t){if(0>t||this.type!==z.Table||this.columnCount===0)return-1;for(var e=0,i=this.colDefs,n=i.length,r=this.leftIndex;r<n;r++){var o=i[r];if(o!==void 0&&(e+=o.total,t<e))break}return r},s.Kz=function(t,e){if(e===void 0&&(e=new C(NaN,NaN)),this.type!==z.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var i=this.Qb();return i.geometry.Ru((t-this.graduatedMin)/this.graduatedRange,e),i.transform.Ga(e)},s.Lz=function(t){if(this.type!==z.Graduated)return NaN;var e=this.Qb();return e.transform.Cd(t),e.geometry.zx(t)*this.graduatedRange+this.graduatedMin};function cS(t){return t=t.allBindings,t!==null&&t._isFrozen}function jn(t){var e=t.allBindings;if(e===null)t.data!==null&&O("Template cannot have .data be non-null: "+t),t.allBindings=e=new q;else if(e._isFrozen)return;var i=new q;_m(t,!1),t.rm(t,function(f,c){c.th();var p=c.localBindings;if(p!==null)for(Tm(c,!1),p=p.iterator;p.next();){var g=p.value;g.mode===bh&&Tm(c,!0);var m=g.sourceName;m!==null&&(m==="/"&&_m(f,!0),m=T2(g,f,c),m!==null&&(i.add(m),m.srcBindings===null&&(m.srcBindings=new q),m.srcBindings.add(g))),e.add(g)}if(c instanceof z&&c.type===z.Table){if(0<c.rowCount){for(f=c.rowDefs,p=f.length,g=0;g<p;g++)if(m=f[g],m!==void 0&&m.be!==null)for(var v=m.be.iterator;v.next();){var x=v.value;x.xd=m,x.uo=2,x.wl=m.index,e.add(x)}}if(0<c.columnCount){for(c=c.colDefs,f=c.length,p=0;p<f;p++)if(g=c[p],g!==void 0&&g.be!==null)for(m=g.be.iterator;m.next();)v=m.value,v.xd=g,v.uo=1,v.wl=g.index,e.add(v)}}});for(var n=i.iterator;n.next();){var r=n.value;if(r.srcBindings!==null){Tm(r,!0);for(var o=r.srcBindings.iterator;o.next();){var l=o.value;r.localBindings===null&&(r.localBindings=new q),r.localBindings.add(l)}}r.srcBindings=null}for(n=e.iterator;n.next();)if(r=n.value,o=r.xd,o!==null){r.xd=null;var u=r.targetProperty,h=u.indexOf(".");0<h&&o instanceof z&&(l=u.substring(0,h),u=u.substr(h+1),h=o.fb(l),h!==null?(o=h,r.targetProperty=u):Pt('Warning: unable to find GraphObject named "'+l+'" for Binding: '+r.toString())),o instanceof ce?(l=Ci(o.panel),r.Bi=l===void 0?-1:l,o.panel.bindingId=r.Bi):o instanceof it?(l=Ci(o),r.Bi=l===void 0?-1:l,o.bindingId=r.Bi):O("Unknown type of binding target: "+o)}e.freeze(),t instanceof ot&&t.Zc()&&t.Va()}s.Zy=function(t){t===void 0&&(t=!1);var e=this.copy();return dT(e,function(i){i instanceof z&&(i.allBindings=null,i.ub=null);var n=i.localBindings;n!==null&&(i.localBindings=null,n.each(function(r){i.bind(r.copy())})),n=i.animationTriggers,n!==null&&(i.animationTriggers=null,n.each(function(r){i.Lv(r.value.copy())}))}),t&&jn(e),e},s.La=function(t){var e=this.allBindings;if(e!==null)for(t===void 0&&(t=""),e=e.iterator;e.next();){var i=e.value,n=i.sourceProperty;if((t===""||n===""||n===t)&&(n=i.targetProperty,i.converter!==null||n!=="")){n=this.data;var r=i.sourceName;if(r!==null){if(r==="")n=this;else if(r==="/")n=this;else if(r===".")n=this;else if(r==="..")n=this;else if(n=this.fb(r),n===null)continue}else if(i.isToModel)if(n=this.diagram,n!==null)n=n.model.modelData;else continue;var o=this,l=i.Bi;if(l!==-1){if(o=this.ks(l),o===null)continue}else i.xd!==null&&(o=i.xd);if(r==="/"?n=o.part:r==="."?n=o:r===".."&&(n=o.panel),r=i.uo,r!==0){if(!(o instanceof z))continue;r===1?o=o.Fb(i.wl):r===2&&(o=o.Gb(i.wl))}o!==void 0&&i.Ov(o,n)}}},s.ux=function(t){return t==null||this.ge===null?null:this.ge.I(t)};function gT(t,e){t=t.O.s;for(var i=t.length,n=e.length,r=0,o=null;r<i&&(o=t[r],!(o instanceof z&&o.data!==null));)r++,o=t[r];if(i-r!==n)return!0;if(o===null)return 0<n;for(var l=0;r<i&&l<n;){if(o=t[r],!(o instanceof z)||o.data!==e[l])return!0;r++,l++}return!1}function Pf(t){if(t.type===z.Spot||t.type===z.Auto)return Math.min(t.O.length,1);if(t.type===z.Link){t=t.O;for(var e=t.length,i=0;i<e;i++){var n=t.M(i);if(!(n instanceof yt&&n.isPanelMain))break}return i}return t.type===z.Table&&0<t.O.length&&(t=t.O.M(0),t.isPanelMain&&t instanceof z&&qo(t))?1:0}s.ov=function(){for(var t=Pf(this);this.O.length>t;)this.qc(this.O.length-1,!1);pS(this,this.itemArray)};function pS(t,e){var i=Pf(t);if(e===null||e.length===0)for(;t.O.length>i;)t.qc(t.O.length-1,!1);else if(t.O.length<=i){i=e.length;for(var n=0;n<i;n++)wd(t,e[n],n,!0)}else{n=i;for(var r=0;r<e.length;r++,n++){var o=e[r],l=n<t.O.length?t.O.M(n):null;if(l instanceof z){if(l.data!==o){var u=$m(t,l.data),h=$m(t,o),f=h!==u;f||(u=Zm(t,u),f=Zm(t,h)!==u),f?(t.qc(n,!1),wd(t,o,r,!1)):l.data=o}}else wd(t,o,r,!1)}for(;n<t.O.length;)t.qc(n,!1);t.$g=null,Wm(t,i,0),Qo(t)||t.v(),t.graduatedIntervals=null,t.If()||Md(t,t,!1),e=t.part,e!==null&&(e.Rh=null,e.ag=NaN,t.Te&&e instanceof W&&(e.Te=!0),e.Te&&e instanceof W&&(e.wc=null))}}function wd(t,e,i,n){if(!(e==null||0>i)){var r=$m(t,e);if(r=Zm(t,r),r!==null){if(jn(r),r=r.copy(),r.l&16777216){var o=t.ih();o!==null&&_m(o,!0)}typeof e=="object"&&(t.ge===null&&(t.ge=new ct),t.ge.add(e,r)),o=i+Pf(t),t.Hb(o,r),n&&(r.ub=e,Wm(t,o,i),r.ub=null),r.data=e}}}function Wm(t,e,i){for(t=t.O;e<t.length;){var n=t.M(e);if(n instanceof z){var r=e,o=i;n.type===z.TableRow?n.row=r:n.type===z.TableColumn&&(n.column=r),n.itemIndex=o}e++,i++}}function $m(t,e){if(e===null)return"";if(t=t.itemCategoryProperty,typeof t=="function")t=t(e);else if(typeof t=="string"&&typeof e=="object"){if(t==="")return"";t=le(e,t)}else return"";if(t===void 0)return"";if(typeof t=="string")return t;O("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function Zm(t,e){var i=t.itemTemplateMap,n=null;return i!==null&&(n=i.I(e)),n===null&&(i!==null&&(n=i.I("")),n===null&&(dS||(dS=!0,Pt('No item template Panel found for category "'+e+'" on '+t),Pt("  Using default item template."),t=new z,e=new Ut,e.bind(new se("text","",Bi)),t.add(e),gS=t),n=gS)),n}function Md(t,e,i){var n=e.enabledChanged;if(n!==null&&n(e,i),e instanceof z){e=e.O.s,n=e.length;for(var r=0;r<n;r++){var o=e[r];i&&o instanceof z&&!o.isEnabled||Md(t,o,i)}}}function Pr(t,e){e.name=t,Qn.add(t,e)}Y.Object.defineProperties(z.prototype,{type:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,this.isAtomic=this.na===z.Grid,this.v(),this.g("type",e,t))}},elements:{get:function(){return this.O.iterator}},naturalBounds:{get:function(){return this.fc}},padding:{get:function(){return this.zb},set:function(t){typeof t=="number"?(0>t&&at(t,">= 0",z,"padding"),t=new Dt(t)):(0>t.left&&at(t.left,">= 0",z,"padding:value.left"),0>t.right&&at(t.right,">= 0",z,"padding:value.right"),0>t.top&&at(t.top,">= 0",z,"padding:value.top"),0>t.bottom&&at(t.bottom,">= 0",z,"padding:value.bottom"));var e=this.zb;e.D(t)||(this.zb=t=t.J(),this.v(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Um},set:function(t){var e=this.Um;e.D(t)||(this.Um=t=t.J(),this.v(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Uf},set:function(t){var e=this.Uf;e!==t&&(this.Uf=t,this.v(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return this.U!==null?this.U.Qp:Ju},set:function(t){typeof t=="number"&&(t=new Dt(t));var e=this.defaultSeparatorPadding;e.D(t)||(t=t.J(),this.U===null&&(this.U=new gn),this.U.Qp=t,this.v(),this.g("defaultSeparatorPadding",e,t))}},defaultRowSeparatorStroke:{get:function(){return this.U!==null?this.U.ia:null},set:function(t){var e=this.defaultRowSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof jt)&&(t instanceof jt&&t.freeze(),this.U===null&&(this.U=new gn),this.U.ia=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return this.U!==null?this.U.Ha:1},set:function(t){var e=this.defaultRowSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.U===null&&(this.U=new gn),this.U.Ha=t,this.v(),this.g("defaultRowSeparatorStrokeWidth",e,t))}},defaultRowSeparatorDashArray:{get:function(){return this.U!==null?this.U.V:null},set:function(t){var e=this.defaultRowSeparatorDashArray;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||O("defaultRowSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.U===null&&(this.U=new gn),this.U.V=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}},defaultColumnSeparatorStroke:{get:function(){return this.U!==null?this.U.u:null},set:function(t){var e=this.defaultColumnSeparatorStroke;e!==t&&(t===null||typeof t=="string"||t instanceof jt)&&(t instanceof jt&&t.freeze(),this.U===null&&(this.U=new gn),this.U.u=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}},defaultColumnSeparatorStrokeWidth:{get:function(){return this.U!==null?this.U.F:1},set:function(t){var e=this.defaultColumnSeparatorStrokeWidth;e!==t&&isFinite(t)&&0<=t&&(this.U===null&&(this.U=new gn),this.U.F=t,this.v(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}},defaultColumnSeparatorDashArray:{get:function(){return this.U!==null?this.U.o:null},set:function(t){var e=this.defaultColumnSeparatorDashArray;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||O("defaultColumnSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.U===null&&(this.U=new gn),this.U.o=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}},inRowsCols:{get:function(){return this.U!==null?this.U.nb:null},set:function(t){this.U===null&&(this.U=new gn),this.U.nb=t}},viewboxStretch:{get:function(){return this.yo},set:function(t){var e=this.yo;e!==t&&(this.yo=t,this.v(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.kn},set:function(t){var e=this.kn;if(!e.D(t)){t.w()&&t.width!==0&&t.height!==0||O("Invalid Panel.gridCellSize: "+t),this.kn=t.J();var i=this.diagram;i!==null&&this===i.grid&&$o(i),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.ln},set:function(t){var e=this.ln;if(!e.D(t)){t.w()||O("Invalid Panel.gridOrigin: "+t),this.ln=t.J();var i=this.diagram;i!==null&&this===i.grid&&$o(i),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.ra!==null?this.ra.lq:0},set:function(t){var e=this.graduatedMin;e!==t&&(this.ra===null&&(this.ra=new So),this.ra.lq=t,this.v(),this.g("graduatedMin",e,t),fu(this)&&(t=this.part,t!==null&&sl(this,t,"graduatedRange")))}},graduatedMax:{get:function(){return this.ra!==null?this.ra.F:100},set:function(t){var e=this.graduatedMax;e!==t&&(this.ra===null&&(this.ra=new So),this.ra.F=t,this.v(),this.g("graduatedMax",e,t),fu(this)&&(t=this.part,t!==null&&sl(this,t,"graduatedRange")))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.ra!==null?this.ra.ia:10},set:function(t){var e=this.graduatedTickUnit;e!==t&&0<t&&(this.ra===null&&(this.ra=new So),this.ra.ia=t,this.v(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.ra!==null?this.ra.V:0},set:function(t){var e=this.graduatedTickBase;e!==t&&(this.ra===null&&(this.ra=new So),this.ra.V=t,this.v(),this.g("graduatedTickBase",e,t))}},graduatedMarks:{get:function(){return this.ra!==null?this.ra.u:null},set:function(t){this.ra!==null?this.ra.u=t:t!==null&&(this.ra=new So,this.ra.u=t)}},graduatedBounds:{get:function(){return this.ra!==null?this.ra.j:null},set:function(t){this.ra!==null?this.ra.j=t:t!==null&&(this.ra=new So,this.ra.j=t)}},graduatedIntervals:{get:function(){return this.ra!==null?this.ra.o:null},set:function(t){this.ra!==null?this.ra.o=t:t!==null&&(this.ra=new So,this.ra.o=t)}},temporaryTextBlock:{get:function(){return this.ra!==null?this.ra.Zh:null},set:function(t){this.ra!==null?this.ra.Zh=t:t!==null&&(this.ra=new So,this.ra.Zh=t)}},panelLayoutState:{get:function(){return this.F},set:function(t){this.F=t}},Te:{get:function(){return(this.l&8388608)!==0},set:function(t){(this.l&8388608)!==0!==t&&(this.l^=8388608)}},rowDefs:{get:function(){return this.U===null&&(this.U=new gn),this.U.Qc}},rowCount:{get:function(){return this.U===null?0:this.rowDefs.length}},colDefs:{get:function(){return this.U===null&&(this.U=new gn),this.U.Pc}},columnCount:{get:function(){return this.U===null?0:this.colDefs.length}},rowSizing:{get:function(){return this.U!==null?this.U.ob:Nf},set:function(t){var e=this.rowSizing;e!==t&&(this.U===null&&(this.U=new gn),this.U.ob=t,this.v(),this.g("rowSizing",e,t))}},columnSizing:{get:function(){return this.U!==null?this.U.j:Nf},set:function(t){var e=this.columnSizing;e!==t&&(this.U===null&&(this.U=new gn),this.U.j=t,this.v(),this.g("columnSizing",e,t))}},topIndex:{get:function(){return this.U!==null?this.U.Ib:0},set:function(t){var e=this.topIndex;e!==t&&((!isFinite(t)||0>t)&&O("Panel.topIndex must be greater than zero and a real number, not: "+t),this.U===null&&(this.U=new gn),this.U.Ib=t,this.v(),this.g("topIndex",e,t))}},leftIndex:{get:function(){return this.U!==null?this.U.hb:0},set:function(t){var e=this.leftIndex;e!==t&&((!isFinite(t)||0>t)&&O("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.U===null&&(this.U=new gn),this.U.hb=t,this.v(),this.g("leftIndex",e,t))}},data:{get:function(){return this.ub},set:function(t){var e=this.ub;if(e!==t){var i=this instanceof ot&&!(this instanceof Nt);jn(this),this.ub=t;var n=this.diagram;n!==null&&(i?(i=n.partManager,this instanceof V?(e!==null&&i.bf.remove(e),t!==null&&i.bf.add(t,this)):this instanceof ot&&(e!==null&&i.cf.remove(e),t!==null&&i.cf.add(t,this))):(i=this.panel,i!==null&&i.ge!==null&&(e!==null&&i.ge.remove(e),t!==null&&i.ge.add(t,this)))),this.g("data",e,t),n!==null&&n.undoManager.isUndoingRedoing||t!==null&&this.La()}}},itemIndex:{get:function(){return this.An},set:function(t){var e=this.An;e!==t&&(this.An=t,this.g("itemIndex",e,t))}},allBindings:{get:function(){return this.A!==null?this.A.nb:null},set:function(t){this.localBindings!==t&&(this.A===null&&(this.A=new cu),this.A.nb=t)}},itemArray:{get:function(){return this.Hh},set:function(t){var e=this.Hh;if(e!==t||t!==null&&gT(this,t)){var i=this.diagram;e!==t&&(i!==null&&e!==null&&Fv(i.partManager,this,i),this.Hh=t,i!==null&&t!==null&&Lv(i.partManager,this)),this.g("itemArray",e,t),i!==null&&i.undoManager.isUndoingRedoing||pS(this,t)}}},itemTemplate:{get:function(){return this.itemTemplateMap===null?null:this.itemTemplateMap.I("")},set:function(t){if(this.itemTemplateMap===null){if(t===null)return;this.itemTemplateMap=new ct}var e=this.itemTemplateMap.I("");e!==t&&((t instanceof ot||t.isPanelMain)&&O("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.add("",t),this.g("itemTemplate",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.ov())}},itemTemplateMap:{get:function(){return this.A!==null?this.A.Qc:null},set:function(t){var e=this.itemTemplateMap;if(e!==t){for(var i=t.iterator;i.next(););Me(this),this.A.Qc=t,this.g("itemTemplateMap",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.ov()}}},itemCategoryProperty:{get:function(){return this.A!==null?this.A.Pc:"category"},set:function(t){var e=this.itemCategoryProperty;e!==t&&(Me(this),this.A.Pc=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return(this.l&1048576)!==0},set:function(t){var e=(this.l&1048576)!==0;e!==t&&(this.l^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return(this.l&2097152)!==0},set:function(t){var e=(this.l&2097152)!==0;e!==t&&(this.l^=2097152,this instanceof dt&&(this.tb=null),this.v(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return(this.l&33554432)!==0},set:function(t){var e=(this.l&33554432)!==0;e!==t&&(this.l^=33554432,this.v(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return(this.l&4194304)!==0},set:function(t){var e=(this.l&4194304)!==0;if(e!==t){var i=this.panel===null||this.panel.If();this.l^=4194304,this.g("isEnabled",e,t),e=this.diagram,e!==null&&e.undoManager.isUndoingRedoing||i&&Md(this,this,t)}}},alignmentFocusName:{get:function(){return this.$e},set:function(t){var e=this.$e;e!==t&&(this.$e=t,this.v(),this.g("alignmentFocusName",e,t))}}}),Y.Object.defineProperties(z,{Position:{get:function(){return Qn.I("Position")}},Horizontal:{get:function(){return Qn.I("Horizontal")}},Vertical:{get:function(){return Qn.I("Vertical")}},Spot:{get:function(){return Qn.I("Spot")}},Auto:{get:function(){return Qn.I("Auto")}},Table:{get:function(){return Qn.I("Table")}},Viewbox:{get:function(){return Qn.I("Viewbox")}},TableRow:{get:function(){return Qn.I("TableRow")}},TableColumn:{get:function(){return Qn.I("TableColumn")}},Link:{get:function(){return Qn.I("Link")}},Grid:{get:function(){return Qn.I("Grid")}},Graduated:{get:function(){return Qn.I("Graduated")}}}),z.prototype.rebuildItemElements=z.prototype.ov,z.prototype.findItemPanelForData=z.prototype.ux,z.prototype.updateTargetBindings=z.prototype.La,z.prototype.copyTemplate=z.prototype.Zy,z.prototype.graduatedValueForPoint=z.prototype.Lz,z.prototype.graduatedPointForValue=z.prototype.Kz,z.prototype.findColumnForLocalX=z.prototype.kz,z.prototype.findRowForLocalY=z.prototype.sz,z.prototype.addColumnDefinition=z.prototype.Dy,z.prototype.addRowDefinition=z.prototype.Jy,z.prototype.addRowColumnDefinition=z.prototype.Iy,z.prototype.removeColumnDefinition=z.prototype.nA,z.prototype.getColumnDefinition=z.prototype.Fb,z.prototype.removeRowDefinition=z.prototype.sA,z.prototype.getRowDefinition=z.prototype.Gb,z.prototype.removeAt=z.prototype.mb,z.prototype.remove=z.prototype.remove,z.prototype.insertAt=z.prototype.Hb,z.prototype.elt=z.prototype.M,z.prototype.add=z.prototype.add,z.prototype.findObject=z.prototype.fb,z.prototype.findInVisualTree=z.prototype.Nl,z.prototype.walkVisualTreeFrom=z.prototype.rm,z.prototype.findMainElement=z.prototype.Qb;var dS=!1,gS=null,Qn=new ct;z.className="Panel",z.definePanelLayout=Pr,Pr("Position",new ud),Pr("Vertical",new ad),Pr("Auto",new cd),Pr("Link",new vd);function So(){this.lq=0,this.F=100,this.ia=10,this.V=0,this.Zh=this.o=this.j=this.u=null}So.prototype.copy=function(){var t=new So;return t.lq=this.lq,t.F=this.F,t.ia=this.ia,t.V=this.V,t.u=this.u,t.j=this.j,t.o=this.o,t.Zh=this.Zh,t},So.className="GradPanelSettings";function gn(){this.Qc=[],this.Pc=[],this.j=this.ob=Nf,this.hb=this.Ib=0,this.Qp=Ju,this.Ha=1,this.V=this.ia=null,this.F=1,this.nb=this.o=this.u=null}gn.prototype.copy=function(t){for(var e=new gn,i=this.Qc,n=i.length,r=e.Qc,o=0;o<n;o++)if(i[o]!==void 0){var l=i[o].copy();l.xi(t),r[o]=l}for(i=this.Pc,n=i.length,r=e.Pc,o=0;o<n;o++)i[o]!==void 0&&(l=i[o].copy(),l.xi(t),r[o]=l);return e.ob=this.ob,e.j=this.j,e.Ib=this.Ib,e.hb=this.hb,e.Qp=this.Qp.J(),e.Ha=this.Ha,e.ia=this.ia,e.V=this.V,e.F=this.F,e.u=this.u,e.o=this.o,e.nb=this.nb,e},gn.className="TablePanelSettings";function ce(t){Te(this),this.Me=null,this.uq=!0,this.Za=0,this.Ic=NaN,this.kj=0,this.ij=1/0,this.Kb=_e,this.pa=this.Wb=this.oa=0,this.be=null,this.po=Cd,this.hg=cn,this.mo=this.dg=null,this.no=NaN,this.Ma=this.uj=null,this.Qm=!1,t&&(Object.assign(this,t),t.column!==void 0?(this.isRow=!1,this.index=t.column):t.row!==void 0&&(this.isRow=!0,this.index=t.row))}ce.prototype.copy=function(){var t=new ce;return t.uq=this.uq,t.Za=this.Za,t.Ic=this.Ic,t.kj=this.kj,t.ij=this.ij,t.Kb=this.Kb,t.oa=this.oa,t.Wb=this.Wb,t.pa=this.pa,t.hg=this.hg,t.po=this.po,this.dg===null?t.dg=null:t.dg=this.dg.J(),t.mo=this.mo,t.no=this.no,t.uj=null,this.uj!==null&&(t.separatorDashArray=Qt(this.separatorDashArray)),t.Ma=this.Ma,t.Qm=this.Qm,t.be=this.be,t};function Sd(t,e){e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.dg=e.separatorPadding===null?null:e.separatorPadding.J(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.uj=null,e.separatorDashArray&&(t.uj=Qt(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.be=e.be}s=ce.prototype,s.qb=function(t){t.classType===ce&&(this.sizing=t)},s.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+Ci(this)},s.xi=function(t){this.Me=t},s.Jo=function(t){var e=0,i=this.Me;if(this.index!==t&&(t=this.separatorStroke,t===null&&i!==null&&(t=this.isRow?i.defaultRowSeparatorStroke:i.defaultColumnSeparatorStroke),t!==null&&(e=this.separatorStrokeWidth,isNaN(e)&&(i!==null?e=this.isRow?i.defaultRowSeparatorStrokeWidth:i.defaultColumnSeparatorStrokeWidth:e=0))),t=this.dg,t===null)if(i!==null)t=i.defaultSeparatorPadding;else return e;return e+(this.isRow?t.top:t.left)},s.Wc=function(){var t=0,e=this.Me,i=0,n=this.isRow;if(e!==null&&e.type===z.Table)for(var r=n?e.rowDefs.length:e.colDefs.length,o=0;o<r;o++){var l=n?e.rowDefs[o]:e.colDefs[o];if(l!==void 0&&l.oa!==0){i=l.index;break}}if(this.index!==i&&(i=this.separatorStroke,i===null&&e!==null&&(i=n?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),i!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(e!==null?t=n?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:t=0))),n=this.dg,n===null)if(e!==null)n=e.defaultSeparatorPadding;else return t;return t+(this.isRow?n.top+n.bottom:n.left+n.right)},s.Pb=function(t,e,i){var n=this.Me;if(n!==null&&(n.cb(Wt,t,this,e,i,void 0,void 0),this.be!==null&&(e=n.diagram,e!==null&&!e.skipsModelSourceBindings&&(n=n.ih(),n!==null&&(e=n.data,e!==null)))))for(i=this.be.iterator;i.next();)i.value.sp(this,e,t,n)};function kd(t){if(t.sizing===Cd){var e=t.Me;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}s.bind=function(t,e,i,n){var r=null;return typeof t=="string"?r=new se(t,e,i,n):r=t,r.xd=this,t=this.panel,t!==null&&(e=t.ih(),e!==null&&cS(e)&&O("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+r+" on "+t)),this.be===null&&(this.be=new q),this.be.add(r),this},Y.Object.defineProperties(ce.prototype,{panel:{get:function(){return this.Me}},isRow:{get:function(){return this.uq},set:function(t){this.uq=t}},index:{get:function(){return this.Za},set:function(t){this.Za=t}},height:{get:function(){return this.Ic},set:function(t){var e=this.Ic;e!==t&&(0>t&&at(t,">= 0",ce,"height"),this.Ic=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Pb("height",e,t))}},width:{get:function(){return this.Ic},set:function(t){var e=this.Ic;e!==t&&(0>t&&at(t,">= 0",ce,"width"),this.Ic=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Pb("width",e,t))}},minimum:{get:function(){return this.kj},set:function(t){var e=this.kj;e!==t&&((0>t||!isFinite(t))&&at(t,">= 0",ce,"minimum"),this.kj=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Pb("minimum",e,t))}},maximum:{get:function(){return this.ij},set:function(t){var e=this.ij;e!==t&&(0>t&&at(t,">= 0",ce,"maximum"),this.ij=t,this.actual=this.oa,this.panel!==null&&this.panel.v(),this.Pb("maximum",e,t))}},alignment:{get:function(){return this.Kb},set:function(t){var e=this.Kb;e.D(t)||(this.Kb=t.J(),this.panel!==null&&this.panel.v(),this.Pb("alignment",e,t))}},stretch:{get:function(){return this.hg},set:function(t){var e=this.hg;e!==t&&(this.hg=t,this.panel!==null&&this.panel.v(),this.Pb("stretch",e,t))}},separatorPadding:{get:function(){return this.dg},set:function(t){typeof t=="number"&&(t=new Dt(t));var e=this.dg;t!==null&&e!==null&&e.D(t)||(t!==null&&(t=t.J()),this.dg=t,this.panel!==null&&this.panel.v(),this.Pb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.mo},set:function(t){var e=this.mo;e!==t&&(t!==null&&du(t,"RowColumnDefinition.separatorStroke"),t instanceof jt&&t.freeze(),this.mo=t,this.panel!==null&&this.panel.v(),this.Pb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.no},set:function(t){var e=this.no;e!==t&&(this.no=t,this.panel!==null&&this.panel.v(),this.Pb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.uj},set:function(t){var e=this.uj;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||O("separatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.uj=t,this.panel!==null&&this.panel.N(),this.Pb("separatorDashArray",e,t)}}},background:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(t!==null&&du(t,"RowColumnDefinition.background"),t instanceof jt&&t.freeze(),this.Ma=t,this.panel!==null&&this.panel.N(),this.Pb("background",e,t))}},coversSeparators:{get:function(){return this.Qm},set:function(t){var e=this.Qm;e!==t&&(this.Qm=t,this.panel!==null&&this.panel.N(),this.Pb("coversSeparators",e,t))}},sizing:{get:function(){return this.po},set:function(t){var e=this.po;e!==t&&(this.po=t,this.panel!==null&&this.panel.v(),this.Pb("sizing",e,t))}},actual:{get:function(){return this.oa},set:function(t){this.oa=isNaN(this.Ic)?Math.max(Math.min(this.ij,t),this.kj):Math.max(Math.min(this.ij,this.Ic),this.kj)}},measured:{get:function(){return this.Wb},set:function(t){this.Wb=t}},total:{get:function(){return this.oa+this.Wc()}},position:{get:function(){return this.pa},set:function(t){this.pa=t}}}),ce.prototype.computeEffectiveSpacing=ce.prototype.Wc,ce.prototype.computeEffectiveSpacingTop=ce.prototype.Jo;var Cd=new K(ce,"Default",0),Dh=new K(ce,"None",1),Nf=new K(ce,"ProportionalExtra",2);ce.className="RowColumnDefinition",ce.Default=Cd,ce.None=Dh,ce.ProportionalExtra=Nf;function yt(t,e){it.call(this),this.Rd=this.ua=null,this.bn="None",this.xc=this.Vi="black",this.ig=1,this.Na=this.Yg=null,this.Wn=this.Vn=NaN,this.fa=null,typeof t=="string"?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}Z(yt,it),yt.prototype.cloneProtected=function(t){it.prototype.cloneProtected.call(this,t),t.ua=this.ua,t.Rd=this.Rd,t.bn=this.bn,t.Vi=this.Vi,t.xc=this.xc,t.ig=this.ig,this.Yg!==null&&(t.Yg=Qt(this.Yg)),this.Na!==null&&(t.Na=this.Na.pc?this.Na:this.Na.copy()),t.Vn=this.Vn,t.Wn=this.Wn,this.fa!==null&&(t.fa=this.fa.copy())};function cl(t){t.Na===null?t.Na=new qm:t.Na.pc&&(t.Na=t.Na.copy())}s=yt.prototype,s.th=function(){it.prototype.th.call(this),this.Na!==null&&(this.Na.pc=!0)},s.qb=function(t){t===te||t===Fn||t===au||t===cn?this.geometryStretch=t:it.prototype.qb.call(this,t)},s.toString=function(){return"Shape("+(this.figure!=="None"?this.figure:this.toArrow!=="None"?this.toArrow:this.fromArrow)+")#"+Ci(this)};function Oh(t,e,i,n){var r=i.length;if(!(4>r)){var o=n.measuredBounds,l=Math.max(1,o.width);o=o.height;for(var u=i[0],h=i[1],f,c,p,g,m,v,x=0,k=Rt(),S=2;S<r;S+=2)f=i[S],c=i[S+1],p=f-u,u=c-h,p===0&&(p=.001),g=u/p,m=Math.atan2(u,p),v=Math.sqrt(p*p+u*u),k.push([p,m,g,v]),x+=v,u=f,h=c;u=i[0],h=i[1],p=n.measuredBounds.width,n instanceof yt&&(p-=n.strokeWidth),1>p&&(p=1),r=i=p,f=l/2,c=f!==0,S=0,v=k[S],p=v[0],m=v[1],g=v[2],v=v[3];for(var P=0;.1<=x;){if(P===0&&(c?(r=i,r-=f,x-=f,c=!1):r=i,r===0&&(r=1)),r>x){Bt(k);return}r>v?(P=r-v,r=v):P=0;var N=Math.sqrt(r*r/(1+g*g));if(0>p&&(N=-N),u+=N,h+=g*N,t.translate(u,h),t.rotate(m),t.translate(-(l/2),-(o/2)),P===0&&n.hh(t,e),t.translate(l/2,o/2),t.rotate(-m),t.translate(-u,-h),x-=r,v-=r,P!==0){if(S++,S===k.length){Bt(k);return}v=k[S],p=v[0],m=v[1],g=v[2],v=v[3],r=P}}Bt(k)}}s.hh=function(t,e){var i=this.xc,n=this.Vi;if(i!==null||n!==null){var r=this.ua;if(r!==null){t.yc();var o=this.actualBounds,l=this.naturalBounds;n!==null&&en(this,t,n,!0,!1,l,o);var u=this.part,h=this.ig;if(i===null||h!==0||u===null||!this.isPanelMain&&u.Qb()!==this||(h=u.type===z.Link&&u instanceof Nt&&u.category==="Selection"&&u.adornedObject instanceof yt&&u.adornedPart.Qb()===u.adornedObject?u.adornedObject.strokeWidth:0),h===0&&(i=null),i!==null&&h!==0&&(en(this,t,i,!1,!1,l,o),t.lineWidth=h,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit),o=!1,u&&e.Gf("drawShadows")&&(o=u.isShadowed),t.Il===!1&&(o=!1),u=!0,i===null||n!==null&&n!=="transparent"||(u=!1),l=!1,h=this.strokeDashArray,h!==null&&(l=!0,t.js(h,this.strokeDashOffset)),r.type===H.o)t.beginPath(),t.moveTo(r.startX,r.startY),t.lineTo(r.endX,r.endY),i!==null&&t.ik(),t.Se();else if(r.type===H.u){var f=r.startX;h=r.startY;var c=r.endX,p=r.endY;r=Math.min(f,c);var g=Math.min(h,p);f=Math.abs(c-f),h=Math.abs(p-h),t.beginPath(),t.rect(r,g,f,h),n!==null&&t.ng(n),i!==null&&(u&&o&&kr(t),t.ik(),u&&o&&Cr(t)),t.Se()}else if(r.type===H.F)f=r.startX,h=r.startY,c=r.endX,p=r.endY,r=Math.abs(c-f)/2,g=Math.abs(p-h)/2,f=Math.min(f,c)+r,h=Math.min(h,p)+g,t.beginPath(),t.moveTo(f,h-g),t.bezierCurveTo(f+A.wg*r,h-g,f+r,h-A.wg*g,f+r,h),t.bezierCurveTo(f+r,h+A.wg*g,f+A.wg*r,h+g,f,h+g),t.bezierCurveTo(f-A.wg*r,h+g,f-r,h+A.wg*g,f-r,h),t.bezierCurveTo(f-r,h-A.wg*g,f-A.wg*r,h-g,f,h-g),t.closePath(),n!==null&&t.ng(n),i!==null&&(u&&o&&kr(t),t.ik(),u&&o&&Cr(t)),t.Se();else if(r.type===H.j)for(r=r.figures,h=r.length,g=0;g<h;g++){f=r.s[g],t.beginPath(),t.moveTo(f.startX,f.startY),c=f.segments.s,p=c.length;for(var m=null,v=0;v<p;v++){var x=c[v];switch(x.type){case Tn:t.moveTo(x.endX,x.endY);break;case $t:t.lineTo(x.endX,x.endY);break;case qi:t.bezierCurveTo(x.point1X,x.point1Y,x.point2X,x.point2Y,x.endX,x.endY);break;case lr:t.quadraticCurveTo(x.point1X,x.point1Y,x.endX,x.endY);break;case fe:if(x.radiusX===x.radiusY){var k=Math.PI/180;t.arc(x.point1X,x.point1Y,x.radiusX,x.startAngle*k,(x.startAngle+x.sweepAngle)*k,0>x.sweepAngle,m!==null?m.endX:f.startX,m!==null?m.endY:f.startY)}else if(m=mo(x,f),k=m.length,k===0)t.lineTo(x.centerX,x.centerY);else for(var S=0;S<k;S++){var P=m[S];S===0&&t.lineTo(P[0],P[1]),t.bezierCurveTo(P[2],P[3],P[4],P[5],P[6],P[7])}break;case _n:if(S=k=0,m!==null&&m.type===fe){if(m=mo(m,f),P=m.length,P===0){t.lineTo(x.endX,x.endY);break}m=m[P-1]||null,m!==null&&(k=m[6],S=m[7])}else k=m!==null?m.endX:f.startX,S=m!==null?m.endY:f.startY;if(m=el(x,f,k,S),k=m.length,k===0){t.lineTo(x.endX,x.endY);break}for(S=0;S<k;S++)P=m[S],t.bezierCurveTo(P[2],P[3],P[4],P[5],P[6],P[7]);break;default:O("Segment not of valid type: "+x.type)}x.isClosed&&t.closePath(),m=x}c=f.isFilled,o?f.isShadowed?(c===!0&&n!=="transparent"&&n!==null&&t.ng(n,f.isEvenOdd),i!==null&&(c&&u&&kr(t),t.ik(),c&&u&&Cr(t))):(kr(t),c&&n!=="transparent"&&n!==null&&t.ng(n,f.isEvenOdd),i!==null&&t.ik(),Cr(t)):(c&&n!==null&&t.ng(n,f.isEvenOdd),i!==null&&t.ik()),t.Se(g)}if(l&&t.fs(),this.pathPattern!==null){if(i=this.pathPattern,i.measure(1/0,1/0),n=i.measuredBounds,i.arrange(0,0,n.width,n.height),o=this.geometry,t.save(),t.beginPath(),n=Rt(),o.type===H.o)n.push(o.startX),n.push(o.startY),n.push(o.endX),n.push(o.endY),Oh(t,e,n,i);else if(o.type===H.j)for(o=o.figures.iterator;o.next();){for(u=o.value,n.length=0,n.push(u.startX),n.push(u.startY),l=u.startX,r=u.startY,h=l,g=r,f=u.segments.s,c=f.length,p=0;p<c;p++){switch(v=f[p],v.type){case Tn:Oh(t,e,n,i),n.length=0,n.push(v.endX),n.push(v.endY),l=v.endX,r=v.endY,h=l,g=r;break;case $t:n.push(v.endX),n.push(v.endY),l=v.endX,r=v.endY;break;case qi:A.Qe(l,r,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.5,n),l=v.endX,r=v.endY;break;case lr:A.ep(l,r,v.point1X,v.point1Y,v.endX,v.endY,.5,n),l=v.endX,r=v.endY;break;case fe:if(x=mo(v,u),m=x.length,m===0){n.push(v.centerX),n.push(v.centerY),l=v.centerX,r=v.centerY;break}for(k=0;k<m;k++)S=x[k],A.Qe(l,r,S[2],S[3],S[4],S[5],S[6],S[7],.5,n),l=S[6],r=S[7];break;case _n:if(x=el(v,u,l,r),m=x.length,m===0){n.push(v.endX),n.push(v.endY),l=v.endX,r=v.endY;break}for(k=0;k<m;k++)S=x[k],A.Qe(l,r,S[2],S[3],S[4],S[5],S[6],S[7],.5,n),l=S[6],r=S[7];break;default:O("Segment not of valid type: "+v.type)}v.isClosed&&(n.push(h),n.push(g),Oh(t,e,n,i))}Oh(t,e,n,i)}else if(o.type===H.u)n.push(o.startX),n.push(o.startY),n.push(o.endX),n.push(o.startY),n.push(o.endX),n.push(o.endY),n.push(o.startX),n.push(o.endY),n.push(o.startX),n.push(o.startY),Oh(t,e,n,i);else if(o.type===H.F){if(r=new Ae,r.startX=o.endX,r.startY=(o.startY+o.endY)/2,l=new Ft(fe),l.startAngle=0,l.sweepAngle=360,l.centerX=(o.startX+o.endX)/2,l.centerY=(o.startY+o.endY)/2,l.radiusX=Math.abs(o.startX-o.endX)/2,l.radiusY=Math.abs(o.startY-o.endY)/2,r.add(l),o=mo(l,r),u=o.length,u===0)n.push(l.centerX),n.push(l.centerY);else for(l=r.startX,r=r.startY,h=0;h<u;h++)g=o[h],A.Qe(l,r,g[2],g[3],g[4],g[5],g[6],g[7],.5,n),l=g[6],r=g[7];Oh(t,e,n,i)}Bt(n),t.restore(),t.Vc(!1)}}}},s.jk=function(t,e,i){return!it.prototype.jk.call(this,t,e,i)||this.xc===null&&this.Vi===null||this.ua===null||this.pathPattern!==null||this.geometry.figures.length!==this.svg.getElementsByTagName("path").length?!1:(t.Hl=this.svg,this.hh(t,e),t.Hl=null,!0)},s.mk=function(t){return this.geometry!==null&&1<this.geometry.figures.length||this.pathPattern!==null?!0:it.prototype.mk.call(this,t)},s.Fv=function(t,e){if(t.nodeName!=="g")t.setAttributeNS(null,"filter",e);else{t=t.getElementsByTagName("path");for(var i=0;i<t.length;i++)t[i].setAttributeNS(null,"filter",e)}},s.ga=function(t,e){if(e===void 0&&(e=new C),t instanceof lt){t.Nc()&&O("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var i=this.naturalBounds,n=this.strokeWidth;e.h(t.x*(i.width+n)-n/2+i.x+t.offsetX,t.y*(i.height+n)-n/2+i.y+t.offsetY)}else e.set(t);return this.oe.Ga(e),e},s.ni=function(t){t===void 0&&(t=new E);var e=this.naturalBounds,i=this.oe;e=E.allocAt(e.x,e.y,e.width,e.height);var n=this.strokeWidth;return e.Bc(n/2,n/2),n=C.allocAt(e.x,e.y).transform(i),t.h(n.x,n.y,0,0),n.h(e.right,e.y).transform(i),Oe(t,n.x,n.y,0,0),n.h(e.right,e.bottom).transform(i),Oe(t,n.x,n.y,0,0),n.h(e.x,e.bottom).transform(i),Oe(t,n.x,n.y,0,0),E.free(e),C.free(n),t},s.gh=function(t,e){var i=this.geometry;if(i===null||this.fill===null&&this.stroke===null)return!1;var n=i.bounds,r=this.strokeWidth/2;i.type!==H.o||e||(r+=2);var o=E.alloc();if(o.assign(n),o.Bc(r+2,r+2),!o.ca(t))return E.free(o),!1;if(n=r+1e-4,i.type===H.o)return this.stroke===null||(n=(i.endX-i.startX)*(t.x-i.startX)+(i.endY-i.startY)*(t.y-i.startY),0>(i.startX-i.endX)*(t.x-i.endX)+(i.startY-i.endY)*(t.y-i.endY)||0>n)?!1:(E.free(o),A.ac(i.startX,i.startY,i.endX,i.endY,r,t.x,t.y));if(i.type===H.u){e=i.startX;var l=i.startY,u=i.endX;if(i=i.endY,o.x=Math.min(e,u),o.y=Math.min(l,i),o.width=Math.abs(u-e),o.height=Math.abs(i-l),this.fill===null){if(o.Bc(-n,-n),o.ca(t))return E.free(o),!1;o.Bc(n,n)}return this.stroke!==null&&o.Bc(r,r),t=o.ca(t),E.free(o),t}if(i.type===H.F){l=i.startX,r=i.startY,u=i.endX;var h=i.endY;if(i=Math.min(l,u),e=Math.min(r,h),l=Math.abs(u-l)/2,r=Math.abs(h-r)/2,i=t.x-(i+l),e=t.y-(e+r),this.fill===null){if(l-=n,r-=n,0>=l||0>=r||1>=i*i/(l*l)+e*e/(r*r))return E.free(o),!1;l+=n,r+=n}return this.stroke!==null&&(l+=n,r+=n),E.free(o),0>=l||0>=r?!1:1>=i*i/(l*l)+e*e/(r*r)}if(i.type===H.j)return E.free(o),this.fill===null?zw(i,t.x,t.y,r):F0(i,t,r,1<this.strokeWidth,e);O("Unknown Geometry type: "+i.type)},s.Wl=function(t,e,i,n){var r=this.desiredSize,o=this.ig;if(t=Math.max(t,0),e=Math.max(e,0),this.Rd!==null)var l=this.geometry.bounds;else{var u=this.figure,h=Jm[u];if(h===void 0){var f=A.Ze[u];typeof f=="string"&&(f=A.Ze[f]),typeof f=="function"?(h=f(null,100,100),Jm[u]=h):O("Unsupported Figure: "+u)}l=h.bounds}u=l.width,h=l.height,f=l.width;var c=l.height;switch(ar(this,!0)){case te:n=i=0;break;case oe:f=Math.max(t-o,0),c=Math.max(e-o,0);break;case Re:f=Math.max(t-o,0),n=0;break;case Ue:i=0,c=Math.max(e-o,0)}isFinite(r.width)&&(f=r.width),isFinite(r.height)&&(c=r.height);var p=this.maxSize,g=this.minSize;switch(i=Math.max(i-o,g.width),n=Math.max(n-o,g.height),f=Math.min(p.width,f),c=Math.min(p.height,c),f=isFinite(f)?Math.max(i,f):Math.max(u,i),c=isFinite(c)?Math.max(n,c):Math.max(h,n),i=Qm(this),i){case te:break;case oe:u=f,h=c;break;case Fn:i=Math.min(f/u,c/h),isFinite(i)||(i=1),u*=i,h*=i;break;default:O(i+" is not a valid geometryStretch.")}this.Rd!==null?(u===0&&(u=.001),h===0&&(h=.001),i=this.Rd!==null?this.Rd:this.ua,l=i.bounds,n=u/l.width,l=h/l.height,isFinite(n)||(n=1),isFinite(l)||(l=1),this.ua=n===1&&l===1?i:i.copy().scale(n,l)):this.ua!==null&&A.$(this.ua.Rk,t-o)&&A.$(this.ua.Qk,e-o)||(this.ua=yt.makeGeometry(this,u,h)),l=this.ua.bounds,t===1/0||e===1/0?this.Ge(l.x-o/2,l.y-o/2,t===0&&u===0?0:l.width+o,e===0&&h===0?0:l.height+o):this.Ge(-(o/2),-(o/2),f+o,c+o),r.w()?(f=r.width,c=r.height,f=Math.min(p.width,f),c=Math.min(p.height,c),f=Math.max(g.width,f),c=Math.max(g.height,c),this.fc.h(0,0,f,c)):this.fc.assign(l)};function Qm(t){var e=t.geometryStretch;return t.Rd!==null?e===cn?oe:e:e===cn?Jm[t.figure].defaultStretch:e}s.eh=function(t,e,i,n){Cm(this,t,e,i,n)},s.rs=function(t,e,i){return this.Rj(t.x,t.y,e.x,e.y,i)},s.Rj=function(t,e,i,n,r){var o=this.transform,l=1/(o.m11*o.m22-o.m12*o.m21),u=o.m22*l,h=-o.m12*l,f=-o.m21*l,c=o.m11*l,p=l*(o.m21*o.dy-o.m22*o.dx),g=l*(o.m12*o.dx-o.m11*o.dy);o=t*u+e*f+p,l=t*h+e*c+g,u=i*u+n*f+p,h=i*h+n*c+g,p=this.ig/2,f=this.ua,f===null&&(this.measure(1/0,1/0),f=this.ua);var m=f.bounds;if(c=!1,f.type===H.o)if(1.5>=this.strokeWidth)c=A.Ve(f.startX,f.startY,f.endX,f.endY,o,l,u,h,r);else{if(f.startX===f.endX?(n=p,c=0):(e=(f.endY-f.startY)/(f.endX-f.startX),c=p/Math.sqrt(1+e*e),n=c*e),e=Rt(),t=new C,A.Ve(f.startX+n,f.startY+c,f.endX+n,f.endY+c,o,l,u,h,t)&&e.push(t),t=new C,A.Ve(f.startX-n,f.startY-c,f.endX-n,f.endY-c,o,l,u,h,t)&&e.push(t),t=new C,A.Ve(f.startX+n,f.startY+c,f.startX-n,f.startY-c,o,l,u,h,t)&&e.push(t),t=new C,A.Ve(f.endX+n,f.endY+c,f.endX-n,f.endY-c,o,l,u,h,t)&&e.push(t),u=e.length,u===0)return Bt(e),!1;for(c=!0,h=1/0,n=0;n<u;n++)t=e[n],i=(t.x-o)*(t.x-o)+(t.y-l)*(t.y-l),i<h&&(h=i,r.x=t.x,r.y=t.y);Bt(e)}else if(f.type===H.u)c=A.Ff(m.x-p,m.y-p,m.x+m.width+p,m.y+m.height+p,o,l,u,h,r);else if(f.type===H.F){e=E.allocAt(m.x,m.y,m.width,m.height).Bc(p,p);t:if(e.width===0)c=A.Ve(e.x,e.y,e.x,e.y+e.height,o,l,u,h,r);else if(e.height===0)c=A.Ve(e.x,e.y,e.x+e.width,e.y,o,l,u,h,r);else{if(t=e.width/2,f=e.height/2,n=e.x+t,c=e.y+f,i=9999,o!==u&&(i=(l-h)/(o-u)),9999>Math.abs(i)){if(h=l-c-i*(o-n),0>t*t*i*i+f*f-h*h){r.x=NaN,r.y=NaN,c=!1;break t}p=Math.sqrt(t*t*i*i+f*f-h*h),u=(-(t*t*i*h)+t*f*p)/(f*f+t*t*i*i)+n,t=(-(t*t*i*h)-t*f*p)/(f*f+t*t*i*i)+n,f=i*(u-n)+h+c,h=i*(t-n)+h+c,Math.abs((o-u)*(o-u))+Math.abs((l-f)*(l-f))<Math.abs((o-t)*(o-t))+Math.abs((l-h)*(l-h))?(r.x=u,r.y=f):(r.x=t,r.y=h)}else{if(u=f*f,h=o-n,u-=u/(t*t)*h*h,0>u){r.x=NaN,r.y=NaN,c=!1;break t}h=Math.sqrt(u),u=c+h,h=c-h,Math.abs(u-l)<Math.abs(h-l)?(r.x=o,r.y=u):(r.x=o,r.y=h)}c=!0}E.free(e)}else if(f.type===H.j){g=C.alloc();var v=u-o,x=h-l,k=v*v+x*x,S=o,P=l;if(0<k&&m.contains(S,P)&&(g.x=S,g.y=P,this.ca(g)))for(v!==0&&.5>Math.abs(v)?(x*=.5/v,v=.5):x!==0&&.5>Math.abs(x)&&(v*=.5/x,x=.5),S-=v,P-=x;m.contains(S,P);)S-=v,P-=x;for(r.x=u,r.y=h,x=0;x<f.figures.count;x++){var N=f.figures.s[x],T=N.isFilled?S:o,F=N.isFilled?P:l,D=N.segments;m=N.startX,v=N.startY;for(var X=m,tt=v,et=0;et<D.count;et++){var U=D.s[et],R=U.type,pt=U.endX,ut=U.endY,Tt=!1;switch(R){case Tn:X=pt,tt=ut;break;case $t:Tt=Nd(m,v,pt,ut,T,F,u,h,g);break;case qi:Tt=A.Fo(m,v,U.point1X,U.point1Y,U.point2X,U.point2Y,pt,ut,T,F,u,h,.6,g);break;case lr:Tt=A.Fo(m,v,m+2/3*(U.point1X-m),v+2/3*(U.point1Y-v),pt+2/3*(U.point1X-pt),ut+2/3*(U.point1Y-ut),pt,ut,T,F,u,h,.6,g);break;case fe:case _n:R=U.type===fe?mo(U,N):el(U,N,m,v);var Vt=R.length;if(Vt===0){Tt=Nd(m,v,U.type===fe?U.centerX:U.endX,U.type===fe?U.centerY:U.endY,T,F,u,h,g);break}for(ut=null,pt=0;pt<Vt;pt++){if(ut=R[pt],pt===0&&Nd(m,v,ut[0],ut[1],T,F,u,h,g)){var ke=Pd(T,F,g,k,r);ke<k&&(k=ke,c=!0)}A.Fo(ut[0],ut[1],ut[2],ut[3],ut[4],ut[5],ut[6],ut[7],T,F,u,h,.6,g)&&(ke=Pd(T,F,g,k,r),ke<k&&(k=ke,c=!0))}pt=ut[6],ut=ut[7];break;default:O("Unknown Segment type: "+R)}m=pt,v=ut,Tt&&(Tt=Pd(T,F,g,k,r),Tt<k&&(k=Tt,c=!0)),U.isClosed&&(pt=X,ut=tt,Nd(m,v,pt,ut,T,F,u,h,g)&&(U=Pd(T,F,g,k,r),U<k&&(k=U,c=!0)))}}o=i-t,l=n-e,u=Math.sqrt(o*o+l*l),u!==0&&(o/=u,l/=u),r.x-=o*p,r.y-=l*p,C.free(g)}else O("Unknown Geometry type: "+f.type);return c?(this.transform.Ga(r),!0):!1};function Pd(t,e,i,n,r){return t=i.x-t,e=i.y-e,e=t*t+e*e,e<n?(r.x=i.x,r.y=i.y,e):n}function Nd(t,e,i,n,r,o,l,u,h){if(A.$(t,i)&&A.$(e,n)||A.$(r,l)&&A.$(o,u))return!1;var f=!1,c=(r-l)*(e-n)-(o-u)*(t-i);return c===0?!1:(h.x=((r*u-o*l)*(t-i)-(r-l)*(t*n-e*i))/c,h.y=((r*u-o*l)*(e-n)-(o-u)*(t*n-e*i))/c,(t>i?t-i:i-t)<(e>n?e-n:n-e)?(t=e<n?e:n,e=e<n?n:e,(h.y>t||A.$(h.y,t))&&(h.y<e||A.$(h.y,e))&&(f=!0)):(e=t<i?t:i,t=t<i?i:t,(h.x>e||A.$(h.x,e))&&(h.x<t||A.$(h.x,t))&&(f=!0)),f)}s.fh=function(t,e){if(e===void 0)return t.Re(this.actualBounds);var i=this.ua;i===null&&(this.measure(1/0,1/0),i=this.ua),i=i.bounds;var n=this.strokeWidth/2,r=!1,o=C.alloc();return o.h(i.x-n,i.y-n),t.ca(e.Ga(o))&&(o.h(i.x-n,i.bottom+n),t.ca(e.Ga(o))&&(o.h(i.right+n,i.bottom+n),t.ca(e.Ga(o))&&(o.h(i.right+n,i.y-n),t.ca(e.Ga(o))&&(r=!0)))),C.free(o),r},s.Yc=function(t,e){if(this.fh(t,e)||e===void 0&&(e=this.transform,t.Re(this.actualBounds)))return!0;var i=vt.alloc();i.set(e),i.Uj();var n=t.left,r=t.right,o=t.top;t=t.bottom;var l=C.alloc();if(l.h(n,o),i.Ga(l),this.gh(l,!0)||(l.h(r,o),i.Ga(l),this.gh(l,!0))||(l.h(n,t),i.Ga(l),this.gh(l,!0))||(l.h(r,t),i.Ga(l),this.gh(l,!0)))return C.free(l),!0;var u=C.alloc(),h=C.alloc();return i.set(e),i.ev(this.transform),i.Uj(),u.x=r,u.y=o,u.transform(i),l.x=n,l.y=o,l.transform(i),e=!1,pl(this,l,u,h)?e=!0:(l.x=r,l.y=t,l.transform(i),pl(this,l,u,h)?e=!0:(u.x=n,u.y=t,u.transform(i),pl(this,l,u,h)?e=!0:(l.x=n,l.y=o,l.transform(i),pl(this,l,u,h)&&(e=!0)))),C.free(l),vt.free(i),C.free(u),C.free(h),e};function pl(t,e,i,n){if(!t.rs(e,i,n))return!1;t=e.x,e=e.y;var r=i.x,o=i.y;return i=n.x,n=n.y,t===r?(e<o?(t=e,e=o):t=o,n>=t&&n<=e):(t<r?(n=t,t=r):n=r,i>=n&&i<=t)}s.vx=function(t,e,i){function n(k,S){for(var P=k.length,N=0;N<P;N+=2)if(S.zd(k[N],k[N+1])>r)return!0;return!1}if(i&&this.fill!==null&&this.gh(t,!0))return!0;var r=t.Bf(e),o=r;if(1.5<this.strokeWidth&&(r=this.strokeWidth/2+Math.sqrt(r),r*=r),e=this.ua,e===null&&(this.measure(1/0,1/0),e=this.ua,e===null))return!1;if(!i){var l=e.bounds,u=l.x,h=l.y,f=l.x+l.width;if(l=l.y+l.height,po(t.x,t.y,u,h)<=r&&po(t.x,t.y,f,h)<=r&&po(t.x,t.y,u,l)<=r&&po(t.x,t.y,f,l)<=r)return!0}if(u=e.startX,h=e.startY,f=e.endX,l=e.endY,e.type===H.o){if(i=(u-f)*(t.x-f)+(h-l)*(t.y-l),di(t.x,t.y,u,h,f,l)<=(0<=(f-u)*(t.x-u)+(l-h)*(t.y-h)&&0<=i?r:o))return!0}else{if(e.type===H.u)return e=!1,i&&(e=di(t.x,t.y,u,h,u,l)<=r||di(t.x,t.y,u,h,f,h)<=r||di(t.x,t.y,f,h,f,l)<=r||di(t.x,t.y,u,l,f,l)<=r),e;if(e.type===H.F){e=t.x-(u+f)/2,o=t.y-(h+l)/2;var c=Math.abs(f-u)/2,p=Math.abs(l-h)/2;if(c===0||p===0)return di(t.x,t.y,u,h,f,l)<=r;if(i){if(t=A.ez(c,p,e,o),t*t<=r)return!0}else return!(po(e,o,-c,0)>=r||po(e,o,0,-p)>=r||po(e,o,0,p)>=r||po(e,o,c,0)>=r)}else if(e.type===H.j){if(f=e.bounds,o=f.x,u=f.y,h=f.x+f.width,f=f.y+f.height,t.x>h&&t.x<o&&t.y>f&&t.y<u&&di(t.x,t.y,o,u,o,f)>r&&di(t.x,t.y,o,u,h,u)>r&&di(t.x,t.y,h,f,o,f)>r&&di(t.x,t.y,h,f,h,u)>r)return!1;if(o=Math.sqrt(r),i){if(this.fill===null?zw(e,t.x,t.y,o):F0(e,t,o,!0,!1))return!0}else{for(i=e.figures,e=0;e<i.count;e++){if(o=i.s[e],l=o.startX,c=o.startY,t.zd(l,c)>r)return!1;for(u=o.segments.s,h=u.length,f=0;f<h;f++)switch(p=u[f],p.type){case Tn:case $t:if(l=p.endX,c=p.endY,t.zd(l,c)>r)return!1;break;case qi:var g=Rt();if(A.Qe(l,c,p.point1X,p.point1Y,p.point2X,p.point2Y,p.endX,p.endY,.8,g),l=n(g,t),Bt(g),l||(l=p.endX,c=p.endY,t.zd(l,c)>r))return!1;break;case lr:if(g=Rt(),A.ep(l,c,p.point1X,p.point1Y,p.endX,p.endY,.8,g),l=n(g,t),Bt(g),l||(l=p.endX,c=p.endY,t.zd(l,c)>r))return!1;break;case fe:case _n:g=p.type===fe?mo(p,o):el(p,o,l,c);var m=g.length;if(m===0){if(l=p.type===fe?p.centerX:p.endX,c=p.type===fe?p.centerY:p.endY,t.zd(l,c)>r)return!1;break}p=null;for(var v=Rt(),x=0;x<m;x++)if(p=g[x],v.length=0,A.Qe(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],.8,v),n(v,t))return Bt(v),!1;Bt(v),p!==null&&(l=p[6],c=p[7]);break;default:O("Unknown Segment type: "+p.type)}}return!0}}}return!1},s.rc=function(){this.ua=null},s.kq=function(){return this.ig};function yS(t){var e=t.diagram;e!==null&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=Hh,t.toArrow!=="None"?(t.segmentIndex=-1,t.alignmentFocus=Ri):t.fromArrow!=="None"&&(t.segmentIndex=0,t.alignmentFocus=new lt(1-Ri.x,Ri.y)))}yt.makeGeometry=function(t,e,i){if(t.toArrow!=="None")var n=$r[t.toArrow];else t.fromArrow!=="None"?n=$r[t.fromArrow]:(n=A.Ze[t.figure],typeof n=="string"&&(n=A.Ze[n]),n===void 0&&O("Unknown Shape.figure: "+t.figure),n=n(t,e,i),n.Rk=e,n.Qk=i);if(n===null){var r=A.Ze.Rectangle;typeof r=="function"&&(n=r(t,e,i))}return n};function mS(t){var e=$r[t];if(e===void 0){var i=t.toLowerCase();if(i==="none")return"None";if(e=$r[i],e===void 0){var n=null,r;for(r in A.vm)if(r.toLowerCase()===i){n=r;break}if(n!==null)return t=H.parse(A.vm[n],!1),$r[n]=t,i!==n&&($r[i]=n),n}}return typeof e=="string"?e:e instanceof H?t:null}Y.Object.defineProperties(yt.prototype,{geometry:{get:function(){return this.ua!==null?this.ua:this.Rd},set:function(t){var e=this.ua,i=this.Rd;if(e!==t){t!==null?this.Rd=this.ua=t.freeze():this.Rd=this.ua=null;var n=this.part;n!==null&&(n.ag=NaN),this.v(),this.g("geometry",e||i,t),fu(this)&&(t=this.part,t!==null&&sl(this,t,"geometryString"))}}},geometryString:{get:function(){return this.geometry===null?"":this.geometry.toString()},set:function(t){t=H.parse(t);var e=t.normalize();this.geometry=t,this.position=t=C.allocAt(-e.x,-e.y),C.free(t)}},isGeometryPositioned:{get:function(){return(this.l&1048576)!==0},set:function(t){var e=(this.l&1048576)!==0;e!==t&&(this.l^=1048576,this.v(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Vi},set:function(t){var e=this.Vi;e!==t&&(t!==null&&du(t,"Shape.fill"),t instanceof jt&&t.freeze(),this.Vi=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.xc},set:function(t){var e=this.xc;e!==t&&(t!==null&&du(t,"Shape.stroke"),t instanceof jt&&t.freeze(),this.xc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.ig},set:function(t){var e=this.ig;if(e!==t)if(0<=t){this.ig=t,this.v();var i=this.part;i!==null&&(i.ag=NaN),this.g("strokeWidth",e,t)}else at(t,"value >= 0",yt,"strokeWidth:value")}},strokeCap:{get:function(){return this.Na!==null?this.Na.Hr:"butt"},set:function(t){var e=this.strokeCap;e!==t&&(typeof t!="string"||t!=="butt"&&t!=="round"&&t!=="square"?at(t,'"butt", "round", or "square"',yt,"strokeCap"):(cl(this),this.Na.Hr=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.Na!==null?this.Na.Ir:"miter"},set:function(t){var e=this.strokeJoin;e!==t&&(typeof t!="string"||t!=="miter"&&t!=="bevel"&&t!=="round"?at(t,'"miter", "bevel", or "round"',yt,"strokeJoin"):(cl(this),this.Na.Ir=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.Na!==null?this.Na.Jr:10},set:function(t){var e=this.strokeMiterLimit;if(e!==t&&1<=t){cl(this),this.Na.Jr=t,this.N();var i=this.part;i!==null&&(i.ag=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.Yg},set:function(t){var e=this.Yg;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];0<=o&&isFinite(o)||O("strokeDashArray:value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.Yg=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.Na!==null?this.Na.vj:0},set:function(t){var e=this.strokeDashOffset;e!==t&&0<=t&&(cl(this),this.Na.vj=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.bn},set:function(t){var e=this.bn;if(e!==t){var i=A.Ze[t];typeof i=="function"?i=t:(i=A.Ze[t.toLowerCase()])||O("Unknown Shape.figure: "+t),e!==i&&(t=this.part,t!==null&&(t.ag=NaN),this.bn=i,this.Rd=null,this.rc(),this.v(),this.g("figure",e,i))}}},toArrow:{get:function(){return this.Ua!==null?this.Ua.V:"None"},set:function(t){var e=this.toArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var i=mS(t);i===null?O("Unknown Shape.toArrow: "+t):e!==i&&(this.Ua===null&&(this.Ua=new Ps),this.Ua.V=i,this.Rd=null,this.rc(),this.v(),yS(this),this.g("toArrow",e,i))}}},fromArrow:{get:function(){return this.Ua!==null?this.Ua.j:"None"},set:function(t){var e=this.fromArrow;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var i=mS(t);i===null?O("Unknown Shape.fromArrow: "+t):e!==i&&(this.Ua===null&&(this.Ua=new Ps),this.Ua.j=i,this.Rd=null,this.rc(),this.v(),yS(this),this.g("fromArrow",e,i))}}},spot1:{get:function(){return this.Na!==null?this.Na.fg:_e},set:function(t){var e=this.spot1;e.D(t)||(t=t.J(),cl(this),this.Na.fg=t,this.v(),this.g("spot1",e,t))}},spot2:{get:function(){return this.Na!==null?this.Na.gg:_e},set:function(t){var e=this.spot2;e.D(t)||(t=t.J(),cl(this),this.Na.gg=t,this.v(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Vn},set:function(t){var e=this.Vn;e!==t&&(this.Vn=t,this.rc(),this.v(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Wn},set:function(t){var e=this.Wn;e!==t&&(this.Wn=t,this.rc(),this.v(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){return this.fc}},pathPattern:{get:function(){return this.Na!==null?this.Na.br:null},set:function(t){var e=this.pathPattern;e!==t&&(cl(this),this.Na.br=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.Na!==null?this.Na.jq:cn},set:function(t){var e=this.geometryStretch;e!==t&&(cl(this),this.Na.jq=t,this.v(),this.g("geometryStretch",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.Sk:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new Zr),this.fa.Sk=t;var i=this.diagram;i!==null&&this.panel===i.grid&&$o(i),this.v(),i=this.panel,i!==null&&(i.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new Zr),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new Zr),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.o:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new Zr),this.fa.o=t,this.v(),this.g("graduatedSkip",e,t))}}}),yt.prototype.intersectsRect=yt.prototype.Yc,yt.prototype.containedInRect=yt.prototype.fh,yt.prototype.getNearestIntersectionPoint=yt.prototype.rs,yt.prototype.getDocumentBounds=yt.prototype.ni,yt.prototype.getDocumentPoint=yt.prototype.ga;var $r=new Xe,Jm=new Xe;yt.className="Shape",yt.getFigureGenerators=function(){var t=new ct,e;for(e in A.Ze)e!==e.toLowerCase()&&t.add(e,A.Ze[e]);return t.freeze(),t},yt.defineFigureGenerator=function(t,e){var i=t.toLowerCase(),n=A.Ze;n[t]=e,n[i]=t},yt.getArrowheadGeometries=function(){var t=new ct;for(n in A.vm)if($r[n]===void 0){var e=H.parse(A.vm[n],!1);$r[n]=e,e=n.toLowerCase(),e!==n&&($r[e]=n)}for(var i in $r)if(i!==i.toLowerCase()){var n=$r[i];n instanceof H&&t.add(i,n)}return t.freeze(),t},yt.defineArrowheadGeometry=function(t,e){var i=null;typeof e=="string"?i=H.parse(e,!1):i=e,e=t.toLowerCase(),e!=="none"&&t!==e||O("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var n=$r;n[t]=i,n[e]=t};function qm(){this.pc=!1,this.Hr="butt",this.Ir="miter",this.Jr=10,this.vj=0,this.br=null,this.jq=cn,this.gg=this.fg=_e}qm.prototype.copy=function(){var t=new qm;return t.Hr=this.Hr,t.Ir=this.Ir,t.Jr=this.Jr,t.vj=this.vj,t.br=this.br,t.jq=this.jq,t.fg=this.fg.J(),t.gg=this.gg.J(),t};function Ut(t,e){return it.call(this),Od||(Pi=$n?new An(null).context:null,Od=!0),this.l|=2097152,this.gc="",this.xc="black",this.Ae="13px sans-serif",this.Lq=this.Db=this.Gc=0,this.da=this.fa=this.Hm=null,this.Ih=0,this.df=null,this.Le=0,this.ze=this.Sb=this.Rc=null,typeof t=="string"?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}Z(Ut,it),Ut.prototype.cloneProtected=function(t){it.prototype.cloneProtected.call(this,t),t.gc=this.gc,t.xc=this.xc,t.Ae=this.Ae,t.Gc=this.Gc,t.Db=this.Db,t.Lq=this.Lq,t.Hm=this.Hm,this.fa!==null&&(t.fa=this.fa.copy()),this.da!==null&&(t.da=this.da.pc?this.da:this.da.copy()),t.Ih=this.Ih,t.df=this.df,t.Le=this.Le,t.Rc=this.Rc,t.Sb=this.Sb,t.ze=this.ze};function Nr(t){t.da===null?t.da=new ov:t.da.pc&&(t.da=t.da.copy())}s=Ut.prototype,s.th=function(){it.prototype.th.call(this),this.da!==null&&(this.da.pc=!0)};function vS(t,e){t.l=e.l|6144,t.pb=e.opacity,t.Ma=e.background,t.areaBackground=e.areaBackground,t.jd=e.desiredSize.J(),t.minSize=e.minSize.J(),t.maxSize=e.maxSize.J(),e.Mb!==null?t.Mb=e.Mb.copy():t.Mb=null,t.Ca=e.scale,t.Lb=e.angle,t.stretch=e.stretch,t.Kg=e.margin.J(),t.Kb=e.alignment.J(),t.rk=e.alignmentFocus.J(),t.segmentFraction=e.segmentFraction,t.segmentOffset=e.segmentOffset.J(),t.segmentOrientation=e.segmentOrientation,e.tb!==null&&(t.tb=e.tb.copy()),t.shadowVisible=e.shadowVisible,t.gc=e.gc,t.xc=e.xc,t.Ae=e.Ae,t.fa!==null&&(t.fa=e.fa.copy()),e.da!==null&&(t.da=e.da.pc?e.da:e.da.copy()),t.Ih=e.Ih}s.qb=function(t){t.classType===Ut?this.wrap=t:it.prototype.qb.call(this,t)},s.toString=function(){return 22<this.gc.length?'TextBlock("'+this.gc.substring(0,20)+'"...)':'TextBlock("'+this.gc+'")'},s.v=function(){it.prototype.v.call(this)},s.hh=function(t,e){if(this.xc!==null&&this.gc.length!==0&&this.Ae!==null){var i=this.naturalBounds,n=this.actualBounds,r=i.width,o=i.height,l=Lf(this),u=t.textAlign=this.textAlign,h=e.un;u==="start"?u=h?"right":"left":u==="end"&&(u=h?"left":"right"),h=this.isUnderline;var f=this.isStrikethrough;en(this,t,this.xc,!0,!1,i,n),(h||f)&&en(this,t,this.xc,!1,!1,i,n),n=0,i=!1;var c=this.oe,p=c.dx-(l*c.m21+c.dx);c=c.dy-(l*c.m22+c.dy);var g=e.scale;switch(8>(p*p+c*c)*g*g&&(i=!0),e.ib!==t&&(i=!1),e.ib instanceof Vi&&(i=!1),e.Gf("textGreeking")===!1&&(i=!1),e=this.spacingAbove,p=this.spacingBelow,this.flip){case Sh:t.translate(r,0),t.scale(-1,1);break;case Mh:t.translate(0,o),t.scale(1,-1);break;case kh:t.translate(r,o),t.scale(-1,-1)}if(t.yc(),c=this.Gc,g=(e+l+p)*c,o>g&&(n=this.verticalAlignment,n=n.y*o-n.y*g+n.offsetY),c===1&&this.ze!==null)p=this.Db,p>r&&(p=r),this.Nj(this.ze,t,0,n+e,r,l,p,i,u,h,f);else if(this.Rc!==null&&this.Sb!==null)for(g=0;g<c;g++){var m=this.Rc[g];m>r&&(m=r),n+=e,this.Nj(this.Sb[g],t,0,n,r,l,m,i,u,h,f),n+=l+p}switch(this.flip){case Sh:t.scale(-1,1),t.translate(-r,0);break;case Mh:t.scale(1,-1),t.translate(0,-o);break;case kh:t.scale(-1,-1),t.translate(-r,-o)}}},s.Nj=function(t,e,i,n,r,o,l,u,h,f,c){var p=0;if(u)h==="left"?p=0:h==="right"?p=r-l:h==="center"&&(p=(r-l)/2),e.fillRect(i+p,n+.25*o,l,1);else{if(h==="left"?p=0:h==="right"?p=r:h==="center"&&(p=r/2),r=Td!==null?Td(this,o):.75*o,e.fillText(t,i+p,n+r),t=o/20|0,t===0&&(t=1),h==="right"?p-=l:h==="center"&&(p-=l/2),f){u=Ld!==null?Ld(this,o):.8*o,h=i+p,f=n+u,r=i+p+l,u=n+u;var g=t;e.beginPath(),e.lineWidth=g,e.moveTo(h,f),e.lineTo(r,u),e.stroke(),e.Se(),e instanceof Vi&&e.ad.classList.add("gojs-td")}c&&(c=n+o-o/2.2|0,t%2!==0&&(c+=.5),n=i+p,o=c,i=i+p+l,l=c,p=t,e.beginPath(),e.lineWidth=p,e.moveTo(n,o),e.lineTo(i,l),e.stroke(),e.Se(),e instanceof Vi&&e.ad.classList.add("gojs-td"))}},s.jk=function(t,e,i){if(!it.prototype.jk.call(this,t,e,i))return!1;if(en(this,t,this.xc,!0,!1,this.naturalBounds,this.actualBounds),i){if(this.svg.getElementsByTagName("text").length===0)return!0;for(e=this.svg.getElementsByClassName("gojs-td"),i=0;i<e.length;i++)qM(t,e[i],!1)}else e=this.svg,e.innerHTML=this.text,qM(t,e,!0);return!0},s.mk=function(t){return 1<this.lineCount||this.isUnderline||this.isStrikethrough?!0:it.prototype.mk.call(this,t)},s.Fv=function(t,e){if(t.nodeName!=="g")t.setAttributeNS(null,"filter",e);else{t=t.getElementsByTagName("text");for(var i=0;i<t.length;i++)t[i].setAttributeNS(null,"filter",e)}},s.Wl=function(t,e,i,n){var r=this.Gc;this.Ih=t,this.l&=-16777217;var o=this.Ae;Pi!==null&&SS!==o&&(SS=Pi.font=o),this.Db=this.Le=0,this.ze=this.Sb=this.Rc=this.df=null;var l;if(isNaN(this.desiredSize.width)){if(o=this.gc.replace(/\r\n/g,`
`).replace(/\r/g,`
`),o.length===0)o=8;else if(this.isMultiline){for(var u=l=0,h=!1;!h;){var f=o.indexOf(`
`,u);f===-1&&(f=o.length,h=!0),u=o.substr(u,f-u),this.formatting===Eh&&(u=u.trim()),l=Math.max(l,Jn(u)),u=f+1}o=l}else l=o.indexOf(`
`,0),0<=l&&(o=o.substr(0,l)),o=Jn(o);o=Math.min(o,t/this.scale)}else o=this.desiredSize.width;if(this.panel!==null&&(o=Math.min(o,this.panel.maxSize.width)),l=wS(this,o),isNaN(this.desiredSize.height)?l=Math.min(l,e/this.scale):l=this.desiredSize.height,h=l,this.Db!==0&&this.Rc!==null&&this.Sb!==null&&this.overflow===Ff&&(e=this.Ae,e=this.overflow===Ff?xS(e):0,f=this.spacingAbove+this.spacingBelow,f=Math.max(0,Lf(this)+f),h=Math.min(this.maxLines-1,Math.max(Math.floor(h/f+.01)-1,0)),!(h+1>=this.Sb.length))){for(this.l|=16777216,f=this.Sb[h],e=Math.max(1,t-e);Jn(f)>e&&1<f.length;)f=f.substr(0,f.length-1);f+=Af,e=Jn(f),this.Sb[h]=f,this.Sb=this.Sb.slice(0,h+1),this.Rc[h]=e,this.Rc=this.Rc.slice(0,h+1),this.Le=this.Sb.length,this.Db=Math.max(this.Db,e),this.Gc=this.Le,this.Gc===1&&(this.ze=this.Sb[0])}(this.wrap===tv||isNaN(this.desiredSize.width))&&(o=isNaN(t)?this.Db:Math.min(t,this.Db)),o=Math.max(i,o),l=Math.max(n,l),go(this.fc,o,l),this.Ge(0,0,o,l),this.svg!==null&&r!==this.Gc&&(this.Hc=!0)},s.eh=function(t,e,i,n){Cm(this,t,e,i,n)};function Tf(t,e,i){t.ze===null?(t.ze=e,t.Db=i):((t.Sb===null||t.Rc===null)&&(t.Sb=[],t.Rc=[],t.Sb.push(t.ze),t.Rc.push(t.Db)),t.Sb.push(e),t.Rc.push(i),t.Sb.length>t.maxLines&&(t.l|=16777216))}function bm(t,e,i,n){var r=t.formatting===Eh;r&&(e=e.trim());var o=0,l=t.Ae,u=t.spacingAbove+t.spacingBelow;u=Math.max(0,Lf(t)+u);var h=t.overflow===Ff?xS(l):0;if(t.Gc>=t.maxLines)n!==null&&n.h(0,u);else if(l=e,t.wrap===Fd){t.Le=1;var f=Jn(e);if(h===0||f<=i)t.Db=Math.max(t.Db,f),Tf(t,e,t.Db),n!==null&&n.h(f,u);else{for(o=Ih(t,l),l=l.substr(o.length),e=Ih(t,l),f=Jn(o+e);0<e.length&&f<=i;)o+=e,l=l.substr(e.length),e=Ih(t,l),f=o+e,r&&(f=f.trim()),f=Jn(f);for(r&&(e=e.trim()),o+=e,i=Math.max(1,i-h);Jn(o)>i&&1<o.length;)o=o.substr(0,o.length-1);t.l|=16777216,o+=Af;var c=Jn(o);t.Db=c,Tf(t,o,c),n!==null&&n.h(c,u)}}else{for(h=0,l.length===0&&(h=1,Tf(t,l,0));0<l.length;){for(e=Ih(t,l),l=l.substr(e.length);Jn(e)>i;){var p=1;for(f=Jn(e.substr(0,p)),c=0;f<=i;)p++,c=f,f=Jn(e.substr(0,p));if(p===1){var g=f;o=Math.max(o,f)}else g=c,o=Math.max(o,c);if(p--,1>p&&(p=1),Tf(t,e.substr(0,p),g),h++,e=e.substr(p),t.Gc+h>t.maxLines)break}for(c=Ih(t,l),f=Jn(e+c);0<c.length&&f<=i;)e+=c,l=l.substr(c.length),c=Ih(t,l),f=e+c,r&&(f=f.trim()),f=Jn(f);if(r&&(e=e.trim()),e!==""&&(e[e.length-1]===""&&(e=e.substring(0,e.length-1)+""),c.length===0?(p=f,o=Math.max(o,f)):(p=c=Jn(e),o=Math.max(o,c)),Tf(t,e,p),h++,t.Gc+h>t.maxLines))break}t.Le=Math.min(t.maxLines,h),t.Db=Math.max(t.Db,o),n!==null&&n.h(t.Db,u*t.Le)}}function Ih(t,e){if(t.wrap===ev)return e.substr(0,1);for(var i=e.length,n=0,r=yT;n<i&&!r.test(e.charAt(n));)n++;for(t.formatting===iv&&(i=Math.min(i,n+1));n<i&&r.test(e.charAt(n));)n++;return n>=e.length?e:e.substr(0,n)}function Jn(t){return Pi===null?8*t.length:Pi.measureText(t).width}function Lf(t){if(t.df!==null)return t.df;var e=t.Ae;if(Pi===null){var i=16;return t.df=i}return nv[e]!==void 0&&5e3>MS?i=nv[e]:(i=1.3*Pi.measureText("M").width,nv[e]=i,MS++),t.df=i}function xS(t){if(Pi===null)return 6;if(Dd[t]!==void 0&&5e3>rv)var e=Dd[t];else e=Pi.measureText(Af).width,Dd[t]=e,rv++;return e}function wS(t,e){var i=t.gc.replace(/\r\n/g,`
`).replace(/\r/g,`
`),n=t.spacingAbove+t.spacingBelow;if(n=Math.max(0,Lf(t)+n),i.length===0)return t.Db=0,t.Gc=1,n;if(!t.isMultiline){var r=i.indexOf(`
`,0);0<=r&&(i=i.substr(0,r))}r=0;for(var o=t.Gc=0,l,u=!1;!u;){if(l=i.indexOf(`
`,o),l===-1&&(l=i.length,u=!0),o<=l){if(o=i.substr(o,l-o),t.wrap!==Fd){t.Le=0;var h=ht.alloc();bm(t,o,e,h),r+=h.height,ht.free(h),t.Gc+=t.Le}else bm(t,o,e,null),r+=n,t.Gc++;t.Gc===t.maxLines&&(u=!0)}o=l+1}return t.Lq=r}Y.Object.defineProperties(Ut.prototype,{font:{get:function(){return this.Ae},set:function(t){var e=this.Ae;e!==t&&(this.Ae=t,this.df=null,this.v(),this.g("font",e,t))}},text:{get:function(){return this.gc},set:function(t){var e=this.gc;t!=null?t=t.toString():t="",e!==t&&(this.gc=t,this.v(),this.g("text",e,t),this.Hc=!0)}},textAlign:{get:function(){return this.da!==null?this.da.Or:"start"},set:function(t){var e=this.textAlign;e===t||t!=="start"&&t!=="end"&&t!=="left"&&t!=="right"&&t!=="center"||(Nr(this),this.da.Or=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return this.da!==null?this.da.Xf:te},set:function(t){var e=this.flip;e!==t&&(Nr(this),this.da.Xf=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.da!==null?this.da.Yr:Np},set:function(t){var e=this.verticalAlignment;e.D(t)||(t=t.J(),Nr(this),this.da.Yr=t,Ch(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.fc.w()){var t=ht.alloc();bm(this,this.gc,999999,t);var e=t.width;ht.free(t),t=wS(this,e);var i=this.desiredSize;isNaN(i.width)||(e=i.width),isNaN(i.height)||(t=i.height),go(this.fc,e,t)}return this.fc}},isMultiline:{get:function(){return(this.l&2097152)!==0},set:function(t){var e=(this.l&2097152)!==0;e!==t&&(this.l^=2097152,this.v(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return(this.l&4194304)!==0},set:function(t){var e=(this.l&4194304)!==0;e!==t&&(this.l^=4194304,this.Hc=!0,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return(this.l&8388608)!==0},set:function(t){var e=(this.l&8388608)!==0;e!==t&&(this.l^=8388608,this.Hc=!0,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.da!==null?this.da.$r:Ad},set:function(t){var e=this.wrap;e!==t&&(Nr(this),this.da.$r=t,this.v(),this.g("wrap",e,t))}},overflow:{get:function(){return this.da!==null?this.da.$q:jd},set:function(t){var e=this.overflow;e!==t&&(Nr(this),this.da.$q=t,this.v(),this.g("overflow",e,t))}},isOverflowed:{get:function(){return(this.l&16777216)!==0}},stroke:{get:function(){return this.xc},set:function(t){var e=this.xc;e!==t&&(t!==null&&du(t,"TextBlock.stroke"),t instanceof jt&&t.freeze(),this.xc=t,this.Hc=!0,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.Gc}},lineHeight:{get:function(){return Lf(this)}},editable:{get:function(){return(this.l&1048576)!==0},set:function(t){var e=(this.l&1048576)!==0;e!==t&&(this.l^=1048576,this.g("editable",e,t))}},textEditor:{get:function(){return this.da!==null?this.da.Qr:null},set:function(t){var e=this.textEditor;e!==t&&(Nr(this),this.da.Qr=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.da!==null?this.da.Hd:null},set:function(t){var e=this.errorFunction;e!==t&&(Nr(this),this.da.Hd=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.fa!==null?this.fa.Sk:1},set:function(t){var e=this.interval;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.fa===null&&(this.fa=new Zr),this.fa.Sk=t,this.v();var i=this.panel;i!==null&&(i.graduatedIntervals=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.fa!==null?this.fa.u:0},set:function(t){var e=this.graduatedStart;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new Zr),this.fa.u=t,this.v(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.fa!==null?this.fa.j:1},set:function(t){var e=this.graduatedEnd;e!==t&&(0>t?t=0:1<t&&(t=1),this.fa===null&&(this.fa=new Zr),this.fa.j=t,this.v(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.fa!==null?this.fa.F:null},set:function(t){var e=this.graduatedFunction;e!==t&&(this.fa===null&&(this.fa=new Zr),this.fa.F=t,this.v(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.fa!==null?this.fa.o:null},set:function(t){var e=this.graduatedSkip;e!==t&&(this.fa===null&&(this.fa=new Zr),this.fa.o=t,this.v(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.da!==null?this.da.wj:null},set:function(t){var e=this.textValidation;e!==t&&(Nr(this),this.da.wj=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.da!==null?this.da.Pr:null},set:function(t){var e=this.textEdited;e!==t&&(Nr(this),this.da.Pr=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.da!==null?this.da.Dr:0},set:function(t){var e=this.spacingAbove;e!==t&&(Nr(this),this.da.Dr=t,this.v(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.da!==null?this.da.Er:0},set:function(t){var e=this.spacingBelow;e!==t&&(Nr(this),this.da.Er=t,this.v(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return this.da!==null?this.da.gq:Eh},set:function(t){var e=this.formatting;e!==t&&(Nr(this),this.da.gq=t,this.v(),this.g("formatting",e,t))}},maxLines:{get:function(){return this.da!==null?this.da.Jq:1/0},set:function(t){var e=this.maxLines;e!==t&&(t=Math.floor(t),0>=t&&at(t,"> 0",Ut,"maxLines"),Nr(this),this.da.Jq=t,this.v(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:this.Rc!==null?this.Rc:[this.Db],arrText:this.Sb!==null?this.Sb:[this.ze],maxLineWidth:this.Db,fontHeight:this.df}}},choices:{get:function(){return this.Hm},set:function(t){var e=this.Hm;e!==t&&(this.Hm=t,this.g("choices",e,t))}}});var Td=null,Ld=null,Fd=new K(Ut,"None",0),tv=new K(Ut,"WrapFit",1),Ad=new K(Ut,"WrapDesiredSize",2),ev=new K(Ut,"WrapBreakAll",3),jd=new K(Ut,"OverflowClip",0),Ff=new K(Ut,"OverflowEllipsis",1),Eh=new K(Ut,"FormatTrim",0),iv=new K(Ut,"FormatNone",0),yT=/[ \u200b\u00ad]/,nv=new Xe,MS=0,Dd=new Xe,rv=0,Af="...",SS="",Pi=null,Od=!1;Ut.className="TextBlock";function ov(){this.pc=!1,this.Hd=null,this.Xf=te,this.gq=Eh,this.Jq=1/0,this.$q=jd,this.Er=this.Dr=0,this.Or="start",this.wj=this.Qr=this.Pr=null,this.Yr=Np,this.$r=Ad}ov.prototype.copy=function(){var t=new ov;return t.Hd=this.Hd,t.Xf=this.Xf,t.gq=this.gq,t.Jq=this.Jq,t.$q=this.$q,t.Dr=this.Dr,t.Er=this.Er,t.Or=this.Or,t.Pr=this.Pr,t.Qr=this.Qr,t.wj=this.wj,t.Yr=this.Yr,t.$r=this.$r,t},Ut.getEllipsis=function(){return Af},Ut.setEllipsis=function(t){Af=t,Dd=new Xe,rv=0},Ut.getBaseline=function(){return Td},Ut.setBaseline=function(t){Td=t},Ut.getUnderline=function(){return Ld},Ut.setUnderline=function(t){Ld=t},Ut.isValidFont=function(t){if(Od||(Pi=$n?new An(null).context:null,Od=!0),Pi===null)return!0;var e=Pi.font;if(t===e||t==="10px sans-serif")return!0;Pi.font="10px sans-serif",Pi.font=t;var i=Pi.font;if(i!=="10px sans-serif")return Pi.font=e,!0;Pi.font="19px serif";var n=Pi.font;return Pi.font=t,i=Pi.font,Pi.font=e,i!==n},Ut.FormatNone=iv,Ut.FormatTrim=Eh,Ut.None=Fd,Ut.OverflowClip=jd,Ut.OverflowEllipsis=Ff,Ut.WrapBreakAll=ev,Ut.WrapDesiredSize=Ad,Ut.WrapFit=tv;function Zr(){this.Sk=1,this.u=0,this.j=1,this.o=this.F=null}Zr.prototype.copy=function(){var t=new Zr;return t.Sk=this.Sk,t.u=this.u,t.j=this.j,t.F=this.F,t.o=this.o,t},Zr.className="GradElementSettings";function Ni(t,e){it.call(this),this.Eg=null,this.ro="",this.Xg=Nw,this.Mk=oe,this.Zg=this.Hd=null,this.Lk=Et,this.Xf=te,this.vl=null,this.rn=!1,this.fn=!0,this.$k=!1,this.ct=this.rl=null,typeof t=="string"?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}var Bh;Z(Ni,it),Ni.prototype.cloneProtected=function(t){it.prototype.cloneProtected.call(this,t),t.ro=this.ro,t.element=this.Eg,t.Xg=this.Xg.J(),t.Mk=this.Mk,t.Xf=this.Xf,t.Hd=this.Hd,t.Zg=this.Zg,t.Lk=this.Lk.J(),t.fn=this.fn,t.rl=this.rl},Ni.prototype.qb=function(t){t===te||t===Fn||t===au?this.imageStretch=t:it.prototype.qb.call(this,t)},Ni.prototype.toString=function(){return"Picture("+this.source+")#"+Ci(this)};function Rh(t){t===void 0&&(t=""),t!==""?Bh[t]&&(delete Bh[t],Id--):(Bh=new Xe,Id=0)}function kS(t,e){e.ty||(e.Fq=function(i){e.sq=!0,e.mn=!1;var n=e.Bg.copy();if(n!=null){for(n=n.iterator;n.next();){var r=n.value;r.N();var o=e.getAttribute("src")||"",l=r.Og.I(o);if(l!==null)for(var u=l.length,h=0;h<u;h++)o=l[h],r.Yn.add(o),o.Hc=!0,r.Rb(),e.jn&&(e.fu===void 0&&(e.fu=i),o.Zg!==null&&o.Zg(o,i))}e.Bg.clear()}t.desiredSize.w()||(pn(t,!1),t.v())},e.Yp=function(i){e.mn=i;var n=e.Bg.copy();if(n!=null){for(n=n.iterator;n.next();){var r=n.value,o=e.getAttribute("src")||"",l=r.Og.I(o);if(l!==null){r=l.length,o=Rt();for(var u=0;u<r;u++)o.push(l[u]);if(e.jn)for(u=0;u<r;u++)l=o[u],l.Hd!==null&&l.Hd(l,i);Bt(o)}}e.Bg.clear()}},e.addEventListener("load",e.Fq),e.addEventListener("error",e.Yp),e.ty=!0)}Ni.prototype.lA=function(){if(this.source!==""){Rh(this.source);var t=this.source;this.source="",this.source=t}},Ni.prototype.redraw=function(){this.N(),this.Hc=!0},Ni.prototype.hh=function(t,e){var i=this.Eg;if(i!==null){var n=i.getAttribute("src");if(!(i instanceof HTMLImageElement&&(n===null||n==="")||i.mn instanceof Event&&t instanceof al)){var r=t instanceof Vi;n=this.naturalBounds;var o=0,l=0,u=this.rn,h=u?+i.width:i.naturalWidth;if(u=u?+i.height:i.naturalHeight,h===void 0&&i.videoWidth&&(h=i.videoWidth),u===void 0&&i.videoHeight&&(u=i.videoHeight),h=h||n.width,u=u||n.height,h!==0&&u!==0){var f=h,c=u;this.sourceRect.w()&&(o=this.Xg.x,l=this.Xg.y,h=this.Xg.width,u=this.Xg.height);var p=h,g=u,m=this.Mk,v=this.Lk;switch(m){case te:if(this.sourceRect.w())break;p>=n.width&&(o=o+v.offsetX+(p*v.x-n.width*v.x)),g>=n.height&&(l=l+v.offsetY+(g*v.y-n.height*v.y)),h=Math.min(n.width,p),u=Math.min(n.height,g);break;case oe:p=n.width,g=n.height;break;case Fn:case au:m===Fn?(m=Math.min(n.height/g,n.width/p),p*=m,g*=m):m===au&&(m=Math.max(n.height/g,n.width/p),p*=m,g*=m,p>=n.width&&(o=(o+v.offsetX+(p*v.x-n.width*v.x)/p)*h),g>=n.height&&(l=(l+v.offsetY+(g*v.y-n.height*v.y)/g)*u),h*=1/(p/n.width),u*=1/(g/n.height),p=n.width,g=n.height)}m=this.Df()*e.scale;var x=p*m*g*m,k=h*u/x,S=i.__goCache;m=null;var P=mT;if(!r){if(i.sq&&S!==void 0&&4<x&&k>P*P)for(S.gi===null&&(PS(S,4,f,c,i),PS(S,16,f,c,i)),r=S.gi,f=r.length,c=0;c<f&&r[c].ratio*r[c].ratio<k;c++)m=r[c];if(!e.Ym){if(this.vl===null)if(this.Eg===null)this.vl=!1;else{r=new An(null).context;try{r.drawImage(this.Eg,0,0)}catch{this.fn=!1}try{r.getImageData(0,0,1,1).data[3]&&(this.vl=!1),this.vl=!1}catch{this.vl=!0}}if(this.vl)return}}switch(r=p<n.width?v.offsetX+(n.width*v.x-p*v.x):0,v=g<n.height?v.offsetY+(n.height*v.y-g*v.y):0,this.flip){case Sh:t.translate(Math.min(n.width,p),0),t.scale(-1,1);break;case Mh:t.translate(0,Math.min(n.height,g)),t.scale(1,-1);break;case kh:t.translate(Math.min(n.width,p),Math.min(n.height,g)),t.scale(-1,-1)}if(t.yc(),e.Gf("pictureRatioOptimization")&&!e.aj&&S!==void 0&&m!==null&&m.ratio!==1){t.save(),e=m.ratio;try{t.drawImage(m.source,o/e,l/e,Math.min(m.source.width,h/e),Math.min(m.source.height,u/e),r,v,Math.min(n.width,p),Math.min(n.height,g)),t instanceof Vi&&(this.ct=[o/e,l/e,Math.min(m.source.width,h/e),Math.min(m.source.height,u/e),r,v,Math.min(n.width,p),Math.min(n.height,g)])}catch{this.fn=!1}t.restore()}else try{t.drawImage(i,o,l,h,u,r,v,Math.min(n.width,p),Math.min(n.height,g)),t instanceof Vi&&(this.ct=[o,l,h,u,r,v,Math.min(n.width,p),Math.min(n.height,g)])}catch{this.fn=!1}switch(this.flip){case Sh:t.scale(-1,1),t.translate(-Math.min(n.width,p),0);break;case Mh:t.scale(1,-1),t.translate(0,-Math.min(n.height,g));break;case kh:t.scale(-1,-1),t.translate(-Math.min(n.width,p),-Math.min(n.height,g))}}}}},Ni.prototype.Wl=function(t,e,i,n){var r=this.desiredSize,o=ar(this,!0),l=this.Eg,u=this.rn,h=0,f=0;(u||!this.$k&&l&&l.complete)&&(this.$k=!0),l===null?(isFinite(r.width)||(t=0),isFinite(r.height)||(e=0)):(h=u?+l.width:l.naturalWidth,f=u?+l.height:l.naturalHeight),isFinite(r.width)||o===oe||o===Re?(isFinite(t)||(this.sourceRect.w()?t=this.sourceRect.width:l!==null&&(t=h)),i=0):l!==null&&this.$k!==!1&&(t=this.sourceRect.w()?this.sourceRect.width:h),isFinite(r.height)||o===oe||o===Ue?(isFinite(e)||(this.sourceRect.w()?e=this.sourceRect.height:l!==null&&(e=f)),n=0):l!==null&&this.$k!==!1&&(e=this.sourceRect.w()?this.sourceRect.height:f),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(e=r.height),r=this.maxSize,o=this.minSize,i=Math.max(i||0,o.width),n=Math.max(n||0,o.height),t=Math.min(r.width,t),e=Math.min(r.height,e),t=Math.max(i,t),e=Math.max(n,e),l===null||l.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),go(this.fc,t,e),this.Ge(0,0,t,e)},Ni.prototype.eh=function(t,e,i,n){Cm(this,t,e,i,n)},Y.Object.defineProperties(Ni.prototype,{element:{get:function(){return this.Eg},set:function(t){var e=this.Eg;if(this.Hc=!0,e!==t){this.rn=t instanceof HTMLCanvasElement;var i=t instanceof HTMLImageElement;t===null||i||t instanceof HTMLVideoElement||this.rn||O("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var n=this.diagram;n!==null&&fm(n,this),this.Eg=t,t!==null&&i&&t.Bg===void 0&&(t.Bg=new _),n!==null&&i&&am(n,this),t!==null&&(this.rn||t.complete===!0?(t.jn&&(t.mn instanceof Event&&this.Hd!==null?this.Hd(this,t.mn):t.sq===!0&&!t.mn&&this.Zg!==null&&t.fu&&this.Zg(this,t.fu)),t.sq=!0,this.desiredSize.w()||(pn(this,!1),this.v())):i&&kS(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.ro},set:function(t){var e=this.ro;if(e!==t){this.Hc=!0,this.ro=t;var i=Bh;if($n){var n=null;if(i[t]!==void 0)n=i[t];else if(t!==""){30<Id&&(Rh(),i=Bh),n=J("img"),n.jn=!0,kS(this,n);var r=this.rl;r!==null&&(n.crossOrigin=r(this)),n.src=t,i[t]=n,Id++}this.element=n,n!==null&&n.__goCache===void 0&&(n.__goCache=new CS),this.v(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.rl},set:function(t){if(this.rl!==t&&(this.rl=t,this.element!==null)){var e=this.element.getAttribute("src");t===null&&typeof e=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.Xg},set:function(t){var e=this.Xg;e.D(t)||(this.Xg=t=t.J(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.Mk},set:function(t){var e=this.Mk;e!==t&&(this.Mk=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Xf},set:function(t){var e=this.Xf;e!==t&&(this.Xf=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.Lk},set:function(t){var e=this.Lk;e.D(t)||(this.Lk=t=t.J(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.Hd},set:function(t){var e=this.Hd;e!==t&&(this.Hd=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.Zg},set:function(t){var e=this.Zg;e!==t&&(this.Zg=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.fc}}}),Ni.prototype.redraw=Ni.prototype.redraw,Ni.prototype.reloadSource=Ni.prototype.lA;var Id=0,mT=4;Ni.className="Picture",Bh=new Xe,Ni.clearCache=Rh;function CS(){this.gi=null}function PS(t,e,i,n,r){t.gi===null&&(t.gi=[]);var o=new An(null),l=o.context,u=1/e;o.width=i/e,o.height=n/e,o.width!==0&&o.height!==0&&(e=new NS(o.Oa,e),i=1,0<t.gi.length&&(i=t.gi[t.gi.length-1],r=i.source,i=i.ratio),l.setTransform(u*i,0,0,u*i,0,0),l.yc(),l.drawImage(r,0,0),t.gi.push(e))}CS.className="PictureCacheArray";function NS(t,e){this.source=t,this.ratio=e}NS.className="PictureCacheInstance";function zh(){this.os=new H,this.oc=null}zh.prototype.reset=function(t){t!==null?(t.ka(),this.os=t,t.figures.clear()):this.os=new H,this.oc=null};function Vh(t,e,i,n,r,o){t.oc=new Ae,t.oc.startX=e,t.oc.startY=i,t.oc.isFilled=n,t.oc.isEvenOdd=o||!1,t.os.figures.add(t.oc),r!==void 0&&(t.oc.isShadowed=r)}function vT(t){var e=t.oc.segments.length;0<e&&t.oc.segments.M(e-1).close()}zh.prototype.moveTo=function(t,e,i){i===void 0&&(i=!1);var n=new Ft(Tn);n.endX=t,n.endY=e,i&&n.close(),this.oc.segments.add(n)},zh.prototype.lineTo=function(t,e,i){i===void 0&&(i=!1);var n=new Ft($t);n.endX=t,n.endY=e,i&&n.close(),this.oc.segments.add(n)};function bo(t,e,i,n,r,o,l){var u;u===void 0&&(u=!1);var h=new Ft(qi);h.point1X=e,h.point1Y=i,h.point2X=n,h.point2Y=r,h.endX=o,h.endY=l,u&&h.close(),t.oc.segments.add(h)}function Ed(t,e,i,n,r){var o;o===void 0&&(o=!1);var l=new Ft(lr);l.point1X=e,l.point1Y=i,l.endX=n,l.endY=r,o&&l.close(),t.oc.segments.add(l)}zh.prototype.arcTo=function(t,e,i,n,r,o,l){o===void 0&&(o=0),l===void 0&&(l=!1);var u=new Ft(fe);u.startAngle=t,u.sweepAngle=e,u.centerX=i,u.centerY=n,u.radiusX=r,u.radiusY=o!==0?o:r,l&&u.close(),this.oc.segments.add(u)};function xT(t,e,i,n,r,o,l,u){var h;h===void 0&&(h=!1),e=new Ft(_n,l,u,e,i,n,r,o),h&&e.close(),t.oc.segments.add(e)}function TS(t){var e=Bd;return e!==null?(Bd=null,e.reset(t),e):(e=new zh,e.reset(t),e)}var Bd=null;zh.className="StreamGeometryContext";function $e(t,e){var i=t.toLowerCase(),n=A.Ze;n[t]=e,n[i]=t}$e("Rectangle",function(t,e,i){t="r"+e+","+i;var n=A.Mf[t];return n!==void 0||(n=new H(H.u),n.endX=e,n.endY=i,A.Nf<A.wm&&(A.Mf[t]=n,A.Nf++)),n}),$e("Square",function(t,e,i){t="s"+e+","+i;var n=A.Mf[t];return n!==void 0||(n=new H(H.u),n.endX=e,n.endY=i,n.defaultStretch=Fn,A.Nf<A.wm&&(A.Mf[t]=n,A.Nf++)),n}),$e("RoundedRectangle",function(t,e,i){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3),t=Math.min(t,i/3);var n="rr"+e+","+i+","+t,r=A.Mf[n];if(r!==void 0)return r;var o=t*A.wg;return r=new H().add(new Ae(t,0,!0).add(new Ft($t,e-t,0)).add(new Ft(qi,e,t,e-o,0,e,o)).add(new Ft($t,e,i-t)).add(new Ft(qi,e-t,i,e,i-o,e-o,i)).add(new Ft($t,t,i)).add(new Ft(qi,0,i-t,o,i,0,i-o)).add(new Ft($t,0,t)).add(new Ft(qi,t,0,0,o,o,0).close())),1<o&&(r.spot1=new lt(0,0,o,o),r.spot2=new lt(1,1,-o,-o)),A.Nf<A.wm&&(A.Mf[n]=r,A.Nf++),r}),$e("Border","RoundedRectangle"),$e("Ellipse",function(t,e,i){t="e"+e+","+i;var n=A.Mf[t];return n!==void 0||(n=new H(H.F),n.endX=e,n.endY=i,n.spot1=N0,n.spot2=T0,A.Nf<A.wm&&(A.Mf[t]=n,A.Nf++)),n}),$e("Circle",function(t,e,i){t="c"+e+","+i;var n=A.Mf[t];return n!==void 0||(n=new H(H.F),n.endX=e,n.endY=i,n.spot1=N0,n.spot2=T0,n.defaultStretch=Fn,A.Nf<A.wm&&(A.Mf[t]=n,A.Nf++)),n}),$e("TriangleRight",function(t,e,i){return new H().add(new Ae(0,0).add(new Ft($t,e,.5*i)).add(new Ft($t,0,i).close())).qm(0,.25,.5,.75)}),$e("TriangleDown",function(t,e,i){return new H().add(new Ae(0,0).add(new Ft($t,e,0)).add(new Ft($t,.5*e,i).close())).qm(.25,0,.75,.5)}),$e("TriangleLeft",function(t,e,i){return new H().add(new Ae(e,i).add(new Ft($t,0,.5*i)).add(new Ft($t,e,0).close())).qm(.5,.25,1,.75)}),$e("TriangleUp",function(t,e,i){return new H().add(new Ae(e,i).add(new Ft($t,0,i)).add(new Ft($t,.5*e,0).close())).qm(.25,.5,.75,1)}),$e("Triangle","TriangleUp"),$e("Diamond",function(t,e,i){return new H().add(new Ae(.5*e,0).add(new Ft($t,0,.5*i)).add(new Ft($t,.5*e,i)).add(new Ft($t,e,.5*i).close())).qm(.25,.25,.75,.75)}),$e("LineH",function(t,e,i){return t=new H(H.o),t.startX=0,t.startY=i/2,t.endX=e,t.endY=i/2,t}),$e("LineV",function(t,e,i){return t=new H(H.o),t.startX=e/2,t.startY=0,t.endX=e/2,t.endY=i,t}),$e("None","Rectangle"),$e("BarH","Rectangle"),$e("BarV","Rectangle"),$e("MinusLine","LineH"),$e("PlusLine",function(t,e,i){return new H().add(new Ae(0,i/2,!1).add(new Ft($t,e,i/2)).add(new Ft(Tn,e/2,0)).add(new Ft($t,e/2,i)))}),$e("XLine",function(t,e,i){return new H().add(new Ae(0,i,!1).add(new Ft($t,e,0)).add(new Ft(Tn,0,0)).add(new Ft($t,e,i)))}),$e("LineRight",function(t,e,i){return new H().add(new Ae(.25*e,0,!1).add(new Ft($t,.75*e,.5*i)).add(new Ft($t,.25*e,i)))}),$e("LineDown",function(t,e,i){return new H().add(new Ae(0,.25*i,!1).add(new Ft($t,.5*e,.75*i)).add(new Ft($t,e,.25*i)))}),$e("LineLeft",function(t,e,i){return new H().add(new Ae(.75*e,0,!1).add(new Ft($t,.25*e,.5*i)).add(new Ft($t,.75*e,i)))}),$e("LineUp",function(t,e,i){return new H().add(new Ae(0,.75*i,!1).add(new Ft($t,.5*e,.25*i)).add(new Ft($t,e,.75*i)))}),A.vm={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function sv(){this.pc=!1,this.tr=this.Kp=this.zq=null,this.vr="",this.fr=this.oq=this.ur=null,this.hr="",this.gr=kp,this.ir=null,this.jr="",this.lr=_e,this.Gq="",this.Hq=Je,this.Pq=o0,this.Kq=s0,this.Up=null,this.Cq=127,this.zr=l0,this.yr="gray",this.Vg=4}sv.prototype.copy=function(){var t=new sv;return t.zq=this.zq,t.Kp=this.Kp,t.tr=this.tr,t.vr=this.vr,t.ur=this.ur,t.oq=this.oq,t.fr=this.fr,t.hr=this.hr,t.gr=this.gr.J(),t.ir=this.ir,t.jr=this.jr,t.lr=this.lr.J(),t.Gq=this.Gq,t.Hq=this.Hq.J(),t.Pq=this.Pq.J(),t.Kq=this.Kq.J(),t.Up=this.Up,t.Cq=this.Cq,t.zr=this.zr.J(),t.yr=this.yr,t.Vg=this.Vg,t};function ot(t,e){t===void 0||t instanceof ye||typeof t=="string"?z.call(this,t):(z.call(this),t&&(e=t)),this.G=2408959,this.Tf="",this.P=null,this.Jg="",this.Qf=this.Ug=null,this.gc="",this.Ah=this.Ig=null,this.ke=new C(NaN,NaN).freeze(),this.nf=null,this.Bo=NaN,this.xw=-1,this.sy=new E,this.Rh=null,this.ag=NaN,e&&Object.assign(this,e)}Z(ot,z),ot.prototype.cloneProtected=function(t){z.prototype.cloneProtected.call(this,t),t.G=this.G&-4097|49152,t.Tf=this.Tf,this.P!==null&&(t.P=this.P.pc?this.P:this.P.copy()),t.Jg=this.Jg,t.Qf=null,t.gc=this.gc,t.ke.assign(this.ke),t.Bo=this.Bo},s=ot.prototype,s.Af=function(t){z.prototype.Af.call(this,t),t.oh(),t.Ug=null,t.nf=null,t.Rh=null},s.toString=function(){var t=Go(this.constructor)+"#"+Ci(this);return this.data!==null&&(t+="("+Bi(this.data)+")"),t};function Ti(t){t.P===null?t.P=new sv:t.P.pc&&(t.P=t.P.copy())}s.th=function(){z.prototype.th.call(this),this.P!==null&&(this.P.pc=!0)},s.fk=function(t,e,i,n,r,o,l){var u=this.diagram;u!==null&&(t===de&&e==="elements"?r instanceof z?fl(r,function(h){Lv(u.partManager,h),PM(u,h)}):am(u,r):t===Se&&e==="elements"&&(r instanceof z?fl(r,function(h){Fv(u.partManager,h,u)}):fm(u,r)),u.cb(t,e,i,n,r,o,l))},s.La=function(t){if(z.prototype.La.call(this,t),this.data!==null){for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];r instanceof z&&fl(r,function(o){o.data!==null&&o.La()})}for(e=this.adornments;e.next();)e.value.La(t)}},ot.prototype.updateRelationshipsFromData=function(){var t;this.data!==null&&((t=this.diagram)===null||t===void 0||t.partManager.updateRelationshipsFromData(this))},ot.prototype.Oj=function(t){var e=this.Qf;return e===null?null:e.I(t)},ot.prototype.bh=function(t,e){if(e!==null){var i=null,n=this.Qf;if(n!==null&&(i=n.I(t)),i!==e){if(i!==null){var r=i.diagram;r!==null&&r.remove(i)}n===null&&(this.Qf=n=new ct),e.Tf!==t&&(e.category=t),n.add(t,e),t=this.diagram,t!==null&&(t.add(e),t=e.adornedObject,t!==null&&(t=t.ih(),t!==null&&(e.data=t.data)))}}},ot.prototype.Jf=function(t){var e=this.Qf;if(e!==null){var i=e.I(t);if(i!==null){var n=i.diagram;n!==null&&n.remove(i)}e.remove(t),e.count===0&&(this.Qf=null)}},ot.prototype.Ej=function(){var t=this.Qf;if(t!==null){var e=Rt();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var i=0;i<t;i++)this.Jf(e[i]);Bt(e)}},ot.prototype.updateAdornments=function(){var t=this.diagram;if(t!==null){for(var e=this.adornments;e.next();){var i=e.value;i.v(),i.placeholder&&i.placeholder.v()}t:{if(this.isSelected&&this.selectionAdorned&&(e=this.selectionObject,e!==null&&this.actualBounds.w()&&this.isVisible()&&e.Ed()&&e.actualBounds.w())){if(i=this.Oj("Selection"),i===null){if(i=this.selectionAdornmentTemplate,i===null&&(i=this.ph()?t.linkSelectionAdornmentTemplate:this instanceof dt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(i instanceof Nt))break t;jn(i),i=i.copy(),i!==null&&(this.ph()&&this.selectionObject===this.path&&(i.type=z.Link),i.adornedObject=e)}if(i!==null){i.type===z.Link&&i.v(),this.bh("Selection",i);break t}}this.Jf("Selection")}for(wT(this,t),e=this.adornments;e.next();)e.value.La()}},ot.prototype.Zb=function(){var t=this.diagram;t!==null&&(t.vd=!0,!(this.G&16384)&&(this.G|=16384))};function lv(t){t.G&16384&&(t.updateAdornments(),t.G&=-16385)}function wT(t,e){e.toolManager.mouseDownTools.each(function(i){i.isEnabled&&i.updateAdornments(t)}),e.toolManager.updateAdornments(t)}function Rd(t){if(Ns(t)===!1){hv(t,!0),t.Tk();var e=t.diagram;e!==null&&(e.De.add(t),e.Rb())}}function LS(t){if(t.G|=2097152,Ns(t)!==!1){var e=t.position,i=t.location;i.w()&&e.w()||jS(t,e,i),i=t.Jb;var n=E.alloc().assign(i);i.ka(),i.x=e.x,i.y=e.y,i.freeze(),t.Yl(n,i),E.free(n),hv(t,!1)}}ot.prototype.Ge=function(t,e,i,n){var r=this.uc;r.h(t,e,i,n),this.Mb===null&&(this.Mb=new vt);var o=this.Mb;o.reset(),this.oo(o,t,e,i,n),this.Mb=o,o.ws()||o.pp(r)},ot.prototype.oo=function(t,e,i,n,r){if(this.Ca!==1&&t.scale(this.Ca),this.Lb!==0){var o=Et;this.locationSpot.sb()&&(o=this.locationSpot);var l=C.alloc();if(this.locationObject!==this)for(e=this.locationObject,i=e.naturalBounds,l.zi(i.x,i.y,i.width,i.height,o),e.Mb!==null&&e.Mb.Ga(l),l.offset(-e.measuredBounds.x,-e.measuredBounds.y),o=e.panel;o!==null&&o!==this;)o.Mb!==null&&o.Mb.Ga(l),l.offset(-o.measuredBounds.x,-o.measuredBounds.y),o=o.panel;else l.zi(e,i,n,r,o);t.rotate(this.Lb,l.x,l.y),C.free(l)}},ot.prototype.move=function(t,e){e===!0?this.location=t:this.position=t},ot.prototype.moveTo=function(t,e,i){t=C.allocAt(t,e),this.move(t,i),C.free(t)},ot.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(t!==null){if(!t.visible)return!1;if(t=t.diagram,t!==null&&t.animationManager.Fs(this))return!0}return t=this.containingGroup,!!(t===null||t.isSubGraphExpanded&&t.isVisible())},ot.prototype.bc=function(t){var e=this.diagram;t?(this.C(4),this.Zb(),e!==null&&e.De.add(this)):(this.C(8),this.Ej()),this.oh(),e!==null&&(e.Ya(),e.N())},ot.prototype.fb=function(t){if(this.name===t)return this;var e=this.Rh;if(e===null&&(this.Rh=e=new ct),e.I(t)!==null)return e.I(t);var i=z.prototype.fb.call(this,t);return i!==null?(e.set(t,i),i):(e.set(t,null),null)};function ts(t,e,i,n){n===void 0&&(n=new C),i=i.Nc()?Et:i;var r=e.naturalBounds;if(n.h(r.width*i.x+i.offsetX,r.height*i.y+i.offsetY),e===null||e===t)return n;for(e.transform.Ga(n),e=e.panel;e!==null&&e!==t;)e.transform.Ga(n),e=e.panel;return t.Mb!==null&&t.Mb.Ga(n),n.offset(-t.uc.x,-t.uc.y),n}ot.prototype.ni=function(t){return t===void 0&&(t=new E),t.assign(this.actualBounds)},ot.prototype.Va=function(){this.measure(1/0,1/0),this.arrange()};function FS(t){var e=C.alloc(),i=t.locationObject,n=i.naturalBounds,r=i instanceof yt?i.strokeWidth:0;if(e.zi(0,0,n.width+r,n.height+r,t.locationSpot),i!==t)for(e.offset(-r/2,-r/2),i.transform.Ga(e),i=i.panel;i!==null&&i!==t;)i.transform.Ga(e),i=i.panel;return t.Mb!==null&&t.Mb.Ga(e),e.offset(-t.uc.x,-t.uc.y),e}function dl(t,e){var i=t.sy;isNaN(t.ag)&&(t.ag=hS(t));var n=t.ag,r=2*n;if(!t.isShadowed)return i.h(e.x-1-n,e.y-1-n,e.width+2+r,e.height+2+r),i;n=e.x,r=e.y;var o=e.width;e=e.height;var l=t.shadowBlur;return t=t.shadowOffset,o+=l,e+=l,n-=l/2,r-=l/2,0<t.x?o+=t.x:(n+=t.x,o-=t.x),0<t.y?e+=t.y:(r+=t.y,e-=t.y),i.h(n-1,r-1,o+2,e+2),i}ot.prototype.arrange=function(){if(Zn(this)===!1)LS(this);else{ll(this,!1);var t=this.Jb,e=E.alloc();e.assign(t);var i=Ts(this);this.eh(0,0,this.uc.width,this.uc.height);var n=this.position;jS(this,n,this.location),t.ka(),t.x=n.x,t.y=n.y,t.freeze(),this.Yl(e,t),e.D(t)?this.Fd(i):!this.Zc()||A.B(e.width,t.width)&&A.B(e.height,t.height)||0<=this.xw&&this.C(16),E.free(e),hv(this,!1)}},s=ot.prototype,s.Yl=function(t,e){var i=this.diagram;if(i!==null){var n=!1;if(i.$i===!1&&t.w()){var r=E.alloc();r.assign(i.documentBounds),r.Hv(i.padding),t.x>r.x&&t.y>r.y&&t.right<r.right&&t.bottom<r.bottom&&e.x>r.x&&e.y>r.y&&e.right<r.right&&e.bottom<r.bottom&&(n=!0),E.free(r)}!(this.G&65536)&&t.D(e)||IS(this,n,i),i.N(),!t.w()&&!e.w()||c0(t,e)||(this instanceof W&&!i.undoManager.isUndoingRedoing&&this.Bd(),this.oh())}},s.Bv=function(t,e,i){if(this.ph()||!t.w())return!1;var n=this.diagram;return n!==null&&AS(this,n,t,e,i),this.pa=t,this.G&=-2097153,!this.ke.w()||n!==null&&!n.animationManager.isTicking&&n.undoManager.isUndoingRedoing||(n=this.ke,this.ke=new C(n.x+(t.x-e),n.y+(t.y-i)),this.g("location",n,this.ke.copy())),Ns(this)===!1&&Zn(this)===!1&&(Rd(this),LS(this)),!0};function AS(t,e,i,n,r){e===null||t instanceof Nt||(e=e.animationManager,e.Ab&&rM(e,t,new C(n,r),i))}s.nm=function(t,e,i){var n=this.ke,r=this.pa;if(i){if(n.x===t&&n.y===e)return;Ns(this)||Zn(this)?r.h(NaN,NaN):r.h(r.x+t-n.x,r.y+e-n.y),n.h(t,e)}else{if(r.x===t&&r.y===e)return;n.h(n.x+t-r.x,n.y+e-r.y),r.h(t,e)}Rd(this)},s.Cv=function(){this.G&=-2097153,Rd(this)};function jS(t,e,i){var n=FS(t),r=t.diagram,o=i.w(),l=e.w();o&&l?t.G&2097152?DS(t,e,i,r,n):OS(t,e,i,r,n):o?DS(t,e,i,r,n):l&&OS(t,e,i,r,n),t.G|=2097152,C.free(n),t.Tk()}function DS(t,e,i,n,r){var o=e.x,l=e.y;e.h(i.x-r.x,i.y-r.y),n!==null&&(i=n.animationManager,(n=i.defaultAnimation.isAnimating)||!i.Ab||t instanceof Nt||rM(i,t,new C(o,l),e),n||e.x===o&&e.y===l||t.g("position",new C(o,l),e.copy()))}function OS(t,e,i,n,r){var o=i.copy();i.h(e.x+r.x,e.y+r.y),i.D(o)||n===null||t.g("location",o,i.copy())}function IS(t,e,i){av(t,!1),t instanceof W&&mm(i,t),t.layer.isTemporary||e||i.Ya(),e=t.Jb;var n=i.viewportBounds;n.w()?Ts(t)?(Cw(e,n)||t.Fd(!1),t.updateAdornments()):t.isVisible()&&e.Yc(n)?(t.Fd(!0),t.updateAdornments()):t.Zb():i.vd=!0}s.ti=function(){return!0},s.Zc=function(){return!0},s.ph=function(){return!1},s.Dd=function(){return!0};function uv(t,e,i,n){e.constructor===t.constructor||RS||(RS=!0,Pt('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),Pt("  Old class: "+Go(t.constructor)+", new class: "+Go(e.constructor)+", part: "+t.toString())),t.Ej();var r=t.data;i=t.layerName;var o=t.isSelected,l=t.isHighlighted,u=!0,h=!0,f=!1;t instanceof W&&(u=t.isTreeLeaf,h=t.isTreeExpanded,f=t.wasTreeExpanded),e.Af(t),e.cloneProtected(t),t.Tf=n,t.svg!==null&&(t.svg.remove(),t.svg=null,t.Hc=!0),t.v(),t.N(),e=t.diagram,n=!0,e!==null&&(n=e.skipsUndoManager,e.skipsUndoManager=!0),t.ub=r,t.G=o?t.G|4096:t.G&-4097,t.G=l?t.G|524288:t.G&-524289,t instanceof W&&(t.R=u?t.R|4:t.R&-5,t.R=h?t.R|1:t.R&-2,t.R=f?t.R|2:t.R&-3),r!==null&&t.La(),r=t.layerName,r!==i&&(t.Jg=i,t.layerName=r),e!==null&&(e.skipsUndoManager=n),t.Zc()&&t.C(64)}ot.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return t===null?!0:t.allowCopy?(t=t.diagram,t===null?!0:!!t.allowCopy):!1},ot.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return t===null?!0:t.allowDelete?(t=t.diagram,t===null?!0:!!t.allowDelete):!1},ot.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return t===null?!0:t.allowTextEdit?(t=t.diagram,t===null?!0:!!t.allowTextEdit):!1},ot.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return t===null?!0:t.allowGroup?(t=t.diagram,t===null?!0:!!t.allowGroup):!1},ot.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return t===null?!0:t.allowMove?(t=t.diagram,t===null?!0:!!t.allowMove):!1},ot.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return t===null?!0:t.allowReshape?(t=t.diagram,t===null?!0:!!t.allowReshape):!1},ot.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return t===null?!0:t.allowResize?(t=t.diagram,t===null?!0:!!t.allowResize):!1},ot.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return t===null?!0:t.allowRotate?(t=t.diagram,t===null?!0:!!t.allowRotate):!1},ot.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return t===null?!0:t.allowSelect?(t=t.diagram,t===null?!0:!!t.allowSelect):!1};function Ns(t){return(t.G&32768)!==0}function hv(t,e){t.G=e?t.G|32768:t.G&-32769}function av(t,e){t.G=e?t.G|65536:t.G&-65537}function Ts(t){return(t.G&131072)!==0}s=ot.prototype,s.Fd=function(t){this.G=t?this.G|131072:this.G&-131073};function zd(t,e){t.G=e?t.G|1048576:t.G&-1048577}s.oh=function(){var t=this.containingGroup;t!==null&&(t.v(),t.placeholder!==null&&t.placeholder.v(),t.Bd())},s.N=function(){var t=this.diagram;t!==null&&!Zn(this)&&!Ns(this)&&this.isVisible()&&this.Jb.w()&&t.N(dl(this,this.Jb))},s.v=function(){z.prototype.v.call(this);var t=this.diagram;t!==null&&(t.De.add(this),this instanceof W&&this.labeledLink!==null&&Ch(this.labeledLink),t.Rb(!0))},s.Wo=function(t){t||(t=this.Ah,t!==null&&gv(t,this))},s.Xo=function(t){t||(t=this.Ah,t!==null&&yv(t,this))},s.Lj=function(){var t=this.data;if(t!==null){var e=this.diagram;e!==null&&(e=e.model,e!==null&&e.dm(t))}},s.uz=function(){return fv(this,this)};function fv(t,e){var i=e.containingGroup;return i!==null?1+fv(t,i):e instanceof W&&(e=e.labeledLink,e!==null)?fv(t,e):0}s.yz=function(){return ES(this,this)};function ES(t,e){var i=e.containingGroup;return i!==null||e instanceof W&&(i=e.labeledLink,i!==null)?ES(t,i):e}s.Td=function(t){return t instanceof dt?cv(this,this,t):!1};function cv(t,e,i){if(e===i||i===null)return!1;var n=e.containingGroup;return n===null||n!==i&&!cv(t,n,i)?e instanceof W&&(e=e.labeledLink,e!==null)?cv(t,e,i):!1:!0}s.sx=function(t){if(t===null)return null;if(this===t)return this.containingGroup;for(var e=this;e!==null;){if(e instanceof dt&&zd(e,!0),e instanceof W){var i=e.labeledLink;i!==null&&(e=i)}e=e.containingGroup}for(i=null,e=t;e!==null;){if(e.G&1048576){i=e;break}e instanceof W&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup}for(e=this;e!==null;)e instanceof dt&&zd(e,!1),e instanceof W&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup;return i},ot.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(t!==null&&t.isTemporary||this instanceof W&&this.isLinkLabel)},ot.prototype.C=function(t){if(t===void 0&&(t=16777215),this.isLayoutPositioned&&t&this.layoutConditions){var e=this.layer;e!==null&&e.isTemporary||this instanceof W&&this.isLinkLabel?e=!1:(e=this.diagram,e=!(e!==null&&e.undoManager.isUndoingRedoing))}else e=!1;if(e)if(e=this.Ah,e!==null){var i=e.layout;i!==null?i.C():e.C(t)}else t=this.diagram,t!==null&&(t=t.layout,t!==null&&t.C())};function BS(t){return t.isVisible()?(t=t.layer,!(t!==null&&t.isTemporary)):!1}function Ls(t,e,i,n,r,o){if(o===void 0&&(o=null),!(t.contains(e)||o!==null&&!o(e)||e instanceof Nt)){if(t.add(e),e instanceof W){if(i&&e instanceof dt)for(var l=e.memberParts;l.next();)Ls(t,l.value,i,n,r,o);if(r!==!1)for(l=e.linksConnected;l.next();){var u=l.value;if(!t.contains(u)){var h=u.fromNode,f=u.toNode;h=h===null||t.contains(h),f=f===null||t.contains(f),(r?h&&f:h||f)&&Ls(t,u,i,n,r,o)}}if(1<n)for(e=e.Qu();e.next();)Ls(t,e.value,i,n-1,r,o)}else if(e instanceof V)for(e=e.labelNodes;e.next();)Ls(t,e.value,i,n,r,o)}}Y.Object.defineProperties(ot.prototype,{key:{get:function(){var t=this.diagram;if(t!==null)return t.model.wa(this.data)}},adornments:{get:function(){return this.Qf===null?Kn:this.Qf.iteratorValues}},layer:{get:function(){return this.Ig}},diagram:{get:function(){var t=this.Ig;return t==null?null:t.diagram}},layerName:{get:function(){return this.Jg},set:function(t){var e=this.Jg;if(e!==t){var i=this.diagram;if((i===null||i.Pj(t)!==null&&!i.partManager.addsToTemporaryLayer)&&(this.Jg=t,i!==null&&i.Ya(),this.g("layerName",e,t),e=this.layer,e!==null&&e.name!==t&&(i=e.diagram,i!==null&&(t=i.Pj(t),t!==null&&t!==e)))){var n=e.qc(-1,this,!0);if(0<=n&&i.cb(Se,"parts",e,this,null,n,!0),n=t.pi(99999999,this,!0),e.visible!==t.visible&&this.bc(t.visible),0<=n&&i.cb(de,"parts",t,null,this,!0,n),n=this.layerChanged,n!==null){var r=i.aa;i.aa=!0,n(this,e,t),i.aa=r}}}}},layerChanged:{get:function(){return this.P!==null?this.P.zq:null},set:function(t){var e=this.layerChanged;e!==t&&(Ti(this),this.P.zq=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.Bo},set:function(t){var e=this.Bo;if(e!==t){this.Bo=t;var i=this.layer;i!==null&&Yp(i,-1,this),this.g("zOrder",e,t),t=this.diagram,t!==null&&t.N()}}},locationObject:{get:function(){if(this.nf===null){var t=this.locationObjectName;t!==""?(t=this.fb(t),t!==null?this.nf=t:this.nf=this):this instanceof Nt?this.type!==z.Link&&this.placeholder!==null?this.nf=this.placeholder:this.nf=this:this.nf=this}return this.nf.visible?this.nf:this}},minLocation:{get:function(){return this.P!==null?this.P.Pq:o0},set:function(t){var e=this.minLocation;e.D(t)||(t=t.J(),Ti(this),this.P.Pq=t,this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.P!==null?this.P.Kq:s0},set:function(t){var e=this.maxLocation;e.D(t)||(t=t.J(),Ti(this),this.P.Kq=t,this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.P!==null?this.P.Gq:""},set:function(t){var e=this.locationObjectName;e!==t&&(Ti(this),this.P.Gq=t,this.nf=null,this.v(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.P!==null?this.P.Hq:Je},set:function(t){var e=this.locationSpot;e.D(t)||(t=t.J(),Ti(this),this.P.Hq=t,this.v(),this.g("locationSpot",e,t))}},location:{get:function(){return this.ke},set:function(t){var e=t.x,i=t.y,n=this.ke;if(!(n.x===e||isNaN(n.x)&&isNaN(e))||!(n.y===i||isNaN(n.y)&&isNaN(i))){if(t=t.copy(),e=t,this.ph())e=!1;else{if(this.ke=e,this.G|=2097152,Zn(this)===!1&&(Rd(this),i=this.pa,i.w())){var r=this.diagram;if(r===null||r.animationManager.isTicking||!r.undoManager.isUndoingRedoing){var o=i.copy();i.h(i.x+(e.x-n.x),i.y+(e.y-n.y)),AS(this,r,i,o.x,o.y),this.g("position",o,i.copy())}}e=!0}e&&this.g("location",n,t.copy())}}},category:{get:function(){return this.Tf},set:function(t){var e=this.Tf;if(e!==t){this.svg!==null&&(this.svg.remove(),this.Hc=!0);var i=this.diagram,n=this.data,r=null;if(i!==null&&n!==null&&!(this instanceof Nt)){var o=i.model.undoManager;o.isEnabled&&!o.isUndoingRedoing&&(r=this.clone(),r.O.addAll(this.O))}this.Tf=t,this.g("category",e,t),i===null||n===null||this instanceof Nt?this instanceof Nt&&(r=this.adornedPart,r!==null&&(t=r.Qf,t!==null&&t.remove(e),r.bh(this.category,this))):(o=i.model,o.undoManager.isUndoingRedoing||(this.ph()?(i.partManager.setLinkCategoryForData(n,t),i=i.partManager.findLinkTemplateForCategory(t),i!==null&&(jn(i),i=i.copy(),i!==null&&uv(this,i,e,t))):(o!==null&&o.km(n,t),i=c2(i.partManager,n,t),i!==null&&(jn(i),i=i.copy(),i===null||i instanceof V||(n=this.location.copy(),uv(this,i,e,t),this.location.w()||(this.location=n)))),r!==null&&(e=this.clone(),e.O.addAll(this.O),this.g("self",r,e))))}}},self:{get:function(){return this},set:function(t){uv(this,t,this.category,t.category)}},copyable:{get:function(){return(this.G&1)!==0},set:function(t){var e=(this.G&1)!==0;e!==t&&(this.G^=1,this.g("copyable",e,t))}},deletable:{get:function(){return(this.G&2)!==0},set:function(t){var e=(this.G&2)!==0;e!==t&&(this.G^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return(this.G&4)!==0},set:function(t){var e=(this.G&4)!==0;e!==t&&(this.G^=4,this.g("textEditable",e,t),this.Zb())}},groupable:{get:function(){return(this.G&8)!==0},set:function(t){var e=(this.G&8)!==0;e!==t&&(this.G^=8,this.g("groupable",e,t))}},movable:{get:function(){return(this.G&16)!==0},set:function(t){var e=(this.G&16)!==0;e!==t&&(this.G^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return(this.G&32)!==0},set:function(t){var e=(this.G&32)!==0;e!==t&&(this.G^=32,this.g("selectionAdorned",e,t),this.Zb())}},isInDocumentBounds:{get:function(){return(this.G&64)!==0},set:function(t){var e=(this.G&64)!==0;if(e!==t){this.G^=64;var i=this.diagram;i!==null&&i.Ya(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return(this.G&128)!==0},set:function(t){var e=(this.G&128)!==0;e!==t&&(this.G^=128,this.g("isLayoutPositioned",e,t),this.C(t?4:8))}},selectable:{get:function(){return(this.G&256)!==0},set:function(t){var e=(this.G&256)!==0;e!==t&&(this.G^=256,this.g("selectable",e,t),this.Zb())}},reshapable:{get:function(){return(this.G&512)!==0},set:function(t){var e=(this.G&512)!==0;e!==t&&(this.G^=512,this.g("reshapable",e,t),this.Zb())}},resizable:{get:function(){return(this.G&1024)!==0},set:function(t){var e=(this.G&1024)!==0;e!==t&&(this.G^=1024,this.g("resizable",e,t),this.Zb())}},rotatable:{get:function(){return(this.G&2048)!==0},set:function(t){var e=(this.G&2048)!==0;e!==t&&(this.G^=2048,this.g("rotatable",e,t),this.Zb())}},isSelected:{get:function(){return(this.G&4096)!==0},set:function(t){var e=(this.G&4096)!==0;if(e!==t){var i=this.diagram;if(!t||this.canSelect()&&!(i!==null&&i.selection.count>=i.maxSelectionCount)){this.G^=4096;var n=!1;if(i!==null){n=i.skipsUndoManager,i.skipsUndoManager=!0;var r=i.selection;r.ka(),t?r.add(this):r.remove(this),r.freeze()}this.g("isSelected",e,t),this.Zb(),t=this.selectionChanged,t!==null&&t(this),i!==null&&(i.Rb(),i.skipsUndoManager=n)}}}},isHighlighted:{get:function(){return(this.G&524288)!==0},set:function(t){var e=(this.G&524288)!==0;if(e!==t){this.G^=524288;var i=this.diagram;i!==null&&(i=i.highlighteds,i.ka(),t?i.add(this):i.remove(this),i.freeze()),this.g("isHighlighted",e,t),this.N(),t=this.highlightedChanged,t!==null&&t(this)}}},isShadowed:{get:function(){return(this.G&8192)!==0},set:function(t){var e=(this.G&8192)!==0;e!==t&&(this.G^=8192,this.Hc=!0,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return(this.G&262144)!==0},set:function(t){var e=(this.G&262144)!==0;e!==t&&(this.G^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.P!==null?this.P.oq:null},set:function(t){var e=this.highlightedChanged;e!==t&&(Ti(this),this.P.oq=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.P!==null?this.P.vr:""},set:function(t){var e=this.selectionObjectName;e!==t&&(Ti(this),this.P.vr=t,this.Ug=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.P!==null?this.P.tr:null},set:function(t){var e=this.selectionAdornmentTemplate;e!==t&&(Ti(this),this.P.tr=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(this.Ug===null){var t=this.selectionObjectName;t!==null&&t!==""?(t=this.fb(t),t!==null?this.Ug=t:this.Ug=this):this instanceof V?(t=this.path,t!==null?this.Ug=t:this.Ug=this):this.Ug=this}return this.Ug}},selectionChanged:{get:function(){return this.P!==null?this.P.ur:null},set:function(t){var e=this.selectionChanged;e!==t&&(Ti(this),this.P.ur=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.P!==null?this.P.fr:null},set:function(t){var e=this.resizeAdornmentTemplate;e!==t&&(Ti(this),this.P.fr=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.P!==null?this.P.hr:""},set:function(t){var e=this.resizeObjectName;e!==t&&(Ti(this),this.P.hr=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return t!==""&&(t=this.fb(t),t!==null)?t:this}},resizeCellSize:{get:function(){return this.P!==null?this.P.gr:kp},set:function(t){var e=this.resizeCellSize;e.D(t)||(t=t.J(),Ti(this),this.P.gr=t,this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.P!==null?this.P.ir:null},set:function(t){var e=this.rotateAdornmentTemplate;e!==t&&(Ti(this),this.P.ir=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.P!==null?this.P.jr:""},set:function(t){var e=this.rotateObjectName;e!==t&&(Ti(this),this.P.jr=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return t!==""&&(t=this.fb(t),t!==null)?t:this}},rotationSpot:{get:function(){return this.P!==null?this.P.lr:_e},set:function(t){var e=this.rotationSpot;e.D(t)||(t=t.J(),Ti(this),this.P.lr=t,this.g("rotationSpot",e,t))}},text:{get:function(){return this.gc},set:function(t){var e=this.gc;e!==t&&(this.gc=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.Ah},set:function(t){if(this.Zc()){var e=this.Ah;if(e!==t){t===null||this!==t&&!t.Td(this)||(this===t&&O("Cannot make a Group a member of itself: "+this.toString()),O("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.C(2);var i=this.diagram;if(e!==null?yv(e,this):this instanceof dt&&i!==null&&i.ai.remove(this),this.Ah=t,t!==null?gv(t,this):this instanceof dt&&i!==null&&i.ai.add(this),this.C(1),i!==null&&i.aa){var n=this.data,r=i.model;if(n!==null&&r.Wj()){var o=r.wa(t!==null?t.data:null);r.mp(n,o)}}if(n=this.containingGroupChanged,n!==null&&(r=!0,i!==null&&(r=i.aa,i.aa=!0),n(this,e,t),i!==null&&(i.aa=r)),this instanceof dt){for(i=new _,Ls(i,this,!0,0,!0),i=i.iterator;i.next();)if(n=i.value,n instanceof W)for(n=n.linksConnected;n.next();)Uh(n.value)}if(this instanceof W){for(i=this.linksConnected;i.next();)Uh(i.value);i=this.labeledLink,i!==null&&Uh(i)}this.g("containingGroup",e,t),t!==null&&(e=t.layer,e!==null&&Yp(e,-1,t))}}else O("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.P!==null?this.P.Kp:null},set:function(t){var e=this.containingGroupChanged;e!==t&&(Ti(this),this.P.Kp=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(this.containingGroup!==null||this instanceof W&&this.labeledLink!==null)}},layoutConditions:{get:function(){return this.P!==null?this.P.Cq:127},set:function(t){var e=this.layoutConditions;e!==t&&(Ti(this),this.P.Cq=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.P!==null?this.P.Up:null},set:function(t){var e=this.dragComputation;e!==t&&(Ti(this),this.P.Up=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.P!==null?this.P.zr:l0},set:function(t){var e=this.shadowOffset;e.D(t)||(t=t.J(),Ti(this),this.P.zr=t,this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.P!==null?this.P.yr:"gray"},set:function(t){var e=this.shadowColor;e!==t&&(Ti(this),this.P.yr=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.P!==null?this.P.Vg:4},set:function(t){var e=this.shadowBlur;e!==t&&(Ti(this),this.P.Vg=t,this.N(),this.g("shadowBlur",e,t))}}}),ot.prototype.invalidateLayout=ot.prototype.C,ot.prototype.findCommonContainingGroup=ot.prototype.sx,ot.prototype.isMemberOf=ot.prototype.Td,ot.prototype.findTopLevelPart=ot.prototype.yz,ot.prototype.findSubGraphLevel=ot.prototype.uz,ot.prototype.ensureBounds=ot.prototype.Va,ot.prototype.getDocumentBounds=ot.prototype.ni,ot.prototype.findObject=ot.prototype.fb,ot.prototype.moveTo=ot.prototype.moveTo,ot.prototype.invalidateAdornments=ot.prototype.Zb,ot.prototype.clearAdornments=ot.prototype.Ej,ot.prototype.removeAdornment=ot.prototype.Jf,ot.prototype.addAdornment=ot.prototype.bh,ot.prototype.findAdornment=ot.prototype.Oj,ot.prototype.updateTargetBindings=ot.prototype.La;var RS=!1;ot.className="Part",ot.LayoutNone=0,ot.LayoutAdded=1,ot.LayoutRemoved=2,ot.LayoutShown=4,ot.LayoutHidden=8,ot.LayoutNodeSized=16,ot.LayoutGroupLayout=32,ot.LayoutNodeReplaced=64,ot.LayoutStandard=127,ot.LayoutAll=16777215;function Nt(t,e){t===void 0||t instanceof ye||typeof t=="string"?ot.call(this,t):(ot.call(this),t&&(e=t)),this.G&=-257,this.Jg="Adornment",this.ue=null,this.Cw=0,this.Ww=!1,this.j=this.$a=null,e&&Object.assign(this,e)}Z(Nt,ot),Nt.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(t!==null?t.toString():"")},Nt.prototype.updateRelationshipsFromData=function(){},Nt.prototype.Ul=function(t){var e=this.adornedObject,i=e==null?void 0:e.part;if(i instanceof V&&e instanceof yt){e=i.path,i.Ul(t),t=e.geometry,i=this.O.s,e=i.length;for(var n=0;n<e;n++){var r=i[n];r.isPanelMain&&r instanceof yt&&(r.ua=t)}}},Nt.prototype.ti=function(){var t=this.ue;return t===null?!0:(t=t.part,t===null||!Zn(t))},Nt.prototype.Zc=function(){return!1},Nt.prototype.fk=function(t,e,i,n,r,o,l){if(t===de&&e==="elements"){if(r instanceof vi)this.$a===null&&(this.$a=r);else if(r instanceof z){var u=r.Nl(function(h){return h instanceof vi});u instanceof vi&&this.$a===null&&(this.$a=u)}}else t===Se&&e==="elements"&&this.$a!==null&&(n===this.$a?this.$a=null:n instanceof z&&this.$a.rg(n)&&(this.$a=null));ot.prototype.fk.call(this,t,e,i,n,r,o,l)},Nt.prototype.updateAdornments=function(){},Nt.prototype.Lj=function(){},Y.Object.defineProperties(Nt.prototype,{placeholder:{get:function(){return this.$a}},adornedObject:{get:function(){return this.ue},set:function(t){var e=this.adornedPart,i=null;t!==null&&(i=t.part),e===null||t!==null&&e===i||e.Jf(this.category),this.ue=t,i!==null&&i.bh(this.category,this)}},adornedPart:{get:function(){var t=this.ue;return t!==null?t.part:null}},containingGroup:{get:function(){return null}}}),Nt.className="Adornment";function pv(){this.pc=!1,this.Vr=this.hj=this.Eq=this.Dq=null,this.yp=d0,this.er=Df,this.Kr=this.jj=this.Nq=this.Mq=null}pv.prototype.copy=function(){var t=new pv;return t.Dq=this.Dq,t.Eq=this.Eq,t.hj=this.hj,t.Vr=this.Vr,t.yp=this.yp.J(),t.er=this.er,t.Mq=this.Mq,t.Nq=this.Nq,t.jj=this.jj,t.Kr=this.Kr,t};function W(t,e){t===void 0||t instanceof ye||typeof t=="string"?ot.call(this,t):(ot.call(this),t&&(e=t)),this.R=13,this.Ba=null,this.jb=new q,this.wc=this.af=this.Xk=null,this.ci=!1,e&&Object.assign(this,e)}Z(W,ot),W.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.R=this.R,this.Ba!==null&&(t.Ba=this.Ba.pc?this.Ba:this.Ba.copy())},s=W.prototype,s.Af=function(t){ot.prototype.Af.call(this,t),t.Bd(),t.af=this.af,t.wc=null};function es(t){t.Ba===null?t.Ba=new pv:t.Ba.pc&&(t.Ba=t.Ba.copy())}s.th=function(){ot.prototype.th.call(this),this.Ba!==null&&(this.Ba.pc=!0)};function zS(t,e){e!==null&&(t.af===null&&(t.af=new _),t.af.add(e))}function VS(t,e,i,n){if(e===null||t.af===null)return null;for(var r=t.af.iterator;r.next();){var o=r.value;if(o.Ds===t&&o.fv===e&&o.Qx===i&&o.Rx===n||o.Ds===e&&o.fv===t&&o.Qx===n&&o.Rx===i)return o}return null}s.Qz=function(t,e,i){e==null&&(e=""),i==null&&(i=""),t=VS(this,t,e,i),t!==null&&t.Sl()},s.fk=function(t,e,i,n,r,o,l){t===de&&e==="elements"?this.wc=null:t===Se&&e==="elements"&&(this.wc=null),ot.prototype.fk.call(this,t,e,i,n,r,o,l)},s.Bd=function(t){for(var e=this.linksConnected;e.next();){var i=e.value;t!==void 0&&t.contains(i)||(Ui(i.fromPort),Ui(i.toPort),i.bb())}};function US(t,e){for(t=t.linksConnected;t.next();){var i=t.value;(i.fromPort===e||i.toPort===e)&&(Ui(i.fromPort),Ui(i.toPort),i.bb())}}function Ui(t){if(t!==null){var e=t.$n;e!==null&&e.Sl(),t=t.part,e=t.containingGroup,e===null||t.isVisible()||Ui(e.port)}}s.ti=function(){return!0},W.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.Do(this.avoidableMargin),t},W.prototype.findVisibleNode=function(){for(var t=this;t!==null&&!t.isVisible();)t=t.containingGroup;return t},W.prototype.isVisible=function(){if(!ot.prototype.isVisible.call(this))return!1;var t=!0,e=ol,i=this.diagram;if(i!==null){if(i.animationManager.Fs(this))return!0;t=i.isTreePathToChildren,e=i.treeCollapsePolicy}if(e===ol){if(t=this.pg(),t!==null&&!t.isTreeExpanded)return!1}else if(e===Jp){if(t=t?this.Po():this.Qo(),0<t.count&&t.all(function(n){return!n.isTreeExpanded}))return!1}else if(e===qp&&(t=t?this.Po():this.Qo(),0<t.count&&t.any(function(n){return!n.isTreeExpanded})))return!1;return t=this.labeledLink,t!==null?t.isVisible():!0},W.prototype.bc=function(t){ot.prototype.bc.call(this,t);for(var e=this.linksConnected;e.next();){var i=e.value;if(t&&this.containingGroup!==null){var n=i.Uo(this);n===null||n.Td(this.containingGroup)||i.bb()}i.bc(t)}},W.prototype.tx=function(){var t=new _,e=new _;return YS(this,this,t,e),e.iterator};function YS(t,e,i,n){if(e!==null&&!i.has(e)){i.add(e);var r=!0,o=t.diagram;o!==null&&(r=o.isTreePathToChildren),e.linksConnected.each(function(l){l.isTreeLink?(r?l.fromNode===e:l.toNode===e)&&YS(t,r?l.toNode:l.fromNode,i,n):n.add(l)})}}W.prototype.findLinksConnected=function(t){if(t===void 0&&(t=null),t===null)return this.jb.iterator;var e=new Fe(this.jb),i=this;return e.predicate=function(n){return n.fromNode===i&&n.fromPortId===t||n.toNode===i&&n.toPortId===t},e},s=W.prototype,s.No=function(t){t===void 0&&(t=null);var e=new Fe(this.jb),i=this;return e.predicate=function(n){return n.fromNode!==i?!1:t===null?!0:n.fromPortId===t},e},s.Sd=function(t){t===void 0&&(t=null);var e=new Fe(this.jb),i=this;return e.predicate=function(n){return n.toNode!==i?!1:t===null?!0:n.toPortId===t},e},s.Ou=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var r=n.value;r.fromNode===this?(t===null||r.fromPortId===t)&&(r=r.toNode,e!==null?e.add(r):i!==null&&i!==r?(e=new _,e.add(i),e.add(r)):i=r):r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):i!==null&&i!==r?(e=new _,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new De(i):Kn},s.Qo=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var r=n.value;r.fromNode!==this||t!==null&&r.fromPortId!==t||(r=r.toNode,e!==null?e.add(r):i!==null&&i!==r?(e=new _,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new De(i):Kn},s.Po=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.jb.iterator;n.next();){var r=n.value;r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):i!==null&&i!==r?(e=new _,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new De(i):Kn},s.oz=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=new Fe(this.jb),r=this;return n.predicate=function(o){return!((o.fromNode!==r||o.toNode!==t||e!==null&&o.fromPortId!==e||i!==null&&o.toPortId!==i)&&(o.fromNode!==t||o.toNode!==r||i!==null&&o.fromPortId!==i||e!==null&&o.toPortId!==e))},n},s.pz=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=new Fe(this.jb),r=this;return n.predicate=function(o){return!(o.fromNode!==r||o.toNode!==t||e!==null&&o.fromPortId!==e||i!==null&&o.toPortId!==i)},n};function Vd(t,e,i){Ui(i);var n=t.jb.contains(e);if(n||t.jb.add(e),!n||e.fromNode===e.toNode){var r=t.linkConnected;if(r!==null){var o=!0,l=t.diagram;l!==null&&(o=l.aa,l.aa=!0),r(t,e,i),l!==null&&(l.aa=o)}}!n&&e.isTreeLink&&(i=e.fromNode,e=e.toNode,i!==null&&e!==null&&i!==e&&(n=!0,t=t.diagram,t!==null&&(n=t.isTreePathToChildren),r=n?e:i,o=n?i:e,r.ci||(r.ci=o),!o.isTreeLeaf||t!==null&&t.undoManager.isUndoingRedoing||(n?i===o&&(o.isTreeLeaf=!1):e===o&&(o.isTreeLeaf=!1))))}function Ud(t,e,i){Ui(i);var n=t.jb.remove(e),r=null;if(n||e.toNode===e.fromNode){var o=t.linkDisconnected;if(r=t.diagram,o!==null){var l=!0;r!==null&&(l=r.aa,r.aa=!0),o(t,e,i),r!==null&&(r.aa=l)}}n&&e.isTreeLink&&(i=!0,r!==null&&(i=r.isTreePathToChildren),t=i?e.toNode:e.fromNode,e=i?e.fromNode:e.toNode,t!==null&&(t.ci=!1),e===null||e.isTreeLeaf||(e.jb.count===0?(e.ci=null,r!==null&&r.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):jf(e)))}function jf(t){if(t.ci=!1,t.jb.count!==0){var e=!0,i=t.diagram;if(i===null||!i.undoManager.isUndoingRedoing){for(i!==null&&(e=i.isTreePathToChildren),i=t.jb.iterator;i.next();){var n=i.value;if(n.isTreeLink){if(e){if(n.fromNode===t){t.isTreeLeaf=!1;return}}else if(n.toNode===t){t.isTreeLeaf=!1;return}}}t.isTreeLeaf=!0}}}W.prototype.updateRelationshipsFromData=function(){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)},s=W.prototype,s.Wo=function(t){ot.prototype.Wo.call(this,t),t||(jf(this),t=this.Xk,t!==null&&JS(t,this))},s.Xo=function(t){ot.prototype.Xo.call(this,t),t||(t=this.Xk,t!==null&&t.wd!==null&&(t.wd.remove(this),t.v()))},s.Lj=function(){if(0<this.jb.count){var t=this.diagram;if(t!==null)for(var e=t.commandHandler!==null?t.commandHandler.deletesConnectedLinks:!0,i=this.jb.copy().iterator;i.next();){var n=i.value;e?t.remove(n):(n.fromNode===this&&(n.fromNode=null),n.toNode===this&&(n.toNode=null))}}this.labeledLink=null,ot.prototype.Lj.call(this)},s.ns=function(t){if(this.wc===null){if(t===""&&this.Te===!1)return this;GS(this)}var e=this.wc.I(t);return e!==null||t!==""&&(e=this.wc.I(""),e!==null)?e:this};function GS(t){t.wc===null?t.wc=new ct:t.wc.clear(),t.rm(t,function(e,i){HS(e,i)}),t.wc.count===0&&t.wc.add("",t)}function HS(t,e){var i=e.portId;i!==null&&t.wc!==null&&t.wc.add(i,e)}function dv(t,e,i){var n=e.portId;if(n!==null&&(t.wc!==null&&t.wc.remove(n),e=t.diagram,e!==null&&i)){for(i=null,t=t.findLinksConnected(n);t.next();)n=t.value,i===null&&(i=Rt()),i.push(n);if(i!==null){for(t=0;t<i.length;t++)e.remove(i[t]);Bt(i)}}}s.Sz=function(t){if(t===null||t===this)return!1;var e=!0,i=this.diagram;if(i!==null&&(e=i.isTreePathToChildren),i=this,e)for(;i!==t;){e=null;for(var n=i.jb.iterator;n.next();){var r=n.value;if(r.isTreeLink&&(e=r.fromNode,e!==i&&e!==this))break}if(e===this||e===null||e===i)return!1;i=e}else for(;i!==t;){for(e=null,n=i.jb.iterator;n.next()&&(r=n.value,!r.isTreeLink||(e=r.toNode,e===i||e===this)););if(e===this||e===null||e===i)return!1;i=e}return!0},s.Cz=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var i=e.jb.iterator;i.next();){var n=i.value;if(n.isTreeLink&&(t=n.fromNode,t!==e&&t!==this))break}if(t===this)return this;if(t===null||t===e)return e;e=t}else for(;;){for(t=null,i=e.jb.iterator;i.next()&&(n=i.value,!n.isTreeLink||(t=n.toNode,t===e||t===this)););if(t===this)return this;if(t===null||t===e)return e;e=t}},s.lz=function(t){if(t===null)return null;if(this===t)return this;for(var e=this;e!==null;)zd(e,!0),e=e.pg();var i=null;for(e=t;e!==null;){if(e.G&1048576){i=e;break}e=e.pg()}for(e=this;e!==null;)zd(e,!1),e=e.pg();return i},s.kh=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this.jb.iterator,t){for(;e.next();)if(t=e.value,t.isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if(t=e.value,t.isTreeLink&&t.toNode!==this)return t;return null},s.pg=function(){var t=this.ci;if(t===null)return null;if(t instanceof W)return t;t=this.diagram,t=t!==null?t.isTreePathToChildren:!0;for(var e=this.jb.iterator;e.next();){var i=e.value;if(i.isTreeLink&&(i=t?i.fromNode:i.toNode,i!==this))return this.ci=i}return this.ci=null},s.Az=function(){function t(i,n){n.add(i);var r=i.kh();r!==null&&(n.add(r),i=i.pg(),i!==null&&t(i,n))}var e=new _;return t(this,e),e},s.zz=function(){return XS(this,this)};function XS(t,e){return e=e.pg(),e===null?0:1+XS(t,e)}s.Ro=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren),e=new Fe(this.jb);var i=this;return e.predicate=t?function(n){return!!(n.isTreeLink&&n.fromNode===i)}:function(n){return!!(n.isTreeLink&&n.toNode===i)},e},s.Qu=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren);var i=e=null,n=this.jb.iterator;if(t)for(;n.next();)t=n.value,t.isTreeLink&&t.fromNode===this&&(t=t.toNode,e!==null?e.add(t):i!==null&&i!==t?(e=new q,e.add(i),e.add(t)):i=t);else for(;n.next();)t=n.value,t.isTreeLink&&t.toNode===this&&(t=t.fromNode,e!==null?e.add(t):i!==null&&i!==t?(e=new q,e.add(i),e.add(t)):i=t);return e!==null?e.iterator:i!==null?new De(i):Kn},s.Bz=function(t){t===void 0&&(t=1/0);var e=new _;return Ls(e,this,!1,t,!0),e},W.prototype.collapseTree=function(t){t===void 0&&(t=1),1>t&&(t=1);var e=this.diagram;if(e!==null&&!e.Ue){e.Ue=!0;var i=new _;i.add(this),KS(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===ol),e.Ue=!1}};function KS(t,e,i,n,r,o,l){if(1<n)for(var u=i?t.No():t.Sd();u.next();){var h=u.value;h.isTreeLink&&(h=h.Uo(t),h===null||h===t||e.contains(h)||(e.add(h),KS(h,e,i,n-1,r,o)))}else _S(t,e,i,r,o)}function _S(t,e,i,n,r,o){for(var l=r===t?!0:t.isTreeExpanded,u=i?t.No():t.Sd(),h={};u.next();){var f=u.value;if(f.isTreeLink&&(f=f.Uo(t),f!==null&&f!==t)){var c=e.contains(f);if(c||e.add(f),l){var p=i?f.Po():f.Qo();h.wv=t,p.all(function(g){return function(m){return m===g.wv||!m.isTreeExpanded}}(h))&&n.Bj(f,r),f.oh(),f.bc(!1)}f.isTreeExpanded&&(f.wasTreeExpanded=f.isTreeExpanded,c||_S(f,e,i,n,r))}h={wv:h.wv}}t.isTreeExpanded=!1}W.prototype.expandTree=function(t){t===void 0&&(t=2),2>t&&(t=2);var e=this.diagram;if(e!==null&&!e.Ue){e.Ue=!0;var i=new _;i.add(this),WS(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===ol),e.Ue=!1}};function WS(t,e,i,n,r,o,l){for(var u=o===t?!1:t.isTreeExpanded,h=i?t.No():t.Sd(),f={};h.next();){var c=h.value;if(c.isTreeLink&&(u||c.fd||c.bb(),c=c.Uo(t),c!==null&&c!==t&&!e.contains(c))){if(e.add(c),!u){c.bc(!0),c.oh();var p=i?c.Po():c.Qo();f.xv=t,p.all(function(g){return function(m){return m===g.xv||!m.isTreeExpanded}}(f))&&r.Dj(c,o)}(2<n||c.wasTreeExpanded)&&(c.wasTreeExpanded=!1,WS(c,e,i,n-1,r,o))}f={xv:f.xv}}t.isTreeExpanded=!0}Y.Object.defineProperties(W.prototype,{portSpreading:{get:function(){return this.Ba!==null?this.Ba.er:Df},set:function(t){var e=this.portSpreading;e!==t&&(es(this),this.Ba.er=t,this.g("portSpreading",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.Bd())}},avoidable:{get:function(){return(this.R&8)!==0},set:function(t){var e=(this.R&8)!==0;if(e!==t){this.R^=8;var i=this.diagram;i!==null&&mm(i,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.Ba!==null?this.Ba.yp:d0},set:function(t){typeof t=="number"&&(t=new Dt(t));var e=this.avoidableMargin;if(!e.D(t)){t=t.J(),es(this),this.Ba.yp=t;var i=this.diagram;i!==null&&mm(i,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.jb.iterator}},linkConnected:{get:function(){return this.Ba!==null?this.Ba.Dq:null},set:function(t){var e=this.linkConnected;e!==t&&(es(this),this.Ba.Dq=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.Ba!==null?this.Ba.Eq:null},set:function(t){var e=this.linkDisconnected;e!==t&&(es(this),this.Ba.Eq=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.Ba!==null?this.Ba.hj:null},set:function(t){var e=this.linkValidation;e!==t&&(es(this),this.Ba.hj=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return this.Xk!==null}},labeledLink:{get:function(){return this.Xk},set:function(t){var e=this.Xk;if(e!==t){var i=this.diagram,n=this.data;if(e!==null){if(e.wd!==null&&(e.wd.remove(this),e.v()),i!==null&&n!==null&&!i.undoManager.isUndoingRedoing){var r=e.data,o=i.model;if(r!==null&&o.si()){var l=o.wa(n);l!==void 0&&o.Sx(r,l)}}this.containingGroup=null}this.Xk=t,t!==null&&(JS(t,this),i===null||n===null||i.undoManager.isUndoingRedoing||(r=t.data,i=i.model,r!==null&&i.si()&&(n=i.wa(n),n!==void 0&&i.Cu(r,n))),this.containingGroup=t.containingGroup),Ch(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.ns("")}},ports:{get:function(){return this.wc===null&&GS(this),this.wc.iteratorValues}},isTreeExpanded:{get:function(){return(this.R&1)!==0},set:function(t){var e=(this.R&1)!==0;if(e!==t){this.R^=1;var i=this.diagram;if(this.g("isTreeExpanded",e,t),e=this.treeExpandedChanged,e!==null){var n=!0;i!==null&&(n=i.aa,i.aa=!0),e(this),i!==null&&(i.aa=n)}i!==null&&i.undoManager.isUndoingRedoing?this.bc(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return(this.R&2)!==0},set:function(t){var e=(this.R&2)!==0;e!==t&&(this.R^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.Ba!==null?this.Ba.Vr:null},set:function(t){var e=this.treeExpandedChanged;e!==t&&(es(this),this.Ba.Vr=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return(this.R&4)!==0},set:function(t){var e=(this.R&4)!==0;e!==t&&(this.R^=4,this.g("isTreeLeaf",e,t))}}}),W.prototype.expandTree=W.prototype.expandTree,W.prototype.collapseTree=W.prototype.collapseTree,W.prototype.findTreeParts=W.prototype.Bz,W.prototype.findTreeChildrenNodes=W.prototype.Qu,W.prototype.findTreeChildrenLinks=W.prototype.Ro,W.prototype.findTreeLevel=W.prototype.zz,W.prototype.findTreeParentChain=W.prototype.Az,W.prototype.findTreeParentNode=W.prototype.pg,W.prototype.findTreeParentLink=W.prototype.kh,W.prototype.findCommonTreeParent=W.prototype.lz,W.prototype.findTreeRoot=W.prototype.Cz,W.prototype.isInTreeOf=W.prototype.Sz,W.prototype.findPort=W.prototype.ns,W.prototype.findLinksTo=W.prototype.pz,W.prototype.findLinksBetween=W.prototype.oz,W.prototype.findNodesInto=W.prototype.Po,W.prototype.findNodesOutOf=W.prototype.Qo,W.prototype.findNodesConnected=W.prototype.Ou,W.prototype.findLinksInto=W.prototype.Sd,W.prototype.findLinksOutOf=W.prototype.No,W.prototype.findExternalTreeLinksConnected=W.prototype.tx,W.prototype.invalidateConnectedLinks=W.prototype.Bd,W.prototype.invalidateLinkBundle=W.prototype.Qz;var $S=new K(W,"SpreadingNone",10),Df=new K(W,"SpreadingEvenly",11),Yd=new K(W,"SpreadingPacked",12);W.className="Node",W.SpreadingNone=$S,W.SpreadingEvenly=Df,W.SpreadingPacked=Yd;function dt(t,e){t===void 0||t instanceof ye||typeof t=="string"?W.call(this,t):(W.call(this),t&&(e=t)),this.R|=4608,this.Hn=new _,this.$a=null,this.Tc=new Kt,this.Tc.group=this,this.fl=new _,this.tb=this.$p=null,e&&Object.assign(this,e)}Z(dt,W),dt.prototype.cloneProtected=function(t){W.prototype.cloneProtected.call(this,t),this.R=this.R&-32769;var e=t.Nl(function(i){return i instanceof vi});e instanceof vi?t.$a=e:t.$a=null,this.Tc!==null?(t.Tc=this.Tc.copy(),t.Tc.group=t):(t.Tc!==null&&(t.Tc.group=null),t.Tc=null),this.tb!==null&&(t.tb=this.tb.copy())},s=dt.prototype,s.Af=function(t){W.prototype.Af.call(this,t);var e=t.Qj();for(t=t.memberParts;t.next();){var i=t.value;if(i.v(),i.C(8),i.Ej(),i instanceof W)i.Bd(e);else if(i instanceof V)for(i=i.labelNodes;i.next();)i.value.Bd(e)}},s.fk=function(t,e,i,n,r,o,l){if(t===de&&e==="elements"){if(r instanceof vi)this.$a===null?this.$a=r:this.$a!==r&&O("Cannot insert a second Placeholder into the visual tree of a Group.");else if(r instanceof z){var u=r.Nl(function(h){return h instanceof vi});u instanceof vi&&(this.$a===null?this.$a=u:this.$a!==u&&O("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Se&&e==="elements"&&this.$a!==null&&(n===this.$a?this.$a=null:n instanceof z&&this.$a.rg(n)&&(this.$a=null));W.prototype.fk.call(this,t,e,i,n,r,o,l)},s.Yl=function(t,e){W.prototype.Yl.call(this,t,e),this.isClipping&&this.type!==z.Spot&&this.isSubGraphExpanded&&(t=this.resizeObject,t instanceof z&&(t=t.Qb()),this.tb===null&&(this.tb=new E),t.ni(this.tb),t instanceof yt&&this.tb.Bc(-t.strokeWidth,-t.strokeWidth))},s.eh=function(t,e,i,n){this.nf=this.$a,W.prototype.eh.call(this,t,e,i,n)},s.Va=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof V||e.Va()}),W.prototype.Va.call(this)},s.ti=function(){if(!W.prototype.ti.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof W){if(e.isVisible()&&Zn(e))return!1}else if(e instanceof V&&e.isVisible()&&Zn(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0};function gv(t,e){if(t.Hn.add(e)){e instanceof dt&&t.fl.add(e);var i=t.memberAdded;if(i!==null){var n=!0,r=t.diagram;r!==null&&(n=r.aa,r.aa=!0),i(t,e),r!==null&&(r.aa=n)}t.isVisible()&&t.isSubGraphExpanded||e.bc(!1)}e instanceof V&&!t.computesBoundsIncludingLinks||(e=t.$a,e===null&&(e=t),e.v())}function yv(t,e){if(t.Hn.remove(e)){e instanceof dt&&t.fl.remove(e);var i=t.memberRemoved;if(i!==null){var n=!0,r=t.diagram;r!==null&&(n=r.aa,r.aa=!0),i(t,e),r!==null&&(r.aa=n)}t.isVisible()&&t.isSubGraphExpanded||e.bc(!0)}e instanceof V&&!t.computesBoundsIncludingLinks||(e=t.$a,e===null&&(e=t),e.v())}s.Lj=function(){if(0<this.Hn.count){var t=this.diagram;if(t!==null)for(var e=this.Hn.copy().iterator;e.next();)t.remove(e.value)}W.prototype.Lj.call(this)},dt.prototype.canAddMembers=function(t){var e=this.diagram;if(e===null)return!1;for(e=e.commandHandler,t=km(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},dt.prototype.addMembers=function(t,e){var i=this.diagram;if(i===null)return!1;i=i.commandHandler;var n=!0;for(t=km(t).iterator;t.next();){var r=t.value;!e||i.isValidMember(this,r)?r.containingGroup=this:n=!1}return n},dt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return t===null||!t.allowUngroup?!1:(t=t.diagram,!!(t===null||t.allowUngroup))},s=dt.prototype,s.Bd=function(t){var e=(this.R&65536)!==0;if(W.prototype.Bd.call(this,t),!e)for(!(this.R&65536)&&(this.R=this.R^65536),e=this.Nu();e.next();){var i=e.value;if(t===void 0||!t.contains(i)){var n=i.fromNode;n!==null&&n!==this&&n.Td(this)&&!n.isVisible()?(Ui(i.fromPort),Ui(i.toPort),i.bb()):(n=i.toNode,n!==null&&n!==this&&n.Td(this)&&!n.isVisible()&&(Ui(i.fromPort),Ui(i.toPort),i.bb()))}}},s.Nu=function(){var t=this.diagram!==null&&this.diagram.Rw;if(t&&this.$p!==null)return this.$p.iterator;var e=this.Qj();e.add(this);for(var i=new _,n=e.iterator;n.next();){var r=n.value;if(r instanceof W)for(r=r.linksConnected;r.next();){var o=r.value;e.contains(o)||i.add(o)}}return t&&(this.$p=i),i.iterator},s.nz=function(){var t=this.Qj();t.add(this);for(var e=new _,i=t.iterator;i.next();){var n=i.value;if(n instanceof W)for(n=n.linksConnected;n.next();){var r=n.value,o=r.fromNode;o===null||t.contains(o)&&o!==this||e.add(o),r=r.toNode,r===null||t.contains(r)&&r!==this||e.add(r)}}return e.iterator},s.mz=function(){function t(i,n){i!==null&&(n.add(i),t(i.containingGroup,n))}var e=new _;return t(this,e),e},s.Qj=function(){var t=new _;return Ls(t,this,!0,0,!0),t.remove(this),t},s.bc=function(t){W.prototype.bc.call(this,t);for(var e=this.memberParts;e.next();)e.value.bc(t)},dt.prototype.collapseSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Ue){t.Ue=!0;var e=this.Qj();ZS(this,e,t,this),t.Ue=!1}};function ZS(t,e,i,n){for(var r=t.memberParts;r.next();){var o=r.value;if(o.bc(!1),o instanceof dt&&o.isSubGraphExpanded&&(o.wasSubGraphExpanded=o.isSubGraphExpanded,ZS(o,e,i,n)),o instanceof W)o.Bd(e),i.Bj(o,n);else if(o instanceof V)for(o=o.labelNodes;o.next();)o.value.Bd(e)}t.isSubGraphExpanded=!1}dt.prototype.expandSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Ue){t.Ue=!0;var e=this.Qj();QS(this,e,t,this),t.Ue=!1}};function QS(t,e,i,n){for(var r=t.memberParts;r.next();){var o=r.value;if(o.bc(!0),o instanceof dt&&o.wasSubGraphExpanded&&(o.wasSubGraphExpanded=!1,QS(o,e,i,n)),o instanceof W)o.Bd(e),i.Dj(o,n);else if(o instanceof V)for(o=o.labelNodes;o.next();)o.value.Bd(e)}t.isSubGraphExpanded=!0}dt.prototype.move=function(t,e){e===void 0&&(e=!1);var i=e?this.location:this.position,n=i.x;i=i.y;var r=t.x,o=t.y;if(!(n===r||isNaN(n)&&isNaN(r))||!(i===o||isNaN(i)&&isNaN(o))){for(n=r-(isNaN(n)?0:n),i=o-(isNaN(i)?0:i),o=C.alloc(),W.prototype.move.call(this,t,e),t=new _,e=this.Qj().iterator;e.next();)r=e.value,r instanceof V&&(r.suspendsRouting&&t.add(r),r.fd||r.fromNode!==this&&r.toNode!==this)&&(r.suspendsRouting=!0);for(e.reset();e.next();)if(r=e.value,!(r.ph()||r instanceof W&&r.isLinkLabel)){var l=r.position,u=r.location;l.w()?(o.x=l.x+n,o.y=l.y+i,r.position=o):u.w()&&(o.x=u.x+n,o.y=u.y+i,r.location=o)}for(e.reset();e.next();)r=e.value,r instanceof V&&(r.suspendsRouting=t.contains(r),r.fd||r.fromNode!==this&&r.toNode!==this)&&(l=r.position,o.x=l.x+n,o.y=l.y+i,o.w()?r.move(o):r.bb());C.free(o)}},Y.Object.defineProperties(dt.prototype,{placeholder:{get:function(){return this.$a}},computesBoundsAfterDrag:{get:function(){return(this.R&2048)!==0},set:function(t){var e=(this.R&2048)!==0;e!==t&&(this.R^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return(this.R&4096)!==0},set:function(t){var e=(this.R&4096)!==0;e!==t&&(this.R^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return(this.R&8192)!==0},set:function(t){var e=(this.R&8192)!==0;e!==t&&(this.R^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return(this.R&16384)!==0},set:function(t){var e=(this.R&16384)!==0;e!==t&&(this.R^=16384,this.g("handlesDragDropForMembers",e,t))}},avoidableMembers:{get:function(){return(this.R&131072)!==0},set:function(t){var e=(this.R&131072)!==0;e!==t&&(this.R^=131072,this.g("avoidableMembers",e,t))}},memberParts:{get:function(){return this.Hn.iterator}},layout:{get:function(){return this.Tc},set:function(t){var e=this.Tc;if(e!==t){t!==null&&t.diagram!==null&&t.diagram.layout===t&&O("A layout cannot be both the Diagram.layout and a Group.layout: "+t),e!==null&&(e.diagram=null,e.group=null),this.Tc=t;var i=this.diagram;t!==null&&(t.diagram=i,t.group=this),i!==null&&(i.xh=!0),this.g("layout",e,t),i!==null&&i.Rb()}}},memberAdded:{get:function(){return this.Ba!==null?this.Ba.Mq:null},set:function(t){var e=this.memberAdded;e!==t&&(es(this),this.Ba.Mq=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.Ba!==null?this.Ba.Nq:null},set:function(t){var e=this.memberRemoved;e!==t&&(es(this),this.Ba.Nq=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.Ba!==null?this.Ba.jj:null},set:function(t){var e=this.memberValidation;e!==t&&(es(this),this.Ba.jj=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return(this.R&256)!==0},set:function(t){var e=(this.R&256)!==0;e!==t&&(this.R^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return(this.R&512)!==0},set:function(t){var e=(this.R&512)!==0;if(e!==t){this.R^=512;var i=this.diagram;if(this.g("isSubGraphExpanded",e,t),e=this.subGraphExpandedChanged,e!==null){var n=!0;i!==null&&(n=i.aa,i.aa=!0),e(this),i!==null&&(i.aa=n)}i!==null&&i.undoManager.isUndoingRedoing?(this.$a!==null&&this.$a.v(),this.memberParts.each(function(r){r.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return(this.R&1024)!==0},set:function(t){var e=(this.R&1024)!==0;e!==t&&(this.R^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.Ba!==null?this.Ba.Kr:null},set:function(t){var e=this.subGraphExpandedChanged;e!==t&&(es(this),this.Ba.Kr=t,this.g("subGraphExpandedChanged",e,t))}},rh:{get:function(){return(this.R&32768)!==0},set:function(t){(this.R&32768)!==0!==t&&(this.R^=32768)}}}),dt.prototype.expandSubGraph=dt.prototype.expandSubGraph,dt.prototype.collapseSubGraph=dt.prototype.collapseSubGraph,dt.prototype.findSubGraphParts=dt.prototype.Qj,dt.prototype.findContainingGroupChain=dt.prototype.mz,dt.prototype.findExternalNodesConnected=dt.prototype.nz,dt.prototype.findExternalLinksConnected=dt.prototype.Nu,dt.prototype.ensureBounds=dt.prototype.Va,dt.className="Group";function vi(t){it.call(this),this.zb=Ju,this.lo=new E(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}Z(vi,it),vi.prototype.cloneProtected=function(t){it.prototype.cloneProtected.call(this,t),t.zb=this.zb.J(),t.lo=this.lo.copy()},vi.prototype.gh=function(t){if(this.background===null&&this.areaBackground===null)return!1;var e=this.naturalBounds;return sr(0,0,e.width,e.height,t.x,t.y)},vi.prototype.Wl=function(){var t=this.part;if(t!==null&&(t instanceof dt||t instanceof Nt)||O("Placeholder is not inside a Group or Adornment."),t instanceof dt){var e=this.computeBorder(this.lo),i=this.minSize,n=this.fc;for(go(n,(isFinite(i.width)?Math.max(i.width,e.width):e.width)||0,(isFinite(i.height)?Math.max(i.height,e.height):e.height)||0),this.Ge(0,0,n.width,n.height),n=t.memberParts,i=!1;n.next();)if(n.value.isVisible()){i=!0;break}n=t.diagram,!i||n===null||n.animationManager.Zu(t)||isNaN(e.x)||isNaN(e.y)||(i=C.alloc(),i.yi(e,t.locationSpot),i.D(t.location)||(t.location=i),C.free(i))}else{e=this.fc,i=this.zb,n=i.left+i.right;var r=i.top+i.bottom,o=t.adornedObject;t.angle=o.mi();var l=0;o instanceof yt&&(l=o.strokeWidth);var u=o.Df(),h=o.naturalBounds,f=(h.width+l)*u;l=(h.height+l)*u,t.type!==z.Link&&(u=o.ga(t.category==="Selection"?Je:t.locationSpot,C.alloc()),t.location=u,C.free(u)),isNaN(f)||isNaN(l)?(t=o.ga(Je,C.alloc()),f=E.allocAt(t.x,t.y,0,0),f.Ye(o.ga(Yr,t)),f.Ye(o.ga(qu,t)),f.Ye(o.ga(bu,t)),go(e,f.width+n||0,f.height+r||0),this.Ge(-i.left,-i.top,e.width,e.height),C.free(t),E.free(f)):(go(e,f+n||0,l+r||0),this.Ge(-i.left,-i.top,e.width,e.height))}},vi.prototype.eh=function(t,e,i,n){this.actualBounds.h(t,e,i,n)},vi.prototype.computeBorder=function(t){var e=this.part,i=e.diagram,n=i===null||!i.animationManager.isAnimating;if(i!==null&&e instanceof dt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.lo.w()){var r=i.toolManager.findTool("Dragging");if(r===i.currentTool&&(i=r.computeBorder(e,this.lo,t),i!==null))return i}i=E.alloc(),r=this.computeMemberBounds(i);var o=this.zb;return e instanceof dt&&!e.isSubGraphExpanded?t.h(r.x-o.left,r.y-o.top,0,0):t.h(r.x-o.left,r.y-o.top,Math.max(r.width+o.left+o.right,0),Math.max(r.height+o.top+o.bottom,0)),E.free(i),n&&e instanceof dt&&e.computesBoundsIncludingLocation&&e.location.w()&&t.Ye(e.location),t},vi.prototype.computeMemberBounds=function(t){if(!(this.part instanceof dt))return t.h(0,0,0,0),t;for(var e=this.part,i=1/0,n=1/0,r=-1/0,o=-1/0,l=e.memberParts;l.next();){var u=l.value;if(u.isVisible()){if(u instanceof V&&(!e.computesBoundsIncludingLinks||Qo(u)||u.fromNode===e||u.toNode===e))continue;u=u.actualBounds,u.left<i&&(i=u.left),u.top<n&&(n=u.top),u.right>r&&(r=u.right),u.bottom>o&&(o=u.bottom)}}return isFinite(i)&&isFinite(n)?t.h(i,n,r-i,o-n):(e=e.location,t.h(e.x,e.y,0,0)),t},Y.Object.defineProperties(vi.prototype,{padding:{get:function(){return this.zb},set:function(t){typeof t=="number"&&(t=new Dt(t));var e=this.zb;e.D(t)||(this.zb=t=t.J(),this.g("padding",e,t),this.v())}}}),vi.className="Placeholder";function V(t){ot.call(this,z.Link),this.Qa=8,this.ef=null,this.ff="",this.uf=this.hn=null,this.vf="",this.vo=null,this.pk=Ye,this.Pm=0,this.Rm=Ye,this.Sm=NaN,this.rj=Wd,this.qo=.5,this.wd=null,this.Ob=new q().freeze(),this.Tg=this.Mg=null,this.ml=new E,this.ua=new H,this.u=this.o=this.Sf=this.Wf=null,this.tu=new C,this.cq=this.Ow=this.Nw=null,this.wt=NaN,this.ba=null,this.j=[],t&&Object.assign(this,t)}Z(V,ot),V.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.Qa=this.Qa&-113,t.ff=this.ff,t.hn=this.hn,t.vf=this.vf,t.vo=this.vo,t.pk=this.pk,t.Pm=this.Pm,t.Rm=this.Rm,t.Sm=this.Sm,t.rj=this.rj,t.qo=this.qo,this.ba!==null&&(t.ba=this.ba.copy())},s=V.prototype,s.Af=function(t){ot.prototype.Af.call(this,t),this.ff=t.ff,this.vf=t.vf,t.Mg=null,t.bb(),t.Sf=this.Sf;var e=t.fromPort;e!==null&&Ui(e),t=t.toPort,t!==null&&Ui(t)},s.qb=function(t){t.classType===V?(t.value&2)===2?this.routing=t:t===Yi||t===ko||t===Mu?this.curve=t:t===Gh||t===Ef||t===Bf?this.adjusting=t:t!==Wd&&t!==Ye&&O("Unknown Link enum value for a Link property: "+t):ot.prototype.qb.call(this,t)},s.Xc=function(){this.ba===null&&(this.ba=new wf)},s.ti=function(){var t=this.fromNode;if(t!==null){var e=t.findVisibleNode();if(e!==null&&(t=e),Zn(t)||Ns(t))return!1}return t=this.toNode,!(t!==null&&(e=t.findVisibleNode(),e!==null&&(t=e),Zn(t)||Ns(t)))},s.Bv=function(){return!1},s.Cv=function(){},s.Zc=function(){return!1},V.prototype.computeAngle=function(t,e,i){return V.computeAngle(e,i)},V.computeAngle=function(t,e){switch(t){default:case Ye:t=0;break;case Hh:t=e;break;case Xh:t=e+90;break;case Kh:t=e-90;break;case $d:t=e+180;break;case Rf:t=A.cp(e),90<t&&270>t&&(t-=180);break;case _h:t=A.cp(e+90),90<t&&270>t&&(t-=180);break;case Wh:t=A.cp(e-90),90<t&&270>t&&(t-=180);break;case zf:if(t=A.cp(e),45<t&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return A.cp(t)};function Uh(t){var e=t.fromNode,i=t.toNode,n=null;if(e!==null?n=i!==null?e.sx(i):e.containingGroup:i!==null?n=i.containingGroup:n=null,e=n,i=t.Ah,i!==e){i!==null&&yv(i,t),t.Ah=e,e!==null&&gv(e,t);var r=t.containingGroupChanged;if(r!==null){var o=!0,l=t.diagram;l!==null&&(o=l.aa,l.aa=!0),r(t,i,e),l!==null&&(l.aa=o)}!t.fd||t.Nw!==i&&t.Ow!==i||t.bb()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=n}s=V.prototype,s.oh=function(){var t=this.containingGroup;t!==null&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&ot.prototype.oh.call(this)},s.Uo=function(t){var e=this.fromNode;return t===e?this.toNode:e},s.Hz=function(t){var e=this.fromPort;return t===e?this.toPort:e};function JS(t,e){t.wd===null&&(t.wd=new _),t.wd.add(e),t.v()}s.Wo=function(t){if(ot.prototype.Wo.call(this,t),gl(this)&&this.Yo(this.actualBounds),!t){t=this.ef;var e=null;t!==null&&(e=this.fromPort,Vd(t,this,e));var i=this.uf;if(i!==null){var n=this.toPort;i===t&&n===e||Vd(i,this,n)}Of(this)}},s.Xo=function(t){if(ot.prototype.Xo.call(this,t),gl(this)&&this.Yo(this.actualBounds),!t){t=this.ef;var e=null;t!==null&&(e=this.fromPort,Ud(t,this,e));var i=this.uf;if(i!==null){var n=this.toPort;i===t&&n===e||Ud(i,this,n)}If(this)}},s.Lj=function(){if(this.fd=!0,this.wd!==null){var t=this.diagram;if(t!==null)for(var e=this.wd.copy().iterator;e.next();)t.remove(e.value)}this.data!==null&&(t=this.diagram,t!==null&&t.partManager.removeDataForLink(this))},V.prototype.updateRelationshipsFromData=function(){if(this.data!==null){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}},V.prototype.move=function(t,e){var i=e?this.location:this.position,n=i.x;isNaN(n)&&(n=0);var r=i.y;for(isNaN(r)&&(r=0),n=t.x-n,r=t.y-r,e===!0?ot.prototype.move.call(this,t,!1):(t=C.allocAt(i.x+n,i.y+r),ot.prototype.move.call(this,t,!1),C.free(t)),is(this,n,r),t=this.labelNodes;t.next();)e=t.value,i=e.position,e.moveTo(i.x+n,i.y+r)},V.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},V.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},V.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(e===0)return t.assign(Mp),t;if(e===1)return t.assign(this.i(0)),t;if(e===2){var i=this.i(0),n=this.i(1);return t.h((i.x+n.x)/2,(i.y+n.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Yi))return this.ua.Ru(.5,t),t.add(this.i(0)),i=this.ua.figures.first(),t.offset(-i.startX,-i.startY),t;if(this.computeCurve()===Yi){if(e===3){i=this.i(0),n=this.i(1);var r=this.i(2);return A.ex(i.x,i.y,n.x,n.y,n.x,n.y,r.x,r.y,t),t}if(n=(e-1)/3|0,i=3*(n/2|0),n%2===1){n=this.i(i),r=this.i(i+1);var o=this.i(i+2);i=this.i(i+3),A.ex(n.x,n.y,r.x,r.y,o.x,o.y,i.x,i.y,t)}else t.assign(this.i(i));return t}var l=this.flattenedLengths;for(i=this.flattenedTotalLength,r=o=n=0;n<i/2&&o<e&&(r=l[o],!(n+r>i/2));)n+=r,o++;return e=this.i(o),o=this.i(o+1),1>Math.abs(e.x-o.x)?e.y>o.y?t.h(e.x,e.y-(i/2-n)):t.h(e.x,e.y+(i/2-n)):1>Math.abs(e.y-o.y)?e.x>o.x?t.h(e.x-(i/2-n),e.y):t.h(e.x+(i/2-n),e.y):(i=(i/2-n)/r,t.h(e.x+i*(o.x-e.x),e.y+i*(o.y-e.y))),t},V.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(t===2)return this.i(0).ab(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Yi))return this.ua.yx(.5);if(this.computeCurve()===Yi&&4<=t){var e=(t-1)/3|0,i=3*(e/2|0);if(e%2===1){i=Math.floor(i),t=this.i(i),e=this.i(i+1);var n=this.i(i+2);return i=this.i(i+3),A.Oy(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)}if(0<i&&i+1<t)return this.i(i-1).ab(this.i(i+1))}e=this.flattenedLengths,n=this.flattenedTotalLength;var r=0;i=0;for(var o;r<n/2&&i<t&&(o=e[i],!(r+o>n/2));)r+=o,i++;if(e=this.i(i),n=this.i(i+1),1>Math.abs(e.x-n.x)&&1>Math.abs(e.y-n.y)){if(0<i&&i+2<t)return this.i(i-1).ab(this.i(i+2))}else{if(1>Math.abs(e.x-n.x))return e.y>n.y?270:90;if(1>Math.abs(e.y-n.y))return e.x>n.x?180:0}return e.ab(n)},s=V.prototype,s.i=function(t){return this.Ob.s[t]},s.dd=function(t,e){this.Ob.cd(t,e)},s.L=function(t,e,i){this.Ob.cd(t,new C(e,i))},s.Pz=function(t,e){this.Ob.Hb(t,e)},s.m=function(t,e,i){this.Ob.Hb(t,new C(e,i))},s.ne=function(t){this.Ob.add(t)},s.yf=function(t,e){this.Ob.add(new C(t,e))},s.rv=function(t){this.Ob.mb(t)},s.Fj=function(){this.Ob.clear()};function is(t,e,i){if(e!==0||i!==0)if(t.pointsCount===0)t.defaultFromPoint&&t.defaultFromPoint.offset(e,i),t.defaultToPoint&&t.defaultToPoint.offset(e,i);else{for(var n=t.fd,r=new q,o=t.Ob.iterator;o.next();){var l=o.value;r.add(new C(l.x+e,l.y+i).freeze())}r.freeze(),o=t.Ob,t.Ob=r,l=t.diagram,isNaN(e)||isNaN(i)||l!==null&&l.animationManager.Ab?t.v():(t.ke.h(t.ke.x+e,t.ke.y+i),t.pa.h(t.pa.x+e,t.pa.y+i),Ch(t)),n?Gd(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),l!==null&&l.animationManager.Ab&&K0(l.animationManager,t,r),t.g("points",o,r)}}s.uh=function(){this.Mg===null&&(this.Mg=this.Ob,this.Ob=this.Ob.copy())},s.zf=function(){if(this.Mg!==null){for(var t=this.Mg,e=this.Ob,i=1/0,n=1/0,r=t.s,o=r.length,l=0;l<o;l++){var u=r[l];i=Math.min(u.x,i),n=Math.min(u.y,n)}u=l=1/0;for(var h=e.s,f=h.length,c=0;c<f;c++){var p=h[c];l=Math.min(p.x,l),u=Math.min(p.y,u),p.freeze()}if(e.freeze(),f===o){for(o=0;o<f;o++)if(c=r[o],p=h[o],c.x-i!==p.x-l||c.y-n!==p.y-u){this.rc();break}}else this.rc();this.Mg=null,i=this.diagram,i!==null&&i.animationManager.Ab&&K0(i.animationManager,this,e),Gd(this),this.g("points",t,e)}},s.tv=function(){this.Mg!==null&&(this.Ob=this.Mg,this.Mg=null)};function Gd(t){t.Ob.count===0?t.fd=!1:(t.fd=!0,t.cq=null,t.wt=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),_d(t,!1))}s.bb=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.As.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager,t.isTicking&&!t.isAnimating))return;this.Tg===null||t.isTicking||(this.Tg=null)}t=this.path,t!==null&&(this.fd=!1,this.v(),t.v())}},s.vg=function(){if(!this.fd&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.uh(),t=this.computePoints()}catch{this.computingPoints=!1,this.tv()}finally{this.computingPoints=!1,t?this.zf():this.tv()}}},V.prototype.computePoints=function(){if(this.diagram===null)return!1;var t=this.fromNode,e=null;if(t===null?(xu||(xu=new W,xu.desiredSize=Ql,xu.Va()),this.defaultFromPoint&&(xu.location=this.defaultFromPoint,xu.Va(),e=t=xu)):e=this.fromPort,e!==null&&!t.isVisible()){var i=t.findVisibleNode();i!==null&&i!==t?(t=i,e=i.port):t=i}if(this.Nw=t,t===null||!t.location.w())return!1;for(;!(e===null||e.actualBounds.w()&&e.Ed());)e=e.panel;if(e===null)return!1;var n=this.toNode,r=null;if(n===null?(wu||(wu=new W,wu.desiredSize=Ql,wu.Va()),this.defaultToPoint&&(wu.location=this.defaultToPoint,wu.Va(),r=n=wu)):r=this.toPort,r===null||n.isVisible()||(i=n.findVisibleNode(),i!==null&&i!==n?(n=i,r=i.port):n=i),this.Ow=n,n===null||!n.location.w())return!1;for(;!(r===null||r.actualBounds.w()&&r.Ed());)r=r.panel;if(r===null)return!1;var o=this.pointsCount,l=this.computeSpot(!0,e);i=this.computeSpot(!1,r);var u=Yh(l),h=Yh(i),f=e===r&&e!==null,c=this.isOrthogonal,p=this.curve===Yi;this.Wf=f&&!c?p=!0:!1;var g=this.computeAdjusting()===Ye||f;if(!c&&!f&&u&&h){if(u=!1,!g&&3<=o&&(g=this.getLinkPoint(t,e,l,!0,!1,n,r),h=this.getLinkPoint(n,r,i,!1,!1,t,e),u=this.adjustPoints(0,g,o-1,h))&&(g=this.getLinkPoint(t,e,l,!0,!1,n,r),h=this.getLinkPoint(n,r,i,!1,!1,t,e),this.adjustPoints(0,g,o-1,h)),!u)if(this.Fj(),p){o=this.getLinkPoint(t,e,l,!0,!1,n,r),g=this.getLinkPoint(n,r,i,!1,!1,t,e),u=g.x-o.x,h=g.y-o.y,f=this.computeCurviness(),p=c=0;var m=o.x+u/3,v=o.y+h/3,x=m,k=v;A.B(h,0)?k=0<u?k-f:k+f:(c=-u/h,p=Math.sqrt(f*f/(c*c+1)),0>f&&(p=-p),x=(0>h?-1:1)*p+m,k=c*(x-m)+v),m=o.x+2*u/3,v=o.y+2*h/3;var S=m,P=v;A.B(h,0)?P=0<u?P-f:P+f:(S=(0>h?-1:1)*p+m,P=c*(S-m)+v),this.Fj(),this.ne(o),this.yf(x,k),this.yf(S,P),this.ne(g),this.dd(0,this.getLinkPoint(t,e,l,!0,!1,n,r)),this.dd(3,this.getLinkPoint(n,r,i,!1,!1,t,e))}else o=n,g=r,n=this.getLinkPoint(t,e,l,!0,!1,o,g),r=this.getLinkPoint(o,g,i,!1,!1,t,e),this.hasCurviness()?(g=r.x-n.x,i=r.y-n.y,l=this.computeCurviness(),t=n.x+g/2,e=n.y+i/2,o=t,u=e,A.B(i,0)?u=0<g?u-l:u+l:(g=-g/i,o=Math.sqrt(l*l/(g*g+1)),0>l&&(o=-o),o=(0>i?-1:1)*o+t,u=g*(o-t)+e),this.ne(n),this.yf(o,u),this.ne(r)):(this.ne(n),this.ne(r),u=E.alloc(),e.ni(u),h=u.ca(r),g.ni(u),f=u.ca(n),(h||f)&&(l=e.ga(Xd(l),new C),this.dd(0,this.getLinkPointFromPoint(t,e,l,r,!0,l)),i=g.ga(Xd(i),new C),this.dd(1,this.getLinkPointFromPoint(o,g,i,n,!1,i))),E.free(u))}else{p=this.isAvoiding,g&&(c&&p||f)&&this.Fj();var N=f?this.computeCurviness():0;p=this.getLinkPoint(t,e,l,!0,c,n,r),m=x=v=0,(c||!u||f)&&(k=this.computeEndSegmentLength(t,e,l,!0),m=this.getLinkDirection(t,e,p,l,!0,c,n,r),f&&(u||l.D(i)||!c&&l.x+i.x===1&&l.y+i.y===1)&&(m-=c?90:30,0>N&&(m-=180)),0>m?m+=360:360<=m&&(m-=360),f&&(k+=Math.abs(N)*(c?1:2)),m===0?v=k:m===90?x=k:m===180?v=-k:m===270?x=-k:(v=k*Math.cos(m*Math.PI/180),x=k*Math.sin(m*Math.PI/180)),l.Nc()&&f&&(k=e.ga(Et,C.alloc()),S=C.allocAt(k.x+1e3*v,k.y+1e3*x),this.getLinkPointFromPoint(t,e,k,S,!0,p),C.free(k),C.free(S))),k=this.getLinkPoint(n,r,i,!1,c,t,e);var T=P=S=0;if(c||!h||f){var F=this.computeEndSegmentLength(n,r,i,!1);T=this.getLinkDirection(n,r,k,i,!1,c,t,e),f&&(h||l.D(i)||!c&&l.x+i.x===1&&l.y+i.y===1)&&(T+=c?0:30,0>N&&(T+=180)),0>T?T+=360:360<=T&&(T-=360),f&&(F+=Math.abs(N)*(c?1:2)),T===0?S=F:T===90?P=F:T===180?S=-F:T===270?P=-F:(S=F*Math.cos(T*Math.PI/180),P=F*Math.sin(T*Math.PI/180)),i.Nc()&&f&&(i=r.ga(Et,C.alloc()),l=C.allocAt(i.x+1e3*S,i.y+1e3*P),this.getLinkPointFromPoint(n,r,i,l,!1,k),C.free(i),C.free(l))}i=p,(c||!u||f)&&(i=new C(p.x+v,p.y+x)),l=k,(c||!h||f)&&(l=new C(k.x+S,k.y+P)),!g&&!c&&u&&3<o&&this.adjustPoints(0,p,o-2,l)?this.dd(o-1,k):!g&&!c&&h&&3<o&&this.adjustPoints(1,i,o-1,k)?this.dd(0,p):!g&&(c?6<=o:4<o)&&this.adjustPoints(1,i,o-2,l)?(this.dd(0,p),this.dd(o-1,k)):(this.Fj(),this.ne(p),(c||!u||f)&&this.ne(i),c&&this.addOrthoPoints(i,m,l,T,t,n),(c||!h||f)&&this.ne(l),this.ne(k))}return!0};function mv(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}V.prototype.getLinkPointFromPoint=function(t,e,i,n,r,o){if(o===void 0&&(o=new C),t===null||e===null)return o.assign(i),o;if(t.isVisible()||(r=t.findVisibleNode(),r!==null&&r!==t&&(e=r.port)),t=null,r=e.panel,r===null||r.se()||(r=r.panel),r===null){r=n.x,n=n.y;var l=i.x;i=i.y}else{t=r.oe,r=1/(t.m11*t.m22-t.m12*t.m21),l=t.m22*r;var u=-t.m12*r,h=-t.m21*r,f=t.m11*r,c=r*(t.m21*t.dy-t.m22*t.dx),p=r*(t.m12*t.dx-t.m11*t.dy);r=n.x*l+n.y*h+c,n=n.x*u+n.y*f+p,l=i.x*l+i.y*h+c,i=i.x*u+i.y*f+p}return e.Rj(r,n,l,i,o),t!==null&&o.transform(t),o};function Hd(t,e){var i=e.$n;return i===null&&(i=new Su,i.port=e,i.node=e.part,e.$n=i),u2(i,t)}V.prototype.getLinkPoint=function(t,e,i,n,r,o,l,u){if(u===void 0&&(u=new C),i.sb()&&!Yh(i))return e.ga(i,u),u;if(i.$c()){var h=Hd(this,e);if(h!==null){if(u.assign(h.$o),r&&this.routing===i2){var f=Hd(this,l);if(f!==null&&h.Gl<f.Gl){h=C.alloc(),f=C.alloc();var c=new E(e.ga(Je,h),e.ga(Yr,f)),p=this.computeSpot(!n,l);t=this.getLinkPoint(o,l,p,!n,r,t,e,f),(i.Hf(eh)||i.Hf(ih))&&t.y>=c.y&&t.y<=c.y+c.height?u.y=t.y:(i.Hf(th)||i.Hf(nh))&&t.x>=c.x&&t.x<=c.x+c.width&&(u.x=t.x),C.free(h),C.free(f)}}return u}}return i=e.ga(Xd(i),C.alloc()),this.pointsCount>(r?6:2)?(l=n?this.i(1):this.i(this.pointsCount-2),r&&(l=mv(i,l.copy()))):(h=this.computeSpot(!n,l),o=C.alloc(),l=l.ga(Xd(h),o),r&&(l=mv(i,l)),C.free(o)),this.getLinkPointFromPoint(t,e,i,l,n,u),C.free(i),u},V.prototype.getLinkDirection=function(t,e,i,n,r,o,l,u){t:if(n.sb())var h=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.$c()&&(h=Hd(this,e),h!==null))switch(h.Oc){case 1:h=270;break t;case 2:h=180;break t;default:case 4:h=0;break t;case 8:h=90;break t}h=e.ga(Et,C.alloc()),this.pointsCount>(o?6:2)?(u=r?this.i(1):this.i(this.pointsCount-2),u=o?mv(h,u.copy()):i):(i=C.alloc(),u=u.ga(Et,i),C.free(i)),i=Math.abs(u.x-h.x)>Math.abs(u.y-h.y)?u.x>=h.x?0:180:u.y>=h.y?90:270,C.free(h),h=i}return l&&n.Nc()&&l.Td(t)&&(h+=180,360<=h&&(h-=360)),Yh(n)||(t=e.mi(),t===0)||(45<=t&&135>t?h+=90:135<=t&&225>t?h+=180:225<=t&&315>t&&(h+=270),360<=h&&(h-=360)),h},V.prototype.computeEndSegmentLength=function(t,e,i,n){return e!==null&&i.$c()&&(t=Hd(this,e),t!==null)?t.Lu:(t=n?this.fromEndSegmentLength:this.toEndSegmentLength,e!==null&&isNaN(t)&&(t=n?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},V.prototype.computeSpot=function(t,e){return e===void 0&&(e=null),t?(t=e||this.fromPort,t===null?t=Et:(e=this.fromSpot,e.$b()&&(e=t.fromSpot),t=e===_e?Ke:e)):(t=e||this.toPort,t===null?t=Et:(e=this.toSpot,e.$b()&&(e=t.toSpot),t=e===_e?Ke:e)),t};function Yh(t){return t===Ke||t.x===.5&&t.y===.5}function Xd(t){return t.x===.5&&t.y===.5?t:Et}V.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==Ye&&4<this.pointsCount?this.computeMidPoint(new C):(t=e.$n,t=t!==null?u2(t,this):null,t!==null?t.$o:e.ga(Et))},V.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;e!==null&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&(e=this.toPort,e!==null&&(t=e.toShortLength)),isNaN(t)?0:t},V.prototype.Cf=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var l=o;if(o===void 0&&(l=vt.alloc(),l.reset()),l.multiply(this.transform),this.fh(t,l))return Hm(this,e,i,r),o===void 0&&vt.free(l),!0;if(this.Yc(t,l)){var u=!1;if(!this.isAtomic)for(var h=this.O.s,f=h.length;f--;){var c=h[f];if(c.visible||c===this.locationObject){var p=c.actualBounds,g=this.naturalBounds;if(!(p.x>g.width||p.y>g.height||0>p.x+p.width||0>p.y+p.height)){if(p=vt.alloc(),p.set(l),c instanceof z)u=c.Cf(t,e,i,n,r,p);else if(this.path===c){if(c instanceof yt)if(u=t,g=n,c.pickable===!1)u=!1;else if(p.multiply(c.transform),g)t:{var m=u,v=p;if(c.fh(m,v))u=!0;else{if(v===void 0&&(v=c.transform,m.Re(c.actualBounds))){u=!0;break t}u=m.left,g=m.right;var x=m.top;m=m.bottom;var k=C.alloc(),S=C.alloc(),P=C.alloc(),N=vt.alloc();N.set(v),N.ev(c.transform),N.Uj(),S.x=g,S.y=x,S.transform(N),k.x=u,k.y=x,k.transform(N),v=!1,pl(c,k,S,P)?v=!0:(k.x=g,k.y=m,k.transform(N),pl(c,k,S,P)?v=!0:(S.x=u,S.y=m,S.transform(N),pl(c,k,S,P)?v=!0:(k.x=u,k.y=x,k.transform(N),pl(c,k,S,P)&&(v=!0)))),vt.free(N),C.free(k),C.free(S),C.free(P),u=v}}else u=c.fh(u,p)}else u=HM(c,t,n,p);u&&(g=c,e!==null&&(g=e(c)),g&&(i===null||i(g))&&r.add(g)),vt.free(p)}}}return o===void 0&&vt.free(l),u||this.background!==null||this.areaBackground!==null}return o===void 0&&vt.free(l),!1},V.prototype.computeCurve=function(){if(this.Wf===null){var t=this.fromPort,e=this.isOrthogonal;this.Wf=t!==null&&t===this.toPort&&!e}return this.Wf?Yi:this.curve},V.prototype.computeCorner=function(){if(this.curve===Yi)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},V.prototype.findMidLabel=function(){for(var t=this.path,e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];if(r!==t&&!r.isPanelMain&&(r.segmentIndex===-1/0||isNaN(r.segmentIndex)))return r}for(t=this.labelNodes;t.next();)if(e=t.value,e.segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},V.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=r2;t=Math.max(t,this.computeThickness());var e=this.fromPort,i=this.toPort;if(e!==null&&i!==null){var n=this.findMidLabel();if(n!==null){var r=n.naturalBounds,o=n.margin,l=isNaN(r.width)?30:r.width*n.scale+o.left+o.right;r=isNaN(r.height)?14:r.height*n.scale+o.top+o.bottom,n=n.segmentOrientation,n===Hh||n===Rf||n===$d?t=Math.max(t,r):n===Kh||n===Wh||n===Xh||n===_h?t=Math.max(t,l):(e=e.ga(Et).ab(i.ga(Et))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*l)+Math.abs(Math.cos(e)*r)+1)),this.curve===Yi&&(t*=1.333)}}return t},V.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var i=t[e];i.computeAdjusting()===Ye&&i.bb()}},V.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=n2;var e=this.Sf;if(e!==null){for(var i=Rt(),n=0,r=e.links,o=0;o<r.length;o++){var l=r[o].computeSpacing();i.push(l),n+=l}for(n=-n/2,o=0;o<r.length;o++){if(r[o]===this){t=n+i[o]/2;break}n+=i[o]}e.Ds===this.fromNode&&(t=-t),Bt(i)}}return t},V.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return t!==null?Math.max(t.strokeWidth,1):1},V.prototype.hasCurviness=function(){return!isNaN(this.curviness)||this.Sf!==null},V.prototype.adjustPoints=function(t,e,i,n){var r=this.computeAdjusting();if(this.isOrthogonal){if(r===Ef)return!1;r===Bf&&(r=Gh)}switch(r){case Ef:var o=this.i(t),l=this.i(i);if(!o.Xa(e)||!l.Xa(n)){r=o.x,o=o.y;var u=l.x-r,h=l.y-o,f=Math.sqrt(u*u+h*h);if(!A.$(f,0)){if(A.$(u,0))var c=0>h?-Math.PI/2:Math.PI/2;else c=Math.atan(h/Math.abs(u)),0>u&&(c=Math.PI-c);l=e.x;var p=e.y;u=n.x-l;var g=n.y-p;for(h=Math.sqrt(u*u+g*g),A.$(u,0)?g=0>g?-Math.PI/2:Math.PI/2:(g=Math.atan(g/Math.abs(u)),0>u&&(g=Math.PI-g)),f=h/f,c=g-c,this.dd(t,e),t+=1;t<i;t++)e=this.i(t),u=e.x-r,h=e.y-o,e=Math.sqrt(u*u+h*h),A.$(e,0)||(A.$(u,0)?h=0>h?-Math.PI/2:Math.PI/2:(h=Math.atan(h/Math.abs(u)),0>u&&(h=Math.PI-h)),u=h+c,e*=f,this.L(t,l+e*Math.cos(u),p+e*Math.sin(u)));this.dd(i,n)}}return!0;case Bf:if(o=this.i(t),p=this.i(i),!o.Xa(e)||!p.Xa(n)){r=o.x,o=o.y,l=p.x,p=p.y,f=(l-r)*(l-r)+(p-o)*(p-o),u=e.x,c=e.y,h=n.x,g=n.y;var m=1;if(h-u!==0){var v=(g-c)/(h-u);m=Math.sqrt(1+1/(v*v))}else v=9e9;for(this.dd(t,e),t+=1;t<i;t++){e=this.i(t);var x=e.x,k=e.y,S=.5;f!==0&&(S=((r-x)*(r-l)+(o-k)*(o-p))/f);var P=r+S*(l-r),N=o+S*(p-o);e=Math.sqrt((x-P)*(x-P)+(k-N)*(k-N)),k<v*(x-P)+N&&(e=-e),0<v&&(e=-e),x=u+S*(h-u),S=c+S*(g-c),v!==0?(e=x+e/m,this.L(t,e,S-(e-x)/v)):this.L(t,x,S+e)}this.dd(i,n)}return!0;case Gh:t:{if(this.isOrthogonal&&(r=this.i(t),o=this.i(t+1),l=this.i(t+2),u=o.x,c=o.y,p=u,f=c,A.B(r.y,o.y)?A.B(o.x,l.x)?c=e.y:A.B(o.y,l.y)&&(u=e.x):A.B(r.x,o.x)&&(A.B(o.y,l.y)?u=e.x:A.B(o.x,l.x)&&(c=e.y)),this.L(t+1,u,c),r=this.i(i),o=this.i(i-1),l=this.i(i-2),u=o.x,c=o.y,h=u,g=c,A.B(r.y,o.y)?A.B(o.x,l.x)?c=n.y:A.B(o.y,l.y)&&(u=n.x):A.B(r.x,o.x)&&(A.B(o.y,l.y)?u=n.x:A.B(o.x,l.x)&&(c=n.y)),this.L(i-1,u,c),qS(this))){this.L(t+1,p,f),this.L(i-1,h,g),i=!1;break t}this.dd(t,e),this.dd(i,n),i=!0}return i;default:return!1}},V.prototype.addOrthoPoints=function(t,e,i,n,r,o){0>e?e+=360:360<=e&&(e-=360),0>n?n+=360:360<=n&&(n-=360);var l=n;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,n=315<=n||45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270;var u=r.actualBounds.copy(),h=o.actualBounds.copy();if(u.w()&&h.w()){u.Bc(Vf,Vf),h.Bc(Vf,Vf),u.Ye(t),h.Ye(i);var f=C.alloc(),c=C.alloc();e===0?i.x>t.x||n===270&&i.y<t.y&&h.right>t.x||n===90&&i.y>t.y&&h.right>t.x?(f.h(i.x,t.y),c.h(i.x,(t.y+i.y)/2),n===180?(f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),c.x=f.x,c.y=i.y):n===270&&i.y<t.y||n===90&&i.y>t.y?(f.x=t.x<h.left?this.computeMidOrthoPosition(t.x,t.y,h.left,i.y,!1):t.x<h.right&&(n===270&&t.y<h.top||n===90&&t.y>h.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):h.right,c.x=f.x,c.y=i.y):n===0&&t.x<h.left&&t.y>h.top&&t.y<h.bottom&&(f.x=t.x,f.y=t.y<i.y?Math.min(i.y,h.top):Math.max(i.y,h.bottom),c.y=f.y)):(f.h(t.x,i.y),c.h((t.x+i.x)/2,i.y),(n===180||n===90&&i.y<u.top||n===270&&i.y>u.bottom)&&(n===180&&(h.ca(t)||u.ca(i))?f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(n===180||n===90)?f.y=this.computeMidOrthoPosition(t.x,u.top,i.x,Math.max(i.y,h.bottom),!0):i.y>t.y&&(n===180||n===270)&&(f.y=this.computeMidOrthoPosition(t.x,u.bottom,i.x,Math.min(i.y,h.top),!0)),c.x=i.x,c.y=f.y),f.y>u.top&&f.y<u.bottom&&(i.x>=u.left&&i.x<=t.x||t.x<=h.right&&t.x>=i.x?(n===90||n===270)&&(f.h(Math.max((t.x+i.x)/2,t.x),t.y),c.h(f.x,i.y)):(f.y=n===270||(n===0||n===180)&&i.y<t.y?Math.min(i.y,n===0?u.top:Math.min(u.top,h.top)):Math.max(i.y,n===0?u.bottom:Math.max(u.bottom,h.bottom)),c.x=i.x,c.y=f.y))):e===180?i.x<t.x||n===270&&i.y<t.y&&h.left<t.x||n===90&&i.y>t.y&&h.left<t.x?(f.h(i.x,t.y),c.h(i.x,(t.y+i.y)/2),n===0?(f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),c.x=f.x,c.y=i.y):n===270&&i.y<t.y||n===90&&i.y>t.y?(f.x=t.x>h.right?this.computeMidOrthoPosition(t.x,t.y,h.right,i.y,!1):t.x>h.left&&(n===270&&t.y<h.top||n===90&&t.y>h.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):h.left,c.x=f.x,c.y=i.y):n===180&&t.x>h.right&&t.y>h.top&&t.y<h.bottom&&(f.x=t.x,f.y=t.y<i.y?Math.min(i.y,h.top):Math.max(i.y,h.bottom),c.y=f.y)):(f.h(t.x,i.y),c.h((t.x+i.x)/2,i.y),(n===0||n===90&&i.y<u.top||n===270&&i.y>u.bottom)&&(n===0&&(h.ca(t)||u.ca(i))?f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(n===0||n===90)?f.y=this.computeMidOrthoPosition(t.x,u.top,i.x,Math.max(i.y,h.bottom),!0):i.y>t.y&&(n===0||n===270)&&(f.y=this.computeMidOrthoPosition(t.x,u.bottom,i.x,Math.min(i.y,h.top),!0)),c.x=i.x,c.y=f.y),f.y>u.top&&f.y<u.bottom&&(i.x<=u.right&&i.x>=t.x||t.x>=h.left&&t.x<=i.x?(n===90||n===270)&&(f.h(Math.min((t.x+i.x)/2,t.x),t.y),c.h(f.x,i.y)):(f.y=n===270||(n===0||n===180)&&i.y<t.y?Math.min(i.y,n===180?u.top:Math.min(u.top,h.top)):Math.max(i.y,n===180?u.bottom:Math.max(u.bottom,h.bottom)),c.x=i.x,c.y=f.y))):e===90?i.y>t.y||n===180&&i.x<t.x&&h.bottom>t.y||n===0&&i.x>t.x&&h.bottom>t.y?(f.h(t.x,i.y),c.h((t.x+i.x)/2,i.y),n===270?(f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),c.x=i.x,c.y=f.y):n===180&&i.x<t.x||n===0&&i.x>t.x?(f.y=t.y<h.top?this.computeMidOrthoPosition(t.x,t.y,i.x,h.top,!0):t.y<h.bottom&&(n===180&&t.x<h.left||n===0&&t.x>h.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):h.bottom,c.x=i.x,c.y=f.y):n===90&&t.y<h.top&&t.x>h.left&&t.x<h.right&&(f.x=t.x<i.x?Math.min(i.x,h.left):Math.max(i.x,h.right),f.y=t.y,c.x=f.x)):(f.h(i.x,t.y),c.h(i.x,(t.y+i.y)/2),(n===270||n===0&&i.x<u.left||n===180&&i.x>u.right)&&(n===270&&(h.ca(t)||u.ca(i))?f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(n===270||n===0)?f.x=this.computeMidOrthoPosition(u.left,t.y,Math.max(i.x,h.right),i.y,!1):i.x>t.x&&(n===270||n===180)&&(f.x=this.computeMidOrthoPosition(u.right,t.y,Math.min(i.x,h.left),i.y,!1)),c.x=f.x,c.y=i.y),f.x>u.left&&f.x<u.right&&(i.y>=u.top&&i.y<=t.y||t.y<=h.bottom&&t.y>=i.y?(n===0||n===180)&&(f.h(t.x,Math.max((t.y+i.y)/2,t.y)),c.h(i.x,f.y)):(f.x=n===180||(n===90||n===270)&&i.x<t.x?Math.min(i.x,n===90?u.left:Math.min(u.left,h.left)):Math.max(i.x,n===90?u.right:Math.max(u.right,h.right)),c.x=f.x,c.y=i.y))):i.y<t.y||n===180&&i.x<t.x&&h.top<t.y||n===0&&i.x>t.x&&h.top<t.y?(f.h(t.x,i.y),c.h((t.x+i.x)/2,i.y),n===90?(f.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),c.x=i.x,c.y=f.y):n===180&&i.x<t.x||n===0&&i.x>=t.x?(f.y=t.y>h.bottom?this.computeMidOrthoPosition(t.x,t.y,i.x,h.bottom,!0):t.y>h.top&&(n===180&&t.x<h.left||n===0&&t.x>h.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):h.top,c.x=i.x,c.y=f.y):n===270&&t.y>h.bottom&&t.x>h.left&&t.x<h.right&&(f.x=t.x<i.x?Math.min(i.x,h.left):Math.max(i.x,h.right),f.y=t.y,c.x=f.x)):(f.h(i.x,t.y),c.h(i.x,(t.y+i.y)/2),(n===90||n===0&&i.x<u.left||n===180&&i.x>u.right)&&(n===90&&(h.ca(t)||u.ca(i))?f.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(n===90||n===0)?f.x=this.computeMidOrthoPosition(u.left,t.y,Math.max(i.x,h.right),i.y,!1):i.x>t.x&&(n===90||n===180)&&(f.x=this.computeMidOrthoPosition(u.right,t.y,Math.min(i.x,h.left),i.y,!1)),c.x=f.x,c.y=i.y),f.x>u.left&&f.x<u.right&&(i.y<=u.bottom&&i.y>=t.y||t.y>=h.top&&t.y<=i.y?(n===0||n===180)&&(f.h(t.x,Math.min((t.y+i.y)/2,t.y)),c.h(i.x,f.y)):(f.x=n===180||(n===90||n===270)&&i.x<t.x?Math.min(i.x,n===270?u.left:Math.min(u.left,h.left)):Math.max(i.x,n===270?u.right:Math.max(u.right,h.right)),c.x=f.x,c.y=i.y)));var p=i;if(this.isAvoiding){var g=this.diagram;if(g===null||r===o||this.layer.isTemporary||!FM(g)||u.ca(p)&&!o.Td(r)||h.ca(t)&&!r.Td(o))e=!1;else{var m=gm(g,!0,this.containingGroup,null);if(this.segmentIndex!==17&&m.Xj(Math.min(t.x,f.x),Math.min(t.y,f.y),Math.abs(t.x-f.x),Math.abs(t.y-f.y))&&m.Xj(Math.min(f.x,c.x),Math.min(f.y,c.y),Math.abs(f.x-c.x),Math.abs(f.y-c.y))&&m.Xj(Math.min(c.x,p.x),Math.min(c.y,p.y),Math.abs(c.x-p.x),Math.abs(c.y-p.y)))e=!1;else{r=t,o=p;var v=i=null;if(g.isVirtualized){g=m.bounds.copy(),g.Bc(-m.Io,-m.Ho);var x=C.alloc();$h(m,t.x,t.y)||(A.Ff(g.x,g.y,g.x+g.width,g.y+g.height,t.x,t.y,f.x,f.y,x)?(i=t=x.copy(),e=x.ab(f)):A.Ff(g.x,g.y,g.x+g.width,g.y+g.height,f.x,f.y,c.x,c.y,x)?(i=t=x.copy(),e=x.ab(c)):A.Ff(g.x,g.y,g.x+g.width,g.y+g.height,c.x,c.y,p.x,p.y,x)&&(i=t=x.copy(),e=x.ab(p))),$h(m,p.x,p.y)||(A.Ff(g.x,g.y,g.x+g.width,g.y+g.height,p.x,p.y,c.x,c.y,x)?(v=p=x.copy(),n=c.ab(x)):A.Ff(g.x,g.y,g.x+g.width,g.y+g.height,c.x,c.y,f.x,f.y,x)?(v=p=x.copy(),n=f.ab(x)):A.Ff(g.x,g.y,g.x+g.width,g.y+g.height,f.x,f.y,t.x,t.y,x)&&(v=p=x.copy(),n=t.ab(x))),C.free(x)}u=u.copy().ed(h),u.Bc(m.Io*m.Ps,m.Ho*m.Ps),s2(m,t,e,p,n,u,!0),h=Qr(m,p.x,p.y),!m.abort&&h>=Zh&&(o2(m),u.Bc(m.Io*m.Jx,m.Ho*m.Kx),s2(m,t,e,p,n,u,!1),h=Qr(m,p.x,p.y)),!m.abort&&h<Zh&&Qr(m,p.x,p.y)!==ns?(vv(this,m,p.x,p.y,n,!0,l),u=this.i(2),4>this.pointsCount?(e===0||e===180?(u.x=t.x,u.y=p.y):(u.x=p.x,u.y=t.y),this.L(2,u.x,u.y),this.m(3,u.x,u.y)):(l=this.i(3),e===0||e===180?A.B(u.x,l.x)?(u=e===0?Math.max(u.x,t.x):Math.min(u.x,t.x),this.L(2,u,t.y),this.L(3,u,l.y)):A.B(u.y,l.y)?(Math.abs(t.y-u.y)<=m.Ho/2&&(this.L(2,u.x,t.y),this.L(3,l.x,t.y)),this.m(2,u.x,t.y)):this.L(2,t.x,u.y):(e===90||e===270)&&(A.B(u.y,l.y)?(u=e===90?Math.max(u.y,t.y):Math.min(u.y,t.y),this.L(2,t.x,u),this.L(3,l.x,u)):A.B(u.x,l.x)?(Math.abs(t.x-u.x)<=m.Io/2&&(this.L(2,t.x,u.y),this.L(3,t.x,l.y)),this.m(2,t.x,u.y)):this.L(2,u.x,t.y))),i!==null&&(t=this.i(1),l=this.i(2),t.x!==l.x&&t.y!==l.y?e===0||e===180?this.m(2,t.x,l.y):this.m(2,l.x,t.y):e===0||e===180?this.m(2,r.x,i.y):this.m(2,i.x,r.y)),v!==null&&(n===0||n===180?this.yf(o.x,v.y):this.yf(v.x,o.y)),e=!0):e=!1}}}else e=!1;e||(this.ne(f.copy()),this.ne(c.copy())),C.free(f),C.free(c)}},V.prototype.computeMidOrthoPosition=function(t,e,i,n,r){var o=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).$c()||this.computeSpot(!1,this.toPort).$c()||(o=this.computeCurviness()),r?(e+n)/2+o:(t+i)/2+o};function qS(t){if(t.diagram===null||!t.isAvoiding||!FM(t.diagram))return!1;var e=t.points.s,i=e.length;if(4>i)return!1;t=gm(t.diagram,!0,t.containingGroup,null);for(var n=1;n<i-2;n++){var r=e[n],o=e[n+1];if(!t.Xj(Math.min(r.x,o.x),Math.min(r.y,o.y),Math.abs(r.x-o.x),Math.abs(r.y-o.y)))return!0}return!1}function vv(t,e,i,n,r,o,l){var u=e.Io,h=e.Ho,f=Qr(e,i,n),c=i,p=n;for(r===0?c+=u:r===90?p+=h:r===180?c-=u:p-=h,r!==l&&f>yl&&Qr(e,c,p)!==f-1&&(Qr(e,i-u,n)===f-1?(r=180,c=i-u,p=n):Qr(e,i+u,n)===f-1?(r=0,c=i+u,p=n):Qr(e,i,n-h)===f-1?(r=270,c=i,p=n-h):Qr(e,i,n+h)===f-1&&(r=90,c=i,p=n+h));f>yl&&Qr(e,c,p)===f-1;)i=c,n=p,r===0?c+=u:r===90?p+=h:r===180?c-=u:p-=h,--f;o?f>yl&&(r===180||r===0?i=Math.floor(i/u)*u+u/2:(r===90||r===270)&&(n=Math.floor(n/h)*h+h/2)):(i=Math.floor(i/u)*u+u/2,n=Math.floor(n/h)*h+h/2),f>yl&&(o=r,l=i,c=n,r===0?(o=90,c+=h):r===90?(o=180,l-=u):r===180?(o=270,c-=h):r===270&&(o=0,l+=u),Qr(e,l,c)===f-1?vv(t,e,l,c,o,!1,o):(l=i,c=n,r===0?(o=270,c-=h):r===90?(o=0,l+=u):r===180?(o=90,c+=h):r===270&&(o=180,l-=u),Qr(e,l,c)===f-1&&vv(t,e,l,c,o,!1,o))),t.yf(i,n)}V.prototype.jz=function(t){var e=t.x;t=t.y;for(var i=this.i(0),n=this.i(1),r=di(e,t,i.x,i.y,n.x,n.y),o=0,l=1;l<this.pointsCount-1;l++){i=this.i(l+1);var u=di(e,t,n.x,n.y,i.x,i.y);n=i,u<r&&(o=l,r=u)}return o},V.prototype.rc=function(){this.kk=!1,this.v()},V.prototype.Ul=function(t){if(!(!t&&(this.fd===!1||(t=this.Qb(),this.kk&&(t===null||t.geometry!==null))))&&(2>this.pointsCount?this.kk=!0:this.ua=this.makeGeometry(),t=this.path,t!==null)){t.ua=this.ua;for(var e=this.O.s,i=e.length,n=0;n<i;n++){var r=e[n];r!==t&&r.isPanelMain&&r instanceof yt&&(r.ua=this.ua)}}},V.prototype.makeGeometry=function(){var t=this.ua,e=this.pointsCount,i=!1,n=this.diagram;n!==null&&gl(this)&&n.Eh.contains(this)&&(this.ml.width!==0||this.ml.height!==0)&&(n.animationManager.isAnimating||n.currentTool!==n.toolManager)&&(i=!0);var r=this.i(0).copy(),o=r.copy();n=this.Ob.s;var l=this.computeCurve();if(l===Yi&&3<=e&&!A.$(this.smoothness,0))if(e===3){var u=this.i(1);n=Math.min(r.x,u.x);var h=Math.min(r.y,u.y);u=this.i(2),n=Math.min(n,u.x),h=Math.min(h,u.y)}else{if(this.isOrthogonal)for(h=0;h<e;h++)u=n[h],o.x=Math.min(u.x,o.x),o.y=Math.min(u.y,o.y);else for(n=3;n<e;n+=3)n+3>=e&&(n=e-1),h=this.i(n),o.x=Math.min(h.x,o.x),o.y=Math.min(h.y,o.y);n=o.x,h=o.y}else{for(h=0;h<e;h++)u=n[h],o.x=Math.min(u.x,o.x),o.y=Math.min(u.y,o.y);n=o.x,h=o.y}if(n-=this.tu.x,h-=this.tu.y,r.x-=n,r.y-=h,e!==2||gl(this)){if(t.type=H.j,u=TS(t),this.computeShortLength(!0)!==0&&(r=mu(this,r,!0,o)),Vh(u,r.x,r.y,!1),l===Yi&&3<=e&&!A.$(this.smoothness,0))if(e===3)i=this.i(1),e=i.x-n,i=i.y-h,r=this.i(2).copy(),r.x-=n,r.y-=h,this.computeShortLength(!1)!==0&&(r=mu(this,r,!1,o)),bo(u,e,i,e,i,r.x,r.y);else if(this.isOrthogonal){e=C.allocAt(n,h),i=C.alloc(),i.assign(this.i(1)),o=C.allocAt(n,h),r=C.allocAt(n,h),l=this.i(0);for(var f,c=this.smoothness/3,p=1;p<this.pointsCount-1;p++){f=this.i(p);var g=l,m=f,v=this.i(xv(this,f,p,!1));if((!A.$(g.x,m.x)||!A.$(m.x,v.x))&&(!A.$(g.y,m.y)||!A.$(m.y,v.y))){var x=c;isNaN(x)&&(x=this.smoothness/3);var k=g.x;g=g.y;var S=m.x;m=m.y;var P=v.x;v=v.y;var N=x*Kd(k,g,S,m);x*=Kd(S,m,P,v),A.$(g,m)&&A.$(S,P)&&(S>k?v>m?(o.x=S-N,o.y=m-N,r.x=S+x,r.y=m+x):(o.x=S-N,o.y=m+N,r.x=S+x,r.y=m-x):v>m?(o.x=S+N,o.y=m-N,r.x=S-x,r.y=m+x):(o.x=S+N,o.y=m+N,r.x=S-x,r.y=m-x)),A.$(k,S)&&A.$(m,v)&&(m>g?(P>S?(o.x=S-N,o.y=m-N,r.x=S+x):(o.x=S+N,o.y=m-N,r.x=S-x),r.y=m+x):(P>S?(o.x=S-N,o.y=m+N,r.x=S+x):(o.x=S+N,o.y=m+N,r.x=S-x),r.y=m-x)),(A.$(k,S)&&A.$(S,P)||A.$(g,m)&&A.$(m,v))&&(k=.5*(k+P),g=.5*(g+v),o.x=k,o.y=g,r.x=k,r.y=g),(p===1||p===2&&A.$(l.x,this.i(0).x)&&A.$(l.y,this.i(0).y))&&(i.x=.5*(l.x+f.x),i.y=.5*(l.y+f.y)),bo(u,i.x-n,i.y-h,o.x-n,o.y-h,f.x-n,f.y-h),e.set(o),i.set(r),l=f}}f=l.x,l=l.y,c=this.i(this.pointsCount-1),this.computeShortLength(!1)!==0&&(c=mu(this,c.copy(),!1,co)),f=.5*(f+c.x),l=.5*(l+c.y),bo(u,r.x-n,r.y-h,f-n,l-h,c.x-n,c.y-h),C.free(e),C.free(i),C.free(o),C.free(r)}else for(i=3;i<e;i+=3)o=this.i(i-2),i+3>=e&&(i=e-1),r=this.i(i-1),l=this.i(i),i===e-1&&this.computeShortLength(!1)!==0&&(l=mu(this,l.copy(),!1,co)),bo(u,o.x-n,o.y-h,r.x-n,r.y-h,l.x-n,l.y-h);else{for(o=C.alloc(),o.assign(this.i(0)),r=C.alloc(),r.assign(o),l=this.computeCorner(),p=1,f=0;p<e;){if(p=xv(this,o,p,1<p),c=this.i(p),p>=e-1){if(!o.D(c))this.computeShortLength(!1)!==0&&(c=mu(this,c.copy(),!1,co)),vu(this,u,-n,-h,o,c,i);else if(f===0)for(p=1;p<e;)r.assign(o),c=this.i(p++),vu(this,u,-n,-h,o,c,i),o.assign(c);break}if(f=xv(this,c,p+1,p<e-3),p=-n,k=-h,g=c,S=this.i(f),x=i,A.B(o.y,g.y)&&A.B(g.x,S.x))if(v=Math.min(l,Math.abs(g.x-r.x)/2),v=N=Math.min(v,Math.abs(S.y-g.y)/2),A.B(v,0))vu(this,u,p,k,o,g,x),o.assign(g);else{var T=g.x,F=g.y;m=T,P=F,g.x>o.x?T=g.x-v:T=g.x+v,S.y>g.y?P=g.y+N:P=g.y-N,S=C.allocAt(T,F),vu(this,u,p,k,o,S,x),C.free(S),Ed(u,g.x+p,g.y+k,m+p,P+k),o.h(m,P)}else A.B(o.x,g.x)&&A.B(g.y,S.y)?(v=Math.min(l,Math.abs(g.y-r.y)/2),v=N=Math.min(v,Math.abs(S.x-g.x)/2),A.B(N,0)?(vu(this,u,p,k,o,g,x),o.assign(g)):(T=g.x,F=g.y,m=T,P=F,g.y>o.y?F=g.y-v:F=g.y+v,S.x>g.x?m=g.x+N:m=g.x-N,S=C.allocAt(T,F),vu(this,u,p,k,o,S,x),C.free(S),Ed(u,g.x+p,g.y+k,m+p,P+k),o.h(m,P))):(vu(this,u,p,k,o,g,x),o.assign(g));r.assign(c),p=f}C.free(o)}Bd=u}else u=this.i(1).copy(),u.x-=n,u.y-=h,this.computeShortLength(!0)!==0&&(r=mu(this,r,!0,o)),this.computeShortLength(!1)!==0&&(u=mu(this,u,!1,o)),t.type=H.o,t.startX=r.x,t.startY=r.y,t.endX=u.x,t.endY=u.y;return this.kk=!0,t};function Kd(t,e,i,n){return t=i-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=n-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),A.$(t,0)?e:A.$(e,0)?t:Math.sqrt(t*t+e*e)))}function mu(t,e,i,n){var r=t.pointsCount;if(2>r)return e;if(i){var o=t.i(1);if(i=o.x-n.x,o=o.y-n.y,n=Kd(e.x,e.y,i,o),n===0)return e;r=r===2?.5*n:n,t=t.computeShortLength(!0),t>r&&(t=r),r=t*(o-e.y)/n,e.x+=t*(i-e.x)/n,e.y+=r}else{if(o=t.i(r-2),i=o.x-n.x,o=o.y-n.y,n=Kd(e.x,e.y,i,o),n===0)return e;r=r===2?.5*n:n,t=t.computeShortLength(!1),t>r&&(t=r),r=t*(e.y-o)/n,e.x-=t*(e.x-i)/n,e.y-=r}return e}function xv(t,e,i,n){for(var r=t.pointsCount,o=e;A.$(e.x,o.x)&&A.$(e.y,o.y);){if(i>=r)return r-1;o=t.i(i++)}if(!A.$(e.x,o.x)&&!A.$(e.y,o.y))return i-1;for(var l=o;A.$(e.x,o.x)&&A.$(o.x,l.x)&&(!n||(e.y>=o.y?o.y>=l.y:o.y<=l.y))||A.$(e.y,o.y)&&A.$(o.y,l.y)&&(!n||(e.x>=o.x?o.x>=l.x:o.x<=l.x));){if(i>=r)return r-1;l=t.i(i++)}return i-2}V.prototype.computeJumpLength=function(){return 10};function vu(t,e,i,n,r,o,l){if(!l&&gl(t)){l=t.computeJumpLength();var u=l/2,h=[],f=0;if(t.isVisible()&&(f=MT(t,r,o,h)),0<f){if(A.B(r.y,o.y))if(r.x<o.x)for(var c=0;c<f;){var p=Math.max(r.x,Math.min(h[c++]-u,o.x-l));e.lineTo(p+i,o.y+n);for(var g=p+i,m=Math.min(p+l,o.x);c<f&&(p=h[c],p<m+l);)c++,m=Math.min(p+u,o.x);p=o.y-l+n,m+=i;var v=o.y+n;t.curve===ko?Vh(e,m,v,!1):bo(e,g,p,m,p,m,v)}else for(--f;0<=f;){for(c=Math.min(r.x,Math.max(h[f--]+u,o.x+l)),e.lineTo(c+i,o.y+n),g=c+i,p=Math.max(c-l,o.x);0<=f&&(c=h[f],c>p-l);)f--,p=Math.max(c-u,o.x);c=o.y-l+n,p+=i,m=o.y+n,t.curve===ko?Vh(e,p,m,!1):bo(e,g,c,p,c,p,m)}else if(A.B(r.x,o.x))if(r.y<o.y)for(c=0;c<f;){for(p=Math.max(r.y,Math.min(h[c++]-u,o.y-l)),e.lineTo(o.x+i,p+n),g=p+n,p=Math.min(p+l,o.y);c<f&&(m=h[c],m<p+l);)c++,p=Math.min(m+u,o.y);m=o.x-l+i,v=o.x+i,p+=n,t.curve===ko?Vh(e,v,p,!1):bo(e,m,g,m,p,v,p)}else for(--f;0<=f;){for(c=Math.min(r.y,Math.max(h[f--]+u,o.y+l)),e.lineTo(o.x+i,c+n),g=c+n,c=Math.max(c-l,o.y);0<=f&&(p=h[f],p>c-l);)f--,c=Math.max(p-u,o.y);p=o.x-l+i,m=o.x+i,c+=n,t.curve===ko?Vh(e,m,c,!1):bo(e,p,g,p,c,m,c)}}}e.lineTo(o.x+i,o.y+n)}function MT(t,e,i,n){var r=t.diagram;if(r===null||e.D(i))return 0;for(r=r.layers;r.next();){var o=r.value;if(o!==null&&o.visible){o=o.Pa.s;for(var l=o.length,u=0;u<l;u++){var h=o[u];if(h instanceof V){if(h===t)return 0<n.length&&n.sort(function(c,p){return c-p}),n.length;if(h.isVisible()&&gl(h)){var f=h.routeBounds;f.w()&&t.routeBounds.Yc(f)&&!t.usesSamePort(h)&&(f=h.path,f!==null&&f.Ed()&&ST(e,i,n,h))}}}}}return 0<n.length&&n.sort(function(c,p){return c-p}),n.length}function ST(t,e,i,n){for(var r=A.B(t.y,e.y),o=n.pointsCount,l=n.i(0),u=C.alloc(),h=1;h<o;h++){var f=n.i(h);if(h<o-1){var c=n.i(h+1);if(l.y===f.y&&f.y===c.y){if(f.x>l.x&&c.x>=f.x||f.x<l.x&&c.x<=f.x)continue}else if(l.x===f.x&&f.x===c.x&&(f.y>l.y&&c.y>=f.y||f.y<l.y&&c.y<=f.y))continue}t:{c=t.x;var p=t.y,g=e.x,m=e.y,v=l.x;l=l.y;var x=f.x,k=f.y;if(A.B(c,g)){if(!A.B(p,m)&&A.B(l,k)&&Math.min(p,m)<l&&Math.max(p,m)>l&&Math.min(v,x)<c&&Math.max(v,x)>c&&!A.B(v,x)){u.x=c,u.y=l,c=!0;break t}}else if(A.B(p,m)&&A.B(v,x)&&Math.min(c,g)<v&&Math.max(c,g)>v&&Math.min(l,k)<p&&Math.max(l,k)>p&&!A.B(l,k)){u.x=v,u.y=p,c=!0;break t}u.x=0,u.y=0,c=!1}c&&(r?i.push(u.x):i.push(u.y)),l=f}C.free(u)}function gl(t){return t=t.curve,t===Mu||t===ko}function _d(t,e){(e||gl(t))&&(e=t.diagram,e===null||e.animationManager.isTicking||e.Eh.contains(t)||t.ml.width===0&&t.ml.height===0||e.Eh.add(t,t.ml.copy()))}V.prototype.Yo=function(t){var e=this.layer;if(e!==null&&e.visible&&!e.isTemporary){var i=e.diagram;if(i!==null&&!i.animationManager.isTicking){var n=!1;for(i=i.layers;i.next();){var r=i.value;if(r.visible){if(r===e){n=!0;var o=!1;r=r.Pa.s;for(var l=r.length,u=0;u<l;u++){var h=r[u];h instanceof V&&(h===this?o=!0:o&&bS(this,h,t))}}else if(n)for(o=r.Pa.s,r=o.length,l=0;l<r;l++)u=o[l],u instanceof V&&bS(this,u,t)}}}}};function bS(t,e,i){if(e!==null&&e.kk&&e.fd&&gl(e)){var n=e.routeBounds;n.w()&&(t.routeBounds.Yc(n)||i.Yc(n))&&(t.usesSamePort(e)||e.rc())}}V.prototype.usesSamePort=function(t){var e=this.pointsCount,i=t.pointsCount;if(0<e&&0<i){var n=this.i(0),r=t.i(0);if(n.Xa(r)||(e=this.i(e-1),t=t.i(i-1),e.Xa(t)||n.Xa(t)||e.Xa(r)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},V.prototype.isVisible=function(){if(!ot.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,i=this.diagram;if(i!==null&&(e=i.isTreePathToChildren),i=this.fromNode,i!==null){if(this.isTreeLink&&e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(var n=i;n!==null;){if(n.labeledLink===this)return!0;n=n.containingGroup}if(i=i.findVisibleNode(),i===null||i===t)return!1}if(i=this.toNode,i!==null){if(this.isTreeLink&&!e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(e=i;e!==null;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(e=i.findVisibleNode(),e===null||e===t)return!1}return!0},V.prototype.bc=function(t){if(ot.prototype.bc.call(this,t),t&&_d(this,!1),this.Sf!==null&&this.Sf.Sl(),this.wd!==null)for(var e=this.wd.iterator;e.next();)e.value.bc(t)},V.prototype.computeAdjusting=function(){return this.isAvoiding&&this.diagram!==null&&this.diagram.animationManager.defaultAnimation.isAnimating?Gh:this.pk};function Of(t){var e=t.ef;if(e!==null){var i=t.uf;if(i!==null&&isNaN(t.curviness)){for(var n=t.ff,r=t.vf,o=t=null,l=e.jb.s,u=l.length,h=0;h<u;h++){var f=l[h];(f.ef===e&&f.ff===n&&f.uf===i&&f.vf===r||f.ef===i&&f.ff===r&&f.uf===e&&f.vf===n)&&(o===null?o=f:(t===null&&(t=[],t.push(o)),t.push(f)))}if(t!==null){for(o=VS(e,i,n,r),o===null&&(o=new Zd(e,n,i,r),zS(e,o),zS(i,o)),o.links=t,e=0;e<t.length;e++)t[e].Sf=o;o.Sl()}}}}function If(t){var e=t.Sf;e!==null&&isNaN(t.curviness)&&(t.Sf=null,t=e.links.indexOf(t),0<=t&&(Mr(e.links,t),e.Sl()))}V.prototype.ph=function(){return!0},Y.Object.defineProperties(V.prototype,{fromNode:{get:function(){return this.ef},set:function(t){var e=this.ef;if(e!==t){var i=this.fromPort;e!==null&&(this.uf!==e&&Ud(e,this,i),If(this),this.C(2)),this.ef=t,t!==null&&this.bc(t.isVisible()),this.Wf=null,this.bb();var n=this.diagram;n!==null&&n.aa&&n.partManager.setFromNodeForLink(this,t,e);var r=this.fromPort,o=this.fromPortChanged;if(o!==null){var l=!0;n!==null&&(l=n.aa,n.aa=!0),o(this,i,r),n!==null&&(n.aa=l)}t!==null&&(this.uf!==t&&Vd(t,this,r),Of(this),this.C(1)),this.g("fromNode",e,t),Uh(this)}}},fromPortId:{get:function(){return this.ff},set:function(t){var e=this.ff;if(e!==t){var i=this.fromPort;i!==null&&Ui(i),If(this),this.ff=t;var n=this.fromPort;n!==null&&Ui(n);var r=this.diagram;if(r!==null){var o=this.data,l=r.model;o!==null&&l.si()&&l.zv(o,t)}i!==n&&(this.Wf=null,this.bb(),o=this.fromPortChanged,o!==null&&(l=!0,r!==null&&(l=r.aa,r.aa=!0),o(this,i,n),r!==null&&(r.aa=l))),Of(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.ef;return t===null?null:t.ns(this.ff)}},fromPortChanged:{get:function(){return this.hn},set:function(t){var e=this.hn;e!==t&&(this.hn=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.uf},set:function(t){var e=this.uf;if(e!==t){var i=this.toPort;e!==null&&(this.ef!==e&&Ud(e,this,i),If(this),this.C(2)),this.uf=t,t!==null&&this.bc(t.isVisible()),this.Wf=null,this.bb();var n=this.diagram;n!==null&&n.aa&&n.partManager.setToNodeForLink(this,t,e);var r=this.toPort,o=this.toPortChanged;if(o!==null){var l=!0;n!==null&&(l=n.aa,n.aa=!0),o(this,i,r),n!==null&&(n.aa=l)}t!==null&&(this.ef!==t&&Vd(t,this,r),Of(this),this.C(1)),this.g("toNode",e,t),Uh(this)}}},toPortId:{get:function(){return this.vf},set:function(t){var e=this.vf;if(e!==t){var i=this.toPort;i!==null&&Ui(i),If(this),this.vf=t;var n=this.toPort;n!==null&&Ui(n);var r=this.diagram;if(r!==null){var o=this.data,l=r.model;o!==null&&l.si()&&l.Ev(o,t)}i!==n&&(this.Wf=null,this.bb(),o=this.toPortChanged,o!==null&&(l=!0,r!==null&&(l=r.aa,r.aa=!0),o(this,i,n),r!==null&&(r.aa=l))),Of(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.uf;return t===null?null:t.ns(this.vf)}},toPortChanged:{get:function(){return this.vo},set:function(t){var e=this.vo;e!==t&&(this.vo=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return this.ba!==null?this.ba.Yi:_e},set:function(t){var e=this.fromSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.Yi=t,this.g("fromSpot",e,t),(e.$c()||t.$c())&&this.fromNode!==null&&Ui(this.fromPort),this.bb())}},fromEndSegmentLength:{get:function(){return this.ba!==null?this.ba.Wi:NaN},set:function(t){var e=this.fromEndSegmentLength;e!==t&&(0>t&&at(t,">= 0",V,"fromEndSegmentLength"),this.Xc(),this.ba.Wi=t,this.g("fromEndSegmentLength",e,t),this.bb())}},fromShortLength:{get:function(){return this.ba!==null?this.ba.Xi:NaN},set:function(t){var e=this.fromShortLength;e!==t&&(this.Xc(),this.ba.Xi=t,this.rc(),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return this.ba!==null?this.ba.zj:_e},set:function(t){var e=this.toSpot;e.D(t)||(t=t.J(),this.Xc(),this.ba.zj=t,this.g("toSpot",e,t),(e.$c()||t.$c())&&this.toNode!==null&&Ui(this.toPort),this.bb())}},toEndSegmentLength:{get:function(){return this.ba!==null?this.ba.xj:NaN},set:function(t){var e=this.toEndSegmentLength;e!==t&&(0>t&&at(t,">= 0",V,"toEndSegmentLength"),this.Xc(),this.ba.xj=t,this.g("toEndSegmentLength",e,t),this.bb())}},toShortLength:{get:function(){return this.ba!==null?this.ba.yj:NaN},set:function(t){var e=this.toShortLength;e!==t&&(this.Xc(),this.ba.yj=t,this.rc(),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return this.wd===null?!1:0<this.wd.count}},labelNodes:{get:function(){return this.wd===null?Kn:this.wd.iterator}},relinkableFrom:{get:function(){return(this.Qa&1)!==0},set:function(t){var e=(this.Qa&1)!==0;e!==t&&(this.Qa^=1,this.g("relinkableFrom",e,t),this.Zb())}},relinkableTo:{get:function(){return(this.Qa&2)!==0},set:function(t){var e=(this.Qa&2)!==0;e!==t&&(this.Qa^=2,this.g("relinkableTo",e,t),this.Zb())}},resegmentable:{get:function(){return(this.Qa&4)!==0},set:function(t){var e=(this.Qa&4)!==0;e!==t&&(this.Qa^=4,this.g("resegmentable",e,t),this.Zb())}},isTreeLink:{get:function(){return(this.Qa&8)!==0},set:function(t){var e=(this.Qa&8)!==0;e!==t&&(this.Qa^=8,this.g("isTreeLink",e,t),this.fromNode!==null&&jf(this.fromNode),this.toNode!==null&&jf(this.toNode))}},path:{get:function(){var t=this.Qb();return t instanceof yt?t:null}},routeBounds:{get:function(){this.vg();var t=this.ml,e=1/0,i=1/0,n=this.pointsCount;if(n===0)t.h(NaN,NaN,0,0);else{if(n===1)n=this.i(0),e=Math.min(n.x,e),i=Math.min(n.y,i),t.h(n.x,n.y,0,0);else if(n===2){n=this.i(0);var r=this.i(1);e=Math.min(n.x,r.x),i=Math.min(n.y,r.y),t.h(n.x,n.y,0,0),t.Ye(r)}else if(this.computeCurve()===Yi&&3<=n&&!this.isOrthogonal)if(r=this.i(0),e=r.x,i=r.y,t.h(e,i,0,0),n===3){n=this.i(1),e=Math.min(n.x,e),i=Math.min(n.y,i);var o=this.i(2);e=Math.min(o.x,e),i=Math.min(o.y,i),A.Dl(r.x,r.y,n.x,n.y,n.x,n.y,o.x,o.y,.5,t)}else for(o=3;o<n;o+=3){var l=this.i(o-2);o+3>=n&&(o=n-1);var u=this.i(o-1),h=this.i(o);A.Dl(r.x,r.y,l.x,l.y,u.x,u.y,h.x,h.y,.5,t),e=Math.min(h.x,e),i=Math.min(h.y,i),r=h}else for(r=this.i(0),o=this.i(1),e=Math.min(r.x,o.x),i=Math.min(r.y,o.y),t.h(r.x,r.y,0,0),t.Ye(o),r=2;r<n;r++)o=this.i(r),e=Math.min(o.x,e),i=Math.min(o.y,i),t.Ye(o);this.tu.h(e-t.x,i-t.y)}return t}},midPoint:{get:function(){return this.vg(),this.computeMidPoint(new C)}},midAngle:{get:function(){return this.vg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(this.cq===null){this.fd||Gd(this);for(var t=this.cq=[],e=this.pointsCount,i=0;i<e-1;i++){var n=this.i(i),r=this.i(i+1);A.$(n.x,r.x)?(n=r.y-n.y,0>n&&(n=-n)):A.$(n.y,r.y)?(n=r.x-n.x,0>n&&(n=-n)):n=Math.sqrt(n.Bf(r)),t.push(n)}}return this.cq}},flattenedTotalLength:{get:function(){var t=this.wt;if(isNaN(t)){for(var e=this.flattenedLengths,i=e.length,n=t=0;n<i;n++)t+=e[n];this.wt=t}return t}},points:{get:function(){return this.Ob},set:function(t){var e=this.Ob;if(e!==t){var i=null;if(Array.isArray(t)){var n=t.length%2===0;if(n){for(var r=0;r<t.length;r++)if(typeof t[r]!="number"||isNaN(t[r])){n=!1;break}}if(n)for(i=new q,n=0;n<t.length/2;n++)r=new C(t[2*n],t[2*n+1]).freeze(),i.add(r);else{for(n=!0,r=0;r<t.length;r++){var o=t[r];if(!gt(o)||typeof o.x!="number"||isNaN(o.x)||typeof o.y!="number"||isNaN(o.y)){n=!1;break}}if(n)for(i=new q,n=0;n<t.length;n++)r=t[n],i.add(new C(r.x,r.y).freeze())}}else if(t instanceof q)for(i=t.copy(),t=i.iterator;t.next();)t.value.freeze();else O("Link.points value is not an instance of List or Array: "+t);i.freeze(),this.Ob=i,this.rc(),Gd(this),t=this.diagram,t!==null&&(t.ri||t.undoManager.isUndoingRedoing||t.As.add(this),t.animationManager.Ab&&K0(t.animationManager,this,i)),this.g("points",e,i)}}},pointsCount:{get:function(){return this.Ob.count}},fd:{get:function(){return(this.Qa&16)!==0},set:function(t){(this.Qa&16)!==0!==t&&(this.Qa^=16)}},suspendsRouting:{get:function(){return(this.Qa&32)!==0},set:function(t){(this.Qa&32)!==0!==t&&(this.Qa^=32)}},computingPoints:{get:function(){return(this.Qa&64)!==0},set:function(t){(this.Qa&64)!==0!==t&&(this.Qa^=64)}},defaultFromPoint:{get:function(){return this.o},set:function(t){this.o=t.copy()}},defaultToPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},isOrthogonal:{get:function(){return(this.rj.value&2)===2}},isAvoiding:{get:function(){return(this.rj.value&4)===4}},kk:{get:function(){return(this.Qa&128)!==0},set:function(t){(this.Qa&128)!==0!==t&&(this.Qa^=128)}},geometry:{get:function(){if(!this.kk){if(this.vg(),2>this.pointsCount)return this.kk=!0,this.ua;this.ua=this.makeGeometry()}return this.ua}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!Yh(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return t===0?0:2>=t?t-1:this.isOrthogonal||!Yh(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.pk},set:function(t){var e=this.pk;e!==t&&(this.pk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.Pm},set:function(t){var e=this.Pm;e!==t&&(this.Pm=t,this.rc(),this.g("corner",e,t))}},curve:{get:function(){return this.Rm},set:function(t){var e=this.Rm;e!==t&&(this.Rm=t,this.bb(),this.rc(),_d(this,e===ko||e===Mu||t===ko||t===Mu),this.g("curve",e,t))}},curviness:{get:function(){return this.Sm},set:function(t){var e=this.Sm;e!==t&&(this.Sm=t,this.bb(),this.rc(),this.g("curviness",e,t))}},routing:{get:function(){return this.rj},set:function(t){var e=this.rj;e!==t&&(this.rj=t,this.Wf=null,this.bb(),_d(this,(e.value&2)===2||(t.value&2)===2),this.g("routing",e,t))}},smoothness:{get:function(){return this.qo},set:function(t){var e=this.qo;e!==t&&(this.qo=t,this.rc(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(t!==null&&t.model.si())return t.model.Ac(this.data)}}}),V.prototype.invalidateOtherJumpOvers=V.prototype.Yo,V.prototype.findClosestSegment=V.prototype.jz,V.prototype.updateRoute=V.prototype.vg,V.prototype.invalidateRoute=V.prototype.bb,V.prototype.rollbackRoute=V.prototype.tv,V.prototype.commitRoute=V.prototype.zf,V.prototype.startRoute=V.prototype.uh,V.prototype.clearPoints=V.prototype.Fj,V.prototype.removePoint=V.prototype.rv,V.prototype.addPointAt=V.prototype.yf,V.prototype.addPoint=V.prototype.ne,V.prototype.insertPointAt=V.prototype.m,V.prototype.insertPoint=V.prototype.Pz,V.prototype.setPointAt=V.prototype.L,V.prototype.setPoint=V.prototype.dd,V.prototype.getPoint=V.prototype.i,V.prototype.getOtherPort=V.prototype.Hz,V.prototype.getOtherNode=V.prototype.Uo;var xu=null,wu=null,Wd=new K(V,"Normal",1),t2=new K(V,"Orthogonal",2),e2=new K(V,"AvoidsNodes",6),i2=new K(V,"AvoidsNodesStraight",7),Ye=new K(V,"None",0),Yi=new K(V,"Bezier",9),ko=new K(V,"JumpGap",10),Mu=new K(V,"JumpOver",11),Gh=new K(V,"End",17),Ef=new K(V,"Scale",18),Bf=new K(V,"Stretch",19),Hh=new K(V,"OrientAlong",21),Xh=new K(V,"OrientPlus90",22),Kh=new K(V,"OrientMinus90",23),$d=new K(V,"OrientOpposite",24),Rf=new K(V,"OrientUpright",25),_h=new K(V,"OrientPlus90Upright",26),Wh=new K(V,"OrientMinus90Upright",27),zf=new K(V,"OrientUpright45",28),n2=16,r2=14,Vf=8;V.className="Link",V.Normal=Wd,V.Orthogonal=t2,V.AvoidsNodes=e2,V.AvoidsNodesStraight=i2,V.None=Ye,V.Bezier=Yi,V.JumpGap=ko,V.JumpOver=Mu,V.End=Gh,V.Scale=Ef,V.Stretch=Bf,V.OrientAlong=Hh,V.OrientPlus90=Xh,V.OrientMinus90=Kh,V.OrientOpposite=$d,V.OrientUpright=Rf,V.OrientPlus90Upright=_h,V.OrientMinus90Upright=Wh,V.OrientUpright45=zf,V.EndSegmentStep=8,V.CurvinessStart=n2,V.SpacingMin=r2,V.OrthoShortCut=Vf;function Zd(t,e,i,n){Te(this),this.Fe=this.qq=!1,this.Ds=t,this.Qx=e,this.fv=i,this.Rx=n,this.links=[]}Zd.prototype.Sl=function(){if(!this.qq){var t=this.links;0<t.length&&(t=t[0].diagram,t!==null&&(t.qw.add(this),this.Fe=t.undoManager.isUndoingRedoing))}this.qq=!0},Zd.prototype.Pv=function(){if(this.qq){this.qq=!1;var t=this.links;if(0<t.length){var e=t[0],i=e.diagram;i=i===null||i.ri&&!this.Fe,this.Fe=!1,e.arrangeBundledLinks(t,i),t.length===1&&(e.Sf=null,t.length=0)}t.length===0&&(t=this.Ds,this!==null&&t.af!==null&&t.af.remove(this),t=this.fv,this!==null&&t.af!==null&&t.af.remove(this))}},Zd.className="LinkBundle";function Uf(t){Te(this),this.$x=this.group=null,this.vs=!0,this.abort=!1,this.Od=this.Nd=1,this.Gn=this.Fn=-1,this.sc=t.width,this.tc=t.height,this.cc=null,this.ei=this.di=0,this.Ps=11,this.Kx=this.Jx=22}Uf.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,i=t.x+t.width,n=t.y+t.height;if(this.Nd=Math.floor((t.x-this.sc)/this.sc)*this.sc,this.Od=Math.floor((e-this.tc)/this.tc)*this.tc,this.Fn=Math.ceil((i+2*this.sc)/this.sc)*this.sc,this.Gn=Math.ceil((n+2*this.tc)/this.tc)*this.tc,t=1+(Math.ceil((this.Fn-this.Nd)/this.sc)|0),e=1+(Math.ceil((this.Gn-this.Od)/this.tc)|0),this.cc===null||this.di<t-1||this.ei<e-1){for(i=[],n=0;n<=t;n++)i[n]=new Uint32Array(e);this.cc=i,this.di=t-1,this.ei=e-1}if(t=wv,this.cc!==null)for(e=0;e<=this.di;e++)if(i=this.cc[e],i.fill)i.fill(t);else for(n=0;n<=this.ei;n++)i[n]=t}};function $h(t,e,i){return t.Nd<=e&&e<=t.Fn&&t.Od<=i&&i<=t.Gn}function Qr(t,e,i){return $h(t,e,i)?(e-=t.Nd,e/=t.sc,i-=t.Od,i/=t.tc,t.cc[e|0][i|0]):wv}function o2(t){if(t.cc!==null)for(var e=0;e<=t.di;e++)for(var i=t.cc[e],n=0;n<=t.ei;n++)i[n]>=yl&&(i[n]=wv)}Uf.prototype.Xj=function(t,e,i,n){if(t>this.Fn||t+i<this.Nd||e>this.Gn||e+n<this.Od)return!0;t=(t-this.Nd)/this.sc|0,e=(e-this.Od)/this.tc|0,i=Math.max(0,i)/this.sc+1|0;var r=Math.max(0,n)/this.tc+1|0;if(0>t&&(i+=t,t=0),0>e&&(r+=e,e=0),0>i||0>r)return!0;for(n=Math.min(t+i-1,this.di)|0,i=Math.min(e+r-1,this.ei)|0;t<=n;t++){r=this.cc[t];for(var o=e;o<=i;o++)if(r[o]===ns)return!1}return!0};function Jr(t,e,i,n,r,o,l,u,h){if(!(e<o||e>l||i<u||i>h)){var f=e|0,c=i|0,p=t.cc[f][c];if(p>=yl&&p<Zh)for(r?c+=n:f+=n,p+=1;o<=f&&f<=l&&u<=c&&c<=h&&!(p>=t.cc[f][c]);)t.cc[f][c]=p,p+=1,r?c+=n:f+=n;if(f=r?c:f,r)if(0<n)for(i+=n;i<f;i+=n)Jr(t,e,i,1,!r,o,l,u,h),Jr(t,e,i,-1,!r,o,l,u,h);else for(i+=n;i>f;i+=n)Jr(t,e,i,1,!r,o,l,u,h),Jr(t,e,i,-1,!r,o,l,u,h);else if(0<n)for(e+=n;e<f;e+=n)Jr(t,e,i,1,!r,o,l,u,h),Jr(t,e,i,-1,!r,o,l,u,h);else for(e+=n;e>f;e+=n)Jr(t,e,i,1,!r,o,l,u,h),Jr(t,e,i,-1,!r,o,l,u,h)}}function Qd(t,e,i,n,r,o,l,u,h){e|=0,i|=0;var f=ns,c=yl;for(t.cc[e][i]=c;f===ns&&e>o&&e<l&&i>u&&i<h;)c+=1,t.cc[e][i]=c,r?i+=n:e+=n,f=t.cc[e][i]}function Jd(t,e,i,n,r,o,l,u,h){e|=0,i|=0;var f=ns,c=Zh;for(t.cc[e][i]=c;f===ns&&e>o&&e<l&&i>u&&i<h;)t.cc[e][i]=c,r?i+=n:e+=n,f=t.cc[e][i]}function s2(t,e,i,n,r,o,l){if(t.cc!==null){t.abort=!1;var u=e.x,h=e.y;if($h(t,u,h)){u-=t.Nd,u/=t.sc,h-=t.Od,h/=t.tc;var f=n.x,c=n.y;if($h(t,f,c))if(f-=t.Nd,f/=t.sc,c-=t.Od,c/=t.tc,1>=Math.abs(u-f)&&1>=Math.abs(h-c))t.abort=!0;else{var p=o.x;n=o.y,e=o.x+o.width;var g=o.y+o.height;p-=t.Nd,p/=t.sc,n-=t.Od,n/=t.tc,e-=t.Nd,e/=t.sc,g-=t.Od,g/=t.tc,o=Math.max(0,Math.min(t.di,p|0)),e=Math.min(t.di,Math.max(0,e|0)),p=Math.max(0,Math.min(t.ei,n|0)),g=Math.min(t.ei,Math.max(0,g|0)),n=t.cc,u|=0,h|=0,f|=0,c|=0;var m=i===0||i===90?1:-1;if(i=i===90||i===270,n[u][h]===ns?(Qd(t,u,h,m,i,o,e,p,g),Qd(t,u,h,1,!i,o,e,p,g),Qd(t,u,h,-1,!i,o,e,p,g)):Qd(t,u,h,m,i,u,h,u,h),n[f][c]===ns?(Jd(t,f,c,r===0||r===90?1:-1,r===90||r===270,o,e,p,g),Jd(t,f,c,1,!(r===90||r===270),o,e,p,g),Jd(t,f,c,-1,!(r===90||r===270),o,e,p,g)):Jd(t,f,c,m,i,f,c,f,c),i=Rt(),l&&l2(t,f,c,r,u,h,i))for((i[0]!==f||i[1]!==c)&&(i.unshift(c),i.unshift(f)),(i[i.length-2]!==u||i[i.length-1]!==h)&&(i.push(u),i.push(h)),t=yl,r=i[i.length-2],l=i[i.length-1],n[r][l]=t++,o=i.length-4;0<=o;o-=2)for(r=i[o+2],l=i[o+3],e=i[o],f=i[o+1];e>r?r++:e<r?r--:f>l?l++:f<l&&l--,n[r][l]=t++,r!==e||l!==f;);else Jr(t,u,h,1,!1,o,e,p,g),Jr(t,u,h,-1,!1,o,e,p,g),Jr(t,u,h,1,!0,o,e,p,g),Jr(t,u,h,-1,!0,o,e,p,g);Bt(i)}}}}function l2(t,e,i,n,r,o,l){for(var u=t.cc,h=e,f=i;;){if(h===r&&f===o)return!0;var c=h,p=f;if(n===0)if(c<r)c++;else break;else if(n===90)if(p<o)p++;else break;else if(n===180)if(c>r)c--;else break;else if(p>o)p--;else break;var g=u[c][p];if(g===0||g===Mv)break;h=c,f=p}for(;;){if(c=n,p=h,g=f,n===0?g<o?(c=90,g++):g>o&&(c=270,g--):n===90?p<r?(c=0,p++):p>r&&(c=180,p--):n===180?g<o?(c=90,g++):g>o&&(c=270,g--):p<r?(c=0,p++):p>r&&(c=180,p--),p=u[p][g],c!==n&&p!==0&&p!==Mv){if(l.push(h),l.push(f),l2(t,h,f,c,r,o,l))return!0;l.pop(),l.pop()}if(u[h][f]=Mv,n===0){if(h===e)return!1;h--}else if(n===90){if(f===i)return!1;f--}else if(n===180){if(h===e)return!1;h++}else{if(f===i)return!1;f++}}}Y.Object.defineProperties(Uf.prototype,{bounds:{get:function(){return new E(this.Nd,this.Od,this.Fn-this.Nd,this.Gn-this.Od)}},Io:{get:function(){return this.sc},set:function(t){0<t&&t!==this.sc&&(this.sc=t,this.initialize(this.bounds))}},Ho:{get:function(){return this.tc},set:function(t){0<t&&t!==this.tc&&(this.tc=t,this.initialize(this.bounds))}}});var ns=0,yl=1,Zh=999999,wv=Zh+1,Mv=Zh+2;Uf.className="PositionArray";function Su(){Te(this),this.port=this.node=null,this.pe=[],this.bp=!1}Su.prototype.toString=function(){for(var t=this.pe,e=this.node.toString()+" "+t.length.toString()+":",i=0;i<t.length;i++){var n=t[i];n!==null&&(e+=`
  `+n.toString())}return e};function kT(t,e,i,n){switch(e=e.offsetY,e){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<i?270:90;case 6:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return i>t&&i<=180+t?180:270;case 5:return i>180-t&&i<=360-t?270:0;case 12:return i>t&&i<=180+t?90:0;case 10:return i>180-t&&i<=360-t?180:90;case 7:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case 13:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case 14:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case 11:return i>180-t&&i<=180+t?180:i>180+t?270:90}return n&&e!==15&&(i-=15,0>i&&(i+=360)),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}Su.prototype.Sl=function(){this.pe.length=0};function u2(t,e){var i=t.pe;if(i.length===0){t:if(!t.bp){i=t.bp,t.bp=!0;var n=null,r=t.node,o=r instanceof dt?r:null;if(o===null||o.isSubGraphExpanded)var l=r.isTreeExpanded?r.findLinksConnected(t.port.portId):r.tx();else{if(!o.actualBounds.w()){t.bp=i;break t}n=o,l=n.Nu()}o=t.pe.length=0;var u=t.port.ga(Je,C.alloc()),h=t.port.ga(Yr,C.alloc());for(r=E.allocAt(u.x,u.y,0,0),r.Ye(h),C.free(u),C.free(h),u=C.allocAt(r.x+r.width/2,r.y+r.height/2),h=t.port.mi(),l=l.iterator;l.next();){var f=l.value;if(f.isVisible()&&f.fromPort!==f.toPort){var c=f.fromPort===t.port||f.fromNode!==null&&f.fromNode.Td(n),p=f.computeSpot(c,t.port);if(p.$c()&&(c=c?f.toPort:f.fromPort,c!==null)){var g=c.part;if(g!==null){var m=g.findVisibleNode();m!==null&&m!==g&&(g=m,c=g.port),c=f.computeOtherPoint(g,c),g=u.ab(c),g-=h,0>g?g+=360:360<=g&&(g-=360),p=kT(r,p,g,f.isOrthogonal),p===0?(p=4,180<g&&(g-=360)):p===90?(p=8,270<g&&(g-=360)):p===180?p=2:(p=1,90>g&&(g+=360)),m=t.pe[o],m===void 0?(m=new Sv(f,g,p),t.pe[o]=m):(m.link=f,m.angle=g,m.Oc=p),m.jv.set(c),o++}}}}for(C.free(u),t.pe.sort(Su.prototype.j),h=t.pe.length,n=-1,o=u=0;o<h;o++)l=t.pe[o],l!==void 0&&(l.Oc!==n&&(n=l.Oc,u=0),l.Vo=u,u++);for(n=-1,u=0,o=h-1;0<=o;o--)h=t.pe[o],h!==void 0&&(h.Oc!==n&&(n=h.Oc,u=h.Vo+1),h.Gl=u);if(o=t.pe,p=t.port,n=t.node.portSpreading,u=C.alloc(),h=C.alloc(),l=C.alloc(),f=C.alloc(),p.ga(Je,u),p.ga(qu,h),p.ga(Yr,l),p.ga(bu,f),m=g=c=p=0,n===Yd)for(var v=0;v<o.length;v++){var x=o[v];if(x!==null){var k=x.link.computeThickness();switch(x.Oc){case 8:g+=k;break;case 2:m+=k;break;case 1:p+=k;break;default:case 4:c+=k}}}var S=v=0,P=1,N=x=0;for(k=0;k<o.length;k++){var T=o[k];if(T!==null){if(v!==T.Oc){switch(v=T.Oc,v){case 8:var F=l;S=f;break;case 2:F=f,S=u;break;case 1:F=u,S=h;break;default:case 4:F=h,S=l}switch(x=S.x-F.x,N=S.y-F.y,v){case 8:g>Math.abs(x)?(P=Math.abs(x)/g,g=Math.abs(x)):P=1;break;case 2:m>Math.abs(N)?(P=Math.abs(N)/m,m=Math.abs(N)):P=1;break;case 1:p>Math.abs(x)?(P=Math.abs(x)/p,p=Math.abs(x)):P=1;break;default:case 4:c>Math.abs(N)?(P=Math.abs(N)/c,c=Math.abs(N)):P=1}S=0}var D=T.$o;if(n===Yd){switch(T=T.link.computeThickness(),T*=P,D.set(F),v){case 8:D.x=F.x+x/2+g/2-S-T/2;break;case 2:D.y=F.y+N/2+m/2-S-T/2;break;case 1:D.x=F.x+x/2-p/2+S+T/2;break;default:case 4:D.y=F.y+N/2-c/2+S+T/2}S+=T}else{var X=.5;n===Df&&(X=(T.Vo+1)/(T.Gl+1)),D.x=F.x+x*X,D.y=F.y+N*X}}}for(C.free(u),C.free(h),C.free(l),C.free(f),F=t.pe,o=0;o<F.length;o++)n=F[o],n!==null&&(n.Lu=t.computeEndSegmentLength(n));t.bp=i,E.free(r)}i=t.pe}for(t=0;t<i.length;t++)if(r=i[t],r!==null&&r.link===e)return r;return null}Su.prototype.j=function(t,e){return t===e?0:t===null?-1:e===null?1:t.Oc<e.Oc?-1:t.Oc>e.Oc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},Su.prototype.computeEndSegmentLength=function(t){var e=t.link,i=e.computeEndSegmentLength(this.node,this.port,Ke,e.fromPort===this.port),n=t.Vo;if(0>n)return i;var r=t.Gl;if(1>=r||!e.isOrthogonal)return i;e=t.jv;var o=t.$o;return(t.Oc===2||t.Oc===8)&&(n=r-1-n),((t=t.Oc===2||t.Oc===4)?e.y<o.y:e.x<o.x)?i+8*n:(t?e.y===o.y:e.x===o.x)?i:i+8*(r-1-n)},Su.className="Knot";function Sv(t,e,i){this.link=t,this.angle=e,this.Oc=i,this.jv=new C,this.Gl=this.Vo=0,this.$o=new C,this.Lu=0}Sv.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Oc.toString()+":"+this.Vo.toString()+"/"+this.Gl.toString()+" "+this.$o.toString()+" "+this.Lu.toString()+" "+this.jv.toString()},Sv.className="LinkInfo";function Kt(t){Te(this),this.o=this.H=null,this.Gh=this.tn=!0,this.zn=!1,this.Bm=new C(0,0).freeze(),this.wn=!0,this.Fm=this.vn=null,this.yn=!1,this.j=null,t&&Object.assign(this,t)}Kt.prototype.cloneProtected=function(t){t.tn=this.tn,t.Gh=this.Gh,t.zn=this.zn,t.Bm.assign(this.Bm),t.wn=this.wn,t.vn=this.vn,t.Fm=this.Fm,t.yn=!0},Kt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Kt.prototype.qb=function(){},Kt.prototype.toString=function(){var t=Go(this.constructor);return t+="(",this.group!==null&&(t+=" in "+this.group),this.diagram!==null&&(t+=" for "+this.diagram),t+")"},Kt.prototype.C=function(){if(this.isValidLayout){var t=this.diagram;if(t!==null&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.Cc(),this.isOngoing&&t.ri||this.isInitial&&!t.ri)&&(this.isValidLayout=!1,t.Rb())}}},Kt.prototype.createNetwork=function(){return new Yt(this)},Kt.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof j?(e.lg(t.nodes,!0),e.lg(t.links,!0)):t instanceof dt?e.lg(t.memberParts):e.lg(t.iterator),e},Kt.prototype.updateParts=function(){this.isValidLayout=!0;var t=this.diagram;if(t===null&&this.network!==null)for(var e=this.network.vertexes.iterator;e.next();){var i=e.value.node;if(i!==null&&(t=i.diagram,t!==null))break}try{t!==null&&t.Ea("Layout"),this.commitLayout()}finally{t!==null&&t.eb("Layout")}},Kt.prototype.commitLayout=function(){if(this.network!==null){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Kt.prototype.doLayout=function(t){var e=new _;t instanceof j?(Fs(this,e,t.nodes,!0,this.rh,!0,!1,!0),Fs(this,e,t.parts,!0,this.rh,!0,!1,!0)):t instanceof dt?Fs(this,e,t.memberParts,!1,this.rh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(t=this.diagram,t!==null&&t.Ea("Layout"),this.doMinimalNoNetworkLayout(e),t!==null&&t.eb("Layout")),this.isValidLayout=!0},Kt.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var i=this.arrangementOrigin.x,n=i,r=this.arrangementOrigin.y,o=0,l=0;for(t=t.iterator;t.next();){var u=t.value;Yf(u);var h=u.measuredBounds,f=h.width;h=h.height,u.moveTo(n,r),u instanceof dt&&(u.rh=!1),n+=Math.max(f,50)+20,l=Math.max(l,Math.max(h,50)),o>=e-1?(o=0,n=i,r+=l+20,l=0):o++}},Kt.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,i=e,n=this.arrangementOrigin.y,r=0,o=0,l=this.network.vertexes.iterator;l.next();){var u=l.value.node;if(!(u===null||u instanceof V)&&(Yf(u),this.rh(u))){var h=u.measuredBounds,f=h.width;h=h.height,u.moveTo(i,n),u instanceof dt&&(u.rh=!1),i+=Math.max(f,50)+20,o=Math.max(o,Math.max(h,50)),r>=t-1?(r=0,i=e,n+=o+20,o=0):r++}}},Kt.prototype.rh=function(t){return!!(!t.location.w()||t instanceof dt&&t.rh)};function Fs(t,e,i,n,r,o,l,u){for(i=i.iterator;i.next();){var h=i.value;n&&!h.isTopLevel||r!==null&&!r(h)||!h.canLayout()||(o&&h instanceof W?h.isLinkLabel||(h instanceof dt&&h.layout===null?Fs(t,e,h.memberParts,!1,r,o,l,u):(Yf(h),e.add(h))):l&&h instanceof V?e.add(h):!u||!h.Zc()||h instanceof W||(Yf(h),e.add(h)))}}function Yf(t){var e=t.actualBounds;(e.width===0||e.height===0||isNaN(e.width)||isNaN(e.height))&&t.Va()}Kt.prototype.oi=function(t,e){var i=this.boundsComputation;return i!==null?(e||(e=new E),i(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},Kt.prototype.hx=function(t){var e=new _;return t instanceof j?(Fs(this,e,t.nodes,!0,null,!0,!0,!0),Fs(this,e,t.links,!0,null,!0,!0,!0),Fs(this,e,t.parts,!0,null,!0,!0,!0)):t instanceof dt?Fs(this,e,t.memberParts,!1,null,!0,!0,!0):Fs(this,e,t.iterator,!1,null,!0,!0,!0),e},Kt.prototype.initialOrigin=function(t){var e=this.group;if(e!==null){var i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),e=e.placeholder,e!==null&&(i=e.ga(Je),(isNaN(i.x)||isNaN(i.y))&&i.set(t),t=e.padding,i.x+=t.left,i.y+=t.top),i}return t},Y.Object.defineProperties(Kt.prototype,{diagram:{get:function(){return this.H},set:function(t){this.H=t}},group:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,t!==null&&(this.H=t.diagram))}},isOngoing:{get:function(){return this.tn},set:function(t){this.tn!==t&&(this.tn=t)}},isInitial:{get:function(){return this.Gh},set:function(t){this.Gh=t,t||(this.yn=!0)}},isViewportSized:{get:function(){return this.zn},set:function(t){this.zn!==t&&(this.zn=t)&&this.C()}},isRouting:{get:function(){return this.wn},set:function(t){this.wn!==t&&(this.wn=t)}},isRealtime:{get:function(){return this.vn},set:function(t){this.vn!==t&&(this.vn=t)}},isValidLayout:{get:function(){return this.yn},set:function(t){this.yn!==t&&(this.yn=t,t||(t=this.diagram,t!==null&&(t.xh=!0)))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,t!==null&&(t.layout=this))}},boundsComputation:{get:function(){return this.Fm},set:function(t){this.Fm!==t&&(this.Fm=t,this.C())}},arrangementOrigin:{get:function(){return this.Bm},set:function(t){this.Bm.D(t)||(this.Bm.assign(t),this.C())}}}),Kt.prototype.collectParts=Kt.prototype.hx,Kt.prototype.getLayoutBounds=Kt.prototype.oi,Kt.prototype.invalidateLayout=Kt.prototype.C,Kt.className="Layout";function Yt(t){Te(this),this.Tc=t,this.wf=new _,this.ye=new _,this.Es=new ct,this.zs=new ct}Yt.prototype.clear=function(){if(this.wf)for(var t=this.wf.iterator;t.next();)t.value.clear();if(this.ye)for(t=this.ye.iterator;t.next();)t.value.clear();this.wf=new _,this.ye=new _,this.Es=new ct,this.zs=new ct},Yt.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutNetwork"+(this.layout!==null?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.wf.count+" edges: "+this.ye.count,1<t){for(var i=this.wf.iterator;i.next();)e+=`
    `+i.value.toString(t-1);for(i=this.ye.iterator;i.next();)e+=`
    `+i.value.toString(t-1)}return e},Yt.prototype.createVertex=function(){return new me(this)},Yt.prototype.createEdge=function(){return new Gi(this)},Yt.prototype.lg=function(t,e,i){if(t!==null){for(e===void 0&&(e=!1),i===void 0&&(i=null),i===null&&(i=function(l){if(l instanceof W)return!l.isLinkLabel;if(l instanceof V){var u=l.fromNode;return u===null||u.isLinkLabel?!1:(l=l.toNode,!(l===null||l.isLinkLabel))}return!1}),t=t.iterator;t.next();){var n=t.value;if(n instanceof W&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)){if(n instanceof dt&&n.layout===null)this.lg(n.memberParts,!1);else if(this.li(n)===null){var r=this.createVertex();r.node=n,this.dh(r)}}}for(t.reset();t.next();)if(n=t.value,n instanceof V&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)&&this.Mo(n)===null){var o=n.fromNode;r=n.toNode,o!==null&&r!==null&&o!==r&&(o=this.findGroupVertex(o),r=this.findGroupVertex(r),o!==null&&r!==null&&this.Yj(o,r,n))}}},Yt.prototype.findGroupVertex=function(t){if(t===null)return null;var e=t.findVisibleNode();if(e===null)return null;if(t=this.li(e),t!==null)return t;for(e=e.containingGroup;e!==null;){if(t=this.li(e),t!==null)return t;e=e.containingGroup}return null},s=Yt.prototype,s.dh=function(t){if(t!==null){this.wf.add(t);var e=t.node;e!==null&&this.Es.add(e,t),t.network=this}},s.Bl=function(t){if(t===null)return null;var e=this.li(t);return e===null&&(e=this.createVertex(),e.node=t,this.dh(e)),e},s.Ku=function(t){if(t!==null&&h2(this,t)){for(var e=t.tg,i=e.count-1;0<=i;i--){var n=e.M(i);this.Mj(n)}for(e=t.mg,t=e.count-1;0<=t;t--)i=e.M(t),this.Mj(i)}};function h2(t,e){if(e===null)return!1;var i=t.wf.remove(e);return i&&(e=e.node,e!==null&&t.Es.remove(e)),i}s.dz=function(t){t!==null&&(t=this.li(t),t!==null&&this.Ku(t))},s.li=function(t){return t===null?null:this.Es.I(t)},s.Co=function(t){if(t!==null){kv(this,t);var e=t.toVertex;e!==null&&e.Cl(t),e=t.fromVertex,e!==null&&e.zl(t)}};function kv(t,e){if(e!==null){t.ye.add(e);var i=e.link;i!==null&&t.Mo(i)===null&&t.zs.add(i,e),e.network=t}}s.Fy=function(t){if(t===null)return null;var e=t.fromNode,i=t.toNode,n=this.Mo(t);return n===null?(n=this.createEdge(),n.link=t,e!==null&&(n.fromVertex=this.Bl(e)),i!==null&&(n.toVertex=this.Bl(i)),this.Co(n)):(e!==null?n.fromVertex=this.Bl(e):n.fromVertex=null,i!==null?n.toVertex=this.Bl(i):n.toVertex=null),n},s.Mj=function(t){if(t!==null){var e=t.toVertex;e!==null&&e.Kl(t),e=t.fromVertex,e!==null&&e.Jl(t),Cv(this,t)}};function Cv(t,e){e!==null&&t.ye.remove(e)&&(e=e.link,e!==null&&t.zs.remove(e))}s.cz=function(t){t!==null&&(t=this.Mo(t),t!==null&&this.Mj(t))},s.Mo=function(t){return t===null?null:this.zs.I(t)},s.Yj=function(t,e,i){if(t===null||e===null)return null;if(t.network===this&&e.network===this){var n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.Co(n),n}return null},s.hm=function(t){if(t!==null){var e=t.fromVertex,i=t.toVertex;e!==null&&i!==null&&(e.Jl(t),i.Kl(t),t.hm(),e.Cl(t),i.zl(t))}},s.Lo=function(){for(var t=Rt(),e=this.ye.iterator;e.next();){var i=e.value;i.fromVertex===i.toVertex&&t.push(i)}for(e=t.length,i=0;i<e;i++)this.Mj(t[i]);Bt(t)},Yt.prototype.deleteArtificialVertexes=function(){for(var t=Rt(),e=this.wf.iterator;e.next();){var i=e.value;i.node===null&&i.data===null&&t.push(i)}for(i=t.length,e=0;e<i;e++)this.Ku(t[e]);for(e=Rt(),i=this.ye.iterator;i.next();){var n=i.value;n.link===null&&n.data===null&&e.push(n)}for(i=e.length,n=0;n<i;n++)this.Mj(e[n]);Bt(t),Bt(e)};function CT(t){for(var e=Rt(),i=t.ye.iterator;i.next();){var n=i.value;n.fromVertex!==null&&n.toVertex!==null||e.push(n)}for(i=e.length,n=0;n<i;n++)t.Mj(e[n]);Bt(e)}Yt.prototype.ay=function(t){t===void 0&&(t=!0),t&&(this.deleteArtificialVertexes(),CT(this),this.Lo()),t=new q;for(var e=!0;e;){e=!1;for(var i=this.wf.iterator;i.next();){var n=i.value;if(0<n.tg.count||0<n.mg.count){e=this.layout.createNetwork(),t.add(e),Pv(this,e,n),e=!0;break}}}return t.sort(function(r,o){return r===null||o===null||r===o?0:o.vertexes.count-r.vertexes.count}),t};function Pv(t,e,i){if(i!==null&&i.network!==e){h2(t,i),e.dh(i);for(var n=i.sourceEdges;n.next();){var r=n.value;r.network!==e&&(Cv(t,r),kv(e,r),Pv(t,e,r.fromVertex))}for(n=i.destinationEdges;n.next();)i=n.value,i.network!==e&&(Cv(t,i),kv(e,i),Pv(t,e,i.toVertex))}}Yt.prototype.iz=function(){for(var t=new _,e=this.wf.iterator;e.next();)t.add(e.value.node);for(e=this.ye.iterator;e.next();)t.add(e.value.link);return t},Y.Object.defineProperties(Yt.prototype,{layout:{get:function(){return this.Tc},set:function(t){t!==null&&(this.Tc=t)}},vertexes:{get:function(){return this.wf}},edges:{get:function(){return this.ye}}}),Yt.prototype.findAllParts=Yt.prototype.iz,Yt.prototype.splitIntoSubNetworks=Yt.prototype.ay,Yt.prototype.deleteSelfEdges=Yt.prototype.Lo,Yt.prototype.reverseEdge=Yt.prototype.hm,Yt.prototype.linkVertexes=Yt.prototype.Yj,Yt.prototype.findEdge=Yt.prototype.Mo,Yt.prototype.deleteLink=Yt.prototype.cz,Yt.prototype.deleteEdge=Yt.prototype.Mj,Yt.prototype.addLink=Yt.prototype.Fy,Yt.prototype.addEdge=Yt.prototype.Co,Yt.prototype.findVertex=Yt.prototype.li,Yt.prototype.deleteNode=Yt.prototype.dz,Yt.prototype.deleteVertex=Yt.prototype.Ku,Yt.prototype.addNode=Yt.prototype.Bl,Yt.prototype.addVertex=Yt.prototype.dh,Yt.prototype.addParts=Yt.prototype.lg,Yt.className="LayoutNetwork";function me(t){Te(this),this.ob=t,this.j=new E(0,0,10,10).freeze(),this.o=new C(5,5).freeze(),this.Sh=this.ub=null,this.tg=new q,this.mg=new q}me.prototype.clear=function(){this.Sh=this.ub=null,this.tg=new q,this.mg=new q},me.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutVertex#"+Ci(this);if(0<t&&(e+=this.node!==null?"("+this.node.toString()+")":"",1<t)){t="";for(var i=!0,n=this.tg.iterator;n.next();){var r=n.value;i?i=!1:t+=",",t+=r.toString(0)}for(r="",i=!0,n=this.mg.iterator;n.next();){var o=n.value;i?i=!1:r+=",",r+=o.toString(0)}e+=" sources: "+t+" destinations: "+r}return e},me.prototype.commit=function(){var t=this.ub;if(t!==null){var e=this.bounds,i=t.bounds;gt(i)?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):t.bounds=e.copy()}else if(t=this.node,t!==null){if(e=this.bounds,!(t instanceof dt)){i=E.alloc(),t.Va();var n=this.network.layout.oi(t,i),r=t.locationObject.ga(Et);if(n.w()&&r.w()){t.moveTo(e.x+this.focusX-(r.x-n.x),e.y+this.focusY-(r.y-n.y)),E.free(i);return}E.free(i)}t.moveTo(e.x,e.y)}},me.prototype.Cl=function(t){t!==null&&(this.tg.contains(t)||this.tg.add(t))},me.prototype.Kl=function(t){t!==null&&this.tg.remove(t)},me.prototype.zl=function(t){t!==null&&(this.mg.contains(t)||this.mg.add(t))},me.prototype.Jl=function(t){t!==null&&this.mg.remove(t)};function Nv(t,e){return t=t.Sh,e=e.Sh,t?e?(t=t.text,e=e.text,t<e?-1:t>e?1:0):1:e!==null?-1:0}Y.Object.defineProperties(me.prototype,{sourceEdgesArrayAccess:{get:function(){return this.tg._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.mg._dataArray}},data:{get:function(){return this.ub},set:function(t){if(this.ub=t,t!==null&&t.bounds){var e=t.bounds;t=e.x;var i=e.y,n=e.width;e=e.height,this.o.h(n/2,e/2),this.j.h(t,i,n,e)}}},node:{get:function(){return this.Sh},set:function(t){if(this.Sh!==t){this.Sh=t,t.Va();var e=this.network.layout,i=E.alloc(),n=e.oi(t,i);e=n.x;var r=n.y,o=n.width;if(n=n.height,isNaN(e)&&(e=0),isNaN(r)&&(r=0),this.j.h(e,r,o,n),E.free(i),!(t instanceof dt)&&(t=t.locationObject.ga(Et),t.w())){this.o.h(t.x-e,t.y-r);return}this.o.h(o/2,n/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.D(t)||this.j.assign(t)}},focus:{get:function(){return this.o},set:function(t){this.o.D(t)||this.o.assign(t)}},centerX:{get:function(){return this.j.x+this.o.x},set:function(t){var e=this.j;e.x+this.o.x!==t&&(e.ka(),e.x=t-this.o.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.o.y},set:function(t){var e=this.j;e.y+this.o.y!==t&&(e.ka(),e.y=t-this.o.y,e.freeze())}},focusX:{get:function(){return this.o.x},set:function(t){var e=this.o;e.x!==t&&(e.ka(),e.x=t,e.freeze())}},focusY:{get:function(){return this.o.y},set:function(t){var e=this.o;e.y!==t&&(e.ka(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ka(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ka(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ka(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ka(),e.height=t,e.freeze())}},network:{get:function(){return this.ob},set:function(t){this.ob=t}},sourceVertexes:{get:function(){for(var t=new _,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new _,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new _,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.tg.iterator}},destinationEdges:{get:function(){return this.mg.iterator}},edges:{get:function(){for(var t=new q,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.tg.count+this.mg.count}}}),me.prototype.deleteDestinationEdge=me.prototype.Jl,me.prototype.addDestinationEdge=me.prototype.zl,me.prototype.deleteSourceEdge=me.prototype.Kl,me.prototype.addSourceEdge=me.prototype.Cl,me.className="LayoutVertex",me.standardComparer=Nv,me.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.Sh;var i=e.Sh;if(t!==null){if(i!==null){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=i.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),i=0;i<e.length;i++)if(t[i]!==""&&t[i]!==void 0){var n=parseFloat(e[i]),r=parseFloat(t[i]);if(isNaN(n))if(isNaN(r)){if(e[i].localeCompare(t[i])!==0)return e[i].localeCompare(t[i])}else return 1;else{if(isNaN(r))return-1;if(n-r!==0)return n-r}}else if(e[i]!=="")return 1;return t[i]!==""&&t[i]!==void 0?-1:0}return 1}return i!==null?-1:0}return 1}return e!==null?-1:0};function Gi(t){Te(this),this.nb=t,this.qd=this.kd=this.Zk=this.ub=null}Gi.prototype.clear=function(){this.qd=this.kd=this.Zk=this.ub=null},Gi.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutEdge#"+Ci(this);return 0<t&&(e+=this.Zk!==null?"("+this.Zk.toString()+")":"",1<t&&(e+=" "+(this.kd?this.kd.toString():"null")+" --> "+(this.qd?this.qd.toString():"null"))),e},Gi.prototype.hm=function(){var t=this.kd;this.kd=this.qd,this.qd=t},Gi.prototype.commit=function(){},Gi.prototype.Cx=function(t){return this.qd===t?this.kd:this.kd===t?this.qd:null},Y.Object.defineProperties(Gi.prototype,{network:{get:function(){return this.nb},set:function(t){this.nb=t}},data:{get:function(){return this.ub},set:function(t){this.ub!==t&&(this.ub=t)}},link:{get:function(){return this.Zk},set:function(t){this.Zk!==t&&(this.Zk=t)}},fromVertex:{get:function(){return this.kd},set:function(t){this.kd!==t&&(this.kd=t)}},toVertex:{get:function(){return this.qd},set:function(t){this.qd!==t&&(this.qd=t)}}}),Gi.prototype.getOtherVertex=Gi.prototype.Cx,Gi.className="LayoutEdge";function je(t){Kt.call(this),this.isViewportSized=!0,this.zo=this.Ao=NaN,this.yg=new ht(NaN,NaN).freeze(),this.tf=new ht(10,10).freeze(),this.Kb=Qh,this.Tb=Hf,this.nd=Jh,this.hd=a2,t&&Object.assign(this,t)}Z(je,Kt),je.prototype.cloneProtected=function(t){Kt.prototype.cloneProtected.call(this,t),t.Ao=this.Ao,t.zo=this.zo,t.yg.assign(this.yg),t.tf.assign(this.tf),t.Kb=this.Kb,t.Tb=this.Tb,t.nd=this.nd,t.hd=this.hd},je.prototype.qb=function(t){t.classType===je?t===Jh||t===Kf||t===qd||t===Xf?this.sorting=t:t===Hf||t===qn?this.arrangement=t:t===Qh||t===Gf?this.alignment=t:O("Unknown enum value: "+t):Kt.prototype.qb.call(this,t)},je.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.hx(t);t=this.diagram;for(var i=e.copy().iterator;i.next();){var n=i.value;if(!n.ph()||n.fromNode===null&&n.toNode===null){if(n.Va(),n instanceof dt)for(n=n.memberParts;n.next();)e.remove(n.value)}else e.remove(n)}var r=e.Fa();if(r.length!==0){switch(this.sorting){case Xf:r.reverse();break;case Jh:r.sort(this.comparer);break;case Kf:r.sort(this.comparer),r.reverse()}var o=this.wrappingColumn;isNaN(o)&&(o=0);var l=this.wrappingWidth;switch(isNaN(l)&&t!==null?(e=t.padding,l=Math.max(t.viewportBounds.width-e.left-e.right,0)):l=Math.max(this.wrappingWidth,0),0>=o&&0>=l&&(o=1),e=this.spacing.width,isFinite(e)||(e=0),i=this.spacing.height,isFinite(i)||(i=0),t!==null&&t.Ea("Layout"),n=[],this.alignment){case Gf:var u=e,h=i,f=E.alloc(),c=Math.max(this.cellSize.width,1);if(!isFinite(c))for(var p=c=0;p<r.length;p++){var g=this.oi(r[p],f);c=Math.max(c,g.width)}if(c=Math.max(c+u,1),p=Math.max(this.cellSize.height,1),!isFinite(p))for(g=p=0;g<r.length;g++){var m=this.oi(r[g],f);p=Math.max(p,m.height)}p=Math.max(p+h,1),g=this.arrangement;for(var v=m=this.arrangementOrigin.x,x=this.arrangementOrigin.y,k=0,S=0,P=0;P<r.length;P++){var N=r[P],T=this.oi(N,f),F=Math.ceil((T.width+u)/c)*c,D=Math.ceil((T.height+h)/p)*p;switch(g){case qn:var X=Math.abs(v-T.width);break;default:X=v+T.width}switch((0<o&&k>o-1||0<l&&0<k&&X-m>l)&&(n.push(new E(0,x,l+u,S)),k=0,v=m,x+=S,S=0),S=Math.max(S,D),g){case qn:T=-T.width;break;default:T=0}switch(N.moveTo(v+T,x),g){case qn:v-=F;break;default:v+=F}k++}n.push(new E(0,x,l+u,S)),E.free(f);break;case Qh:for(h=l,c=o,p=e,g=i,l=E.alloc(),m=Math.max(this.cellSize.width,1),o=x=f=0,u=C.alloc(),v=0;v<r.length;v++)S=r[v],k=this.oi(S,l),S=ts(S,S.locationObject,S.locationSpot,u),f=Math.max(f,S.x),x=Math.max(x,k.width-S.x),o=Math.max(o,S.y);switch(v=this.arrangement,v){case qn:f+=p;break;default:x+=p}m=isFinite(m)?Math.max(m+p,1):Math.max(f+x,1);var tt=S=this.arrangementOrigin.x;for(P=this.arrangementOrigin.y,x=0,h>=f&&(h-=f),f=N=0,F=Math.max(this.cellSize.height,1),T=o=0,D=!0,k=C.alloc(),X=0;X<r.length;X++){var et=r[X],U=this.oi(et,l),R=ts(et,et.locationObject,et.locationSpot,u);if(0<x)switch(v){case qn:tt=(tt-S-(U.width-R.x))/m,tt=A.$(Math.round(tt),tt)?Math.round(tt):Math.floor(tt),tt=tt*m+S;break;default:tt=(tt-S+R.x)/m,tt=A.$(Math.round(tt),tt)?Math.round(tt):Math.ceil(tt),tt=tt*m+S}else switch(v){case qn:N=tt+R.x+U.width;break;default:N=tt-R.x}switch(v){case qn:var pt=-(tt+R.x)+N;break;default:pt=tt+U.width-R.x-N}if(0<c&&x>c-1||0<h&&0<x&&pt>h){for(n.push(new E(0,D?P-o:P,h+p,T+o+g)),tt=0;tt<x&&X!==x;tt++){pt=r[X-x+tt];var ut=ts(pt,pt.locationObject,pt.locationSpot,k);pt.moveTo(pt.position.x,pt.position.y+o-ut.y)}T+=g,P=D?P+T:P+(T+o),x=T=o=0,tt=S,D=!1}switch(tt===S&&(f=v===qn?Math.max(f,U.width-R.x):Math.min(f,-R.x)),o=Math.max(o,R.y),T=Math.max(T,U.height-R.y),isFinite(F)&&(T=Math.max(T,Math.max(U.height,F)-R.y)),D?et.moveTo(tt-R.x,P-R.y):et.moveTo(tt-R.x,P),v){case qn:tt-=R.x+p;break;default:tt+=U.width-R.x+p}x++}if(n.push(new E(0,P,h+p,(D?T:T+o)+g)),r.length!==x)for(h=0;h<x;h++)c=r[r.length-x+h],p=ts(c,c.locationObject,c.locationSpot,u),c.moveTo(c.position.x,c.position.y+o-p.y);if(C.free(u),C.free(k),v===qn)for(r=0;r<n.length;r++)o=n[r],o.width+=f,o.x-=f;else for(r=0;r<n.length;r++)o=n[r],o.x>f&&(o.width+=o.x-f,o.x=f);E.free(l)}for(u=o=l=r=0;u<n.length;u++)h=n[u],r=Math.min(r,h.x),l=Math.min(l,h.y),o=Math.max(o,h.x+h.width);this.arrangement===qn?this.commitLayers(n,new C(r+e/2-(o+r),l-i/2)):this.commitLayers(n,new C(r-e/2,l-i/2)),t!==null&&t.eb("Layout"),this.isValidLayout=!0}},je.prototype.commitLayers=function(){};function a2(t,e){return t=t.text,e=e.text,t<e?-1:t>e?1:0}Y.Object.defineProperties(je.prototype,{wrappingWidth:{get:function(){return this.Ao},set:function(t){this.Ao!==t&&(0<t||isNaN(t))&&(this.Ao=t,this.isViewportSized=isNaN(t),this.C())}},wrappingColumn:{get:function(){return this.zo},set:function(t){this.zo!==t&&(0<t||isNaN(t))&&(this.zo=t,this.C())}},cellSize:{get:function(){return this.yg},set:function(t){this.yg.D(t)||(this.yg.assign(t),this.C())}},spacing:{get:function(){return this.tf},set:function(t){this.tf.D(t)||(this.tf.assign(t),this.C())}},alignment:{get:function(){return this.Kb},set:function(t){this.Kb===t||t!==Qh&&t!==Gf||(this.Kb=t,this.C())}},arrangement:{get:function(){return this.Tb},set:function(t){this.Tb===t||t!==Hf&&t!==qn||(this.Tb=t,this.C())}},sorting:{get:function(){return this.nd},set:function(t){this.nd===t||t!==qd&&t!==Xf&&t!==Jh&&t!==Kf||(this.nd=t,this.C())}},comparer:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this.hd=t,this.C())}}});var Gf=new K(je,"Position",0),Qh=new K(je,"Location",1),Hf=new K(je,"LeftToRight",2),qn=new K(je,"RightToLeft",3),qd=new K(je,"Forward",4),Xf=new K(je,"Reverse",5),Jh=new K(je,"Ascending",6),Kf=new K(je,"Descending",7);je.className="GridLayout",je.standardComparer=a2,je.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var i=0;i<t.length;i++)if(e[i]!==""&&e[i]!==void 0){var n=parseFloat(t[i]),r=parseFloat(e[i]);if(isNaN(n))if(isNaN(r)){if(t[i].localeCompare(e[i])!==0)return t[i].localeCompare(e[i])}else return 1;else{if(isNaN(r))return-1;if(n-r!==0)return n-r}}else if(t[i]!=="")return 1;return e[i]!==""&&e[i]!==void 0?-1:0}return 1}return e!==null?-1:0},je.Position=Gf,je.Location=Qh,je.LeftToRight=Hf,je.RightToLeft=qn,je.Forward=qd,je.Reverse=Xf,je.Ascending=Jh,je.Descending=Kf;function Ot(){this.Pn=new _,this.En=new _,this.Pa=new _,this.cf=new ct,this.bf=new ct,this.bj=new ct,this.H=null,this.tp=!1}s=Ot.prototype,s.clear=function(){this.Pn.clear(),this.En.clear(),this.Pa.clear(),this.cf.clear(),this.bf.clear(),this.bj.clear()},s.Xe=function(t){this.H=t},s.pi=function(t){if(t instanceof W){if(this.Pn.add(t),t instanceof dt){var e=t.containingGroup;e===null?this.H.ai.add(t):e.fl.add(t),e=t.layout,e!==null&&(e.diagram=this.H)}}else t instanceof V?this.En.add(t):t instanceof Nt||this.Pa.add(t);e=t.data,e===null||t instanceof Nt||(t instanceof V?this.bf.add(e,t):this.cf.add(e,t))},s.qc=function(t){if(t.Ej(),t instanceof W){if(this.Pn.remove(t),t instanceof dt){var e=t.containingGroup;e===null?this.H.ai.remove(t):e.fl.remove(t),e=t.layout,e!==null&&(e.diagram=null)}}else t instanceof V?this.En.remove(t):t instanceof Nt||this.Pa.remove(t);e=t.data,e===null||t instanceof Nt||(t instanceof V?this.bf.remove(e):this.cf.remove(e))},s.Wd=function(){var t=this.H;if(t!==null){for(var e=t.nodeTemplateMap.iterator;e.next();){var i=e.value,n=e.key;(!i.Zc()||i instanceof dt)&&O('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+i)}for(e=t.groupTemplateMap.iterator;e.next();)i=e.value,n=e.key,i instanceof dt||O('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+i);for(e=t.linkTemplateMap.iterator;e.next();)i=e.value,n=e.key,i instanceof V||O('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+i);for(e=Rt(),i=t.selection.iterator;i.next();)(n=i.value.data)&&e.push(n);for(i=Rt(),t=t.highlighteds.iterator;t.next();)(n=t.value.data)&&i.push(n);for(t=Rt(),n=this.nodes.iterator;n.next();){var r=n.value;r.data!==null&&(t.push(r.data),t.push(r.location))}for(n=this.links.iterator;n.next();)r=n.value,r.data!==null&&(t.push(r.data),t.push(r.location));for(n=this.parts.iterator;n.next();)r=n.value,r.data!==null&&(t.push(r.data),t.push(r.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),n=0;n<e.length;n++)r=this.Mc(e[n]),r!==null&&(r.isSelected=!0);for(n=0;n<i.length;n++)r=this.Mc(i[n]),r!==null&&(r.isHighlighted=!0);for(n=0;n<t.length;n+=2)r=this.Mc(t[n]),r!==null&&(r.location=t[n+1]);Bt(e),Bt(i),Bt(t)}},Ot.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Ot.prototype.addModeledParts=function(t,e){var i=this,n=this.diagram.model;t.forEach(function(r){n.lb(r)&&f2(i,r,!1)}),t.forEach(function(r){n.lb(r)&&i.resolveReferencesForData(r)}),e!==!1&&Wp(this.diagram,!1)};function f2(t,e,i){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.cf.contains(e)){i===void 0&&(i=!0);t:{if(e!=null&&!t.H.undoManager.isUndoingRedoing&&!t.cf.contains(e)){var n=t.So(e),r=c2(t,e,n);if(r!==null&&(jn(r),r=r.copy(),r!==null)){var o=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,r.Tf=n,r.ub=e,t.tp&&(r.Jg="Tool"),t.diagram.add(r),r.ub=null,r.data=e,t.diagram.skipsModelSourceBindings=o,n=r;break t}}n=null}n!==null&&i&&t.resolveReferencesForData(e)}}Ot.prototype.insertLink=function(){return null},Ot.prototype.resolveReferencesForData=function(){},Ot.prototype.So=function(t){return this.H.model.So(t)};function c2(t,e,i){t=t.H;var n=t.model;return n.Wj()&&n.$u(e)?(e=t.groupTemplateMap.I(i),e===null&&(e=t.groupTemplateMap.I(""),e===null&&(g2||(g2=!0,Pt('No Group template found for category "'+i+'"'),Pt("  Using default group template")),e=t.ny))):(e=t.nodeTemplateMap.I(i),e===null&&(e=t.nodeTemplateMap.I(""),e===null&&(d2||(d2=!0,Pt('No Node template found for category "'+i+'"'),Pt("  Using default node template")),e=t.py))),e}Ot.prototype.getLinkCategoryForData=function(){return""},Ot.prototype.setLinkCategoryForData=function(){},Ot.prototype.setFromNodeForLink=function(){},Ot.prototype.setToNodeForLink=function(){},Ot.prototype.findLinkTemplateForCategory=function(t){var e=this.H,i=e.linkTemplateMap.I(t);return i===null&&(i=e.linkTemplateMap.I(""),i===null&&(y2||(y2=!0,Pt('No Link template found for category "'+t+'"'),Pt("  Using default link template")),i=e.oy)),i},Ot.prototype.removeAllModeledParts=function(){this.Hs(this.diagram.model.nodeDataArray)},Ot.prototype.Hs=function(t){var e=this;t.forEach(function(i){e.ip(i)})},Ot.prototype.ip=function(t){t=this.Mc(t),t!==null&&(om(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Ot.prototype.unresolveReferencesForPart=function(){},Ot.prototype.removeDataForLink=function(){},Ot.prototype.findPartForKey=function(t){return t==null?null:(t=this.H.model.jc(t),t!==null?this.cf.I(t):null)},Ot.prototype.Yb=function(t){return t==null||(t=this.H.model.jc(t),t===null)?null:(t=this.cf.I(t),t instanceof W?t:null)},Ot.prototype.findLinkForKey=function(){return null},s=Ot.prototype,s.Mc=function(t){if(t===null)return null;var e=this.cf.I(t);return e!==null?e:e=this.bf.I(t)},s.ji=function(t){return t===null?null:(t=this.cf.I(t),t instanceof W?t:null)},s.Lc=function(t){return t===null?null:this.bf.I(t)},s.ms=function(t){for(var e=0;e<arguments.length;++e);e=new _;for(var i=this.Pn.iterator;i.next();){var n=i.value,r=n.data;if(r!==null)for(var o=0;o<arguments.length;o++){var l=arguments[o];if(gt(l)&&Tv(this,r,l)){e.add(n);break}}}return e.iterator},s.ls=function(t){for(var e=0;e<arguments.length;++e);e=new _;for(var i=this.En.iterator;i.next();){var n=i.value,r=n.data;if(r!==null)for(var o=0;o<arguments.length;o++){var l=arguments[o];if(gt(l)&&Tv(this,r,l)){e.add(n);break}}}return e.iterator};function Tv(t,e,i){for(var n in i){var r=e[n],o=i[n];if(Ht(o)){if(!Ht(r)||r.length<o.length)return!1;for(var l=0;l<r.length;l++){var u=o[l];if(u!==void 0&&!p2(t,r[l],u))return!1}}else if(!p2(t,r,o))return!1}return!0}function p2(t,e,i){if(typeof i=="function"){if(!i(e))return!1}else if(i instanceof RegExp){if(!e||!i.test(e.toString()))return!1}else if(gt(e)&&gt(i)){if(!Tv(t,e,i))return!1}else if(e!==i)return!1;return!0}Ot.prototype.doModelChanged=function(t){if(this.H){var e=this.H;if(t.model===e.model){var i=t.change;if(e.doModelChanged(t),e.aa){e.aa=!1;try{var n=t.modelChange;if(n!=="")if(i===Wt){if(n==="nodeCategory"){var r=this.Mc(t.object),o=t.newValue;r!==null&&typeof o=="string"&&(r.category=o)}else n==="nodeDataArray"&&(this.Hs(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(i===de){var l=t.newValue;n==="nodeDataArray"&&gt(l)&&f2(this,l),e.isModified=!0}else if(i===Se){var u=t.oldValue;n==="nodeDataArray"&&gt(u)&&this.ip(u),e.isModified=!0}else i===Wn&&(n==="SourceChanged"?t.object!==null?this.updateDataBindings(t.object,t.propertyName):(this.rp(),this.updateAllTargetBindings()):n==="ModelDisplaced"&&this.Wd());else if(i===Wt){var h=t.propertyName,f=t.object;f===e.model?(h==="nodeKeyProperty"||h==="nodeCategoryProperty")&&(e.undoManager.isUndoingRedoing||this.Wd()):this.updateDataBindings(f,h),e.isModified=!0}else if(i===de||i===Se){var c=t.change===de,p=c?t.newParam:t.oldParam,g=c?t.newValue:t.oldValue,m=this.bj.I(t.object);if(Array.isArray(m))for(t=0;t<m.length;t++){var v=m[t];if(c)wd(v,g,p,!0);else if(!(0>p)){var x=p+Pf(v);v.qc(x,!0),Wm(v,x,p)}}e.isModified=!0}}finally{e.aa=!0}}}}},Ot.prototype.updateAllTargetBindings=function(t){t===void 0&&(t="");for(var e=this.parts.iterator;e.next();)e.value.La(t);for(e=this.nodes.iterator;e.next();)e.value.La(t);for(e=this.links.iterator;e.next();)e.value.La(t)},Ot.prototype.rp=function(){for(var t=this.H.model,e=new _,i=t.nodeDataArray,n=0;n<i.length;n++)e.add(i[n]);var r=[];for(this.nodes.each(function(l){l.data===null||e.contains(l.data)||r.push(l.data)}),this.parts.each(function(l){l.data===null||e.contains(l.data)||r.push(l.data)}),r.forEach(function(l){P2(t,l,!1)}),n=0;n<i.length;n++){var o=i[n];this.Mc(o)===null&&C2(t,o,!1)}for(this.refreshDataBoundLinks(),i=this.parts.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.nodes.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.links.iterator;i.next();)i.value.updateRelationshipsFromData()},Ot.prototype.refreshDataBoundLinks=function(){},Ot.prototype.updateRelationshipsFromData=function(){},Ot.prototype.updateDataBindings=function(t,e){if(typeof e=="string"){var i=this.Mc(t);if(i!==null)i.La(e);else{i=null;for(var n=this.bj.iterator;n.next();){for(var r=n.value,o=0;o<r.length;o++){var l=r[o].ux(t);l!==null&&(i===null&&(i=Rt()),i.push(l))}if(i!==null)break}if(i!==null){for(n=0;n<i.length;n++)i[n].La(e);Bt(i)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}};function Lv(t,e){var i=e.Hh;if(Ht(i)){var n=t.bj.I(i);if(n===null)n=[],n.push(e),t.bj.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}function Fv(t,e,i){fl(e,function(l){l=l.O.s;for(var u=l.length,h=0;h<u;h++)fm(i,l[h])});var n=e.Hh;if(Ht(n)){var r=t.bj.I(n);if(r!==null){for(var o=0;o<r.length;o++)if(r[o]===e){r.splice(o,1),r.length===0&&t.bj.remove(n);break}}}}Ot.prototype.Kj=function(t,e,i){i===void 0&&(i=!1);var n=new ct;if(Ht(t))for(var r=0;r<t.length;r++)bd(this,t[r],e,n,i);else for(t=t.iterator;t.next();)bd(this,t.value,e,n,i);if(e!==null){i=e.model,t=e.toolManager.findTool("Dragging"),t=t!==null?t.dragOptions.dragsLink:e.Xm.dragsLink,r=new _;for(var o=new ct,l=n.iterator;l.next();){var u=l.value;if(u instanceof V)t||u.fromNode!==null&&u.toNode!==null||r.add(u);else if(u instanceof W&&u.data!==null&&i.Tl()){var h=u;u=l.key;var f=u.pg();f!==null&&(f=n.I(f),f!==null?(i.qe(h.data,i.wa(f.data)),h=e.Lc(h.data),u=u.kh(),u!==null&&h!==null&&o.add(u,h)):i.qe(h.data,void 0))}}if(0<r.count&&e.Js(r,!1),0<o.count)for(i=o.iterator;i.next();)n.add(i.key,i.value)}if(e!==null&&this.H!==null&&(e=e.model,i=e.afterCopyFunction,i!==null)){var c=new ct;n.each(function(p){p.key.data!==null&&c.add(p.key.data,p.value.data)}),i(c,e,this.H.model)}for(e=n.iterator;e.next();)e.value.La();return n};function bd(t,e,i,n,r){if(e===null||r&&!e.canCopy())return null;if(n.contains(e))return n.I(e);var o=t.copyPartData(e,i);if(!(o instanceof ot))return null;if(o.isSelected=!1,o.isHighlighted=!1,n.add(e,o),e instanceof W){for(var l=e.linksConnected;l.next();){var u=l.value;if(u.fromNode===e){var h=n.I(u);h!==null&&(h.fromNode=o)}u.toNode===e&&(u=n.I(u),u!==null&&(u.toNode=o))}if(e instanceof dt&&o instanceof dt)for(e=e.memberParts;e.next();)l=bd(t,e.value,i,n,r),l instanceof V||l===null||(l.containingGroup=o)}else if(e instanceof V&&o instanceof V)for(l=e.fromNode,l!==null&&(l=n.I(l),l!==null&&(o.fromNode=l)),l=e.toNode,l!==null&&(l=n.I(l),l!==null&&(o.toNode=l)),e=e.labelNodes;e.next();)l=bd(t,e.value,i,n,r),l!==null&&l instanceof W&&(l.labeledLink=o);return o}Ot.prototype.copyPartData=function(t,e){var i=null,n=t.data;if(n!==null&&e!==null){var r=e.model;t instanceof V||(n=r.copyNodeData(n),gt(n)&&(r.xf(n),i=e.Mc(n)))}else jn(t),i=t.copy(),i!==null&&(r=this.H,e!==null?e.add(i):n!==null&&r!==null&&r.commandHandler!==null&&r.commandHandler.copiesClipboardData&&(e=r.model,r=null,i instanceof V||(r=e.copyNodeData(n)),gt(r)&&(i.data=r)));return i},Y.Object.defineProperties(Ot.prototype,{nodes:{get:function(){return this.Pn}},links:{get:function(){return this.En}},parts:{get:function(){return this.Pa}},diagram:{get:function(){return this.H}},addsToTemporaryLayer:{get:function(){return this.tp},set:function(t){this.tp=t}}}),Ot.prototype.updateAllRelationshipsFromData=Ot.prototype.rp,Ot.prototype.findLinksByExample=Ot.prototype.ls,Ot.prototype.findNodesByExample=Ot.prototype.ms,Ot.prototype.findLinkForData=Ot.prototype.Lc,Ot.prototype.findNodeForData=Ot.prototype.ji,Ot.prototype.findPartForData=Ot.prototype.Mc,Ot.prototype.findNodeForKey=Ot.prototype.Yb,Ot.prototype.removeModeledPart=Ot.prototype.ip,Ot.prototype.removeModeledParts=Ot.prototype.Hs,Ot.prototype.rebuildParts=Ot.prototype.Wd;var d2=!1,g2=!1,y2=!1;Ot.className="PartManager";function Pe(t){Ot.apply(this,arguments)}Z(Pe,Ot),Pe.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),m2(this,t.linkDataArray)},Pe.prototype.addModeledParts=function(t){for(Ot.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)Uh(t.value);Wp(this.diagram,!1)};function m2(t,e){e.forEach(function(i){v2(t,i)}),Wp(t.diagram,!1)}function v2(t,e){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.bf.contains(e)){var i=t.getLinkCategoryForData(e),n=t.findLinkTemplateForCategory(i);if(n!==null){jn(n);var r=n.copy();if(r!==null){n=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,r.Tf=i,r.ub=e,i=t.diagram.model;var o=ng(i,e,!0);o!==""&&(r.fromPortId=o),o=on(i,e,!0),o!==void 0&&(o=t.Yb(o),o instanceof W&&(r.fromNode=o)),o=ng(i,e,!1),o!==""&&(r.toPortId=o),o=on(i,e,!1),o!==void 0&&(o=t.Yb(o),o instanceof W&&(r.toNode=o)),i=i.Ef(e),Array.isArray(i)&&i.forEach(function(l){l=t.Yb(l),l!==null&&(l.labeledLink=r)}),t.tp&&(r.Jg="Tool"),t.diagram.add(r),r.ub=null,r.data=e,t.diagram.skipsModelSourceBindings=n}}}}Pe.prototype.removeAllModeledParts=function(){var t=this.diagram.model;x2(this,t.linkDataArray),this.Hs(t.nodeDataArray)};function x2(t,e){e.forEach(function(i){t.ip(i)})}Pe.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ps(t)},Pe.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.lp(t,e)},Pe.prototype.setFromNodeForLink=function(t,e){var i=this.diagram.model;i.yv(t.data,i.wa(e!==null?e.data:null))},Pe.prototype.setToNodeForLink=function(t,e){var i=this.diagram.model;i.Dv(t.data,i.wa(e!==null?e.data:null))},Pe.prototype.removeDataForLink=function(t){this.diagram.model.cm(t.data)},Pe.prototype.findPartForKey=function(t){var e=Ot.prototype.findPartForKey.call(this,t);return e===null&&(t=this.diagram.model.jh(t),t!==null)?this.bf.I(t):e},Pe.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.jh(t),t!==null?this.bf.I(t):null)},Pe.prototype.doModelChanged=function(t){var e=this;if(Ot.prototype.doModelChanged.call(this,t),this.diagram){var i=this.diagram;if(t.model===i.model){var n=t.change;if(i.aa){i.aa=!1;try{var r=t.modelChange;if(r!==""){if(n===Wt){if(r==="linkFromKey"){var o=this.Lc(t.object);if(o!==null){var l=this.Yb(t.newValue);o.fromNode=l}}else if(r==="linkToKey"){var u=this.Lc(t.object);if(u!==null){var h=this.Yb(t.newValue);u.toNode=h}}else if(r==="linkFromPortId"){var f=this.Lc(t.object);if(f!==null){var c=t.newValue;typeof c=="string"&&(f.fromPortId=c)}}else if(r==="linkToPortId"){var p=this.Lc(t.object);if(p!==null){var g=t.newValue;typeof g=="string"&&(p.toPortId=g)}}else if(r==="nodeGroupKey"){var m=this.Mc(t.object);if(m!==null){var v=t.newValue;if(v!==void 0){var x=this.Yb(v);x instanceof dt?m.containingGroup=x:m.containingGroup=null}else m.containingGroup=null}}else if(r==="linkLabelKeys"){var k=this.Lc(t.object);if(k!==null){var S=t.oldValue,P=t.newValue;Array.isArray(S)&&S.forEach(function(R){0<=P.indexOf(R)||(R=e.Yb(R),R!==null&&(R.labeledLink=null))}),Array.isArray(P)&&P.forEach(function(R){R=e.Yb(R),R!==null&&(R.labeledLink=k)})}}else if(r==="linkCategory"){var N=this.Lc(t.object),T=t.newValue;N!==null&&typeof T=="string"&&(N.category=T)}else r==="linkDataArray"&&(x2(this,t.oldValue),m2(this,t.newValue));i.isModified=!0}else if(n===de){var F=t.newValue;if(r==="linkDataArray"&&typeof F=="object"&&F!==null)v2(this,F);else if(r==="linkLabelKeys"&&js(F)){var D=this.Lc(t.object),X=this.Yb(F);D!==null&&X!==null&&(X.labeledLink=D)}i.isModified=!0}else if(n===Se){var tt=t.oldValue;if(r==="linkDataArray"&&typeof tt=="object"&&tt!==null)this.ip(tt);else if(r==="linkLabelKeys"&&js(tt)){var et=this.Yb(tt);et!==null&&(et.labeledLink=null)}i.isModified=!0}}else if(n===Wt){var U=t.propertyName;t.object!==i.model||U!=="linkFromKeyProperty"&&U!=="linkToKeyProperty"&&U!=="linkFromPortIdProperty"&&U!=="linkToPortIdProperty"&&U!=="linkLabelKeysProperty"&&U!=="nodeIsGroupProperty"&&U!=="nodeGroupKeyProperty"&&U!=="linkCategoryProperty"||i.undoManager.isUndoingRedoing||this.Wd(),i.isModified=!0}}finally{i.aa=!0}}}}},Pe.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,i=new _,n=e.linkDataArray;n.forEach(function(o){i.add(o)});var r=[];this.links.each(function(o){o.data===null||i.contains(o.data)||r.push(o.data)}),r.forEach(function(o){A2(e,o,!1)}),n.forEach(function(o){t.Lc(o)===null&&F2(e,o,!1)})},Pe.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var i=t.diagram;if(i!==null){var n=i.model;if(t instanceof V){var r=on(n,e,!0);if(r=i.Yb(r),t.fromNode=r,r=on(n,e,!1),r=i.Yb(r),t.toNode=r,e=n.Ef(e),0<e.length||0<t.labelNodes.count){if(e.length===1&&t.labelNodes.count===1){r=e[0];var o=t.labelNodes.first();if(n.wa(o.data)===r)return}r=new _().addAll(e);var l=new _;t.labelNodes.each(function(u){u.data!==null&&(u=n.wa(u.data),u!==void 0&&l.add(u))}),e=l.copy(),e.hp(r),r=r.copy(),r.hp(l),(0<e.count||0<r.count)&&(e.each(function(u){u=i.Yb(u),u!==null&&u.labeledLink===t&&(u.labeledLink=null)}),r.each(function(u){u=i.Yb(u),u!==null&&u.labeledLink!==t&&(u.labeledLink=t)}))}}else!(t instanceof Nt)&&(e=n.lh(e),e=i.findPartForKey(e),e===null||e instanceof dt)&&(t.containingGroup=e)}}},Pe.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.wa(t);if(i!==void 0){var n=_f(e,i),r=this.Mc(t);if(n!==null&&r!==null){n=n.iterator;for(var o={};n.next();){var l=n.value;e.lb(l)?r instanceof dt&&e.lh(l)===i&&(l=this.Mc(l),l!==null&&(l.containingGroup=r)):(o.link=this.Lc(l),o.link!==null&&r instanceof W&&(on(e,l,!0)===i&&(o.link.fromNode=r),on(e,l,!1)===i&&(o.link.toNode=r),l=e.Ef(l),Array.isArray(l)&&l.some(function(u){return function(h){return h===i?(r.labeledLink=u.link,!0):!1}}(o)))),o={link:o.link}}cr(e,i)}t=e.lh(t),t!==void 0&&(t=this.Yb(t),t instanceof dt&&(r.containingGroup=t))}},Pe.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof W){var i=e.wa(t.data);if(i!==void 0){for(var n=t.linksConnected;n.next();)fr(e,i,n.value.data);if(t.isLinkLabel&&(n=t.labeledLink,n!==null&&fr(e,i,n.data)),t instanceof dt)for(t=t.memberParts;t.next();)n=t.value.data,e.lb(n)&&fr(e,i,n)}}},Pe.prototype.copyPartData=function(t,e){var i=Ot.prototype.copyPartData.call(this,t,e);if(t instanceof V)if(t=t.data,t!==null&&e!==null){var n=e.model;t=n.Ko(t),typeof t=="object"&&t!==null&&(n.fi(t),i=e.Lc(t))}else i!==null&&(e=this.diagram,t!==null&&e!==null&&e.commandHandler!==null&&e.commandHandler.copiesClipboardData&&(e=e.model.Ko(t),typeof e=="object"&&e!==null&&(i.data=e)));return i},Pe.prototype.insertLink=function(t,e,i,n){var r=this.diagram,o=r.model,l=r.toolManager.findTool("Linking"),u="";if(t!==null&&(e===null&&(e=t),u=e.portId,u===null&&(u="")),e="",i!==null&&(n===null&&(n=i),e=n.portId,e===null&&(e="")),n=l.archetypeLinkData,n instanceof V){if(jn(n),o=n.copy(),o!==null)return o.fromNode=t,o.fromPortId=u,o.toNode=i,o.toPortId=e,r.add(o),t=l.archetypeLabelNodeData,t instanceof W&&(jn(t),t=t.copy(),t!==null&&(t.labeledLink=o,r.add(t))),o}else if(n!==null&&(n=o.Ko(n),typeof n=="object"&&n!==null))return t!==null&&ta(o,n,o.wa(t.data),!0),ea(o,n,u,!0),i!==null&&ta(o,n,o.wa(i.data),!1),ea(o,n,e,!1),o.fi(n),t=l.archetypeLabelNodeData,t===null||t instanceof W||(t=o.copyNodeData(t),typeof t=="object"&&t!==null&&(o.xf(t),t=o.wa(t),t!==void 0&&o.Cu(n,t))),r.Lc(n);return null},Pe.prototype.findLinkForKey=Pe.prototype.findLinkForKey,Pe.prototype.findPartForKey=Pe.prototype.findPartForKey,Pe.prototype.removeAllModeledParts=Pe.prototype.removeAllModeledParts,Pe.prototype.addModeledParts=Pe.prototype.addModeledParts,Pe.prototype.addAllModeledParts=Pe.prototype.addAllModeledParts,Pe.className="GraphLinksPartManager";function yn(){Ot.apply(this,arguments),this.Sg=null}Z(yn,Ot);function tg(t,e,i){if(e!==null&&i!==null&&i.kh()===null){var n=t.diagram.toolManager.findTool("Linking"),r=e,o=i;if(t.diagram.isTreePathToChildren||(r=i,o=e),(n===null||!nf(n,r,o,null,!0))&&(e=t.getLinkCategoryForData(i.data),n=t.findLinkTemplateForCategory(e),n!==null&&(jn(n),n=n.copy(),n!==null))){var l=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,n.Tf=e,n.ub=i.data,n.fromNode=r,n.toNode=o,t.diagram.add(n),n.ub=null,n.data=i.data,t.diagram.skipsModelSourceBindings=l}}}yn.prototype.getLinkCategoryForData=function(t){return this.diagram.model.ss(t)},yn.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.Ns(t,e)},yn.prototype.setFromNodeForLink=function(t,e,i){var n=this.diagram.model;if(i===void 0&&(i=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren)n.qe(t.data,n.wa(e));else{var r=this.Sg;this.Sg=t,i!==null&&n.qe(i.data,void 0),n.qe(e,n.wa(t.toNode!==null?t.toNode.data:null)),this.Sg=r}},yn.prototype.setToNodeForLink=function(t,e,i){var n=this.diagram.model;if(i===void 0&&(i=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren){var r=this.Sg;this.Sg=t,i!==null&&n.qe(i.data,void 0),n.qe(e,n.wa(t.fromNode!==null?t.fromNode.data:null)),this.Sg=r}else n.qe(t.data,n.wa(e))},yn.prototype.removeDataForLink=function(t){this.diagram.model.qe(t.data,void 0)},yn.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.jc(t),t!==null?this.bf.I(t):null)},yn.prototype.doModelChanged=function(t){if(Ot.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var i=t.change;if(e.aa){e.aa=!1;try{var n=t.modelChange;if(n!==""){if(i===Wt){if(n==="nodeParentKey"){var r=t.object,o=this.Yb(t.newValue),l=this.ji(r);if(this.Sg!==null)o!==null&&(this.Sg.data=r,this.Sg.category=this.getLinkCategoryForData(r));else if(l!==null){var u=l.kh();u!==null?o===null?e.remove(u):e.isTreePathToChildren?u.fromNode=o:u.toNode=o:tg(this,o,l)}}else if(n==="parentLinkCategory"){var h=this.ji(t.object),f=t.newValue;if(h!==null&&typeof f=="string"){var c=h.kh();c!==null&&(c.category=f)}}e.isModified=!0}}else if(i===Wt){var p=t.propertyName;t.object===e.model&&p==="nodeParentKeyProperty"&&(e.undoManager.isUndoingRedoing||this.Wd()),e.isModified=!0}}finally{e.aa=!0}}}}},yn.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var i=t.diagram;if(i!==null){var n=i.model;t instanceof W&&(e=n.mh(e),e=i.Yb(e),n=t.pg(),e!==n&&(n=t.kh(),e!==null?n!==null?i.isTreePathToChildren?n.fromNode=e:n.toNode=e:tg(this,e,t):n!==null&&om(i,n,!1)))}}},yn.prototype.updateDataBindings=function(t,e){Ot.prototype.updateDataBindings.call(this,t,e),typeof e=="string"&&this.Mc(t)!==null&&(t=this.Lc(t),t!==null&&t.La(e))},yn.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.wa(t);if(i!==void 0){var n=_f(e,i),r=this.Mc(t);if(n!==null&&r!==null){for(n=n.iterator;n.next();){var o=n.value;e.lb(o)&&r instanceof W&&e.mh(o)===i&&tg(this,r,this.ji(o))}cr(e,i)}t=e.mh(t),t!==void 0&&r instanceof W&&(t=this.Yb(t),tg(this,t,r))}},yn.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof W){var i=e.wa(t.data),n=this.Lc(t.data);if(n!==null){n.isSelected=!1,n.isHighlighted=!1;var r=n.layer;if(r!==null){var o=r.qc(-1,n,!1);0<=o&&this.diagram.cb(Se,"parts",r,n,null,o,null),o=n.layerChanged,o!==null&&o(n,r,null)}}for(n=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)r=t.value,r=(n?r.toNode:r.fromNode).data,e.lb(r)&&fr(e,i,r)}},yn.prototype.insertLink=function(t,e,i){e=this.diagram.model;var n=t,r=i;return this.diagram.isTreePathToChildren||(n=i,r=t),n!==null&&r!==null?(e.qe(r.data,e.wa(n.data)),r.kh()):null},yn.prototype.findLinkForKey=yn.prototype.findLinkForKey,yn.className="TreePartManager";function nt(t,e){this.jl=new _,this.hl=new _,this.Yv=`,
  "insertedNodeKeys": `,this.ly=`,
  "modifiedNodeData": `,this.$v=`,
  "removedNodeKeys": `,this.vh=null,Te(this),this.Tm=this.xa="",this.Gg=!1,this.j={},this.Uc=[],this.kb=new ct,this.Th="key",this.Ak=this.al=null,this.Km=this.Lm=!1,this.Nm=!0,this.ym=null,this.mj="category",this.Vf=new ct,this.Mt=new q,this.Wg=!1,this.o=null,this.undoManager=new ne,t!==void 0&&(Ht(t)?this.nodeDataArray=t:e=t),e&&(Object.assign(this,e),t=e.Changed)&&(delete this.Changed,this.Pe(t))}nt.prototype.cloneProtected=function(t){t.xa=this.xa,t.Tm=this.Tm,t.Gg=this.Gg,t.Th=this.Th,t.al=this.al,t.Ak=this.Ak,t.Lm=this.Lm,t.Km=this.Km,t.Nm=this.Nm,t.ym=this.ym,t.mj=this.mj},nt.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},nt.prototype.clear=function(){this.Uc=[],this.kb.clear(),this.Vf.clear(),this.undoManager.clear()},nt.prototype.toString=function(t){if(t===void 0&&(t=0),1<t)return this.np();var e=(this.name!==""?this.name:"")+" Model";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var i=t.length,n=0;n<i;n++){var r=t[n];e+=" "+this.wa(r)+":"+Bi(r)}}return e},nt.prototype.BA=function(t){t.change!==Wn&&O("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof Ie?(M2(this,e),t=this.Sv(e,t.propertyName==="FinishedUndo"),this.vh=null,t):null},nt.prototype.Sv=function(t,e){var i=this,n=!1,r=new _,o=new _,l=new _,u=this.vh;t.changes.each(function(p){p.model===i&&(p.modelChange==="nodeDataArray"?p.change===de?r.add(p.newValue):p.change===Se&&l.add(p.oldValue):i.lb(p.object)?o.add(p.object):p.change!==Wt||i.modelData!==p.object&&p.propertyName!=="modelData"?p.object!==null&&(u&&u.contains(p.object)?u.get(p.object).each(function(g){i.lb(g)&&o.add(g)}):p.object instanceof nt||i.si()&&i.Kc(p.object)||S2(i,p.object).each(function(g){o.add(g)})):n=!0)});var h=this.hl;h.clear(),r.each(function(p){h.add(i.wa(p)),e||o.add(p)});var f=this.jl;f.clear(),l.each(function(p){f.add(i.wa(p)),e&&o.add(p)}),t=i.cloneDeep(o.Fa());var c=null;return n&&(c===null&&(c={}),c.modelData=this.cloneDeep(this.modelData)),0<h.count&&(c===null&&(c={}),e?c.removedNodeKeys=h.Fa():c.insertedNodeKeys=h.Fa()),0<t.length&&(c===null&&(c={}),c.modifiedNodeData=t),0<f.count&&(c===null&&(c={}),e?c.insertedNodeKeys=f.Fa():c.removedNodeKeys=f.Fa()),f.clear(),h.clear(),c},nt.prototype.cloneDeep=function(t){return qh(this,t,!0)};function qh(t,e,i,n,r,o){function l(p,g){u?(p.__gohashid===void 0&&o.push(p),n.set(p,g)):(p=Zl++,n.set(p,g),r.set(p,e))}if(!gt(e))return e;o||(o=[]);var u=Object.isExtensible(e);if(n||(n=new ct),u){var h=n.get(e);if(h)return h}else for(r||(r=new ct),h=r.iterator;h.next();){var f=h.key;if(h.value===e&&(f=n.get(f)))return f}if(Array.isArray(e)){h=[],l(e,h);for(var c=0;c<e.length;c++)h.push(qh(t,e[c],!1,n,r,o))}else if(e instanceof C||e instanceof ht||e instanceof E||e instanceof Dt||e instanceof lt)h=e.copy(),l(e,h);else{if(e instanceof jt||e instanceof H||e instanceof K)return e;if(e instanceof q)h=new q().addAll(qh(t,e.Fa(),!1,n,r,o)),l(e,h);else if(e instanceof _)h=new _().addAll(qh(t,e.Fa(),!1,n,r,o)),l(e,h);else if(e instanceof ct)h=new ct().addAll(qh(t,e.Fa(),!1,n,r,o)),l(e,h);else if(e instanceof Date)h=new Date(e.getTime()),l(e,h);else if(e instanceof RegExp)h=new RegExp(e),l(e,h),h.lastIndex=e.lastIndex;else if(typeof e.copy=="function")h=e.copy(),l(e,h);else for(c in h={},l(e,h),e)c!=="__gohashid"&&(h[c]=qh(t,e[c],!1,n,r,o))}return i&&o.forEach(function(p){delete p.__gohashid}),h}s=nt.prototype,s.quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},s.sm=function(){var t="";return this.name!==""&&(t+=`,
  "name": `+this.quote(this.name)),this.dataFormat!==""&&(t+=`,
  "dataFormat": `+this.quote(this.dataFormat)),this.isReadOnly&&(t+=`,
  "isReadOnly": `+this.isReadOnly),this.nodeKeyProperty!=="key"&&typeof this.nodeKeyProperty=="string"&&(t+=`,
  "nodeKeyProperty": `+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=`,
  "copiesArrays": true`),this.copiesArrayObjects&&(t+=`,
  "copiesArrayObjects": true`),this.copiesKey||(t+=`,
  "copiesKey": false`),this.nodeCategoryProperty!=="category"&&typeof this.nodeCategoryProperty=="string"&&(t+=`,
  "nodeCategoryProperty": `+this.quote(this.nodeCategoryProperty)),t},s.gp=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),t.copiesKey===!1&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)};function w2(t,e){e=e.modelData,gt(e)&&(t.em(e),t.modelData=e)}s.Tv=function(){var t=this.modelData,e=!1,i;for(i in t)if(!k2(i,t[i])){e=!0;break}return t="",e&&(t=`,
  "modelData": `+Av(this,this.modelData)),t+`,
  "nodeDataArray": `+As(this,this.nodeDataArray,!0)},s.mv=function(t){w2(this,t),t=t.nodeDataArray,Ht(t)&&(this.em(t),this.nodeDataArray=t)};function M2(t,e){function i(r,o){if((o=o.part)&&(o=o.data,r!==o)){var l=n.get(r);l===null?(l=new _,l.add(o),n.add(r,l)):l.add(o)}}var n=t.vh;n===null&&(n=new ct,e.changes.each(function(r){if(r.diagram!==null){var o=r.change;o===Wt?(r=r.object.panel)&&(o=r.data)&&i(o,r):(o===de||o===Se)&&(r=r.object,(o=r.itemArray)&&i(o,r))}}),t.vh=n)}function S2(t,e){for(var i=new _,n=0;n<t.nodeDataArray.length;n++){var r=t.nodeDataArray[n];eg(t,e,r,r,i)}return i}function eg(t,e,i,n,r){if(Array.isArray(i))for(var o=0;o<i.length;o++){var l=i[o];if(l===e)return r.add(n),!0;if(eg(t,e,l,n,r))return!0}else if(gt(i)&&Object.getPrototypeOf(i)===Object.prototype)for(o in i){if(l=i[o],l===e)return r.add(n),!0;if(eg(t,e,l,n,r))return!0}return!1}s.Rv=function(t,e){var i=this,n=!1,r=new _,o=new _,l=new _,u=this.vh;t.changes.each(function(c){c.model===i&&(c.modelChange==="nodeDataArray"?c.change===de?r.add(c.newValue):c.change===Se&&l.add(c.oldValue):i.lb(c.object)?o.add(c.object):c.change!==Wt||i.modelData!==c.object&&c.propertyName!=="modelData"?c.object!==null&&(u&&u.contains(c.object)?u.get(c.object).each(function(p){i.lb(p)&&o.add(p)}):c.object instanceof nt||i.si()&&i.Kc(c.object)||S2(i,c.object).each(function(p){o.add(p)})):n=!0)});var h=this.hl;h.clear(),r.each(function(c){h.add(i.wa(c)),e||o.add(c)});var f=this.jl;return f.clear(),l.each(function(c){f.add(i.wa(c)),e&&o.add(c)}),t="",n&&(t+=`,
  "modelData": `+Av(this,this.modelData)),0<h.count&&(t+=(e?this.$v:this.Yv)+As(this,h.Fa(),!0)),0<o.count&&(t+=this.ly+As(this,o.Fa(),!0)),0<f.count&&(t+=(e?this.Yv:this.$v)+As(this,f.Fa(),!0)),f.clear(),h.clear(),t},s.fp=function(t){(t.name!==void 0&&t.name!==this.name||t.dataFormat!==void 0&&t.dataFormat!==this.dataFormat||t.isReadOnly!==void 0&&t.isReadOnly!==this.isReadOnly||t.nodeKeyProperty!==void 0&&t.nodeKeyProperty!==this.nodeKeyProperty||t.copiesArrays!==void 0&&t.copiesArrays!==this.copiesArrays||t.copiesArrayObjects!==void 0&&t.copiesArrayObjects!==this.copiesArrayObjects||t.copiesKey!==void 0&&t.copiesKey!==this.copiesKey||t.nodeCategoryProperty!==void 0&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&O("applyIncrementalJson cannot change Model properties"),w2(this,t);var e=t.insertedNodeKeys,i=t.modifiedNodeData,n=new ct;if(Array.isArray(i))for(var r=0;r<i.length;r++){var o=i[r],l=this.wa(o);l!=null&&n.set(l,o)}if(Array.isArray(e))for(r=e.length,o=0;o<r;o++){l=e[o];var u=this.jc(l);u===null&&(u=(u=n.get(l))?u:this.copyNodeData({}),this.lm(u,l),this.xf(u))}if(Array.isArray(i)){for(e=i.length,n=0;n<e;n++)if(r=i[n],o=this.wa(r),o=this.jc(o),o!==null){for(var h in r)h==="__gohashid"||h===this.nodeKeyProperty||this.Vj()&&h===this.nodeIsGroupProperty||this.setDataProperty(o,h,r[h]);this.mm(r,o)}}if(t=t.removedNodeKeys,Array.isArray(t))for(i=t.length,h=0;h<i;h++)e=this.jc(t[h]),e!==null&&this.dm(e)},s.by=function(t,e){t.change!==Wn&&O("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var i=t.object;return t.isTransactionFinished&&i instanceof Ie?(e===void 0&&(e=Wf(this,this)),M2(this,i),t=this.Rv(i,t.propertyName==="FinishedUndo"),this.vh=null,e==="2"?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.sm()+t+"}"):'{ "incremental": 0 }'},s.CA=function(t,e){return this.by(t,e)},s.np=function(t){return t===void 0&&(t=Wf(this,this)),'{ "class": '+this.quote(t)+this.sm()+this.Tv()+"}"},s.toJSON=function(t){return this.np(t)},s.ax=function(t){var e=null;if(typeof t=="string")try{e=$.JSON.parse(t)}catch{}else typeof t=="object"?e=t:O("Unable to modify a Model from: "+t);var i=e.incremental;typeof i!="number"&&O("Unable to apply non-incremental changes to Model: "+t),i!==0&&(this.Ea("applyIncrementalJson"),this.fp(e),this.eb("applyIncrementalJson"))},s.My=function(t){return this.ax(t)},nt.constructGraphLinksModel=function(){return new nt},s=nt.prototype,s.em=function(t){if(Ht(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];if(gt(n)){var r=i;n=this.em(n),Array.isArray(t)?t[r]=n:O("Cannot replace an object in an HTMLCollection or NodeList at "+r)}}else if(gt(t)){for(e in t)if(i=t[e],gt(i)&&(i=this.em(i),t[e]=i,e==="points"&&Array.isArray(i))){for(r=i.length%2===0,n=0;n<i.length;n++)if(typeof i[n]!="number"){r=!1;break}if(r){for(r=new q,n=0;n<i.length/2;n++)r.add(new C(i[2*n],i[2*n+1]));r.freeze(),t[e]=r}}return PT(t)}return t},s.tm=function(t){return t===void 0?"undefined":t===null?"null":t===!0?"true":t===!1?"false":typeof t=="string"?this.quote(t):typeof t=="number"?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.tm(t.valueOf()):Ht(t)?As(this,t):gt(t)?Av(this,t):typeof t=="function"?"null":t.toString()};function As(t,e,i){i===void 0&&(i=!1);var n=e.length;if(0>=n)return"[]";var r=new tl;r.add("["),i&&1<n&&r.add(`
`);for(var o=0;o<n;o++){var l=e[o];l!==void 0&&(0<o&&(r.add(","),i&&r.add(`
`)),r.add(t.tm(l)))}return i&&1<n&&r.add(`
`),r.add("]"),r.toString()}function k2(t,e){return e===void 0||t==="__gohashid"||t[0]==="_"||typeof e=="function"}function xi(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function Av(t,e){var i=e;if(i instanceof C)e={class:"go.Point",x:xi(i.x),y:xi(i.y)};else if(i instanceof ht)e={class:"go.Size",width:xi(i.width),height:xi(i.height)};else if(i instanceof E)e={class:"go.Rect",x:xi(i.x),y:xi(i.y),width:xi(i.width),height:xi(i.height)};else if(i instanceof Dt)e={class:"go.Margin",top:xi(i.top),right:xi(i.right),bottom:xi(i.bottom),left:xi(i.left)};else if(i instanceof lt)i.sb()?e={class:"go.Spot",x:xi(i.x),y:xi(i.y),offsetX:xi(i.offsetX),offsetY:xi(i.offsetY)}:e={class:"go.Spot",enum:i.toString()};else if(i instanceof jt){if(e={class:"go.Brush",type:i.type.name},i.type===wo?e.color=i.color:(i.type===Wr||i.type===rn)&&(e.start=i.start,e.end=i.end,i.type===rn&&(i.startRadius!==0&&(e.startRadius=xi(i.startRadius)),isNaN(i.endRadius)||(e.endRadius=xi(i.endRadius)))),i.colorStops!==null){var n={};for(i=i.colorStops.iterator;i.next();)n[i.key]=i.value;e.colorStops=n}}else i instanceof H?(e={class:"go.Geometry",type:i.type.name},i.startX!==0&&(e.startX=xi(i.startX)),i.startY!==0&&(e.startY=xi(i.startY)),i.endX!==0&&(e.endX=xi(i.endX)),i.endY!==0&&(e.endY=xi(i.endY)),i.spot1.D(Je)||(e.spot1=i.spot1),i.spot2.D(Yr)||(e.spot2=i.spot2),i.type===H.j&&(e.path=H.ia(i))):i instanceof K&&(e={class:"go.EnumValue",classType:Wf(t,i.classType),name:i.name});n="{",i=!0;for(var r in e){var o=le(e,r);if(!k2(r,o))if(i?i=!1:n+=",",n+=t.quote(r)+":",r==="points"&&o instanceof q){var l="[";for(o=o.iterator;o.next();){var u=o.value;1<l.length&&(l+=","),l+=t.tm(u.x),l+=",",l+=t.tm(u.y)}l+="]",n+=l}else n+=t.tm(o)}return n+"}"}function wi(t){return typeof t=="number"?t:t==="NaN"?NaN:t==="9e9999"?1/0:t==="-9e9999"?-1/0:parseFloat(t)}function PT(t){if(typeof t!="object")return t;var e=t.class||"";if(typeof e!="string"||!e)return t;if(e==="NaN")return NaN;if(e==="Date")return new Date(t.value);if(e.indexOf("go.")!==0)return t;e=e.substr(3);var i=t;if(e==="Point")i=new C(wi(t.x),wi(t.y));else if(e==="Size")i=new ht(wi(t.width),wi(t.height));else if(e==="Rect")i=new E(wi(t.x),wi(t.y),wi(t.width),wi(t.height));else if(e==="Margin")i=new Dt(wi(t.top),wi(t.right),wi(t.bottom),wi(t.left));else if(e==="Spot")typeof t.enum=="string"?i=L0(t.enum):i=new lt(wi(t.x),wi(t.y),wi(t.offsetX),wi(t.offsetY));else if(e==="Brush"){if(i=new jt,i.type=Xn(jt,t.type),typeof t.color=="string"&&(i.color=t.color),t.start instanceof lt&&(i.start=t.start),t.end instanceof lt&&(i.end=t.end),typeof t.startRadius=="number"&&(i.startRadius=wi(t.startRadius)),typeof t.endRadius=="number"&&(i.endRadius=wi(t.endRadius)),t=t.colorStops,gt(t))for(var n in t)i.addColorStop(parseFloat(n),t[n])}else e==="Geometry"?(i=null,typeof t.path=="string"?i=H.parse(t.path):i=new H,i.type=Xn(H,t.type),typeof t.startX=="number"&&(i.startX=wi(t.startX)),typeof t.startY=="number"&&(i.startY=wi(t.startY)),typeof t.endX=="number"&&(i.endX=wi(t.endX)),typeof t.endY=="number"&&(i.endY=wi(t.endY)),t.spot1 instanceof lt&&(i.spot1=t.spot1),t.spot2 instanceof lt&&(i.spot2=t.spot2)):e==="EnumValue"&&(n=t.classType,n.indexOf("go.")===0&&(n=n.substr(3)),n=Dv(n),typeof n=="function"&&(i=Xn(n,t.name)));return i}s.Pe=function(t){return this.Mt.add(t),this},s.hk=function(t){this.Mt.remove(t)},s.ds=function(t){this.skipsUndoManager||this.undoManager.Vu(t);for(var e=this.Mt,i=e.length,n=0;n<i;n++)e.M(n)(t)},s.cb=function(t,e,i,n,r,o,l){pe(this,"",t,e,i,n,r,o,l)},s.g=function(t,e,i,n,r){pe(this,"",Wt,t,this,e,i,n,r)},s.Gs=function(t,e,i,n,r,o){pe(this,"",Wt,e,t,i,n,r,o)};function pe(t,e,i,n,r,o,l,u,h){u===void 0&&(u=null),h===void 0&&(h=null);var f=new Jt;f.model=t,f.change=i,f.modelChange=e,f.propertyName=n,f.object=r,f.oldValue=o,f.oldParam=u,f.newValue=l,f.newParam=h,t.ds(f)}nt.prototype.changeState=function(t,e){if(t!==null&&t.model===this)if(t.change===Wt){var i=t.object,n=t.propertyName,r=t.I(e);n===this.nodeKeyProperty&&this.lb(i)&&(e=t.I(!e),e!==void 0&&this.kb.remove(e),r!==void 0&&this.kb.add(r,i)),Xt(i,n,r)}else t.change===de?(i=t.newParam,t.modelChange==="nodeDataArray"?(t=t.newValue,gt(t)&&typeof i=="number"&&(n=this.wa(t),e?(this.Uc[i]===t&&Mr(this.Uc,i),n!==void 0&&this.kb.remove(n)):(this.Uc[i]!==t&&Ji(this.Uc,i,t),n!==void 0&&this.kb.add(n,t)))):t.modelChange===""?((n=t.object)&&!Ht(n)&&t.propertyName&&(n=le(t.object,t.propertyName)),Ht(n)&&typeof i=="number"&&(t=t.newValue,e?Mr(n,i):Ji(n,i,t))):O("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===Se?(i=t.oldParam,t.modelChange==="nodeDataArray"?(t=t.oldValue,gt(t)&&typeof i=="number"&&(n=this.wa(t),e?(this.Uc[i]!==t&&Ji(this.Uc,i,t),n!==void 0&&this.kb.add(n,t)):(this.Uc[i]===t&&Mr(this.Uc,i),n!==void 0&&this.kb.remove(n)))):t.modelChange===""?((n=t.object)&&!Ht(n)&&t.propertyName&&(n=le(t.object,t.propertyName)),Ht(n)&&typeof i=="number"&&(t=t.oldValue,e?Ji(n,i,t):Mr(n,i))):O("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==Wn&&O("unknown ChangedEvent: "+t.toString())},nt.prototype.Ea=function(t){return this.undoManager.Ea(t)},nt.prototype.eb=function(t){return this.undoManager.eb(t)},nt.prototype.Kf=function(){return this.undoManager.Kf()},nt.prototype.commit=function(t,e){e===void 0&&(e="");var i=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.Ea(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.eb(e):this.undoManager.Kf(),this.skipsUndoManager=i}},s=nt.prototype,s.La=function(t,e){e===void 0&&(e=""),pe(this,"SourceChanged",Wn,e,t,null,null)},s.wa=function(t){if(t!==null){var e=this.Th;if(e!==""&&(e=le(t,e),e!==void 0)){if(js(e))return e;O("Key value for node data "+t+" is not a number or a string: "+e)}}},s.lm=function(t,e){if(t!==null){var i=this.Th;if(i!=="")if(this.lb(t)){var n=le(t,i);n!==e&&this.jc(e)===null&&(Xt(t,i,e),n!==void 0&&this.kb.remove(n),this.kb.add(e,t),pe(this,"nodeKey",Wt,i,t,n,e),typeof i=="string"&&this.La(t,i),this.jp(n,e))}else Xt(t,i,e)}};function js(t){return typeof t=="number"||typeof t=="string"}s.lb=function(t){var e=this.wa(t);return e===void 0?!1:this.kb.I(e)===t},s.jc=function(t){return t===null&&O("Model.findNodeDataForKey:key must not be null"),t!==void 0&&js(t)?this.kb.I(t):null},s.bv=function(t){if(t!==null){var e=this.Th;if(e!==""){var i=this.wa(t);if(i===void 0||this.kb.contains(i)){var n=this.al;if(n!==null&&(i=n(this,t),i!=null&&!this.kb.contains(i))){Xt(t,e,i);return}if(typeof i=="string"){for(n=2;this.kb.contains(i+n);)n++;Xt(t,e,i+n)}else if(i===void 0||typeof i=="number"){for(i=-this.kb.count-1;this.kb.contains(i);)i--;Xt(t,e,i)}}}}},s.xf=function(t){t!==null&&($l(t),this.lb(t)||C2(this,t,!0))};function C2(t,e,i){var n=t.wa(e);(n===void 0||t.kb.I(n)!==e)&&(t.bv(e),n=t.wa(e),n===void 0&&O("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.kb.add(n,e),n=null,i&&(n=t.Uc.length,Ji(t.Uc,n,e)),pe(t,"nodeDataArray",de,"nodeDataArray",t,null,e,null,n),t.gm(e),t.fm(e))}s.Hy=function(t){if(Ht(t))for(var e=t.length,i=0;i<e;i++)this.xf(t[i]);else for(t=t.iterator;t.next();)this.xf(t.value)},s.dm=function(t){t!==null&&P2(this,t,!0)};function P2(t,e,i){var n=t.wa(e);if(n!==void 0&&t.kb.remove(n),n=null,i){t:if(i=t.Uc,Array.isArray(i))n=i.indexOf(e);else{n=i.length;for(var r=0;r<n;r++)if(i[r]===e){n=r;break t}n=-1}if(0>n)return;Mr(t.Uc,n)}pe(t,"nodeDataArray",Se,"nodeDataArray",t,e,null,n,null),t.qp(e)}s.rA=function(t){if(Ht(t))for(var e=t.length,i=0;i<e;i++)this.dm(t[i]);else for(t=t.iterator;t.next();)this.dm(t.value)},s.eA=function(t){if(t!==this.nodeDataArray&&Ht(t)){var e=this.jl;e.clear(),e.addAll(this.kb.iteratorKeys);var i=this.hl;i.clear();for(var n=t.length,r=0;r<n;r++){var o=t[r],l=this.wa(o);if(l!==void 0){i.add(l);var u=this.jc(l);u!==o&&(u!==null?(this.Eo(u,o),this.mm(o,u)):(o=this.cloneDeep(o),this.lm(o,l),this.xf(o)))}else l=this.cloneDeep(o),this.xf(l),i.add(this.wa(l))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.jc(n))&&this.dm(n);e.clear(),i.clear()}},s.jp=function(t,e){e!==void 0&&(t=_f(this,t),t instanceof _&&this.Vf.add(e,t))},s.Nv=function(){},s.gm=function(){},s.fm=function(){},s.qp=function(){};function fr(t,e,i){if(e!==void 0){var n=t.Vf.I(e);n===null&&(n=new _,t.Vf.add(e,n)),n.add(i)}}function cr(t,e,i){if(e!==void 0){var n=t.Vf.I(e);n instanceof _&&(i==null?t.Vf.remove(e):(n.remove(i),n.count===0&&t.Vf.remove(e)))}}function _f(t,e){return e===void 0?null:(t=t.Vf.I(e),t instanceof _?t:null)}s.Vy=function(t){t===void 0?this.Vf.clear():this.Vf.remove(t)},nt.prototype.copyNodeData=function(t){if(t===null)return null;var e=this.Ak;return t=e!==null?e(t,this):ig(this,t,!0),gt(t)&&Te(t),t};function ig(t,e,i){if(t.copiesArrays&&Array.isArray(e)){var n=[];for(i=0;i<e.length;i++){var r=ig(t,e[i],t.copiesArrayObjects);n.push(r)}return Te(n),n}if(i&&gt(e)){i=(i=e.constructor)?new i:{},r=t.copiesKey||typeof t.nodeKeyProperty!="string"?null:t.nodeKeyProperty;for(n in e)if(n==="__gohashid")i.__gohashid=void 0;else if(n===r)i[r]=void 0;else{var o=le(e,n),l=Wf(t,o);l==="GraphObject"||l==="Diagram"||l==="Layer"||l==="RowColumnDefinition"||l==="AnimationManager"||l==="Tool"||l==="CommandHandler"||l==="Layout"||l==="InputEvent"||l==="DiagramEvent"||o instanceof nt||o instanceof ne||o instanceof Ie||o instanceof Jt||(o=ig(t,o,!1)),Xt(i,n,o)}return Te(i),i}return e instanceof C||e instanceof ht||e instanceof E||e instanceof lt||e instanceof Dt?e.copy():e}nt.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty){this.lm(t,i);return}if(e===this.nodeCategoryProperty){this.km(t,i);return}}else!N2&&t instanceof it&&(N2=!0,Pt('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Pt("  Is that really your intent?"));var n=le(t,e);n!==i&&(Xt(t,e,i),this.Gs(t,e,n,i))},s=nt.prototype,s.set=function(t,e,i){this.setDataProperty(t,e,i)},s.Eo=function(t,e){if(e){var i=this.lb(t),n;for(n in e)n==="__gohashid"||i&&n===this.nodeKeyProperty||this.setDataProperty(t,n,e[n])}},s.Cy=function(t,e){this.ts(t,-1,e)},s.ts=function(t,e,i){0>e&&(e=t.length),Ji(t,e,i),pe(this,"",de,"",t,null,i,null,e)},s.qv=function(t,e){e===void 0&&(e=-1),t===this.Uc&&O("Model.removeArrayItem should not be called on the Model.nodeDataArray"),e===-1&&(e=t.length-1);var i=t[e];Mr(t,e),pe(this,"",Se,"",t,i,null,e,null)},s.So=function(t){if(t===null)return"";var e=this.mj;if(e===""||(e=le(t,e),e===void 0))return"";if(typeof e=="string")return e;O("getCategoryForNodeData found a non-string category for "+t+": "+e)},s.km=function(t,e){if(t!==null){var i=this.mj;if(i!=="")if(this.lb(t)){var n=le(t,i);n===void 0&&(n=""),n!==e&&(Xt(t,i,e),pe(this,"nodeCategory",Wt,i,t,n,e))}else Xt(t,i,e)}},s.mm=function(t,e){this.km(e,this.So(t))},s.Tl=function(){return!1},s.Vj=function(){return!1},s.si=function(){return!1},s.xs=function(){return!1},s.Wj=function(){return!1};function jv(){return new nt}function Wf(t,e){if(typeof e=="function"){if(e.className)return e.className;if(e.name)return e.name}else if(typeof e=="object"&&e!==null&&e.constructor)return Wf(t,e.constructor);return typeof e}function Dv(t){return bn[t]?bn[t]:$.go!==void 0&&$.go[t]?$.go[t]:null}function le(t,e){if(!t||!e)return null;try{if(typeof e=="function")var i=e(t);else typeof t.getAttribute=="function"?(i=t.getAttribute(e),i===null&&(i=void 0)):i=t[e]}catch{}return i}function Xt(t,e,i){if(t&&e)try{typeof e=="function"?e(t,i):typeof t.setAttribute=="function"?t.setAttribute(e,i):t[e]=i}catch{}}Y.Object.defineProperties(nt.prototype,{name:{get:function(){return this.xa},set:function(t){var e=this.xa;e!==t&&(this.xa=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Tm},set:function(t){var e=this.Tm;e!==t&&(this.Tm=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.Gg},set:function(t){var e=this.Gg;e!==t&&(this.Gg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.La(t))}},undoManager:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&(e!==null&&e.Tx(this),this.o=t,t!==null&&t.Zw(this))}},skipsUndoManager:{get:function(){return this.Wg},set:function(t){this.Wg=t}},nodeKeyProperty:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(t===""&&O("Model.nodeKeyProperty may not be the empty string"),0<this.kb.count&&O("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Th=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.al},set:function(t){var e=this.al;e!==t&&(this.al=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Uc},set:function(t){var e=this.Uc;if(e!==t){this.kb.clear(),this.Nv();for(var i=t.length,n=0;n<i;n++){var r=t[n];gt(r)||O("Model.nodeDataArray must only contain Objects, not: "+r),$l(r)}for(this.Uc=t,n=new q,r=0;r<i;r++){var o=t[r],l=this.wa(o);l===void 0||this.kb.I(l)!==null?n.add(o):this.kb.add(l,o)}for(n=n.iterator;n.next();)r=n.value,this.bv(r),o=this.wa(r),o!==void 0&&this.kb.add(o,r);for(pe(this,"nodeDataArray",Wt,"nodeDataArray",this,e,t),e=0;e<i;e++)n=t[e],this.gm(n),this.fm(n);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.Ak},set:function(t){var e=this.Ak;e!==t&&(this.Ak=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.Lm},set:function(t){var e=this.Lm;e!==t&&(this.Lm=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.Km},set:function(t){var e=this.Km;e!==t&&(this.Km=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.Nm},set:function(t){var e=this.Nm;e!==t&&(this.Nm=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.ym},set:function(t){var e=this.ym;e!==t&&(this.ym=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.mj},set:function(t){var e=this.mj;e!==t&&(this.mj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),nt.prototype.setCategoryForNodeData=nt.prototype.km,nt.prototype.getCategoryForNodeData=nt.prototype.So,nt.prototype.removeArrayItem=nt.prototype.qv,nt.prototype.insertArrayItem=nt.prototype.ts,nt.prototype.addArrayItem=nt.prototype.Cy,nt.prototype.assignAllDataProperties=nt.prototype.Eo,nt.prototype.set=nt.prototype.set,nt.prototype.clearUnresolvedReferences=nt.prototype.Vy,nt.prototype.mergeNodeDataArray=nt.prototype.eA,nt.prototype.removeNodeDataCollection=nt.prototype.rA,nt.prototype.removeNodeData=nt.prototype.dm,nt.prototype.addNodeDataCollection=nt.prototype.Hy,nt.prototype.addNodeData=nt.prototype.xf,nt.prototype.makeNodeDataKeyUnique=nt.prototype.bv,nt.prototype.findNodeDataForKey=nt.prototype.jc,nt.prototype.containsNodeData=nt.prototype.lb,nt.prototype.setKeyForNodeData=nt.prototype.lm,nt.prototype.getKeyForNodeData=nt.prototype.wa,nt.prototype.updateTargetBindings=nt.prototype.La,nt.prototype.commit=nt.prototype.commit,nt.prototype.rollbackTransaction=nt.prototype.Kf,nt.prototype.commitTransaction=nt.prototype.eb,nt.prototype.startTransaction=nt.prototype.Ea,nt.prototype.raiseDataChanged=nt.prototype.Gs,nt.prototype.raiseChanged=nt.prototype.g,nt.prototype.raiseChangedEvent=nt.prototype.cb,nt.prototype.removeChangedListener=nt.prototype.hk,nt.prototype.addChangedListener=nt.prototype.Pe,nt.prototype.writeJsonValue=nt.prototype.tm,nt.prototype.replaceJsonObjects=nt.prototype.em,nt.prototype.applyIncrementalJSON=nt.prototype.My,nt.prototype.applyIncrementalJson=nt.prototype.ax,nt.prototype.toJSON=nt.prototype.toJSON,nt.prototype.toJson=nt.prototype.np,nt.prototype.toIncrementalJSON=nt.prototype.CA,nt.prototype.toIncrementalJson=nt.prototype.by,nt.prototype.toIncrementalData=nt.prototype.BA,nt.prototype.clear=nt.prototype.clear;var N2=!1,bn={};nt.className="Model",nt.fromJSON=nt.fromJson=function(t,e){e===void 0&&(e=null);var i=null;if(typeof t=="string")try{i=$.JSON.parse(t)}catch{}else typeof t=="object"?i=t:O("Unable to construct a Model from: "+t);if(e===null){t=null;var n=i.class;if(typeof n=="string")try{var r=null;n.indexOf("go.")===0?(n=n.substr(3),r=Dv(n)):(r=Dv(n),r===null&&(r=$[n])),typeof r=="function"&&(t=new r)}catch{}t===null||t instanceof nt?e=t:O("Unable to construct a Model of declared class: "+i.class)}return e===null&&(e=nt.constructGraphLinksModel()),e.gp(i),e.mv(i),e},nt.safePropertyValue=le,nt.safePropertySet=Xt,bn.Brush=jt,bn.ChangedEvent=Jt,bn.Geometry=H,bn.Margin=Dt,bn.Panel=z,bn.Point=C,bn.Rect=E,bn.Size=ht,bn.Spot=lt,bn.Transaction=Ie,bn.UndoManager=ne;function se(t,e,i,n){Te(this),this._isFrozen=!1,t===void 0&&(t=""),e===void 0&&(e=t),i===void 0&&(i=null),this.j=-1,this.xd=null,this.xl=t,this.wl=this.uo=0,this.Cr=null,this.xn=!1,this.sl=e,this.Jm=i,n===void 0?(this.dl=Ov,this.vk=null):(this.dl=bh,this.vk=n),this.tt=new _}se.prototype.copy=function(){var t=new se;return t.xl=this.xl,t.uo=this.uo,t.wl=this.wl,t.Cr=this.Cr,t.xn=this.xn,t.sl=this.sl,t.Jm=this.Jm,t.dl=this.dl,t.vk=this.vk,t},s=se.prototype,s.qb=function(t){t.classType===se&&(this.mode=t)},s.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(this.Bi!==-1?" "+this.Bi:"")+" "+this.mode.name+")"},s.freeze=function(){return this._isFrozen=!0,this},s.ka=function(){return this._isFrozen=!1,this},s.dv=function(t){return t===void 0&&(t=null),this.mode=bh,this.backConverter=t,this},s.Xl=function(t){return t===void 0&&(t=""),this.sourceName=t,this.isToModel=!1,this},s.Nx=function(){return this.sourceName=null,this.isToModel=!0,this};function T2(t,e,i){return t=t.sourceName,t===null||t===""?e:t==="/"?i.part:t==="."?i:t===".."?i.panel:e.fb(t)}s.Ov=function(t,e,i){var n=this.sl;if(i===void 0||n===""||n===i){i=this.xl;var r=this.Jm;if(r===null&&i==="")Pt("Binding error: target property is the empty string: "+this.toString());else{var o=e;if(n!==""&&(o=le(e,n)),o!==void 0)if(r===null)i!==""&&Xt(t,i,o);else try{if(i!==""){var l=r(o,t);Xt(t,i,l)}else r(o,t)}catch{}}}},s.sp=function(t,e,i,n){if(this.dl===bh){var r=this.xl;if(i===void 0||r===i){i=this.sl;var o=this.vk,l=t;if(r!==""&&(l=le(t,r)),l!==void 0&&!this.tt.contains(t))try{this.tt.add(t);var u=n!==null?n.diagram:null,h=u!==null?u.model:null;if(o===null){if(i!=="")h!==null?h.setDataProperty(e,i,l):Xt(e,i,l);else if(h!==null&&n!==null&&0<=n.itemIndex&&n.panel!==null&&Array.isArray(n.panel.itemArray)){var f=n.itemIndex,c=n.panel.itemArray;h.qv(c,f),h.ts(c,f,l)}}else try{if(i!==""){var p=o(l,e,h);h!==null?h.setDataProperty(e,i,p):Xt(e,i,p)}else{var g=o(l,e,h);if(g!==void 0&&h!==null&&n!==null&&0<=n.itemIndex&&n.panel!==null&&Array.isArray(n.panel.itemArray)){var m=n.itemIndex,v=n.panel.itemArray;h.qv(v,m),h.ts(v,m,g)}}}catch{}}finally{this.tt.remove(t)}}}},Y.Object.defineProperties(se.prototype,{Bi:{get:function(){return this.j},set:function(t){this._isFrozen&&rt(this),this.j=t}},targetProperty:{get:function(){return this.xl},set:function(t){this._isFrozen&&rt(this),this.xl=t}},sourceName:{get:function(){return this.Cr},set:function(t){this._isFrozen&&rt(this),this.Cr=t,t!==null&&(this.xn=!1)}},isToModel:{get:function(){return this.xn},set:function(t){this._isFrozen&&rt(this),this.xn=t}},sourceProperty:{get:function(){return this.sl},set:function(t){this._isFrozen&&rt(this),this.sl=t}},converter:{get:function(){return this.Jm},set:function(t){this._isFrozen&&rt(this),this.Jm=t}},backConverter:{get:function(){return this.vk},set:function(t){this._isFrozen&&rt(this),this.vk=t}},mode:{get:function(){return this.dl},set:function(t){this._isFrozen&&rt(this),this.dl=t}}}),se.prototype.updateSource=se.prototype.sp,se.prototype.updateTarget=se.prototype.Ov,se.prototype.ofModel=se.prototype.Nx,se.prototype.ofObject=se.prototype.Xl,se.prototype.makeTwoWay=se.prototype.dv;var NT="Binding",Ov=new K(se,"OneWay",1),bh=new K(se,"TwoWay",2);se.className="Binding",se.parseEnum=function(t,e){return function(i){return i=Xn(t,i),i===null?e:i}},se.toString=Bi,se.OneWay=Ov,se.TwoWay=bh;function St(t,e,i){nt.call(this),this.Xv=`,
  "insertedLinkKeys": `,this.ky=`,
  "modifiedLinkData": `,this.Zv=`,
  "removedLinkKeys": `,this.md=[],this.$f=new _,this.xb=new ct,this.Jh="",this.Si=this.zk=this.bl=null,this.lf="from",this.mf="to",this.gj=this.fj="",this.ej="category",this.je="",this.il="isGroup",this.Je="group",this.Mm=!1,e!==void 0&&(this.linkDataArray=e),t!==void 0&&(Ht(t)?this.nodeDataArray=t:i=t),i&&(Object.assign(this,i),t=i.Changed)&&(delete this.Changed,this.Pe(t))}Z(St,nt),St.constructGraphLinksModel=nt.constructGraphLinksModel,St.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.Jh=this.Jh,t.bl=this.bl,t.zk=this.zk,t.lf=this.lf,t.mf=this.mf,t.fj=this.fj,t.gj=this.gj,t.ej=this.ej,t.je=this.je,t.il=this.il,t.Je=this.Je,t.Mm=this.Mm},s=St.prototype,s.clear=function(){nt.prototype.clear.call(this),this.md=[],this.xb.clear(),this.$f.clear()},s.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.np();var e=(this.name!==""?this.name:"")+" GraphLinksModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;var i=t.length,n;for(n=0;n<i;n++){var r=t[n];e+=" "+this.wa(r)+":"+Bi(r)}for(e+=`
 link data:`,t=this.linkDataArray,i=t.length,n=0;n<i;n++)r=t[n],e+=" "+on(this,r,!0)+"-->"+on(this,r,!1)}return e},s.Sv=function(t,e){this.linkKeyProperty===""&&O("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var i=nt.prototype.Sv.call(this,t,e),n=this,r=new _,o=new _,l=new _,u=this.vh;t.changes.each(function(c){c.model===n&&(c.modelChange==="linkDataArray"?c.change===de?r.add(c.newValue):c.change===Se&&l.add(c.oldValue):n.Kc(c.object)?o.add(c.object):c.object!==null&&(c.object!==null&&u&&u.contains(c.object)?u.get(c.object).each(function(p){n.Kc(p)&&o.add(p)}):c.object instanceof nt||n.lb(c.object)||L2(n,c.object).each(function(p){o.add(p)})))});var h=this.hl;h.clear(),r.each(function(c){h.add(n.Ac(c)),e||o.add(c)});var f=this.jl;return f.clear(),l.each(function(c){f.add(n.Ac(c)),e&&o.add(c)}),t=n.cloneDeep(o.Fa()),0<h.count&&(i===null&&(i={}),e?i.removedLinkKeys=h.Fa():i.insertedLinkKeys=h.Fa()),0<t.length&&(i===null&&(i={}),i.modifiedLinkData=t),0<f.count&&(i===null&&(i={}),e?i.insertedLinkKeys=f.Fa():i.removedLinkKeys=f.Fa()),f.clear(),h.clear(),i},s.sm=function(){var t=nt.prototype.sm.call(this),e="";return this.linkCategoryProperty!=="category"&&typeof this.linkCategoryProperty=="string"&&(e+=`,
  "linkCategoryProperty": `+this.quote(this.linkCategoryProperty)),this.linkKeyProperty!==""&&typeof this.linkKeyProperty=="string"&&(e+=`,
  "linkKeyProperty": `+this.quote(this.linkKeyProperty)),this.linkFromKeyProperty!=="from"&&typeof this.linkFromKeyProperty=="string"&&(e+=`,
  "linkFromKeyProperty": `+this.quote(this.linkFromKeyProperty)),this.linkToKeyProperty!=="to"&&typeof this.linkToKeyProperty=="string"&&(e+=`,
  "linkToKeyProperty": `+this.quote(this.linkToKeyProperty)),this.linkFromPortIdProperty!==""&&typeof this.linkFromPortIdProperty=="string"&&(e+=`,
  "linkFromPortIdProperty": `+this.quote(this.linkFromPortIdProperty)),this.linkToPortIdProperty!==""&&typeof this.linkToPortIdProperty=="string"&&(e+=`,
  "linkToPortIdProperty": `+this.quote(this.linkToPortIdProperty)),this.linkLabelKeysProperty!==""&&typeof this.linkLabelKeysProperty=="string"&&(e+=`,
  "linkLabelKeysProperty": `+this.quote(this.linkLabelKeysProperty)),this.nodeIsGroupProperty!=="isGroup"&&typeof this.nodeIsGroupProperty=="string"&&(e+=`,
  "nodeIsGroupProperty": `+this.quote(this.nodeIsGroupProperty)),this.nodeGroupKeyProperty!=="group"&&typeof this.nodeGroupKeyProperty=="string"&&(e+=`,
  "nodeGroupKeyProperty": `+this.quote(this.nodeGroupKeyProperty)),t+e},s.gp=function(t){nt.prototype.gp.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},s.Tv=function(){var t=nt.prototype.Tv.call(this),e=`,
  "linkDataArray": `+As(this,this.linkDataArray,!0);return t+e},s.mv=function(t){nt.prototype.mv.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.em(t),this.linkDataArray=t)};function L2(t,e){for(var i=new _,n=0;n<t.linkDataArray.length;n++){var r=t.linkDataArray[n];eg(t,e,r,r,i)}return i}s.Rv=function(t,e){this.linkKeyProperty===""&&O("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var i=nt.prototype.Rv.call(this,t,e),n=this,r=new _,o=new _,l=new _,u=this.vh;t.changes.each(function(c){c.model===n&&(c.modelChange==="linkDataArray"?c.change===de?r.add(c.newValue):c.change===Se&&l.add(c.oldValue):n.Kc(c.object)?o.add(c.object):c.object!==null&&(c.object!==null&&u&&u.contains(c.object)?u.get(c.object).each(function(p){n.Kc(p)&&o.add(p)}):c.object instanceof nt||n.lb(c.object)||L2(n,c.object).each(function(p){o.add(p)})))});var h=this.hl;h.clear(),r.each(function(c){h.add(n.Ac(c)),e||o.add(c)});var f=this.jl;return f.clear(),l.each(function(c){f.add(n.Ac(c)),e&&o.add(c)}),t=i,0<h.count&&(t+=(e?this.Zv:this.Xv)+As(this,h.Fa(),!0)),0<o.count&&(t+=this.ky+As(this,o.Fa(),!0)),0<f.count&&(t+=(e?this.Xv:this.Zv)+As(this,f.Fa(),!0)),f.clear(),h.clear(),t},s.fp=function(t){(t.linkCategoryProperty!==void 0&&t.linkCategoryProperty!==this.linkCategoryProperty||t.linkKeyProperty!==void 0&&t.linkKeyProperty!==this.linkKeyProperty||t.linkFromKeyProperty!==void 0&&t.linkFromKeyProperty!==this.linkFromKeyProperty||t.linkToKeyProperty!==void 0&&t.linkToKeyProperty!==this.linkToKeyProperty||t.linkFromPortIdProperty!==void 0&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||t.linkToPortIdProperty!==void 0&&t.linkToPortIdProperty!==this.linkToPortIdProperty||t.linkLabelKeysProperty!==void 0&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||t.nodeIsGroupProperty!==void 0&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||t.nodeGroupKeyProperty!==void 0&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&O("applyIncrementalJson cannot change Model properties"),nt.prototype.fp.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.jh(r);o===null&&(o=this.Ko({}),this.Ls(o,r),this.fi(o))}if(e=t.modifiedLinkData,Array.isArray(e)){for(i=e.length,n=0;n<i;n++)if(r=e[n],o=this.Ac(r),o=this.jh(o),o!==null){for(var l in r)l!=="__gohashid"&&l!==this.linkKeyProperty&&this.setDataProperty(o,l,r[l]);j2(this,r,o)}}if(t=t.removedLinkKeys,Array.isArray(t))for(l=t.length,e=0;e<l;e++)i=this.jh(t[e]),i!==null&&this.cm(i)},St.prototype.changeState=function(t,e){if(t!==null&&t.model===this){if(t.change===Wt){var i=t.object,n=t.propertyName;if(n===this.linkKeyProperty&&this.Kc(i)){var r=t.I(e);e=t.I(!e),e!==void 0&&this.xb.remove(e),r!==void 0&&this.xb.add(r,i),Xt(i,n,r);return}}else if(t.change===de){if(i=t.newParam,t.modelChange==="linkDataArray"){t=t.newValue,gt(t)&&typeof i=="number"&&(n=this.Ac(t),e?(this.$f.remove(t),this.md[i]===t&&this.md.splice(i,1),n!==void 0&&this.xb.remove(n)):(this.$f.add(t),this.md[i]!==t&&this.md.splice(i,0,t),n!==void 0&&this.xb.add(n,t)));return}if(t.modelChange==="linkLabelKeys"){n=this.Ef(t.object),Array.isArray(n)&&typeof i=="number"&&(e?(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)):0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue));return}}else if(t.change===Se){if(i=t.oldParam,t.modelChange==="linkDataArray"){t=t.oldValue,gt(t)&&typeof i=="number"&&(n=this.Ac(t),e?(this.$f.add(t),this.md[i]!==t&&this.md.splice(i,0,t),n!==void 0&&this.xb.add(n,t)):(this.$f.remove(t),this.md[i]===t&&this.md.splice(i,1),n!==void 0&&this.xb.remove(n)));return}if(t.modelChange==="linkLabelKeys"){n=this.Ef(t.object),Array.isArray(n)&&typeof i=="number"&&(e?0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue):(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)));return}}nt.prototype.changeState.call(this,t,e)}},s=St.prototype,s.Vl=function(t){if(t!==void 0){var e=this.Si;if(e!==null){var i=this.jc(t);i===null&&(i=this.copyNodeData(e),Xt(i,this.nodeKeyProperty,t),this.xf(i))}return t}},s.Ax=function(t){return on(this,t,!0)},s.yv=function(t,e){ta(this,t,e,!0)},s.Ex=function(t){return on(this,t,!1)},s.Dv=function(t,e){ta(this,t,e,!1)};function on(t,e,i){if(e!==null&&(t=i?t.lf:t.mf,t!==""&&(t=le(e,t),t!==void 0))){if(js(t))return t;O((i?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function ta(t,e,i,n){if(i===null&&(i=void 0),e!==null){var r=n?t.lf:t.mf;if(r!=="")if(i=t.Vl(i),t.Kc(e)){var o=le(e,r);o!==i&&(cr(t,o,e),Xt(e,r,i),t.jc(i)===null&&fr(t,i,e),pe(t,n?"linkFromKey":"linkToKey",Wt,r,e,o,i),typeof r=="string"&&t.La(e,r))}else Xt(e,r,i)}}s.Bx=function(t){return ng(this,t,!0)},s.zv=function(t,e){ea(this,t,e,!0)},s.Fx=function(t){return ng(this,t,!1)},s.Ev=function(t,e){ea(this,t,e,!1)};function ng(t,e,i){return e===null||(t=i?t.fj:t.gj,t==="")?"":(e=le(e,t),e===void 0?"":e)}function ea(t,e,i,n){if(e!==null){var r=n?t.fj:t.gj;if(r!=="")if(t.Kc(e)){var o=le(e,r);o===void 0&&(o=""),o!==i&&(Xt(e,r,i),pe(t,n?"linkFromPortId":"linkToPortId",Wt,r,e,o,i),typeof r=="string"&&t.La(e,r))}else Xt(e,r,i)}}s.Ef=function(t){if(t===null)return rg;var e=this.je;return e===""?rg:(t=le(t,e),t===void 0?rg:t)},s.Ms=function(t,e){if(t!==null){var i=this.je;if(i!=="")if(this.Kc(t)){var n=le(t,i);if(n===void 0&&(n=rg),n!==e){if(Array.isArray(n))for(var r=n.length,o=0;o<r;o++)cr(this,n[o],t);for(Xt(t,i,e),r=e.length,o=0;o<r;o++){var l=e[o];this.jc(l)===null&&fr(this,l,t)}pe(this,"linkLabelKeys",Wt,i,t,n,e),typeof i=="string"&&this.La(t,i)}}else Xt(t,i,e)}},s.Cu=function(t,e){if(e!=null&&t!==null){var i=this.je;if(i!==""){var n=le(t,i);if(n===void 0)i=[],i.push(e),this.Ms(t,i);else if(Array.isArray(n)){var r=n.indexOf(e);0<=r||(r=n.length,n.push(e),this.Kc(t)&&(this.jc(e)===null&&fr(this,e,t),pe(this,"linkLabelKeys",de,i,t,null,e,null,r)))}else O(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},s.Sx=function(t,e){if(e!=null&&t!==null){var i=this.je;if(i!==""){var n=le(t,i);if(Array.isArray(n)){var r=n.indexOf(e);0>r||(n.splice(r,1),this.Kc(t)&&(cr(this,e,t),pe(this,"linkLabelKeys",Se,i,t,e,null,r,null)))}else n!==void 0&&O(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},s.Ac=function(t){if(t!==null){var e=this.Jh;if(e!==""&&(e=le(t,e),e!==void 0)){if(js(e))return e;O("Key value for link data "+t+" is not a number or a string: "+e)}}},s.Ls=function(t,e){if(t!==null){var i=this.Jh;if(i!=="")if(this.Kc(t)){var n=le(t,i);n!==e&&this.jh(e)===null&&(Xt(t,i,e),n!==void 0&&this.xb.remove(n),this.xb.add(e,t),pe(this,"linkKey",Wt,i,t,n,e),typeof i=="string"&&this.La(t,i))}else Xt(t,i,e)}},s.jh=function(t){return t===null&&O("GraphLinksModel.findLinkDataForKey:key must not be null"),t!==void 0&&js(t)?this.xb.I(t):null},s.Bs=function(t){if(t!==null){var e=this.Jh;if(e!==""){var i=this.Ac(t);if(i===void 0||this.xb.contains(i)){var n=this.bl;if(n!==null&&(i=n(this,t),i!=null&&!this.xb.contains(i))){Xt(t,e,i);return}if(typeof i=="string"){for(n=2;this.xb.contains(i+n);)n++;Xt(t,e,i+n)}else if(i===void 0||typeof i=="number"){for(i=-this.xb.count-1;this.xb.contains(i);)i--;Xt(t,e,i)}}}}},s.Kc=function(t){return t===null?!1:this.$f.contains(t)},s.fi=function(t){t!==null&&($l(t),this.Kc(t)||F2(this,t,!0))};function F2(t,e,i){if(t.linkKeyProperty!==""){var n=t.Ac(e);if(n!==void 0&&t.xb.I(n)===e)return;t.Bs(e),n=t.Ac(e),n===void 0&&O("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.xb.add(n,e)}t.$f.add(e),n=null,i&&(n=t.md.length,t.md.splice(n,0,e)),pe(t,"linkDataArray",de,"linkDataArray",t,null,e,null,n),Iv(t,e)}s.Gy=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.fi(t[i]);else for(t=t.iterator;t.next();)this.fi(t.value)},s.cm=function(t){t!==null&&A2(this,t,!0)};function A2(t,e,i){t.$f.remove(e);var n=t.Ac(e);if(n!==void 0&&t.xb.remove(n),n=null,i){if(n=t.md.indexOf(e),0>n)return;t.md.splice(n,1)}if(pe(t,"linkDataArray",Se,"linkDataArray",t,e,null,n,null),i=on(t,e,!0),cr(t,i,e),i=on(t,e,!1),cr(t,i,e),n=t.Ef(e),Array.isArray(n))for(var r=n.length,o=0;o<r;o++)i=n[o],cr(t,i,e)}s.pA=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.cm(t[i]);else for(t=t.iterator;t.next();)this.cm(t.value)},s.dA=function(t){if(this.linkKeyProperty===""&&O("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&Ht(t)){var e=this.jl;e.clear(),e.addAll(this.xb.iteratorKeys);var i=this.hl;i.clear();for(var n=t.length,r=0;r<n;r++){var o=t[r],l=this.Ac(o);if(l!==void 0){i.add(l);var u=this.jh(l);u!==o&&(u!==null?(this.Eo(u,o),j2(this,o,u)):(o=this.cloneDeep(o),this.Ls(o,l),this.fi(o)))}else l=this.cloneDeep(o),this.fi(l),i.add(this.Ac(l))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.jh(n))&&this.cm(n);e.clear(),i.clear()}};function Iv(t,e){var i=on(t,e,!0);i=t.Vl(i),t.jc(i)===null&&fr(t,i,e),i=on(t,e,!1),i=t.Vl(i),t.jc(i)===null&&fr(t,i,e);var n=t.Ef(e);if(Array.isArray(n))for(var r=n.length,o=0;o<r;o++)i=n[o],t.jc(i)===null&&fr(t,i,e)}s.Ko=function(t){if(t===null)return null;var e=this.zk;return t=e!==null?e(t,this):ig(this,t,!0),gt(t)&&(Te(t),this.lf!==""&&Xt(t,this.lf,void 0),this.mf!==""&&Xt(t,this.mf,void 0),this.je!==""&&Xt(t,this.je,[])),t},s.$u=function(t){if(t===null)return!1;var e=this.il;return e===""?!1:!!le(t,e)},s.lh=function(t){if(t!==null){var e=this.Je;if(e!==""&&(e=le(t,e),e!==void 0)){if(js(e))return e;O("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},s.mp=function(t,e){if(e===null&&(e=void 0),t!==null){var i=this.Je;if(i!=="")if(this.lb(t)){var n=le(t,i);n!==e&&(cr(this,n,t),Xt(t,i,e),this.jc(e)===null&&fr(this,e,t),pe(this,"nodeGroupKey",Wt,i,t,n,e),typeof i=="string"&&this.La(t,i))}else Xt(t,i,e)}},St.prototype.copyNodeData=function(t){return t===null?null:(t=nt.prototype.copyNodeData.call(this,t),this.Ij||this.Je===""||le(t,this.Je)===void 0||Xt(t,this.Je,void 0),t)},St.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty){this.lm(t,i);return}if(e===this.nodeCategoryProperty){this.km(t,i);return}if(e===this.nodeGroupKeyProperty){this.mp(t,i);return}}else if(this.Kc(t)){if(e===this.linkFromKeyProperty){ta(this,t,i,!0);return}if(e===this.linkToKeyProperty){ta(this,t,i,!1);return}if(e===this.linkFromPortIdProperty){ea(this,t,i,!0);return}if(e===this.linkToPortIdProperty){ea(this,t,i,!1);return}if(e===this.linkKeyProperty){this.Ls(t,i);return}if(e===this.linkCategoryProperty){this.lp(t,i);return}if(e===this.linkLabelKeysProperty){this.Ms(t,i);return}}var n=le(t,e);n!==i&&(Xt(t,e,i),this.Gs(t,e,n,i))},s=St.prototype,s.Eo=function(t,e){if(e){var i=this.lb(t),n=this.Kc(t),r;for(r in e)r==="__gohashid"||i&&r===this.nodeKeyProperty||i&&r===this.nodeIsGroupProperty&&le(t,r)===e[r]||n&&r===this.linkKeyProperty||this.setDataProperty(t,r,e[r])}},s.jp=function(t,e){nt.prototype.jp.call(this,t,e);for(var i=this.kb.iterator;i.next();)this.sv(i.value,t,e);for(i=this.$f.iterator;i.next();){var n=i.value,r=t,o=e;if(on(this,n,!0)===r){var l=this.lf;Xt(n,l,o),pe(this,"linkFromKey",Wt,l,n,r,o),typeof l=="string"&&this.La(n,l)}if(on(this,n,!1)===r&&(l=this.mf,Xt(n,l,o),pe(this,"linkToKey",Wt,l,n,r,o),typeof l=="string"&&this.La(n,l)),l=this.Ef(n),Array.isArray(l))for(var u=l.length,h=this.je,f=0;f<u;f++)l[f]===r&&(l[f]=o,pe(this,"linkLabelKeys",de,h,n,r,o,f,f))}},s.sv=function(t,e,i){if(this.lh(t)===e){var n=this.Je;Xt(t,n,i),pe(this,"nodeGroupKey",Wt,n,t,e,i),typeof n=="string"&&this.La(t,n)}},s.Nv=function(){nt.prototype.Nv.call(this);for(var t=this.linkDataArray,e=t.length,i=0;i<e;i++)Iv(this,t[i])},s.gm=function(t){nt.prototype.gm.call(this,t),t=this.wa(t);var e=_f(this,t);if(e!==null){var i=Rt();for(e=e.iterator;e.next();){var n=e.value;if(this.lb(n)){if(this.lh(n)===t){var r=this.Je;pe(this,"nodeGroupKey",Wt,r,n,t,t),typeof r=="string"&&this.La(n,r),i.push(n)}}else if(on(this,n,!0)===t&&(r=this.lf,pe(this,"linkFromKey",Wt,r,n,t,t),typeof r=="string"&&this.La(n,r),i.push(n)),on(this,n,!1)===t&&(r=this.mf,pe(this,"linkToKey",Wt,r,n,t,t),typeof r=="string"&&this.La(n,r),i.push(n)),r=this.Ef(n),Array.isArray(r))for(var o=r.length,l=this.je,u=0;u<o;u++)r[u]===t&&(pe(this,"linkLabelKeys",de,l,n,t,t,u,u),i.push(n))}for(e=0;e<i.length;e++)cr(this,t,i[e]);Bt(i)}},s.fm=function(t){nt.prototype.fm.call(this,t);var e=this.lh(t);this.jc(e)===null&&fr(this,e,t)},s.qp=function(t){nt.prototype.qp.call(this,t);var e=this.lh(t);cr(this,e,t)},s.ps=function(t){if(t===null)return"";var e=this.ej;if(e===""||(e=le(t,e),e===void 0))return"";if(typeof e=="string")return e;O("getCategoryForLinkData found a non-string category for "+t+": "+e)},St.prototype.getLinkCategoryForData=function(t){return this.ps(t)},St.prototype.lp=function(t,e){if(t!==null){var i=this.ej;if(i!=="")if(this.Kc(t)){var n=le(t,i);n===void 0&&(n=""),n!==e&&(Xt(t,i,e),pe(this,"linkCategory",Wt,i,t,n,e),typeof i=="string"&&this.La(t,i))}else Xt(t,i,e)}},St.prototype.setLinkCategoryForData=function(t,e){this.lp(t,e)},s=St.prototype,s.mm=function(t,e){nt.prototype.mm.call(this,t,e),this.mp(e,this.lh(t))};function j2(t,e,i){t.lp(i,t.ps(e)),t.yv(i,t.Ax(e)),t.Dv(i,t.Ex(e)),t.Ms(i,t.Ef(e)),t.zv(i,t.Bx(e)),t.Ev(i,t.Fx(e))}s.Vj=function(){return!0},s.si=function(){return!0},s.xs=function(){return!0},s.Wj=function(){return!0},Y.Object.defineProperties(St.prototype,{archetypeNodeData:{get:function(){return this.Si},set:function(t){var e=this.Si;e!==t&&(this.Si=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.lf},set:function(t){var e=this.lf;e!==t&&(this.lf=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.mf},set:function(t){var e=this.mf;e!==t&&(this.mf=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.fj},set:function(t){var e=this.fj;e!==t&&(this.fj=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.gj},set:function(t){var e=this.gj;e!==t&&(this.gj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.je},set:function(t){var e=this.je;e!==t&&(this.je=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.md},set:function(t){var e=this.md;if(e!==t){this.xb.clear();for(var i=t.length,n=0;n<i;n++){var r=t[n];gt(r)||O("GraphLinksModel.linkDataArray must only contain Objects, not: "+r),$l(r)}if(this.md=t,this.linkKeyProperty!==""){for(n=new q,r=0;r<i;r++){var o=t[r],l=this.Ac(o);l===void 0||this.xb.I(l)!==null?n.add(o):this.xb.add(l,o)}for(n=n.iterator;n.next();)r=n.value,this.Bs(r),o=this.Ac(r),o!==void 0&&this.xb.add(o,r)}for(n=new _,r=0;r<i;r++)n.add(t[r]);for(this.$f=n,pe(this,"linkDataArray",Wt,"linkDataArray",this,e,t),e=0;e<i;e++)Iv(this,t[e])}}},linkKeyProperty:{get:function(){return this.Jh},set:function(t){var e=this.Jh;if(e!==t){this.Jh=t,this.xb.clear();for(var i=this.linkDataArray.length,n=0;n<i;n++){var r=this.linkDataArray[n],o=this.Ac(r);o===void 0&&(this.Bs(r),o=this.Ac(r)),o!==void 0&&this.xb.add(o,r)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.bl},set:function(t){var e=this.bl;e!==t&&(this.bl=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.zk},set:function(t){var e=this.zk;e!==t&&(this.zk=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.il},set:function(t){var e=this.il;e!==t&&(this.il=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.Je},set:function(t){var e=this.Je;e!==t&&(this.Je=t,this.g("nodeGroupKeyProperty",e,t))}},Ij:{get:function(){return this.Mm},set:function(t){this.Mm!==t&&(this.Mm=t)}},linkCategoryProperty:{get:function(){return this.ej},set:function(t){var e=this.ej;e!==t&&(this.ej=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),St.prototype.setCategoryForLinkData=St.prototype.lp,St.prototype.getCategoryForLinkData=St.prototype.ps,St.prototype.assignAllDataProperties=St.prototype.Eo,St.prototype.setGroupKeyForNodeData=St.prototype.mp,St.prototype.getGroupKeyForNodeData=St.prototype.lh,St.prototype.isGroupForNodeData=St.prototype.$u,St.prototype.copyLinkData=St.prototype.Ko,St.prototype.mergeLinkDataArray=St.prototype.dA,St.prototype.removeLinkDataCollection=St.prototype.pA,St.prototype.removeLinkData=St.prototype.cm,St.prototype.addLinkDataCollection=St.prototype.Gy,St.prototype.addLinkData=St.prototype.fi,St.prototype.containsLinkData=St.prototype.Kc,St.prototype.makeLinkDataKeyUnique=St.prototype.Bs,St.prototype.findLinkDataForKey=St.prototype.jh,St.prototype.setKeyForLinkData=St.prototype.Ls,St.prototype.getKeyForLinkData=St.prototype.Ac,St.prototype.removeLabelKeyForLinkData=St.prototype.Sx,St.prototype.addLabelKeyForLinkData=St.prototype.Cu,St.prototype.setLabelKeysForLinkData=St.prototype.Ms,St.prototype.getLabelKeysForLinkData=St.prototype.Ef,St.prototype.setToPortIdForLinkData=St.prototype.Ev,St.prototype.getToPortIdForLinkData=St.prototype.Fx,St.prototype.setFromPortIdForLinkData=St.prototype.zv,St.prototype.getFromPortIdForLinkData=St.prototype.Bx,St.prototype.setToKeyForLinkData=St.prototype.Dv,St.prototype.getToKeyForLinkData=St.prototype.Ex,St.prototype.setFromKeyForLinkData=St.prototype.yv,St.prototype.getFromKeyForLinkData=St.prototype.Ax,St.prototype.clear=St.prototype.clear;var rg=Object.freeze([]);St.className="GraphLinksModel",bn.GraphLinksModel=St,nt.constructGraphLinksModel=nt.constructGraphLinksModel=function(){return new St},nt.initDiagramModel=jv=function(){return new St};function Mi(t,e){nt.call(this),this.Ke="parent",this.Om=!1,this.oj="parentLinkCategory",t!==void 0&&(Ht(t)?this.nodeDataArray=t:e=t),e&&(Object.assign(this,e),t=e.Changed)&&(delete this.Changed,this.Pe(t))}Z(Mi,nt),Mi.constructGraphLinksModel=nt.constructGraphLinksModel,Mi.prototype.cloneProtected=function(t){nt.prototype.cloneProtected.call(this,t),t.Ke=this.Ke,t.Om=this.Om,t.oj=this.oj},s=Mi.prototype,s.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.np();var e=(this.name!==""?this.name:"")+" TreeModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var i=t.length,n=0;n<i;n++){var r=t[n];e+=" "+this.wa(r)+":"+Bi(r)}}return e},s.sm=function(){var t=nt.prototype.sm.call(this),e="";return this.nodeParentKeyProperty!=="parent"&&typeof this.nodeParentKeyProperty=="string"&&(e+=`,
  "nodeParentKeyProperty": `+this.quote(this.nodeParentKeyProperty)),t+e},s.gp=function(t){nt.prototype.gp.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},s.fp=function(t){t.nodeParentKeyProperty!==void 0&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&O("applyIncrementalJson cannot change Model properties"),nt.prototype.fp.call(this,t)},s.Vl=function(t){return t},s.mh=function(t){if(t!==null){var e=this.Ke;if(e!==""&&(e=le(t,e),e!==void 0)){if(js(e))return e;O("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},s.qe=function(t,e){if(e===null&&(e=void 0),t!==null){var i=this.Ke;if(i!=="")if(e=this.Vl(e),this.lb(t)){var n=le(t,i);n!==e&&(cr(this,n,t),Xt(t,i,e),this.jc(e)===null&&fr(this,e,t),pe(this,"nodeParentKey",Wt,i,t,n,e),typeof i=="string"&&this.La(t,i))}else Xt(t,i,e)}},s.ss=function(t){if(t===null)return"";var e=this.oj;return e===""||(e=le(t,e),e===void 0)?"":typeof e=="string"?e:(O("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},Mi.prototype.getLinkCategoryForData=function(t){return this.ss(t)},Mi.prototype.Ns=function(t,e){if(t!==null){var i=this.oj;if(i!=="")if(this.lb(t)){var n=le(t,i);n===void 0&&(n=""),n!==e&&(Xt(t,i,e),pe(this,"parentLinkCategory",Wt,i,t,n,e),typeof i=="string"&&this.La(t,i))}else Xt(t,i,e)}},Mi.prototype.setLinkCategoryForData=function(t,e){this.Ns(t,e)},Mi.prototype.copyNodeData=function(t){return t===null?null:(t=nt.prototype.copyNodeData.call(this,t),this.Jj||this.Ke===""||le(t,this.Ke)===void 0||Xt(t,this.Ke,void 0),t)},Mi.prototype.setDataProperty=function(t,e,i){if(this.lb(t)){if(e===this.nodeKeyProperty){this.lm(t,i);return}if(e===this.nodeCategoryProperty){this.km(t,i);return}if(e===this.nodeParentKeyProperty){this.qe(t,i);return}}var n=le(t,e);n!==i&&(Xt(t,e,i),this.Gs(t,e,n,i))},s=Mi.prototype,s.jp=function(t,e){nt.prototype.jp.call(this,t,e);for(var i=this.kb.iterator;i.next();)this.sv(i.value,t,e)},s.sv=function(t,e,i){if(this.mh(t)===e){var n=this.Ke;Xt(t,n,i),pe(this,"nodeParentKey",Wt,n,t,e,i),typeof n=="string"&&this.La(t,n)}},s.gm=function(t){nt.prototype.gm.call(this,t),t=this.wa(t);var e=_f(this,t);if(e!==null){var i=Rt();for(e=e.iterator;e.next();){var n=e.value;if(this.lb(n)&&this.mh(n)===t){var r=this.Ke;pe(this,"nodeParentKey",Wt,r,n,t,t),typeof r=="string"&&this.La(n,r),i.push(n)}}for(e=0;e<i.length;e++)cr(this,t,i[e]);Bt(i)}},s.fm=function(t){nt.prototype.fm.call(this,t);var e=this.mh(t);e=this.Vl(e),this.jc(e)===null&&fr(this,e,t)},s.qp=function(t){nt.prototype.qp.call(this,t);var e=this.mh(t);cr(this,e,t)},s.mm=function(t,e){nt.prototype.mm.call(this,t,e),this.Ns(e,this.ss(t)),this.qe(e,this.mh(t))},s.Tl=function(){return!0},s.xs=function(){return!0},Y.Object.defineProperties(Mi.prototype,{nodeParentKeyProperty:{get:function(){return this.Ke},set:function(t){var e=this.Ke;e!==t&&(this.Ke=t,this.g("nodeParentKeyProperty",e,t))}},Jj:{get:function(){return this.Om},set:function(t){this.Om!==t&&(this.Om=t)}},parentLinkCategoryProperty:{get:function(){return this.oj},set:function(t){var e=this.oj;e!==t&&(this.oj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),Mi.prototype.setParentLinkCategoryForNodeData=Mi.prototype.Ns,Mi.prototype.getParentLinkCategoryForNodeData=Mi.prototype.ss,Mi.prototype.setParentKeyForNodeData=Mi.prototype.qe,Mi.prototype.getParentKeyForNodeData=Mi.prototype.mh,Mi.className="TreeModel",bn.TreeModel=Mi;function Zt(t){Kt.call(this),this.nw=this.$m=this.nc=0,this.Wp=360,this.mw=Dn,this.Ui=0,this.aw=new C,this.Jp=this.me=0,this.Xr=new ic,this.ht=this.nj=0,this.vy=600,this.fo=NaN,this.Dm=1,this.so=0,this.ul=360,this.Tb=Dn,this.K=ti,this.nd=Cu,this.hd=Nv,this.tf=6,this.On=ec,t&&Object.assign(this,t)}Z(Zt,Kt),Zt.prototype.cloneProtected=function(t){Kt.prototype.cloneProtected.call(this,t),t.fo=this.fo,t.Dm=this.Dm,t.so=this.so,t.ul=this.ul,t.Tb=this.Tb,t.K=this.K,t.nd=this.nd,t.hd=this.hd,t.tf=this.tf,t.On=this.On},Zt.prototype.qb=function(t){t.classType===Zt?t===bf||t===tc||t===Jf||t===qf||t===Cu?this.sorting=t:t===Ds||t===ku||t===ti||t===os?this.direction=t:t===Co||t===rs||t===Dn||t===On?this.arrangement=t:(t===ml||t===ec)&&(this.nodeDiameterFormula=t):Kt.prototype.qb.call(this,t)},Zt.prototype.createNetwork=function(){return new ia(this)},Zt.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),t=this.network.vertexes,1>=t.count)t.count===1&&(t=t.first(),t.centerX=0,t.centerY=0);else{var e=new q;e.addAll(t.iterator),t=new q;var i=new q,n=this.sort(e),r,o,l=this.Jp,u=this.arrangement,h=this.nodeDiameterFormula,f=this.radius;(!isFinite(f)||0>=f)&&(f=NaN);var c=this.aspectRatio;(!isFinite(c)||0>=c)&&(c=1);var p=this.startAngle;isFinite(p)||(p=0);var g=this.sweepAngle;if((!isFinite(g)||360<g||1>g)&&(g=360),e=this.spacing,isFinite(e)||(e=NaN),u===On&&h===ml?u=Dn:u===On&&h!==ml&&(u=this.arrangement),(this.direction===Ds||this.direction===ku)&&this.sorting!==Cu){for(h=0;!(h>=n.length)&&(t.add(n.M(h)),!(h+1>=n.length));h+=2)i.add(n.M(h+1));this.direction===Ds?(this.arrangement===On&&t.reverse(),n=new q,n.addAll(t),n.addAll(i)):(this.arrangement===On&&i.reverse(),n=new q,n.addAll(i),n.addAll(t))}h=n.length;for(var m=o=r=0;m<n.length;m++){var v=p+g*o*(this.direction===ti?1:-1)/h,x=n.M(m).diameter;isNaN(x)&&(x=Os(n.M(m),v)),360>g&&(m===0||m===n.length-1)&&(x/=2),r+=x,o++}if(isNaN(f)||u===On){if(isNaN(e)&&(e=6),u!==Dn&&u!==On){for(o=-1/0,l=0;l<h;l++)m=n.M(l),r=n.M(l===h-1?0:l+1),isNaN(m.diameter)&&Os(m,0),isNaN(r.diameter)&&Os(r,0),o=Math.max(o,(m.diameter+r.diameter)/2);l=o+e,u===Co?f=(o+e)/(2*Math.PI/h):f=og(this,l*(360<=g?h:h-1),c,p*Math.PI/180,g*Math.PI/180)}else f=og(this,r+(360<=g?h:h-1)*(u!==On?e:1.6*e),c,p*Math.PI/180,g*Math.PI/180);o=f*c}else if(o=f*c,m=Ev(this,f,o,p*Math.PI/180,g*Math.PI/180),isNaN(e))(u===Dn||u===On)&&(e=(m-r)/(360<=g?h:h-1));else if(u===Dn||u===On)m=(m-r)/(360<=g?h:h-1),m<e?(f=og(this,r+e*(360<=g?h:h-1),c,p*Math.PI/180,g*Math.PI/180),o=f*c):e=m;else{for(l=-1/0,r=0;r<h;r++)v=n.M(r),x=n.M(r===h-1?0:r+1),isNaN(v.diameter)&&Os(v,0),isNaN(x.diameter)&&Os(x,0),l=Math.max(l,(v.diameter+x.diameter)/2);l+=e,r=og(this,l*(360<=g?h:h-1),c,p*Math.PI/180,g*Math.PI/180),r>f?(f=r,o=f*c):l=m/(360<=g?h:h-1)}if(this.mw=u,this.nc=f,this.$m=c,this.nw=p,this.Wp=g,this.Ui=e,this.me=o,this.Jp=l,e=n,n=this.mw,u=this.nc,f=this.nw,c=this.Wp,p=this.Ui,g=this.me,h=this.Jp,this.direction!==Ds&&this.direction!==ku||n!==On)if(this.direction===Ds||this.direction===ku){switch(l=0,n){case rs:l=180*sg(this,u,g,f,h)/Math.PI;break;case Dn:h=e=0,l=t.first(),l!==null&&(e=Os(l,Math.PI/2)),l=i.first(),l!==null&&(h=Os(l,Math.PI/2)),l=180*sg(this,u,g,f,p+(e+h)/2)/Math.PI;break;case Co:l=c/e.length}if(this.direction===Ds){switch(n){case rs:Qf(this,t,f,os);break;case Dn:Zf(this,t,f,os);break;case Co:$f(this,t,c/2,f,os)}switch(n){case rs:Qf(this,i,f+l,ti);break;case Dn:Zf(this,i,f+l,ti);break;case Co:$f(this,i,c/2,f+l,ti)}}else{switch(n){case rs:Qf(this,i,f,os);break;case Dn:Zf(this,i,f,os);break;case Co:$f(this,i,c/2,f,os)}switch(n){case rs:Qf(this,t,f+l,ti);break;case Dn:Zf(this,t,f+l,ti);break;case Co:$f(this,t,c/2,f+l,ti)}}}else switch(n){case rs:Qf(this,e,f,this.direction);break;case Dn:Zf(this,e,f,this.direction);break;case Co:$f(this,e,c,f,this.direction);break;case On:D2(this,e,c,f,this.direction)}else D2(this,e,c,f-c/2,ti)}this.updateParts(),this.network=null,this.isValidLayout=!0};function $f(t,e,i,n,r){var o=t.Wp,l=t.nc;t=t.me,n=n*Math.PI/180,i=i*Math.PI/180;for(var u=e.length,h=0;h<u;h++){var f=n+(r===ti?h*i/(360<=o?u:u-1):-(h*i)/u),c=e.M(h),p=l*Math.tan(f)/t;p=Math.sqrt((l*l+t*t*p*p)/(1+p*p)),c.centerX=p*Math.cos(f),c.centerY=p*Math.sin(f),c.actualAngle=180*f/Math.PI}}function Zf(t,e,i,n){var r=t.nc,o=t.me,l=t.Ui;i=i*Math.PI/180;for(var u=e.length,h=0;h<u;h++){var f=e.M(h),c=e.M(h===u-1?0:h+1),p=o*Math.sin(i);f.centerX=r*Math.cos(i),f.centerY=p,f.actualAngle=180*i/Math.PI,isNaN(f.diameter)&&Os(f,0),isNaN(c.diameter)&&Os(c,0),f=sg(t,r,o,n===ti?i:-i,(f.diameter+c.diameter)/2+l),i+=n===ti?f:-f}}function Qf(t,e,i,n){var r=t.nc,o=t.me,l=t.Jp;i=i*Math.PI/180;for(var u=e.length,h=0;h<u;h++){var f=e.M(h);f.centerX=r*Math.cos(i),f.centerY=o*Math.sin(i),f.actualAngle=180*i/Math.PI,f=sg(t,r,o,n===ti?i:-i,l),i+=n===ti?f:-f}}function D2(t,e,i,n,r){var o=t.Wp;if(t.nj=0,t.Xr=new ic,360>i){for(o=n+(r===ti?o:-o);0>o;)o+=360;o%=360,180<o&&(o-=360),o*=Math.PI/180,t.ht=o,I2(t,e,i,n,r)}else O2(t,e,i,n,r);t.Xr.commit(e)}function O2(t,e,i,n,r){var o=t.nc,l=t.Ui,u=t.$m,h=o*Math.cos(n*Math.PI/180),f=t.me*Math.sin(n*Math.PI/180),c=e.Fa();if(c.length===3)c[0].centerX=o,c[0].centerY=0,c[1].centerX=c[0].centerX-c[0].width/2-c[1].width/2-l,c[1].y=c[0].y,c[2].centerX=(c[0].centerX+c[1].centerX)/2,c[2].y=c[0].y-c[2].height-l;else if(c.length===4)c[0].centerX=o,c[0].centerY=0,c[2].centerX=-c[0].centerX,c[2].centerY=c[0].centerY,c[1].centerX=0,c[1].y=Math.min(c[0].y,c[2].y)-c[1].height-l,c[3].centerX=0,c[3].y=Math.max(c[0].y+c[0].height+l,c[2].y+c[2].height+l);else{o=C.alloc();for(var p=0;p<c.length&&(c[p].centerX=h,c[p].centerY=f,!(p>=c.length-1));p++)E2(t,h,f,c,p,r,o)||B2(t,h,f,c,p,r,o),h=o.x,f=o.y;if(C.free(o),t.nj++,!(23<t.nj)){h=c[0].centerX,f=c[0].centerY,o=c[c.length-1].centerX,p=c[c.length-1].centerY;var g=Math.abs(h-o)-((c[0].width+c[c.length-1].width)/2+l),m=Math.abs(f-p)-((c[0].height+c[c.length-1].height)/2+l);l=0,1>Math.abs(m)?Math.abs(h-o)<(c[0].width+c[c.length-1].width)/2&&(l=0):l=0<m?m:1>Math.abs(g)?0:g,h=Math.abs(o)>Math.abs(p)?0<o!=f>p:0<p!=h<o,(h=r===ti?h:!h)&&(l=-Math.abs(l),l=Math.min(l,-c[c.length-1].width),l=Math.min(l,-c[c.length-1].height)),t.Xr.compare(l,c),1<Math.abs(l)&&(t.nc=8>t.nj?t.nc-l/(2*Math.PI):5>c.length&&10<l?t.nc/2:t.nc-(0<l?1.7:-2.3),t.me=t.nc*u,O2(t,e,i,n,r))}}}function I2(t,e,i,n,r){for(var o=t.nc,l=t.me,u=t.$m,h=o*Math.cos(n*Math.PI/180),f=l*Math.sin(n*Math.PI/180),c=C.alloc(),p=e.Fa(),g=0;g<p.length&&(p[g].centerX=h,p[g].centerY=f,!(g>=p.length-1));g++)E2(t,h,f,p,g,r,c)||B2(t,h,f,p,g,r,c),h=c.x,f=c.y;if(C.free(c),t.nj++,!(23<t.nj)){if(h=Math.atan2(f,h),h=r===ti?t.ht-h:h-t.ht,h=Math.abs(h)<Math.abs(h-2*Math.PI)?h:h-2*Math.PI,o=h*(o+l)/2,l=t.Xr,Math.abs(o)<Math.abs(l.Pl))for(l.Pl=o,l.lk=[],l.um=[],h=0;h<p.length;h++)l.lk[h]=p[h].bounds.x,l.um[h]=p[h].bounds.y;1<Math.abs(o)&&(t.nc=8>t.nj?t.nc-o/(2*Math.PI):t.nc-(0<o?1.7:-2.3),t.me=t.nc*u,I2(t,e,i,n,r))}}function E2(t,e,i,n,r,o,l){var u=t.nc,h=t.me,f=0;t=(n[r].width+n[r+1].width)/2+t.Ui;var c=!1;if(0<=i!=(o===ti)){if(o=e+t,o>u){if(o=e-t,o<-u)return l.x=o,l.y=f,!1;c=!0}}else if(o=e-t,o<-u){if(o=e+t,o>u)return l.x=o,l.y=f,!1;c=!0}return f=Math.sqrt(1-Math.min(1,o*o/(u*u)))*h,0>i!==c&&(f=-f),Math.abs(i-f)>(n[r].height+n[r+1].height)/2?(l.x=o,l.y=f,!1):(l.x=o,l.y=f,!0)}function B2(t,e,i,n,r,o,l){var u=t.nc,h=t.me,f=0;if(t=(n[r].height+n[r+1].height)/2+t.Ui,n=!1,0<=e!=(o===ti)){if(o=i-t,o<-h){if(o=i+t,o>h){l.x=f,l.y=o;return}n=!0}}else if(o=i+t,o>h){if(o=i-t,o<-h){l.x=f,l.y=o;return}n=!0}f=Math.sqrt(1-Math.min(1,o*o/(h*h)))*u,0>e!==n&&(f=-f),l.x=f,l.y=o}Zt.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Zt.prototype.commitNodes=function(){var t=this.group!==null&&this.group.placeholder!==null&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,i=this.actualCenter;t?i=new C(0,0):(i.x=this.arrangementOrigin.x+this.nc,i.y=this.arrangementOrigin.y+this.me);for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;r.x+=i.x,r.y+=i.y,r.commit()}t&&(this.group.Va(),t=this.group.position.copy(),i=this.group.location.copy(),e=e.re(i.re(t)),this.group.move(e),this.aw=e.re(t))},Zt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()};function Ev(t,e,i,n,r){var o=t.vy;if(.001>Math.abs(t.$m-1))return n!==void 0&&r!==void 0?r*e:2*Math.PI*e;t=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i;for(var l=0,u=n!==void 0&&r!==void 0?r/(o+1):Math.PI/(2*(o+1)),h=0,f=0;f<=o;f++){n!==void 0&&r!==void 0?h=n+f*r/o:h=f*Math.PI/(2*o);var c=Math.sin(h);l+=Math.sqrt(1-t*t*c*c)*u}return n!==void 0&&r!==void 0?(e>i?e:i)*l:4*(e>i?e:i)*l}function og(t,e,i,n,r){return e/(n!==void 0&&r!==void 0?Ev(t,1,i,n,r):Ev(t,1,i))}function sg(t,e,i,n,r){if(.001>Math.abs(t.$m-1))return r/e;var o=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i,l=0;t=2*Math.PI/(700*t.network.vertexes.count),e>i&&(n+=Math.PI/2);for(var u=0;;u++){var h=Math.sin(n+u*t);if(l+=(e>i?e:i)*Math.sqrt(1-o*o*h*h)*t,l>=r)return u*t}}Zt.prototype.sort=function(t){switch(this.sorting){case Jf:break;case qf:t.reverse();break;case bf:t.sort(this.comparer);break;case tc:t.sort(this.comparer),t.reverse();break;case Cu:return this.$j(TT(t));default:O("Invalid sorting type.")}return t};function TT(t){for(var e=[],i=0;i<t.length;i++)e.push(0);i=new q;for(var n=0;n<t.length;n++){var r=-1,o=-1;if(n===0)for(var l=0;l<t.length;l++){var u=t.M(l).edgesCount;u>r&&(r=u,o=l)}else for(l=0;l<t.length;l++)u=e[l],u>r&&(r=u,o=l);for(i.add(t.M(o)),e[o]=-1,o=t.M(o),l=o.sourceEdges;l.next();)r=t.indexOf(l.value.fromVertex),0>r||0<=e[r]&&e[r]++;for(o=o.destinationEdges;o.next();)r=t.indexOf(o.value.toVertex),0>r||0<=e[r]&&e[r]++}return i}Zt.prototype.$j=function(t){for(var e=[],i=0;i<t.length;i++){var n=t.M(i);e[i]=[];for(var r,o=n.destinationEdges;o.next();)r=t.indexOf(o.value.toVertex),r!==i&&0>e[i].indexOf(r)&&e[i].push(r);for(n=n.sourceEdges;n.next();)r=t.indexOf(n.value.fromVertex),r!==i&&0>e[i].indexOf(r)&&e[i].push(r)}for(o=[],i=0;i<e.length;i++)o[i]=0;i=[];var l=[],u=[];n=[],r=new q;for(var h=0,f=0;f<e.length;f++){var c=e[f].length;if(c===1)n.push(f);else if(c===0)r.add(t.M(f));else{if(h===0)i.push(f);else{for(var p=c=1/0,g=-1,m=[],v=0;v<i.length;v++)0>e[i[v]].indexOf(i[v===i.length-1?0:v+1])&&m.push(v===i.length-1?0:v+1);if(m.length===0)for(v=0;v<i.length;v++)m.push(v);for(v=0;v<m.length;v++){for(var x=m[v],k=e[f],S=0,P=0;P<l.length;P++){var N=o[l[P]],T=o[u[P]];if(N<T){var F=N;N=T}else F=T;if(F<x&&x<=N)for(T=0;T<k.length;T++){var D=k[T];0>i.indexOf(D)||F<o[D]&&o[D]<N||F===o[D]||N===o[D]||S++}else for(T=0;T<k.length;T++)D=k[T],0>i.indexOf(D)||F<o[D]&&o[D]<N&&F!==o[D]&&N!==o[D]&&S++}for(k=S,P=S=0;P<e[f].length;P++)F=i.indexOf(e[f][P]),0<=F&&(F=Math.abs(x-(F>=x?F+1:F)),S+=F<i.length+1-F?F:i.length+1-F);for(P=0;P<l.length;P++)F=o[l[P]],N=o[u[P]],F>=x&&F++,N>=x&&N++,F>N&&(T=N,N=F,F=T),N-F<(i.length+2)/2==(F<x&&x<=N)&&S++;(k<c||k===c&&S<p)&&(c=k,p=S,g=x)}for(i.splice(g,0,f),c=0;c<i.length;c++)o[i[c]]=c;for(c=0;c<e[f].length;c++)p=e[f][c],0<=i.indexOf(p)&&(l.push(f),u.push(p))}h++}}for(l=i.length;;){for(o=!0,u=0;u<n.length;u++)if(h=n[u],f=e[h][0],c=i.indexOf(f),0<=c){for(g=p=0;g<e[f].length;g++)m=i.indexOf(e[f][g]),0>m||m===c||(v=m>c?m-c:c-m,p+=m<c!=v>l-v?1:-1);i.splice(0>p?c:c+1,0,h),n.splice(u,1),u--}else o=!1;if(o)break;i.push(n[0]),n.splice(0,1)}for(e=0;e<i.length;e++)r.add(t.M(i[e]));return r},Y.Object.defineProperties(Zt.prototype,{radius:{get:function(){return this.fo},set:function(t){this.fo!==t&&(0<t||isNaN(t))&&(this.fo=t,this.C())}},aspectRatio:{get:function(){return this.Dm},set:function(t){this.Dm!==t&&0<t&&(this.Dm=t,this.C())}},startAngle:{get:function(){return this.so},set:function(t){this.so!==t&&(this.so=t,this.C())}},sweepAngle:{get:function(){return this.ul},set:function(t){this.ul!==t&&(0<t&&360>=t?this.ul=t:this.ul=360,this.C())}},arrangement:{get:function(){return this.Tb},set:function(t){this.Tb===t||t!==On&&t!==Dn&&t!==rs&&t!==Co||(this.Tb=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==ti&&t!==os&&t!==Ds&&t!==ku||(this.K=t,this.C())}},sorting:{get:function(){return this.nd},set:function(t){this.nd===t||t!==Jf&&t!==qf&&t!==bf&&!tc&&t!==Cu||(this.nd=t,this.C())}},comparer:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this.hd=t,this.C())}},spacing:{get:function(){return this.tf},set:function(t){this.tf!==t&&(this.tf=t,this.C())}},nodeDiameterFormula:{get:function(){return this.On},set:function(t){this.On===t||t!==ec&&t!==ml||(this.On=t,this.C())}},actualXRadius:{get:function(){return this.nc}},actualYRadius:{get:function(){return this.me}},actualSpacing:{get:function(){return this.Ui}},actualCenter:{get:function(){return this.aw}}});var Dn=new K(Zt,"ConstantSpacing",0),rs=new K(Zt,"ConstantDistance",1),Co=new K(Zt,"ConstantAngle",2),On=new K(Zt,"Packed",3),ti=new K(Zt,"Clockwise",4),os=new K(Zt,"Counterclockwise",5),Ds=new K(Zt,"BidirectionalLeft",6),ku=new K(Zt,"BidirectionalRight",7),Jf=new K(Zt,"Forwards",8),qf=new K(Zt,"Reverse",9),bf=new K(Zt,"Ascending",10),tc=new K(Zt,"Descending",11),Cu=new K(Zt,"Optimized",12),ec=new K(Zt,"Pythagorean",13),ml=new K(Zt,"Circular",14);Zt.className="CircularLayout",Zt.ConstantSpacing=Dn,Zt.ConstantDistance=rs,Zt.ConstantAngle=Co,Zt.Packed=On,Zt.Clockwise=ti,Zt.Counterclockwise=os,Zt.BidirectionalLeft=Ds,Zt.BidirectionalRight=ku,Zt.Forwards=Jf,Zt.Reverse=qf,Zt.Ascending=bf,Zt.Descending=tc,Zt.Optimized=Cu,Zt.Pythagorean=ec,Zt.Circular=ml;function ic(){this.Pl=-1/0,this.um=this.lk=null}ic.prototype.compare=function(t,e){if(0<t&&0>this.Pl||Math.abs(t)<Math.abs(this.Pl)&&!(0>t&&0<this.Pl))for(this.Pl=t,this.lk=[],this.um=[],t=0;t<e.length;t++)this.lk[t]=e[t].bounds.x,this.um[t]=e[t].bounds.y},ic.prototype.commit=function(t){if(this.lk!==null&&this.um!==null)for(var e=0;e<this.lk.length;e++){var i=t.M(e);i.x=this.lk[e],i.y=this.um[e]}},ic.className="VertexArrangement";function ia(t){Yt.call(this,t)}Z(ia,Yt),ia.prototype.createVertex=function(){return new nc(this)},ia.prototype.createEdge=function(){return new lg(this)},ia.className="CircularNetwork";function nc(t){me.call(this,t),this.u=this.Ti=NaN}Z(nc,me);function Os(t,e){var i=t.network;if(i===null)return NaN;if(i=i.layout,i===null)return NaN;if(i.arrangement===On)if(i.nodeDiameterFormula===ml)t.Ti=Math.max(t.width,t.height);else{if(i=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),i===0)return t.width;if(e===0)return t.height;t.Ti=Math.min(t.height/i,t.width/e)}else t.Ti=i.nodeDiameterFormula===ml?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Ti}Y.Object.defineProperties(nc.prototype,{diameter:{get:function(){return this.Ti},set:function(t){this.Ti!==t&&(this.Ti=t)}},actualAngle:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}}}),nc.className="CircularVertex";function lg(t){Gi.call(this,t)}Z(lg,Gi),lg.className="CircularEdge";function ze(t){Kt.call(this),this.ah=null,this.Bn=0,this.$d=new ht(100,100).freeze(),this.Cm=!1,this.sf=!0,this.td=!1,this.cl=100,this.an=1,this.Zf=1e3,this.Jn=10,this.ho=Math,this.Gk=.05,this.Fk=50,this.Dk=150,this.Ek=0,this.Wm=10,this.Vm=5,t&&Object.assign(this,t)}Z(ze,Kt),ze.prototype.cloneProtected=function(t){Kt.prototype.cloneProtected.call(this,t),t.$d.assign(this.$d),t.Cm=this.Cm,t.sf=this.sf,t.td=this.td,t.cl=this.cl,t.an=this.an,t.Zf=this.Zf,t.Jn=this.Jn,t.ho=this.ho,t.Gk=this.Gk,t.Fk=this.Fk,t.Dk=this.Dk,t.Ek=this.Ek,t.Wm=this.Wm,t.Vm=this.Vm},ze.prototype.createNetwork=function(){return new Pu(this)},ze.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),t=this.maxIterations,0<this.network.vertexes.count){this.network.Lo();for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(e=this.network.edges.iterator;e.next();)i=e.value,i.stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.Du(),this.Bn=0,this.needsClusterLayout()){e=this.network,i=e.ay();for(var n=i.iterator;n.next();){this.network=n.value;for(var r=this.network.vertexes.iterator;r.next();){var o=r.value;o.Vd=o.vertexes.count,o.sh=1,o.Hj=null,o.We=null}R2(this,0,t)}this.network=e;var l=n=i.iterator;n=this.arrangementSpacing;var u=l.count,h=!0;o=r=0;for(var f=Rt(),c=0;c<u+e.vertexes.count+2;c++)f[c]=null;u=0,l.reset();for(var p=E.alloc();l.next();)if(c=l.value,this.computeBounds(c,p),h)h=!1,r=p.x+p.width/2,o=p.y+p.height/2,f[0]=new C(p.x+p.width+n.width,p.y),f[1]=new C(p.x,p.y+p.height+n.height),u=2;else{var g=z2(f,u,r,o,p.width,p.height,n),m=f[g],v=new C(m.x+p.width+n.width,m.y),x=new C(m.x,m.y+p.height+n.height);for(g+1<u&&f.splice(g+1,0,null),f[g]=v,f[g+1]=x,u++,g=m.x-p.x,m=m.y-p.y,c=c.vertexes.iterator;c.next();)v=c.value,v.centerX+=g,v.centerY+=m}for(E.free(p),c=e.vertexes.iterator;c.next();)l=c.value,g=l.bounds,2>u?(r=g.x+g.width/2,o=g.y+g.height/2,f[0]=new C(g.x+g.width+n.width,g.y),f[1]=new C(g.x,g.y+g.height+n.height),u=2):(h=z2(f,u,r,o,g.width,g.height,n),p=f[h],m=new C(p.x+g.width+n.width,p.y),g=new C(p.x,p.y+g.height+n.height),h+1<u&&f.splice(h+1,0,null),f[h]=m,f[h+1]=g,u++,l.centerX=p.x+l.width/2,l.centerY=p.y+l.height/2);for(Bt(f),n=i.iterator;n.next();){for(i=n.value,r=i.vertexes.iterator;r.next();)e.dh(r.value);for(i=i.edges.iterator;i.next();)e.Co(i.value)}}U2(this,t),this.updateParts()}this.cl=t,this.network=null,this.isValidLayout=!0},ze.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,i=this.network.vertexes.first().bounds,n=this.network.vertexes.iterator;n.next();){if(n.value.bounds.Yc(i)&&(t++,2<t))return!0;if(10<e)break;e++}return!1},ze.prototype.computeBounds=function(t,e){var i=!0;for(t=t.vertexes.iterator;t.next();){var n=t.value;i?(i=!1,e.set(n.bounds)):e.ed(n.bounds)}return e};function R2(t,e,i){if(LT(t,e)){var n=t.Zf;t.Zf*=1+1/(e+1);var r=FT(t,e),o=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(e+1)/11),10));for(t.maxIterations+=o,R2(t,e+1,i),U2(t,o),AT(t,r),e=r.vertexes.Fa(),e.sort(function(l,u){return l===null||u===null||l===u?0:u.Vd-l.Vd}),i=0;i<e.length;i++)jT(t,e[i]);t.Zf=n}}function LT(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.ah=t.network.vertexes.Fa(),t=t.ah,t.sort(function(i,n){return i===null||n===null||i===n?0:n.Vd-i.Vd}),e=t.length-1;0<=e&&1>=t[e].Vd;)e--;return 1<t.length-e}function FT(t,e){for(var i=t.network,n=new Pu(t),r=0;r<t.ah.length;r++){var o=t.ah[r];if(1<o.Vd){n.dh(o);var l=new Y2;l.Ss=o.Vd,l.Ts=o.width,l.Rs=o.height,l.Uv=o.focus.x,l.Vv=o.focus.y,o.We===null&&(o.We=new q),o.We.add(l),o.uv=o.We.count-1}else break}for(o=i.edges.iterator;o.next();){var u=o.value;r=u.fromVertex,l=u.toVertex,r.network===n&&l.network===n?n.Co(u):r.network===n?(u=r.Hj,u===null&&(u=new q,r.Hj=u),u.add(l),r.Vd--,r.sh+=l.sh):l.network===n&&(u=l.Hj,u===null&&(u=new q,l.Hj=u),u.add(r),l.Vd--,l.sh+=r.sh)}for(r=n.edges.iterator;r.next();)o=r.value,o.length*=Math.max(1,A.sqrt((o.fromVertex.sh+o.toVertex.sh)/(4*e+1)));for(e=n.vertexes.iterator;e.next();){r=e.value;var h=r.Hj;if(h!==null&&0<h.count&&(l=r.We.M(r.We.count-1).Ss-r.Vd,!(0>=l))){for(var f=u=0,c=h.count-l;c<h.count;c++){var p=h.M(c),g=null;for(o=p.edges.iterator;o.next();){var m=o.value;if(m.Cx(p)===r){g=m;break}}g!==null&&(f+=g.length,u+=p.width*p.height)}o=r.centerX,h=r.centerY,c=r.width,p=r.height,g=r.focus,m=c*p,1>m&&(m=1),u=A.sqrt((u+m+f*f*4/(l*l))/m),l=(u-1)*c/2,u=(u-1)*p/2,r.bounds=new E(o-g.x-l,h-g.y-u,c+2*l,p+2*u),r.focus=new C(g.x+l,g.y+u)}}return t.network=n,i}function AT(t,e){for(var i=t.network.vertexes.iterator;i.next();){var n=i.value;if(n.network=e,n.We!==null){var r=n.We.M(n.uv);n.Vd=r.Ss;var o=r.Uv,l=r.Vv;n.bounds=new E(n.centerX-o,n.centerY-l,r.Ts,r.Rs),n.focus=new C(o,l),n.uv--}}for(i=t.network.edges.iterator;i.next();)i.value.network=e;t.network=e}function jT(t,e){var i=e.Hj;if(i!==null&&i.count!==0){var n=e.centerX,r=e.centerY,o=e.width,l=e.height;e.We!==null&&0<e.We.count&&(l=e.We.M(0),o=l.Ts,l=l.Rs),o=A.sqrt(o*o+l*l)/2;for(var u=!1,h=l=0,f=0,c=e.vertexes.iterator;c.next();){var p=c.value;1>=p.Vd?h++:(u=!0,f++,l+=Math.atan2(e.centerY-p.centerY,e.centerX-p.centerX))}if(h!==0){for(0<f&&(l/=f),f=e=0,e=u?2*Math.PI/(h+1):2*Math.PI/h,h%2===0&&(f=e/2),1<i.count&&i.sort(function(m,v){return m===null||v===null||m===v?0:v.width*v.height-m.width*m.height}),u=h%2===0?0:1,i=i.iterator;i.next();)if(h=i.value,!(1<h.Vd||t.isFixed(h))){for(c=null,p=h.edges.iterator;p.next();){c=p.value;break}p=h.width;var g=h.height;p=A.sqrt(p*p+g*g)/2,c=o+c.length+p,p=l+(e*(u/2>>1)+f)*(u%2===0?1:-1),h.centerX=n+c*Math.cos(p),h.centerY=r+c*Math.sin(p),u++}}}}function z2(t,e,i,n,r,o,l){var u=9e19,h=-1,f=0;t:for(;f<e;f++){var c=t[f],p=c.x-i,g=c.y-n;if(p=p*p+g*g,p<u){for(g=f-1;0<=g;g--)if(t[g].y>c.y&&t[g].x-c.x<r+l.width)continue t;for(g=f+1;g<e;g++)if(t[g].x>c.x&&t[g].y-c.y<o+l.height)continue t;h=f,u=p}}return h}ze.prototype.Du=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},ze.prototype.addComments=function(t){var e=t.node;if(e!==null)for(e=e.Ou();e.next();){var i=e.value;if(i.category==="Comment"&&i.isVisible()){var n=this.network.li(i);n===null&&(n=this.network.Bl(i)),n.charge=this.defaultCommentElectricalCharge,i=null;for(var r=n.destinationEdges;r.next();){var o=r.value;if(o.toVertex===t){i=o;break}}if(i===null){for(r=n.sourceEdges;r.next();)if(o=r.value,o.fromVertex===t){i=o;break}}i===null&&(i=this.network.Yj(t,n,null)),i.length=this.defaultCommentSpringLength}}};function V2(t,e){var i=t.bounds,n=i.x;t=i.y;var r=i.width;i=i.height;var o=e.bounds,l=o.x;e=o.y;var u=o.width;return o=o.height,n+r<l?t>e+o?(i=n+r-l,t=t-e-o,A.sqrt(i*i+t*t)):t+i<e?(n=n+r-l,t=t+i-e,A.sqrt(n*n+t*t)):l-(n+r):n>l+u?t>e+o?(i=n-l-u,t=t-e-o,A.sqrt(i*i+t*t)):t+i<e?(n=n-l-u,t=t+i-e,A.sqrt(n*n+t*t)):n-(l+u):t>e+o?t-(e+o):t+i<e?e-(t+i):.1}function U2(t,e){for(t.ah=null,e=t.Bn+e;t.Bn<e&&(t.Bn++,DT(t)););t.ah=null}function DT(t){t.ah===null&&(t.ah=t.network.vertexes.Fa());var e=t.ah;if(0>=e.length)return!1;var i=e[0];i.forceX=0,i.forceY=0;for(var n=i.centerX,r=n,o=i=i.centerY,l=1;l<e.length;l++){var u=e[l];u.forceX=0,u.forceY=0;var h=u.centerX;u=u.centerY,n=Math.min(n,h),r=Math.max(r,h),i=Math.min(i,u),o=Math.max(o,u)}(r=r-n>o-i)?e.sort(function(x,k){return x===null||k===null||x===k?0:x.centerX-k.centerX}):e.sort(function(x,k){return x===null||k===null||x===k?0:x.centerY-k.centerY}),i=t.Zf;var f=n=u=0;for(o=0;o<e.length;o++){l=e[o],n=l.bounds,u=l.focus,h=n.x+u.x;var c=n.y+u.y;n=l.charge*t.electricalFieldX(h,c),f=l.charge*t.electricalFieldY(h,c),n+=l.mass*t.gravitationalFieldX(h,c),f+=l.mass*t.gravitationalFieldY(h,c),l.forceX+=n,l.forceY+=f;for(var p=o+1;p<e.length;p++){var g=e[p];if(g!==l){n=g.bounds,u=g.focus,f=n.x+u.x;var m=n.y+u.y;if(h-f>i||f-h>i){if(r)break}else if(c-m>i||m-c>i){if(!r)break}else{var v=V2(l,g);1>v?(n=t.randomNumberGenerator,n===null&&(t.randomNumberGenerator=n=new ug),v=n.random(),u=n.random(),h>f?(n=Math.abs(g.bounds.right-l.bounds.x),n=(1+n)*v):h<f?(n=Math.abs(g.bounds.x-l.bounds.right),n=-(1+n)*v):(n=Math.max(g.width,l.width),n=(1+n)*v-n/2),c>m?(f=Math.abs(g.bounds.bottom-l.bounds.y),f=(1+f)*u):h<f?(f=Math.abs(g.bounds.y-l.bounds.bottom),f=-(1+f)*u):(f=Math.max(g.height,l.height),f=(1+f)*u-f/2)):(u=-(l.charge*g.charge)/(v*v),n=(f-h)/v*u,f=(m-c)/v*u),l.forceX+=n,l.forceY+=f,g.forceX-=n,g.forceY-=f}}}}for(r=t.network.edges.iterator;r.next();)u=r.value,i=u.fromVertex,o=u.toVertex,l=i.bounds,h=i.focus,n=l.x+h.x,l=l.y+h.y,c=o.bounds,p=o.focus,h=c.x+p.x,c=c.y+p.y,p=V2(i,o),1>p?(p=t.randomNumberGenerator,p===null&&(t.randomNumberGenerator=p=new ug),u=p.random(),p=p.random(),n=(n>h?1:-1)*(1+(o.width>i.width?o.width:i.width))*u,f=(l>c?1:-1)*(1+(o.height>i.height?o.height:i.height))*p):(u=u.stiffness*(p-u.length),n=(h-n)/p*u,f=(c-l)/p*u),i.forceX+=n,i.forceY+=f,o.forceX-=n,o.forceY-=f;for(r=n=0;r<e.length;r++)i=e[r],t.isFixed(i)?t.moveFixedVertex(i):n=Math.max(n,t.moveVertex(i)||0);return n>t.epsilonDistance*t.epsilonDistance}ze.prototype.moveVertex=function(t){var e=t.forceX,i=t.forceY,n=this.moveLimit;return e<-n?e=-n:e>n&&(e=n),i<-n?i=-n:i>n&&(i=n),t.centerX+=e,t.centerY+=i,e*e+i*i},ze.prototype.moveFixedVertex=function(){},ze.prototype.commitLayout=function(){this.Av(),this.commitNodes(),this.isRouting&&this.commitLinks()},ze.prototype.Av=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;e!==null&&(e.fromSpot=_e,e.toSpot=_e)}},ze.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var i=E.alloc();this.computeBounds(this.network,i),e=this.arrangementOrigin,t=e.x-i.x,e=e.y-i.y,E.free(i)}i=E.alloc();for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;(t!==0||e!==0)&&(i.assign(r.bounds),i.x+=t,i.y+=e,r.bounds=i),r.commit()}E.free(i)},ze.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},ze.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Gk:t},ze.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Fk:t},ze.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Dk:t},ze.prototype.electricalFieldX=function(){return 0},ze.prototype.electricalFieldY=function(){return 0},ze.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Ek:t},ze.prototype.gravitationalFieldX=function(){return 0},ze.prototype.gravitationalFieldY=function(){return 0},ze.prototype.isFixed=function(t){return t.isFixed},Y.Object.defineProperties(ze.prototype,{currentIteration:{get:function(){return this.Bn}},arrangementSpacing:{get:function(){return this.$d},set:function(t){this.$d.D(t)||(this.$d.assign(t),this.C())}},arrangesToOrigin:{get:function(){return this.Cm},set:function(t){this.Cm!==t&&(this.Cm=t,this.C())}},setsPortSpots:{get:function(){return this.sf},set:function(t){this.sf!==t&&(this.sf=t,this.C())}},comments:{get:function(){return this.td},set:function(t){this.td!==t&&(this.td=t,this.C())}},maxIterations:{get:function(){return this.cl},set:function(t){this.cl!==t&&0<=t&&(this.cl=t,this.C())}},epsilonDistance:{get:function(){return this.an},set:function(t){this.an!==t&&0<t&&(this.an=t,this.C())}},infinityDistance:{get:function(){return this.Zf},set:function(t){this.Zf!==t&&1<t&&(this.Zf=t,this.C())}},moveLimit:{get:function(){return this.Jn},set:function(t){this.Jn!==t&&1<t&&(this.Jn=t,this.C())}},randomNumberGenerator:{get:function(){return this.ho},set:function(t){this.ho!==t&&(t!==null&&typeof t.random!="function"&&O('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.ho=t)}},defaultSpringStiffness:{get:function(){return this.Gk},set:function(t){this.Gk!==t&&(this.Gk=t,this.C())}},defaultSpringLength:{get:function(){return this.Fk},set:function(t){this.Fk!==t&&(this.Fk=t,this.C())}},defaultElectricalCharge:{get:function(){return this.Dk},set:function(t){this.Dk!==t&&(this.Dk=t,this.C())}},defaultGravitationalMass:{get:function(){return this.Ek},set:function(t){this.Ek!==t&&(this.Ek=t,this.C())}},defaultCommentSpringLength:{get:function(){return this.Wm},set:function(t){this.Wm!==t&&(this.Wm=t,this.C())}},defaultCommentElectricalCharge:{get:function(){return this.Vm},set:function(t){this.Vm!==t&&(this.Vm=t,this.C())}}}),ze.className="ForceDirectedLayout";function Y2(){this.Vv=this.Uv=this.Rs=this.Ts=this.Ss=0}Y2.className="ForceDirectedSubnet";function Pu(t){Yt.call(this,t)}Z(Pu,Yt),Pu.prototype.createVertex=function(){return new rc(this)},Pu.prototype.createEdge=function(){return new oc(this)},Pu.className="ForceDirectedNetwork";function rc(t){me.call(this,t),this.ia=!1,this.Ha=this.u=NaN,this.sh=this.Vd=this.V=this.F=0,this.We=this.Hj=null,this.uv=0}Z(rc,me),Y.Object.defineProperties(rc.prototype,{isFixed:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},charge:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},mass:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},forceX:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},forceY:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}}}),rc.className="ForceDirectedVertex";function oc(t){Gi.call(this,t),this.j=this.o=NaN}Z(oc,Gi),Y.Object.defineProperties(oc.prototype,{stiffness:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),oc.className="ForceDirectedEdge";function ug(){var t=0;this.seed=t,this.ey=48271,this.hy=2147483647,this.Q=44488.07041494893,this.iy=3399,this.gy=1/2147483647,this.random()}ug.prototype.random=function(){var t=this.seed%this.Q*this.ey-this.seed/this.Q*this.iy;return 0<t?this.seed=t:this.seed=t+this.hy,this.seed*this.gy},ug.className="RandomNumberGenerator";function It(t){Kt.call(this),this.mc=this.ie=25,this.K=0,this.Ck=lc,this.Yk=uc,this.Pk=hc,this.cj=4,this.qk=ac,this.bg=15,this.kl=10,this.sf=!0,this.Dn=4,this.Ra=this.Iq=this.Ia=-1,this.Md=this.In=0,this.Ta=this.Kd=this.Ld=this.he=this.vb=null,this.Ln=0,this.Kn=this.lj=null,this.le=0,this.el=null,this.Rf=new C,this.He=[],this.He.length=100,this.zw=this.ve=0,t&&Object.assign(this,t)}Z(It,Kt),It.prototype.cloneProtected=function(t){Kt.prototype.cloneProtected.call(this,t),t.ie=this.ie,t.mc=this.mc,t.K=this.K,t.Ck=this.Ck,t.Yk=this.Yk,t.Pk=this.Pk,t.cj=this.cj,t.qk=this.qk,t.bg=this.bg,t.kl=this.kl,t.sf=this.sf,t.Dn=this.Dn,t.ve=this.ve},It.prototype.qb=function(t){t.classType===It?t.name.indexOf("Aggressive")===0?this.aggressiveOption=t:t.name.indexOf("Cycle")===0?this.cycleRemoveOption=t:t.name.indexOf("Init")===0?this.initializeOption=t:t.name.indexOf("Layer")===0?this.layeringOption=t:O("Unknown enum value: "+t):Kt.prototype.qb.call(this,t)},It.prototype.createNetwork=function(){return new oa(this)},It.prototype.doLayout=function(t){for(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Iq=-1,this.Md=this.In=0,this.el=this.Kn=this.lj=null,t=0;t<this.He.length;t++)this.He[t]=null;if(0<this.network.vertexes.count){for(this.network.Lo(),this.cycleRemoveOption!==ra&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.Ia=-1,this.assignLayers(),t.reset();t.next();)this.Ia=Math.max(this.Ia,t.value.layer);this.cycleRemoveOption===ra&&this.removeCycles(),t=this.network;for(var e=[],i=t.edges.iterator;i.next();){var n=i.value;n.valid=!1,e.push(n)}for(i=0;i<e.length;i++){n=e[i];var r=n.fromVertex,o=n.toVertex;if(!(n.valid||(r.node===null&&r.data===null||o.node===null&&o.data===null)&&r.layer===o.layer)){var l=0,u=0,h=0,f=0;if(n.link!==null){if(u=n.link,u===null)continue;var c=r.node;if(l=o.node,c===null||l===null)continue;var p=u.fromNode;h=u.toNode;for(var g=u.fromPort;g!==null&&!g.Ed();)g=g.panel;for(u=u.toPort;u!==null&&!u.Ed();)u=u.panel;if(n.rev){f=p;var m=g;p=h,g=u,h=f,u=m}var v=r.focus;f=o.focus;var x=n.rev?o.bounds:r.bounds;m=C.alloc(),c!==p?x.w()&&p.isVisible()?p.actualBounds.w()?(ts(p,g,Et,m),m.x+=p.actualBounds.x-x.x,m.y+=p.actualBounds.y-x.y):(ts(p,g,Et,m),m.w()||m.assign(v)):m.assign(v):x.w()?(ts(p,g,Et,m),m.w()||m.assign(v)):m.assign(v),p=n.rev?r.bounds:o.bounds,c=C.alloc(),l!==h?p.w()&&h.isVisible()?h.actualBounds.w()?(ts(h,u,Et,c),c.x+=h.actualBounds.x-p.x,c.y+=h.actualBounds.y-p.y):(ts(h,u,Et,c),c.w()||c.assign(f)):c.assign(f):p.w()?(ts(h,u,Et,c),c.w()||c.assign(f)):c.assign(f),this.K===90||this.K===270?(l=Math.round((m.x-v.x)/this.mc),h=m.x,u=Math.round((c.x-f.x)/this.mc),f=c.x):(l=Math.round((m.y-v.y)/this.mc),h=m.y,u=Math.round((c.y-f.y)/this.mc),f=c.y),C.free(m),C.free(c),n.portFromColOffset=l,n.portFromPos=h,n.portToColOffset=u,n.portToPos=f}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;if(m=r.layer,c=o.layer,p=0,x=n.link,x!==null){var k=x.fromPort,S=x.toPort;if(k!==null&&S!==null){var P=x.fromNode;if(g=x.toNode,P!==null&&g!==null){var N=cg(this,!0),T=cg(this,!1),F=this.setsPortSpots?N:x.computeSpot(!0,k);v=this.setsPortSpots?T:x.computeSpot(!1,S);var D=x.isOrthogonal;F.$c()&&F.Hf(T)&&v.$c()&&v.Hf(N)?p=0:(N=x.getLinkPoint(P,k,F,!0,D,g,S,C.alloc()),T=x.getLinkDirection(P,k,N,F,!0,D,g,S),C.free(N),F.ys()||T!==Q2(this,n,!0)?this.setsPortSpots&&P!==null&&P.ports.count===1&&n.rev&&(p+=1):p+=1,F=x.getLinkPoint(g,S,v,!1,D,P,k,C.alloc()),x=x.getLinkDirection(g,S,F,v,!1,D,P,k),C.free(F),v.ys()||x!==Q2(this,n,!1)?this.setsPortSpots&&g!==null&&g.ports.count===1&&n.rev&&(p+=2):p+=2)}}}if(g=p,p=g===1||g===3,g=g===2||g===3,x=null,k=void 0,g&&(this._experimental&&(v=r,x=[],x.push(o),x=J2(this,v,x)?x.reverse():[],k=1),v=t.createVertex(),v.node=null,v.Eu=1,v.layer=m,v.near=r,t.dh(v),r=t.Yj(r,v,n.link),r.valid=!1,r.rev=n.rev,r.portFromColOffset=l,r.portToColOffset=0,r.portFromPos=h,r.portToPos=0,r=v),S=1,p&&S--,m-c>S&&0<m){for(n.valid=!1,v=t.createVertex(),v.node=null,v.Eu=2,v.layer=m-1,x&&k<x.length&&v.layer===x[k].layer&&(v.near=x[k++]),t.dh(v),r=t.Yj(r,v,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=g?0:l,r.portToColOffset=0,r.portFromPos=g?0:h,r.portToPos=0,r=v,m--;m-c>S&&0<m;)v=t.createVertex(),v.node=null,v.Eu=3,v.layer=m-1,x&&k<x.length&&v.layer===x[k].layer&&(v.near=x[k++]),t.dh(v),r=t.Yj(r,v,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=v,m--;r=t.Yj(v,o,n.link),r.valid=!p,p&&(v.near=o),r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=u,r.portFromPos=0,r.portToPos=f}else n.valid=!0}}for(t=this.vb=[],e=0;e<=this.Ia;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Iq=-1,i=this.Md=this.In=0;i<=this.Ia;i++)t[i]>t[this.Md]&&(this.Iq=t[i]-1,this.Md=i),t[i]<t[this.In]&&(this.In=i);for(this.el=[],i=0;i<t.length;i++)this.el[i]=[];for(e.reset();e.next();)t=e.value,this.el[t.layer][t.index]=t;for(this.Ra=-1,t=0;t<=this.Ia;t++){for(e=Is(this,t),i=0,n=this.vb[t],o=0;o<n;o++)r=e[o],i+=this.nodeMinColumnSpace(r,!0),r.column=i,i+=1,i+=this.nodeMinColumnSpace(r,!1);this.Ra=Math.max(this.Ra,i-1),Es(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},It.prototype.linkMinLength=function(){return 1};function Bv(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,e===null&&t===null?8:e===null||t===null?4:1}It.prototype.nodeMinLayerSpace=function(t,e){return t.node===null&&t.data===null?0:this.K===90||this.K===270?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},It.prototype.nodeMinColumnSpace=function(t,e){if(t.node===null&&t.data===null)return 0;var i=e?t.hv:t.gv;return i!==null?i:(i=this.K,i===90||i===270?e?t.hv=t.focus.x/this.mc+1|0:t.gv=(t.bounds.width-t.focus.x)/this.mc+1|0:e?t.hv=t.focus.y/this.mc+1|0:t.gv=(t.bounds.height-t.focus.y)/this.mc+1|0)};function Li(t){t.lj===null&&(t.lj=[]);for(var e=0,i=t.network.vertexes.iterator;i.next();){var n=i.value;t.lj[e]=n.layer,e++,t.lj[e]=n.column,e++,t.lj[e]=n.index,e++}return t.lj}function mn(t,e){var i=0;for(t=t.network.vertexes.iterator;t.next();){var n=t.value;n.layer=e[i],i++,n.column=e[i],i++,n.index=e[i],i++}}function G2(t,e,i){var n=Is(t,e),r=t.vb[e];(t.Kn===null||t.Kn.length<r*r)&&(t.Kn=[]);for(var o=t.Kn,l=0;l<r;l++){var u=0,h=n[l],f=h.near;f!==null&&f!==h&&f.layer===h.layer&&(u+=Math.max(0,Math.abs(f.index-h.index)-1));var c;if(0<=i){var p=n[l].sourceEdgesArrayAccess;for(h=0;h<p.length;h++){var g=p[h];if(g.valid&&g.fromVertex.layer!==e){f=g.fromVertex.index;var m=g.portToPos;for(g=g.portFromPos,c=h+1;c<p.length;c++){var v=p[c];if(v.valid&&v.fromVertex.layer!==e){var x=v.fromVertex.index,k=v.portToPos;v=v.portFromPos,m<k&&(f>x||f===x&&g>v)&&u++,k<m&&(x>f||x===f&&v>g)&&u++}}}}}if(0>=i){for(p=n[l].destinationEdgesArrayAccess,h=0;h<p.length;h++)if(g=p[h],g.valid&&g.toVertex.layer!==e)for(f=g.toVertex.index,m=g.portToPos,g=g.portFromPos,c=h+1;c<p.length;c++)v=p[c],v.valid&&v.toVertex.layer!==e&&(x=v.toVertex.index,k=v.portToPos,v=v.portFromPos,g<v&&(f>x||f===x&&m>k)&&u++,v<g&&(x>f||x===f&&k>m)&&u++)}for(o[l*r+l]=u,u=l+1;u<r;u++){var S=0,P=0;if(0<=i){p=n[l].sourceEdgesArrayAccess;var N=n[u].sourceEdgesArrayAccess;for(h=0;h<p.length;h++)if(g=p[h],g.valid&&g.fromVertex.layer!==e)for(f=g.fromVertex.index,g=g.portFromPos,c=0;c<N.length;c++)v=N[c],v.valid&&v.fromVertex.layer!==e&&(x=v.fromVertex.index,v=v.portFromPos,(f<x||f===x&&g<v)&&P++,(x<f||x===f&&v<g)&&S++)}if(0>=i){for(p=n[l].destinationEdgesArrayAccess,N=n[u].destinationEdgesArrayAccess,h=0;h<p.length;h++)if(g=p[h],g.valid&&g.toVertex.layer!==e)for(f=g.toVertex.index,m=g.portToPos,c=0;c<N.length;c++)v=N[c],v.valid&&v.toVertex.layer!==e&&(x=v.toVertex.index,k=v.portToPos,(f<x||f===x&&m<k)&&P++,(x<f||x===f&&k<m)&&S++)}o[l*r+u]=S,o[u*r+l]=P}}return Es(t,e,n),o}It.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.Ia;e++)for(var i=G2(this,e,1),n=this.vb[e],r=0;r<n;r++)for(var o=r;o<n;o++)t+=i[r*n+o];return t};function hg(t){for(var e=0,i=0;i<=t.Ia;i++){for(var n=t,r=i,o=Is(n,r),l=n.vb[r],u=0,h=0;h<l;h++){var f=o[h].destinationEdgesArrayAccess;if(f!==null)for(var c=0;c<f.length;c++){var p=f[c];if(p.valid&&p.toVertex.layer!==r){var g=p.fromVertex.column+p.portFromColOffset,m=p.toVertex.column+p.portToColOffset;u+=(Math.abs(g-m)+1)*Bv(p)}}}Es(n,r,o),e+=u}return e}It.prototype.normalize=function(){var t=1/0;this.Ra=-1;for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0)),this.Ra=Math.max(this.Ra,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ra-=t};function Rv(t,e,i){for(var n=Is(t,e),r=t.vb[e],o=[],l=0;l<r;l++){var u=n[l],h=null;0>=i&&(h=u.sourceEdgesArrayAccess);var f=null;0<=i&&(f=u.destinationEdgesArrayAccess);var c=0,p=0,g=u.near;if(g!==null&&g.layer===u.layer&&(c+=g.column-1,p++),h!==null)for(g=0;g<h.length;g++){u=h[g];var m=u.fromVertex;u.valid&&!u.rev&&m.layer!==e&&(c+=m.column,p++)}if(f!==null)for(h=0;h<f.length;h++)u=f[h],g=u.toVertex,u.valid&&!u.rev&&g.layer!==e&&(c+=g.column,p++);o[l]=p===0?-1:c/p}return Es(t,e,n),o}function H2(t,e,i){for(var n=Is(t,e),r=t.vb[e],o=[],l=0;l<r;l++){var u=n[l],h=null;0>=i&&(h=u.sourceEdgesArrayAccess);var f=null;0<=i&&(f=u.destinationEdgesArrayAccess);var c=0,p=[],g=u.near;if(g!==null&&g.layer===u.layer&&(p[c]=g.column-1,c++),u=void 0,h!==null)for(g=0;g<h.length;g++){u=h[g];var m=u.fromVertex;u.valid&&!u.rev&&m.layer!==e&&(p[c]=m.column+u.portFromColOffset,c++)}if(f!==null)for(h=0;h<f.length;h++)u=f[h],g=u.toVertex,u.valid&&!u.rev&&g.layer!==e&&(p[c]=g.column+u.portToColOffset,c++);c===0?o[l]=-1:(p.sort(function(v,x){return v-x}),f=c>>1,o[l]=c&1?p[f]:p[f-1]+p[f]>>1)}return Es(t,e,n),o}function sc(t,e,i,n,r,o){if(e.component===n){if(e.component=i,r)for(var l=e.destinationEdges;l.next();){var u=l.value,h=u.toVertex,f=e.layer-h.layer;u=t.linkMinLength(u),f===u&&sc(t,h,i,n,r,o)}if(o)for(l=e.sourceEdges;l.next();)u=l.value,h=u.fromVertex,f=h.layer-e.layer,u=t.linkMinLength(u),f===u&&sc(t,h,i,n,r,o)}}function zv(t,e,i,n,r,o){if(e.component===n){if(e.component=i,r)for(var l=e.destinationEdges;l.next();)zv(t,l.value.toVertex,i,n,r,o);if(o)for(e=e.sourceEdges;e.next();)zv(t,e.value.fromVertex,i,n,r,o)}}It.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.Ck){default:case pg:t=this.network;var e=0,i=t.vertexes.count-1,n=[];n.length=i+1;for(var r=t.vertexes.iterator;r.next();)r.value.valid=!0;for(;OT(t)!==null;){for(r=X2(t);r!==null;)n[i]=r,i--,r.valid=!1,r=X2(t);for(r=K2(t);r!==null;)n[e]=r,e++,r.valid=!1,r=K2(t);r=null;for(var o=0,l=this.network.vertexes.iterator;l.next();){var u=l.value;if(u.valid){for(var h=0,f=u.destinationEdges;f.next();)f.value.toVertex.valid&&h++;f=0;for(var c=u.sourceEdges;c.next();)c.value.fromVertex.valid&&f++;(r===null||o<h-f)&&(r=u,o=h-f)}}r!==null&&(n[e]=r,e++,r.valid=!1)}for(e=0;e<t.vertexes.count;e++)n[e].index=e;for(n=t.edges.iterator;n.next();)e=n.value,e.fromVertex.index>e.toVertex.index&&(t.hm(e),e.rev=!0);break;case lc:for(n=this.network.vertexes.iterator;n.next();)t=n.value,t.Ll=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.Ln=0,n.reset();n.next();)e=n.value,e.sourceEdges.count===0&&Vv(this,e);for(n.reset();n.next();)e=n.value,e.Ll===-1&&Vv(this,e);for(t.reset();t.next();)n=t.value,n.forest||(e=n.fromVertex,i=e.finish,r=n.toVertex,o=r.finish,r.Ll<e.Ll&&i<o&&(this.network.hm(n),n.rev=!0));break;case ra:for(t=this.network,e=t.vertexes.iterator,n=1/0;e.next();)n=Math.min(n,e.value.layer);if(1/0>n){if(0>n)for(e.reset();e.next();)e.value.layer-=n;for(n=[],e.reset();e.next();)i=e.value,r=n[i.layer],r===void 0?n[i.layer]=[i]:r.push(i);for(i=e=0;i<n.length;i++)if(r=n[i],!r||r.length===0)e++;else if(0<i)for(o=0;o<r.length;o++)r[o].layer-=e;for(n=t.edges.iterator;n.next();)e=n.value,e.fromVertex.layer<e.toVertex.layer&&(t.hm(e),e.rev=!0)}}};function OT(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function X2(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.destinationEdges;n.next();)if(n.value.toVertex.valid){i=!1;break}if(i)return e}}return null}function K2(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.sourceEdges;n.next();)if(n.value.fromVertex.valid){i=!1;break}if(i)return e}}return null}function Vv(t,e){e.Ll=t.Ln,t.Ln++;for(var i=e.destinationEdges;i.next();){var n=i.value,r=n.toVertex;r.Ll===-1&&(n.forest=!0,Vv(t,r))}e.finish=t.Ln,t.Ln++}It.prototype.assignLayers=function(){switch(this.Yk){case dg:_2(this);break;case gg:for(var t,e=this.network.vertexes.iterator;e.next();)t=$2(this,e.value),this.Ia=Math.max(t,this.Ia);for(e.reset();e.next();)t=e.value,t.layer=this.Ia-t.layer;break;default:case uc:for(_2(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)t=e.value,t.sourceEdges.count===0&&Z2(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.Ia=-1,e.reset();e.next();){var i=e.value;i.layer-=t,this.Ia=Math.max(this.Ia,i.layer)}}};function _2(t){for(var e=t.network.vertexes.iterator;e.next();){var i=W2(t,e.value);t.Ia=Math.max(i,t.Ia)}}function W2(t,e){var i=0;if(e.layer===-1){for(var n=e.destinationEdges;n.next();){var r=n.value,o=r.toVertex;r=t.linkMinLength(r),i=Math.max(i,W2(t,o)+r)}e.layer=i}else i=e.layer;return i}function $2(t,e){var i=0;if(e.layer===-1){for(var n=e.sourceEdges;n.next();){var r=n.value,o=r.fromVertex;r=t.linkMinLength(r),i=Math.max(i,$2(t,o)+r)}e.layer=i}else i=e.layer;return i}function Z2(t,e){if(!e.valid){e.valid=!0;for(var i=e.destinationEdges;i.next();)Z2(t,i.value.toVertex);for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(var n=e.sourceEdgesArrayAccess,r=n.length,o=0;o<r;o++){var l=n[o],u=l.fromVertex,h=l.toVertex;l=t.linkMinLength(l),u.layer-h.layer>l&&sc(t,u,0,-1,!0,!1)}for(sc(t,e,1,-1,!0,!0);e.component!==0;){for(o=0,n=1/0,u=0,h=null,l=t.network.vertexes.iterator;l.next();){var f=l.value;if(f.component===1){var c=0,p=!1,g=f.sourceEdgesArrayAccess;r=g.length;for(var m=0;m<r;m++){var v=g[m],x=v.fromVertex;c+=1,x.component!==1&&(o+=1,x=x.layer-f.layer,v=t.linkMinLength(v),n=Math.min(n,x-v))}for(g=f.destinationEdgesArrayAccess,r=g.length,m=0;m<r;m++)v=g[m].toVertex,--c,v.component!==1?--o:p=!0;(h===null||c<u)&&!p&&(h=f,u=c)}}if(0<o){for(i.reset();i.next();)r=i.value,r.component===1&&(r.layer+=n);e.component=0}else h.component=0}for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(sc(t,e,1,-1,!0,!1);e.component!==0;){for(n=0,r=1/0,o=0,u=null,h=t.network.vertexes.iterator;h.next();)if(l=h.value,l.component===1){for(f=0,c=!1,g=l.sourceEdgesArrayAccess,p=g.length,m=0;m<p;m++)v=g[m].fromVertex,f+=1,v.component!==1?n+=1:c=!0;for(g=l.destinationEdgesArrayAccess,p=g.length,m=0;m<p;m++)v=g[m],x=v.toVertex,--f,x.component!==1&&(--n,x=l.layer-x.layer,v=t.linkMinLength(v),r=Math.min(r,x-v));(u===null||f>o)&&!c&&(u=l,o=f)}if(0>n){for(i.reset();i.next();)n=i.value,n.component===1&&(n.layer-=r);e.component=0}else u.component=0}}}function Q2(t,e,i){return t.K===90?i&&!e.rev||!i&&e.rev?270:90:t.K===180?i&&!e.rev||!i&&e.rev?0:180:t.K===270?i&&!e.rev||!i&&e.rev?90:270:i&&!e.rev||!i&&e.rev?180:0}function J2(t,e,i){for(var n=i[i.length-1].sourceEdges.iterator;n.next();){var r=n.value;if(!r.rev&&r.valid){if(r=r.fromVertex,i.push(r),r===e||J2(t,e,i))return!0;i.pop()}}return!1}It.prototype.initializeIndices=function(){switch(this.Pk){default:case mg:IT(this);break;case hc:var t=null,e=this.network.vertexes.iterator;if(this._experimental)for(;e.next();){var i=e.value;if(i.near&&(t===null&&(t=new ct),i.layer===i.near.layer)){var n=t.get(i.near)||[];n.push(i),t.set(i.near,n)}}for(i=this.Ia;0<=i;i--)for(e.reset();e.next();)n=e.value,n.layer===i&&n.index===-1&&q2(this,n,t);break;case yg:if(t=null,e=this.network.vertexes.iterator,this._experimental)for(;e.next();)i=e.value,i.near&&(t===null&&(t=new ct),i.layer===i.near.layer&&(n=t.get(i.near)||[],n.push(i),t.set(i.near,n)));for(i=0;i<=this.Ia;i++)for(e.reset();e.next();)n=e.value,n.layer===i&&n.index===-1&&b2(this,n,t)}};function IT(t){var e=null,i=t.network.vertexes.iterator;if(t._experimental){for(;i.next();){var n=i.value;if(n.near&&(e===null&&(e=new ct),n.layer===n.near.layer)){var r=e.get(n.near)||[];r.push(n),e.set(n.near,r)}}i.reset()}for(n={};i.next();)r=i.value,e&&r.near||(n.layer=r.layer,r.index=t.vb[n.layer],t.vb[n.layer]++,e&&(r=e.get(r),Array.isArray(r)&&r.forEach(function(o){return function(l){l.index=t.vb[o.layer],t.vb[o.layer]++}}(n)))),n={layer:n.layer}}function q2(t,e,i){if(!i||!e.near){var n=e.layer;if(e.index=t.vb[n],t.vb[n]++,i){var r=i.get(e);Array.isArray(r)&&r.forEach(function(h){h.index=t.vb[n],t.vb[n]++})}for(e=e.destinationEdgesArrayAccess,r=!0;r;){r=!1;for(var o=0;o<e.length-1;o++){var l=e[o],u=e[o+1];l.portFromColOffset>u.portFromColOffset&&(r=!0,e[o]=u,e[o+1]=l)}}for(r=0;r<e.length;r++)o=e[r],o.valid&&(o=o.toVertex,o.index===-1&&q2(t,o,i))}}function b2(t,e,i){if(!i||!e.near){var n=e.layer;if(e.index=t.vb[n],t.vb[n]++,i){var r=i.get(e);Array.isArray(r)&&r.forEach(function(h){h.index=t.vb[n],t.vb[n]++})}e=e.sourceEdgesArrayAccess;var o=!0;for(r=0;o;)for(o=!1,r=0;r<e.length-1;r++){var l=e[r],u=e[r+1];l.portToColOffset>u.portToColOffset&&(o=!0,e[r]=u,e[r+1]=l)}for(r=0;r<e.length;r++)o=e[r],o.valid&&(o=o.fromVertex,o.index===-1&&b2(t,o,i))}}It.prototype.reduceCrossings=function(){var t=this.countCrossings(),e=Li(this),i,n;for(i=0;i<this.cj;i++){for(n=0;n<=this.Ia;n++)ag(this,n,1),In(this,n,1);var r=this.countCrossings();for(r<t&&(t=r,e=Li(this)),n=this.Ia;0<=n;n--)ag(this,n,-1),In(this,n,-1);r=this.countCrossings(),r<t&&(t=r,e=Li(this))}for(mn(this,e),i=0;i<this.cj;i++){for(n=0;n<=this.Ia;n++)ag(this,n,0),In(this,n,0);for(r=this.countCrossings(),r<t&&(t=r,e=Li(this)),n=this.Ia;0<=n;n--)ag(this,n,0),In(this,n,0);r=this.countCrossings(),r<t&&(t=r,e=Li(this))}mn(this,e);var o,l,u;switch(this.qk){case vg:break;case xg:for(u=t+1;(n=this.countCrossings())<u;)for(u=n,i=this.Ia;0<=i;i--)for(l=0;l<=i;l++){for(o=!0;o;)for(o=!1,n=i;n>=l;n--)o=In(this,n,-1)||o;for(r=this.countCrossings(),r>=t?mn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=In(this,n,1)||o;for(r=this.countCrossings(),r>=t?mn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=In(this,n,1)||o;for(r>=t?mn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=In(this,n,-1)||o;for(r>=t?mn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=In(this,n,0)||o;for(r>=t?mn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=In(this,n,0)||o;r>=t?mn(this,e):(t=r,e=Li(this))}break;default:case ac:for(i=this.Ia,l=0,u=t+1;(n=this.countCrossings())<u;){for(u=n,o=!0;o;)for(o=!1,n=i;n>=l;n--)o=In(this,n,-1)||o;for(r=this.countCrossings(),r>=t?mn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=In(this,n,1)||o;for(r=this.countCrossings(),r>=t?mn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=In(this,n,1)||o;for(r>=t?mn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=In(this,n,-1)||o;for(r>=t?mn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=i;n>=l;n--)o=In(this,n,0)||o;for(r>=t?mn(this,e):(t=r,e=Li(this)),o=!0;o;)for(o=!1,n=l;n<=i;n++)o=In(this,n,0)||o;r>=t?mn(this,e):(t=r,e=Li(this))}}mn(this,e)};function ag(t,e,i){var n=Is(t,e),r=t.vb[e],o=H2(t,e,i),l=Rv(t,e,i);for(i=0;i<r;i++)l[i]===-1&&(l[i]=n[i].column),o[i]===-1&&(o[i]=n[i].column);for(var u=!0,h;u;)for(u=!1,i=0;i<r-1;i++)(o[i+1]<o[i]||o[i+1]===o[i]&&l[i+1]<l[i])&&(u=!0,h=o[i],o[i]=o[i+1],o[i+1]=h,h=l[i],l[i]=l[i+1],l[i+1]=h,h=n[i],n[i]=n[i+1],n[i+1]=h);for(i=o=0;i<r;i++)h=n[i],h.index=i,o+=t.nodeMinColumnSpace(h,!0),h.column=o,o+=1,o+=t.nodeMinColumnSpace(h,!1);Es(t,e,n)}function In(t,e,i){var n=Is(t,e),r=t.vb[e];i=G2(t,e,i);var o,l=[];for(o=0;o<r;o++)l[o]=-1;var u=[];for(o=0;o<r;o++)u[o]=-1;for(var h=!1,f=!0;f;)for(f=!1,o=0;o<r-1;o++){var c=i[n[o].index*r+n[o+1].index],p=i[n[o+1].index*r+n[o].index],g=0,m=0,v=n[o].column,x=n[o+1].column,k=t.nodeMinColumnSpace(n[o],!0),S=t.nodeMinColumnSpace(n[o],!1),P=t.nodeMinColumnSpace(n[o+1],!0),N=t.nodeMinColumnSpace(n[o+1],!1);k=v-k+P,S=x-S+N;var T=n[o].sourceEdges.iterator;for(T.reset();T.next();)if(P=T.value,N=P.fromVertex,P.valid&&N.layer===e){for(P=0;P<n.length&&n[P]!==N;)P++;P<o&&(g+=2*(o-P),m+=2*(o+1-P)),P===o+1&&(g+=1),P>o+1&&(g+=4*(P-o),m+=4*(P-(o+1)))}for(T=n[o].destinationEdges.iterator,T.reset();T.next();)if(P=T.value,N=P.toVertex,P.valid&&N.layer===e){for(P=0;P<n.length&&n[P]!==N;)P++;P===o+1&&(m+=1)}for(T=n[o+1].sourceEdges.iterator,T.reset();T.next();)if(P=T.value,N=P.fromVertex,P.valid&&N.layer===e){for(P=0;P<n.length&&n[P]!==N;)P++;P<o&&(g+=2*(o+1-P),m+=2*(o-P)),P===o&&(m+=1),P>o+1&&(g+=4*(P-(o+1)),m+=4*(P-o))}for(T=n[o+1].destinationEdges.iterator,T.reset();T.next();)if(P=T.value,N=P.toVertex,P.valid&&N.layer===e){for(P=0;P<n.length&&n[P]!==N;)P++;P===o&&(g+=1)}P=N=0,T=l[n[o].index];var F=u[n[o].index],D=l[n[o+1].index],X=u[n[o+1].index];T!==-1&&(N+=Math.abs(T-v),P+=Math.abs(T-S)),F!==-1&&(N+=Math.abs(F-v),P+=Math.abs(F-S)),D!==-1&&(N+=Math.abs(D-x),P+=Math.abs(D-k)),X!==-1&&(N+=Math.abs(X-x),P+=Math.abs(X-k)),(m<g-.5||m===g&&p<c-.5||m===g&&p===c&&P<N-.5)&&(f=h=!0,n[o].column=S,n[o+1].column=k,c=n[o],n[o]=n[o+1],n[o+1]=c)}for(o=0;o<r;o++)n[o].index=o;return Es(t,e,n),h}It.prototype.straightenAndPack=function(){if(this.ve===0){var t=(this.bg&1)!==0,e=(this.bg&GT)!==0;if(1e3<this.network.edges.count&&e&&(t=!1),t){var i=[];for(e=0;e<=this.Ia;e++)i[e]=0;for(var n,r=this.network.vertexes.iterator;r.next();){var o=r.value;e=o.layer,n=o.column,o=this.nodeMinColumnSpace(o,!1),i[e]=Math.max(i[e],n+o)}for(r.reset();r.next();)o=r.value,e=o.layer,n=o.column,o.column=(8*(this.Ra-i[e])>>1)+8*n;this.Ra*=8}if(this.bg&2)for(i=!0,n=0;i&&n<this.kl;){for(i=!1,e=this.Md+1;e<=this.Ia;e++)i=na(this,e,1)||i;for(e=this.Md-1;0<=e;e--)i=na(this,e,-1)||i;i=na(this,this.Md,0)||i,n++}if(this.bg&4){for(e=this.Md+1;e<=this.Ia;e++)Uv(this,e,1);for(e=this.Md-1;0<=e;e--)Uv(this,e,-1);Uv(this,this.Md,0)}if(t&&(tk(this,-1),tk(this,1)),this.bg&2)for(i=!0,t=0;i&&t<this.kl;){for(i=!1,i=na(this,this.Md,0)||i,e=this.Md+1;e<=this.Ia;e++)i=na(this,e,0)||i;for(e=this.Md-1;0<=e;e--)i=na(this,e,0)||i;t++}}else zT(this)};function na(t,e,i){for(var n=!1;ET(t,e,i);)n=!0;return n}function ET(t,e,i){var n,r=Is(t,e),o=t.vb[e],l=Rv(t,e,-1);if(0<i)for(n=0;n<o;n++)l[n]=-1;var u=Rv(t,e,1);if(0>i)for(n=0;n<o;n++)u[n]=-1;for(var h=!1,f=!0;f;)for(f=!1,n=0;n<o;n++){var c=r[n].column,p=t.nodeMinColumnSpace(r[n],!0),g=t.nodeMinColumnSpace(r[n],!1),m=0;0>n-1||c-r[n-1].column-1>p+t.nodeMinColumnSpace(r[n-1],!1)?m=c-1:m=c,p=n+1>=o||r[n+1].column-c-1>g+t.nodeMinColumnSpace(r[n+1],!0)?c+1:c;var v=g=0,x=0;if(0>=i)for(var k=r[n].sourceEdges.iterator;k.next();){var S=k.value,P=S.fromVertex;if(S.valid&&P.layer!==e){var N=Bv(S),T=S.portFromColOffset;S=S.portToColOffset,P=P.column,g+=(Math.abs(c+S-(P+T))+1)*N,v+=(Math.abs(m+S-(P+T))+1)*N,x+=(Math.abs(p+S-(P+T))+1)*N}}if(0<=i)for(k=r[n].destinationEdges.iterator;k.next();)S=k.value,P=S.toVertex,S.valid&&P.layer!==e&&(N=Bv(S),T=S.portFromColOffset,S=S.portToColOffset,P=P.column,g+=(Math.abs(c+T-(P+S))+1)*N,v+=(Math.abs(m+T-(P+S))+1)*N,x+=(Math.abs(p+T-(P+S))+1)*N);S=T=N=0,k=l[r[n].index],P=u[r[n].index],k!==-1&&(N+=Math.abs(k-c),T+=Math.abs(k-m),S+=Math.abs(k-p)),P!==-1&&(N+=Math.abs(P-c),T+=Math.abs(P-m),S+=Math.abs(P-p)),v<g||v===g&&T<N?(f=h=!0,r[n].column=m):(x<g||x===g&&S<N)&&(f=h=!0,r[n].column=p)}return Es(t,e,r),t.normalize(),h}function Uv(t,e,i){var n=Is(t,e),r=t.vb[e],o=H2(t,e,i),l=[];for(i=0;i<r;i++)l[i]=o[i];for(o=!0;o;)for(o=!1,i=0;i<r;i++){var u=n[i].column,h=t.nodeMinColumnSpace(n[i],!0),f=t.nodeMinColumnSpace(n[i],!1),c=0;if(l[i]===-1)if(i===0&&i===r-1)c=u;else if(i===0){var p=n[i+1].column;p-u===f+t.nodeMinColumnSpace(n[i+1],!0)?c=u-1:c=u}else i===r-1?(p=n[i-1].column,c=u-p===h+t.nodeMinColumnSpace(n[i-1],!1)?u+1:u):(p=n[i-1].column,h=p+t.nodeMinColumnSpace(n[i-1],!1)+h+1,p=n[i+1].column,f=p-t.nodeMinColumnSpace(n[i+1],!0)-f-1,c=(h+f)/2|0);else i===0&&i===r-1?c=l[i]:i===0?(p=n[i+1].column,f=p-t.nodeMinColumnSpace(n[i+1],!0)-f-1,c=Math.min(l[i],f)):i===r-1?(p=n[i-1].column,h=p+t.nodeMinColumnSpace(n[i-1],!1)+h+1,c=Math.max(l[i],h)):(p=n[i-1].column,h=p+t.nodeMinColumnSpace(n[i-1],!1)+h+1,p=n[i+1].column,f=p-t.nodeMinColumnSpace(n[i+1],!0)-f-1,h<l[i]&&l[i]<f?c=l[i]:h>=l[i]?c=h:f<=l[i]&&(c=f));c!==u&&(o=!0,n[i].column=c)}Es(t,e,n),t.normalize()}function BT(t,e){for(var i=!0,n=t.network.vertexes.iterator;n.next();){var r=n.value,o=t.nodeMinColumnSpace(r,!0),l=t.nodeMinColumnSpace(r,!1);if(r.column-o<=e&&r.column+l>=e){i=!1;break}}if(t=!1,i)for(n.reset();n.next();)i=n.value,i.column>e&&(--i.column,t=!0);return t}function RT(t,e){var i=e+1,n,r=[],o=[];for(n=0;n<=t.Ia;n++)r[n]=!1,o[n]=!1;for(var l=t.network.vertexes.iterator;l.next();){n=l.value;var u=n.column-t.nodeMinColumnSpace(n,!0),h=n.column+t.nodeMinColumnSpace(n,!1);u<=e&&h>=e&&(r[n.layer]=!0),u<=i&&h>=i&&(o[n.layer]=!0)}for(u=!0,i=!1,n=0;n<=t.Ia;n++)u=u&&!(r[n]&&o[n]);if(u)for(l.reset();l.next();)t=l.value,t.column>e&&(--t.column,i=!0);return i}function tk(t,e){for(var i=0;i<=t.Ra;i++)for(;BT(t,i););for(t.normalize(),i=0;i<t.Ra;i++)for(;RT(t,i););t.normalize();var n;if(0<e)for(i=0;i<=t.Ra;i++){var r=Li(t),o=hg(t);for(n=o+1;o<n;){n=o,ek(t,i,1);var l=hg(t);l>o?mn(t,r):l<o&&(o=l,r=Li(t))}}if(0>e)for(i=t.Ra;0<=i;i--)for(r=Li(t),o=hg(t),n=o+1;o<n;)n=o,ek(t,i,-1),l=hg(t),l>o?mn(t,r):l<o&&(o=l,r=Li(t));t.normalize()}function ek(t,e,i){t.le=0;for(var n=t.network.vertexes.iterator;n.next();)n.value.component=-1;if(0<i)for(n.reset();n.next();){var r=n.value;r.column-t.nodeMinColumnSpace(r,!0)<=e&&(r.component=t.le)}if(0>i)for(n.reset();n.next();)r=n.value,r.column+t.nodeMinColumnSpace(r,!1)>=e&&(r.component=t.le);for(t.le++,n.reset();n.next();)e=n.value,e.component===-1&&(zv(t,e,t.le,-1,!0,!0),t.le++);var o;for(e=[],o=0;o<t.le*t.le;o++)e[o]=!1;for(r=[],o=0;o<(t.Ia+1)*(t.Ra+1);o++)r[o]=-1;for(n.reset();n.next();){o=n.value;for(var l=o.layer,u=Math.max(0,o.column-t.nodeMinColumnSpace(o,!0)),h=Math.min(t.Ra,o.column+t.nodeMinColumnSpace(o,!1));u<=h;u++)r[l*(t.Ra+1)+u]=o.component}for(o=0;o<=t.Ia;o++){if(0<i)for(l=0;l<t.Ra;l++)r[o*(t.Ra+1)+l]!==-1&&r[o*(t.Ra+1)+l+1]!==-1&&r[o*(t.Ra+1)+l]!==r[o*(t.Ra+1)+l+1]&&(e[r[o*(t.Ra+1)+l]*t.le+r[o*(t.Ra+1)+l+1]]=!0);if(0>i)for(l=t.Ra;0<l;l--)r[o*(t.Ra+1)+l]!==-1&&r[o*(t.Ra+1)+l-1]!==-1&&r[o*(t.Ra+1)+l]!==r[o*(t.Ra+1)+l-1]&&(e[r[o*(t.Ra+1)+l]*t.le+r[o*(t.Ra+1)+l-1]]=!0)}for(r=[],o=0;o<t.le;o++)r[o]=!0;for(l=[],l.push(0);l.length!==0;)if(h=l[l.length-1],l.pop(),r[h])for(r[h]=!1,o=0;o<t.le;o++)e[h*t.le+o]&&l.splice(0,0,o);if(0<i)for(n.reset();n.next();)t=n.value,r[t.component]&&--t.column;if(0>i)for(n.reset();n.next();)i=n.value,r[i.component]&&(i.column+=1)}function zT(t){for(var e=Rt(),i=t.el.length,n=0;n<=i;n++)e[n]=[];for(n=t.network.vertexes.iterator;n.next();){var r=n.value;e[i-r.layer][r.index]=r}i=new _,VT(e,i);var o=null,l=null,u=null,h=null,f=(t.ve&1)!==0,c=(t.ve&2)!==0,p=(t.ve&4)!==0,g=(t.ve&8)!==0;for(f&&(t.verticalAlignment(e,i,!0),o=fg(t,e,!0,!1)),e.reverse(),p&&(t.verticalAlignment(e,i,!1),u=fg(t,e,!1,!1)),n=d(e),r=n.next();!r.done;r=n.next())r.value.reverse();g&&(t.verticalAlignment(e,i,!1),h=fg(t,e,!1,!0)),e.reverse(),c&&(t.verticalAlignment(e,i,!0),l=fg(t,e,!0,!0)),Bt(e),t.u(o,l,u,h),t.network.vertexes.each(function(m){var v=Rt();f&&v.push(o.get(m)),c&&v.push(l.get(m)),p&&v.push(u.get(m)),g&&v.push(h.get(m)),v.sort(function(k,S){return k-S});var x=v.length;x=(v[Math.floor((x-1)/2)]+v[Math.ceil((x-1)/2)])/2,Bt(v),m.zc=x})}function VT(t,e){for(var i=t.length,n=1;n<i-1;n++)for(var r=0,o=0,l=t[n],u=t[n+1],h=0;o<u.length;h++){var f=u[h];t:{if(f.node===null){var c=Yv(f);if(0<c.length){c=c[0].node===null;break t}}c=!1}var p=c;if(h===u.length-1||p){for(c=l.length-1,p&&(c=Yv(f)[0].index);o<=h;){if(f=u[o],!f.co){p=[];for(var g=d(f.sourceEdgesArrayAccess),m=g.next();!m.done;m=g.next())m=m.value,m.valid&&p.push(m);f.co=p}for(f=d(f.co),p=f.next();!p.done;p=f.next())p=p.value,g=p.fromVertex.index,(g<r||g>c)&&e.add(p);o++}r=c}}}It.prototype.verticalAlignment=function(t,e,i){UT(t),t=d(t);for(var n=t.next();!n.done;n=t.next()){var r=-1;n=d(n.value);for(var o=n.next();!o.done;o=n.next()){o=o.value;var l=i?Yv(o):HT(o),u=l.length;if(0<u){l.sort(function(p,g){return p.wi-g.wi});var h=(u-1)/2;for(u=Math.floor(h),h=Math.ceil(h);u<=h;u++)if(o.align===o){var f=l[u],c=void 0;c=i?wg(f,o):wg(o,f),!e.contains(c)&&r<f.wi&&(f.align=o,o.root=f.root,o.align=f.root,r=f.wi)}}}}};function UT(t){for(var e=0;e<t.length;e++)for(var i=t[e],n=0;n<i.length;n++){var r=i[n];r.root=r,r.align=r,r.Yz=e,r.wi=n}}function fg(t,e,i,n){for(var r=t.K===90||t.K===270,o=d(e),l=o.next();!l.done;l=o.next()){var u=d(l.value);for(l=u.next();!l.done;l=u.next())l=l.value,l.sd=l,l.shift=1/0,l.zc=NaN,l.qg=0}for(l=t.K===90||t.K===270,o=d(e),u=o.next();!u.done;u=o.next()){u=d(u.value);for(var h=u.next();!h.done;h=u.next())if(h=h.value,h.root===h){for(var f=0,c=h;c.align!==h;){var p=c.align,g=l?c.width:c.height,m=l?p.width:p.height;if(i){var v=wg(c,p),x=v.portFromPos,k=v.portToPos;v.link!==null&&(c.node&&c.node!==v.link.fromNode&&(x=l?c.focusX:c.focusY),p.node&&p.node!==v.link.toNode&&(k=l?p.focusX:p.focusY))}else v=wg(p,c),x=v.portToPos,k=v.portFromPos,v.link!==null&&(c.node&&c.node!==v.link.toNode&&(x=l?c.focusX:c.focusY),p.node&&p.node!==v.link.fromNode&&(k=l?p.focusX:p.focusY));g=n?c.qg+(g-x)-(m-k):c.qg+x-k,p.qg=g,f=Math.min(f,g),c=c.align}c=h;do c.qg=c.qg-f,c=c.align;while(c!==h)}}for(i=d(e),l=i.next();!l.done;l=i.next())for(o=d(l.value),l=o.next();!l.done;l=o.next())l=l.value,l.root===l&&ik(t,l,e);for(i=0;i<e.length;i++)if(!(0>=e[i].length)&&(l=e[i][0],l.sd===l)){l.sd.shift===1/0&&(l.sd.shift=0),l=i,u=0;do{for(o=e[l][u];o.align!==o.root;)o=o.align,l++,0<o.wi&&(u=nk(o,e),u.sd.shift=Math.min(u.sd.shift,o.sd.shift+o.zc+o.qg-(u.zc+u.qg+(r?u.width:u.height)+t.columnSpacing)));u=o.wi+1}while(l<e.length&&u<e[l].length&&o.sd===e[l][u].sd)}for(t=new ct,e=d(e),l=e.next();!l.done;l=e.next())for(i=d(l.value),l=i.next();!l.done;l=i.next())l=l.value,l.zc=l.zc+l.sd.shift+l.qg,o=r?l.width:l.height,t.add(l,n?-l.zc-o:l.zc);return t}function ik(t,e,i){if(isNaN(e.zc)){e.zc=0;var n=e;do{if(0<n.wi){var r=nk(n,i),o=r.root;ik(t,o,i),e.sd===e&&(e.sd=o.sd);var l=t.K===90||t.K===270?r.width:r.height;e.sd===o.sd&&(e.zc=Math.max(e.zc,o.zc+r.qg+l-n.qg+t.columnSpacing))}n=n.align}while(n!==e);for(;n.align!==e;)n=n.align,n.zc=e.zc,n.sd=e.sd}}function nk(t,e){var i=t.Yz;return t=t.wi,1>t&&O("Could not determine previous vertex in layer"),e[i][t-1]}It.prototype.u=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];i=-1;for(var n=Rt(),r=Rt(),o=1/0,l=0;4>l;l++)if(e[l]){var u=YT(this,e[l],n,r,l);u<o&&(i=l,o=u)}for(o={},l=0;4>l;o={delta:o.delta},l++)e[l]&&(o.delta=l===0||l===2?n[i]-n[l]:r[i]-r[l],o.delta!==0&&e[l].each(function(h){return function(f){f.value+=h.delta}}(o)));Bt(n),Bt(r)};function YT(t,e,i,n,r){if(!e||e.count===0)return i[r]=0,n[r]=0,1/0;var o=1/0,l=-1/0;return e.each(function(u){var h=u.key;u=u.value,h=t.K===90||t.K===270?h.width:h.height,u<o&&(o=u),u+h>l&&(l=u+h)}),i[r]=o,n[r]=l,l-o}It.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=cg(this,!0),e=cg(this,!1),i=this.network.edges.iterator;i.next();){var n=i.value.link;n!==null&&(n.fromSpot=t,n.toSpot=e)}this.commitNodes(),this.Iu(),this.isRouting&&this.commitLinks()};function cg(t,e){return t.K===270?e?Cn:Nn:t.K===90?e?Nn:Cn:t.K===180?e?Pn:Ri:e?Ri:Pn}It.prototype.commitNodes=function(){this.he=[],this.Ld=[],this.Kd=[],this.Ta=[];for(var t=0;t<=this.Ia;t++)this.he[t]=0,this.Ld[t]=0,this.Kd[t]=0,this.Ta[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;this.he[i]=Math.max(this.he[i],this.nodeMinLayerSpace(e,!0)),this.Ld[i]=Math.max(this.Ld[i],this.nodeMinLayerSpace(e,!1))}e=0,i=this.ie;for(var n=0;n<=this.Ia;n++){var r=i;0>=this.he[n]+this.Ld[n]&&(r=0),0<n&&(e+=r/2),this.K===90||this.K===0?(e+=this.Ld[n],this.Kd[n]=e,e+=this.he[n]):(e+=this.he[n],this.Kd[n]=e,e+=this.Ld[n]),n<this.Ia&&(e+=r/2),this.Ta[n]=e}for(i=e,e=this.arrangementOrigin,n=0;n<=this.Ia;n++)this.K===270?this.Kd[n]=e.y+this.Kd[n]:this.K===90?(this.Kd[n]=e.y+i-this.Kd[n],this.Ta[n]=i-this.Ta[n]):this.K===180?this.Kd[n]=e.x+this.Kd[n]:(this.Kd[n]=e.x+i-this.Kd[n],this.Ta[n]=i-this.Ta[n]);i=this.ve!==0,t.reset(),n=this.K===270||this.K===90;for(var o=1/0,l=r=1/0,u=-1/0;t.next();){var h=t.value,f=h.layer,c=h.column|0;n?(l=e.x+this.mc*c,f=this.Kd[f]):(l=this.Kd[f],f=e.y+this.mc*c),h.centerX=l,h.centerY=f,i&&isFinite(h.zc)&&(n?h.node?h.x=e.x+h.zc:h.centerX=e.x+h.zc:h.node?h.y=e.y+h.zc:h.centerY=e.y+h.zc),o=Math.min(h.x,o),r=Math.min(h.y,r),n?(l=o,u=Math.max(u,h.bounds.right)):(l=r,u=Math.max(u,h.bounds.bottom))}for(this.zw=u-l,o=e.x-o,e=e.y-r,this.Rf=new C(i&&n?0:o,i&&!n?0:e),t.reset();t.next();)i=t.value,i.x+=o,i.y+=e,i.commit()},It.prototype.Iu=function(){for(var t=0,e=this.ie,i=0;i<=this.Ia;i++)t+=this.he[i],t+=this.Ld[i];t+=this.Ia*e,e=[],i=this.ve!==0?this.zw:this.mc*this.Ra;for(var n=this.maxLayer;0<=n;n--)this.K===270?n===0?e.push(new E(0,0,i,Math.abs(this.Ta[0]))):e.push(new E(0,this.Ta[n-1],i,Math.abs(this.Ta[n-1]-this.Ta[n]))):this.K===90?n===0?e.push(new E(0,this.Ta[0],i,Math.abs(this.Ta[0]-t))):e.push(new E(0,this.Ta[n],i,Math.abs(this.Ta[n-1]-this.Ta[n]))):this.K===180?n===0?e.push(new E(0,0,Math.abs(this.Ta[0]),i)):e.push(new E(this.Ta[n-1],0,Math.abs(this.Ta[n-1]-this.Ta[n]),i)):n===0?e.push(new E(this.Ta[0],0,Math.abs(this.Ta[0]-t),i)):e.push(new E(this.Ta[n],0,Math.abs(this.Ta[n-1]-this.Ta[n]),i));this.commitLayers(e,this.Rf)},It.prototype.commitLayers=function(){},It.prototype.commitLinks=function(){for(var t=this.network.edges.iterator,e;t.next();)e=t.value.link,e!==null&&(e.uh(),e.Fj(),e.zf());for(t.reset();t.next();)e=t.value.link,e!==null&&e.vg();for(t.reset();t.next();){var i=t.value;if(e=i.link,e!==null&&e.pointsCount!==0){e.uh();var n=e,r=n.fromNode,o=n.toNode,l=n.fromPort,u=n.toPort;if(r!==null){var h=r.findVisibleNode();h!==null&&h!==r&&(r=h,l=h.port)}o!==null&&(h=o.findVisibleNode(),h!==null&&h!==o&&(o=h,u=h.port));var f=e.computeSpot(!0,l);h=e.computeSpot(!1,u);var c=i.fromVertex,p=i.toVertex;if(i.valid)e.curve===Yi&&e.pointsCount===4&&(c.column===p.column&&this.alignOption===0?(i=e.getLinkPoint(r,l,f,!0,!1,o,u),u=e.getLinkPoint(o,u,h,!1,!1,r,l),i.w()||i.set(r.actualBounds.center),u.w()||u.set(o.actualBounds.center),e.Fj(),e.yf(i.x,i.y),e.yf((2*i.x+u.x)/3,(2*i.y+u.y)/3),e.yf((i.x+2*u.x)/3,(i.y+2*u.y)/3),e.yf(u.x,u.y)):(i=n=!1,l!==null&&f===Ke&&(n=!0),u!==null&&h===Ke&&(i=!0),(n||i)&&(h=null,n&&(h=e.getLinkPointFromPoint(r,l,l.ga(Et),e.i(3),!0),h.w()||h.set(r.actualBounds.center),e.L(0,h.x,h.y)),r=null,i&&(r=e.getLinkPointFromPoint(o,u,u.ga(Et),e.i(0),!1),r.w()||r.set(o.actualBounds.center),e.L(3,r.x,r.y)),h&&(o=e.i(2),e.L(1,(2*h.x+o.x)/3,(2*h.y+o.y)/3)),r&&(o=e.i(1),e.L(2,(2*r.x+o.x)/3,(2*r.y+o.y)/3))))),e.zf();else if(c.layer===p.layer)e.zf();else{var g=!1,m=!1,v=this.ie,x=e.firstPickIndex+1;if(e.isOrthogonal){m=!0;var k=e.pointsCount;4<k&&e.points.removeRange(2,k-3)}else if(e.curve===Yi)g=!0,k=e.pointsCount,4<k&&e.points.removeRange(2,k-3),k===4&&(x=2);else{k=e.pointsCount;var S=f===Ke,P=h===Ke;2<k&&S&&P?e.points.removeRange(1,k-2):3<k&&S&&!P?e.points.removeRange(1,k-3):3<k&&!S&&P?e.points.removeRange(2,k-2):4<k&&!S&&!P&&e.points.removeRange(2,k-3)}if(i.rev){for(;p!==null&&c!==p;){var N=k=null;for(S=p.sourceEdges.iterator;S.next()&&(P=S.value,P.link!==i.link||(k=P.fromVertex,N=P.toVertex,k.node!==null)););if(k===null)break;if(k!==c){S=e.i(x-1).x,P=e.i(x-1).y;var T=k.centerX,F=k.centerY;if(m)this.K===180||this.K===0?x===e.firstPickIndex+1?(e.m(x++,S,P),e.m(x++,S,F)):(N!==null?N.centerY:P)!==F&&(N=this.Ta[k.layer-1]+this.Rf.x,e.m(x++,N,P),e.m(x++,N,F)):x===e.firstPickIndex+1?(e.m(x++,S,P),e.m(x++,T,P)):(N!==null?N.centerX:S)!==T&&(N=this.Ta[k.layer-1]+this.Rf.y,e.m(x++,S,N),e.m(x++,T,N));else if(x===e.firstPickIndex+1){N=Math.max(10,this.he[p.layer]);var D=Math.max(10,this.Ld[p.layer]);if(g)this.K===180?T<=p.bounds.x?(p=p.bounds.x,e.m(x++,p-N,F),e.m(x++,p,F),e.m(x++,p+D,F)):(e.m(x++,T-N,F),e.m(x++,T,F),e.m(x++,T+D,F)):this.K===90?F>=p.bounds.bottom?(p=p.bounds.y+p.bounds.height,e.m(x++,T,p+D),e.m(x++,T,p),e.m(x++,T,p-N)):(e.m(x++,T,F+D),e.m(x++,T,F),e.m(x++,T,F-N)):this.K===270?F<=p.bounds.y?(p=p.bounds.y,e.m(x++,T,p-N),e.m(x++,T,p),e.m(x++,T,p+D)):(e.m(x++,T,F-N),e.m(x++,T,F),e.m(x++,T,F+D)):this.K===0&&(T>=p.bounds.right?(p=p.bounds.x+p.bounds.width,e.m(x++,p+D,F),e.m(x++,p,F),e.m(x++,p-N,F)):(e.m(x++,T+D,F),e.m(x++,T,F),e.m(x++,T-N,F)));else{e.m(x++,S,P);var X=0;this.K===180||this.K===0?((this.K===180?T>=p.bounds.right:T<=p.bounds.x)&&(X=(this.K===0?-N:D)/2),e.m(x++,S+X,F)):((this.K===270?F>=p.bounds.bottom:F<=p.bounds.y)&&(X=(this.K===90?-N:D)/2),e.m(x++,T,P+X)),e.m(x++,T,F)}}else N=Math.max(10,this.he[k.layer]),D=Math.max(10,this.Ld[k.layer]),g?this.K===180?(e.m(x++,T-N-v,F),e.m(x++,Math.min(T-N+v/2,T),F),e.m(x++,T,F),e.m(x++,T,F),e.m(x++,Math.max(T+D-v/2,T),F),e.m(x++,T+D+v,F)):this.K===90?(e.m(x++,T,F+D+v),e.m(x++,T,Math.max(F+D-v/2,F)),e.m(x++,T,F),e.m(x++,T,F),e.m(x++,T,Math.min(F-N+v/2,F)),e.m(x++,T,F-N-v)):this.K===270?(e.m(x++,T,F-N-v),e.m(x++,T,Math.min(F-N+v/2,F)),e.m(x++,T,F),e.m(x++,T,F),e.m(x++,T,Math.max(F+D-v/2,F)),e.m(x++,T,F+D+v)):(e.m(x++,T+D+v,F),e.m(x++,Math.max(T+D-v/2,T),F),e.m(x++,T,F),e.m(x++,T,F),e.m(x++,Math.min(T-N+v/2,T),F),e.m(x++,T-N-v,F)):e.m(x++,T,F)}p=k}(u===null||f!==Ke||m)&&(S=e.i(x-1).x,P=e.i(x-1).y,T=e.i(x).x,F=e.i(x).y,m?(v=this.Ld[c.layer],this.K===180||this.K===0?(m=P,m>=c.bounds.y&&m<=c.bounds.bottom&&(this.K===180?T>=c.bounds.x:T<=c.bounds.right)&&(p=c.centerX+(this.K===180?-v:v),m<c.bounds.y+c.bounds.height/2?m=c.bounds.y-this.mc/2:m=c.bounds.bottom+this.mc/2,e.m(x++,p,P),e.m(x++,p,m)),e.m(x++,T,m)):(m=S,m>=c.bounds.x&&m<=c.bounds.right&&(this.K===270?F>=c.bounds.y:F<=c.bounds.bottom)&&(p=c.centerY+(this.K===270?-v:v),m<c.bounds.x+c.bounds.width/2?m=c.bounds.x-this.mc/2:m=c.bounds.right+this.mc/2,e.m(x++,S,p),e.m(x++,m,p)),e.m(x++,m,F)),e.m(x++,T,F)):g?(N=Math.max(10,this.he[c.layer]),D=Math.max(10,this.Ld[c.layer]),this.K===180&&T>=c.bounds.x?(p=c.bounds.x+c.bounds.width,e.L(x-2,p,P),e.L(x-1,p+D,P)):this.K===90&&F<=c.bounds.bottom?(p=c.bounds.y,e.L(x-2,S,p),e.L(x-1,S,p-N)):this.K===270&&F>=c.bounds.y?(p=c.bounds.y+c.bounds.height,e.L(x-2,S,p),e.L(x-1,S,p+D)):this.K===0&&T<=c.bounds.right&&(p=c.bounds.x,e.L(x-2,p,P),e.L(x-1,p-N,P))):(N=Math.max(10,this.he[c.layer]),D=Math.max(10,this.Ld[c.layer]),m=0,this.K===180||this.K===0?((this.K===180?T<=c.bounds.x:T>=c.bounds.right)&&(m=(this.K===0?D:-N)/2),e.m(x++,T+m,P)):((this.K===270?F<=c.bounds.y:F>=c.bounds.bottom)&&(m=(this.K===90?D:-N)/2),e.m(x++,S,F+m)),e.m(x++,T,F)))}else{for(;c!==null&&c!==p;){for(N=k=null,c=c.destinationEdges.iterator;c.next()&&(S=c.value,S.link!==i.link||(k=S.toVertex,N=S.fromVertex,N.node!==null&&(N=null),k.node!==null)););if(k===null)break;k!==p&&(S=e.i(x-1).x,P=e.i(x-1).y,T=k.centerX,F=k.centerY,m?this.K===180||this.K===0?(N!==null?N.centerY:P)!==F&&(N=this.Ta[k.layer]+this.Rf.x,x===e.firstPickIndex+1&&(N=this.K===0?Math.max(N,S):Math.min(N,S)),e.m(x++,N,P),e.m(x++,N,F)):(N!==null?N.centerX:S)!==T&&(N=this.Ta[k.layer]+this.Rf.y,x===e.firstPickIndex+1&&(N=this.K===90?Math.max(N,P):Math.min(N,P)),e.m(x++,S,N),e.m(x++,T,N)):(N=Math.max(10,this.he[k.layer]),D=Math.max(10,this.Ld[k.layer]),g?this.K===180?(e.m(x++,T+D+v,F),e.m(x++,Math.max(T+D-v/2,T),F),e.m(x++,T,F),e.m(x++,T,F),e.m(x++,Math.min(T-N+v/2,T),F),e.m(x++,T-N-v,F)):this.K===90?(e.m(x++,T,F-N-v),e.m(x++,T,Math.min(F-N+v/2,F)),e.m(x++,T,F),e.m(x++,T,F),e.m(x++,T,Math.max(F+D-v/2,F)),e.m(x++,T,F+D+v)):this.K===270?(e.m(x++,T,F+D+v),e.m(x++,T,Math.max(F+D-v/2,F)),e.m(x++,T,F),e.m(x++,T,F),e.m(x++,T,Math.min(F-N+v/2,F)),e.m(x++,T,F-N-v)):(e.m(x++,T-N-v,F),e.m(x++,Math.min(T-N+v/2,T),F),e.m(x++,T,F),e.m(x++,T,F),e.m(x++,Math.max(T+D-v/2,T),F),e.m(x++,T+D+v,F)):this.K===180?(e.m(x++,T+D,F),e.m(x++,T-N,F)):this.K===90?(e.m(x++,T,F-N),e.m(x++,T,F+D)):this.K===270?(e.m(x++,T,F+D),e.m(x++,T,F-N)):(e.m(x++,T-N,F),e.m(x++,T+D,F)))),c=k}m&&(S=e.i(x-1).x,P=e.i(x-1).y,T=e.i(x).x,F=e.i(x).y,this.K===180||this.K===0?P!==F&&(N=this.K===0?Math.min(Math.max((T+S)/2,this.Ta[p.layer]+this.Rf.x),T):Math.max(Math.min((T+S)/2,this.Ta[p.layer]+this.Rf.x),T),e.m(x++,N,P),e.m(x++,N,F)):S!==T&&(N=this.K===90?Math.min(Math.max((F+P)/2,this.Ta[p.layer]+this.Rf.y),F):Math.max(Math.min((F+P)/2,this.Ta[p.layer]+this.Rf.y),F),e.m(x++,S,N),e.m(x++,T,N)))}n!==null&&g&&4<=e.pointsCount&&(l!==null&&(l=f===Ke?e.getLinkPointFromPoint(r,l,l.ga(Et),e.i(3),!0):e.i(0),f===Ke&&(f=e.i(2),n=e.i(3),this.direction===90||this.direction===270?(e.L(1,(l.x+f.x)/2,f.y),e.L(2,n.x,(f.y+n.y)/2)):(e.L(1,f.x,(l.y+f.y)/2),e.L(2,(f.x+n.x)/2,n.y))),l.w()||l.set(r.actualBounds.center),e.L(0,l.x,l.y)),u!==null&&(r=h===Ke?e.getLinkPointFromPoint(o,u,u.ga(Et),e.i(e.pointsCount-4),!1):e.i(e.pointsCount-1),h===Ke&&(u=e.i(e.pointsCount-3),h=e.i(e.pointsCount-4),this.direction===90||this.direction===270?(e.L(e.pointsCount-2,(r.x+u.x)/2,u.y),e.L(e.pointsCount-2,h.x,(u.y+h.y)/2)):(e.L(e.pointsCount-2,u.x,(r.y+u.y)/2),e.L(e.pointsCount-3,(u.x+h.x)/2,h.y))),r.w()||r.set(o.actualBounds.center),e.L(e.pointsCount-1,r.x,r.y))),e.zf(),i.commit()}}}this.avoidOrthogonalOverlaps()},It.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new q,e=this.network.edges.iterator;e.next();){var i=e.value.link;i!==null&&i.isOrthogonal&&!t.contains(i)&&t.add(i)}if(0<t.count)if(this.K===90||this.K===270){for(e=0,i=[],t=t.iterator;t.next();){var n=t.value;if(n!==null&&n.isOrthogonal)for(var r=2;r<n.pointsCount-3;r++){var o=n.i(r),l=n.i(r+1);if(this.B(o.y,l.y)&&!this.B(o.x,l.x)){var u=new Bs;u.layer=Math.floor(o.y/2);var h=n.i(0),f=n.i(n.pointsCount-1);if(u.first=h.x*h.x+h.y,u.lc=f.x*f.x+f.y,u.rd=Math.min(o.x,l.x),u.Jc=Math.max(o.x,l.x),u.index=r,u.link=n,r+2<n.pointsCount){h=n.i(r-1),f=n.i(r+2);var c=0;h.y<o.y?c=f.y<o.y?3:o.x<l.x?2:1:h.y>o.y&&(c=f.y>o.y?0:l.x<o.x?2:1),u.j=c}i.push(u)}}}if(1<i.length)for(i.sort(this.Xx),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(l=i[o].Jc,r=t+1;r<n&&i[r].rd<l;)l=Math.max(l,i[r].Jc),r++;if(l=r-o,1<l){for(this.Ai(i,this.Ks,o,o+l),c=1,u=i[o].lc,h=o;h<r;h++)f=i[h],f.lc!==u&&(c++,u=f.lc);this.Ai(i,this.Wx,o,o+l);var p=1;for(u=i[o].first,h=o;h<r;h++)f=i[h],f.first!==u&&(p++,u=f.first);for(h=!0,f=p,c<p?(h=!1,f=c,u=i[o].lc,this.Ai(i,this.Ks,o,o+l)):u=i[o].first,c=0,p=o;p<r;p++){var g=i[p];(h?g.first:g.lc)!==u&&(c++,u=h?g.first:g.lc);var m=g.link;o=m.i(g.index),l=m.i(g.index+1);var v=this.linkSpacing*(c-(f-1)/2);e++,m.uh(),m.L(g.index,o.x,o.y+v),m.L(g.index+1,l.x,l.y+v),m.zf()}}o=r}t=n}}else{for(e=0,i=[],t=t.iterator;t.next();)if(n=t.value,n!==null&&n.isOrthogonal)for(r=2;r<n.pointsCount-3;r++)o=n.i(r),l=n.i(r+1),this.B(o.x,l.x)&&!this.B(o.y,l.y)&&(u=new Bs,u.layer=Math.floor(o.x/2),h=n.i(0),f=n.i(n.pointsCount-1),u.first=h.x+h.y*h.y,u.lc=f.x+f.y*f.y,u.rd=Math.min(o.y,l.y),u.Jc=Math.max(o.y,l.y),u.index=r,u.link=n,r+2<n.pointsCount&&(h=n.i(r-1),f=n.i(r+2),c=0,h.x<o.x?c=f.x<o.x?3:o.y<l.y?2:1:h.x>o.x&&(c=f.x>o.x?0:l.y<o.y?2:1),u.j=c),i.push(u));if(1<i.length)for(i.sort(this.Xx),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(l=i[o].Jc,r=t+1;r<n&&i[r].rd<l;)l=Math.max(l,i[r].Jc),r++;if(l=r-o,1<l){for(this.Ai(i,this.Ks,o,o+l),c=1,u=i[o].lc,h=o;h<r;h++)f=i[h],f.lc!==u&&(c++,u=f.lc);for(this.Ai(i,this.Wx,o,o+l),p=1,u=i[o].first,h=o;h<r;h++)f=i[h],f.first!==u&&(p++,u=f.first);for(h=!0,f=p,c<p?(h=!1,f=c,u=i[o].lc,this.Ai(i,this.Ks,o,o+l)):u=i[o].first,c=0,p=o;p<r;p++)g=i[p],(h?g.first:g.lc)!==u&&(c++,u=h?g.first:g.lc),m=g.link,o=m.i(g.index),l=m.i(g.index+1),v=this.linkSpacing*(c-(f-1)/2),e++,m.uh(),m.L(g.index,o.x+v,o.y),m.L(g.index+1,l.x+v,l.y),m.zf()}o=r}t=n}}}},s=It.prototype,s.Xx=function(t,e){return t instanceof Bs&&e instanceof Bs&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.rd<e.rd?-1:t.rd>e.rd?1:t.Jc<e.Jc?-1:t.Jc>e.Jc?1:0:0},s.Wx=function(t,e){return t instanceof Bs&&e instanceof Bs&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.rd<e.rd?-1:t.rd>e.rd?1:t.Jc<e.Jc?-1:t.Jc>e.Jc?1:0:0},s.Ks=function(t,e){return t instanceof Bs&&e instanceof Bs&&t!==e?t.lc<e.lc?-1:t.lc>e.lc||t.j<e.j?1:t.j>e.j||t.rd<e.rd?-1:t.rd>e.rd?1:t.Jc<e.Jc?-1:t.Jc>e.Jc?1:0:0},s.B=function(t,e){return t-=e,-1<t&&1>t},s.Ai=function(t,e,i,n){var r=t.length,o=n-i;if(!(1>=o))if((0>i||i>=r-1)&&O("not in range 0 <= from < length: "+i),o===2)n=t[i],r=t[i+1],0<e(n,r)&&(t[i]=r,t[i+1]=n);else if(i===0)if(n>=r)t.sort(e);else for(i=t.slice(0,n),i.sort(e),e=0;e<n;e++)t[e]=i[e];else if(n>=r)for(n=t.slice(i),n.sort(e),e=i;e<r;e++)t[e]=n[e-i];else for(r=t.slice(i,n),r.sort(e),e=i;e<n;e++)t[e]=r[e-i]};function Is(t,e){var i=t.vb[e];if(i>=t.He.length){for(var n=[],r=0;r<t.He.length;r++)n[r]=t.He[r];t.He=n}for(t.He[i]===void 0||t.He[i]===null?n=[]:(n=t.He[i],t.He[i]=null),t=t.el[e],e=0;e<t.length;e++)i=t[e],n[i.index]=i;return n}function Es(t,e,i){t.He[t.vb[e]]=i}Y.Object.defineProperties(It.prototype,{layerSpacing:{get:function(){return this.ie},set:function(t){this.ie!==t&&0<=t&&(this.ie=t,this.C())}},columnSpacing:{get:function(){return this.mc},set:function(t){this.mc!==t&&0<t&&(this.mc=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(t===0||t===90||t===180||t===270?(this.K=t,this.C()):O("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.Ck},set:function(t){this.Ck===t||t!==pg&&t!==lc&&t!==ra||(this.Ck=t,this.C())}},layeringOption:{get:function(){return this.Yk},set:function(t){this.Yk===t||t!==uc&&t!==dg&&t!==gg||(this.Yk=t,this.C())}},initializeOption:{get:function(){return this.Pk},set:function(t){this.Pk===t||t!==hc&&t!==yg&&t!==mg||(this.Pk=t,this.C())}},iterations:{get:function(){return this.cj},set:function(t){this.cj!==t&&0<=t&&(this.cj=t,this.C())}},aggressiveOption:{get:function(){return this.qk},set:function(t){this.qk===t||t!==vg&&t!==ac&&t!==xg||(this.qk=t,this.C())}},packOption:{get:function(){return this.bg},set:function(t){this.bg!==t&&0<=t&&8>t&&(this.bg=t,this.C())}},packIterations:{get:function(){return this.kl},set:function(t){this.kl=t}},alignOption:{get:function(){return this.ve},set:function(t){this.ve!==t&&0<=t&&16>t&&(this.ve=t,this.C())}},setsPortSpots:{get:function(){return this.sf},set:function(t){this.sf!==t&&(this.sf=t,this.C())}},linkSpacing:{get:function(){return this.Dn},set:function(t){this.Dn!==t&&0<=t&&(this.Dn=t,this.C())}},maxLayer:{get:function(){return this.Ia}},maxIndex:{get:function(){return this.Iq}},maxColumn:{get:function(){return this.Ra}},minIndexLayer:{get:function(){return this.In}},maxIndexLayer:{get:function(){return this.Md}}});var lc=new K(It,"CycleDepthFirst",0),pg=new K(It,"CycleGreedy",1),ra=new K(It,"CycleFromLayers",2),uc=new K(It,"LayerOptimalLinkLength",0),dg=new K(It,"LayerLongestPathSink",1),gg=new K(It,"LayerLongestPathSource",2),hc=new K(It,"InitDepthFirstOut",0),yg=new K(It,"InitDepthFirstIn",1),mg=new K(It,"InitNaive",2),vg=new K(It,"AggressiveNone",0),ac=new K(It,"AggressiveLess",1),xg=new K(It,"AggressiveMore",2),GT=8;It.className="LayeredDigraphLayout",It.CycleDepthFirst=lc,It.CycleGreedy=pg,It.CycleFromLayers=ra,It.LayerOptimalLinkLength=uc,It.LayerLongestPathSink=dg,It.LayerLongestPathSource=gg,It.InitDepthFirstOut=hc,It.InitDepthFirstIn=yg,It.InitNaive=mg,It.AggressiveNone=vg,It.AggressiveLess=ac,It.AggressiveMore=xg,It.PackNone=0,It.PackExpand=1,It.PackStraighten=2,It.PackMedian=4,It.PackAll=15,It.AlignNone=0,It.AlignUpperLeft=1,It.AlignUpperRight=2,It.AlignLowerLeft=4,It.AlignLowerRight=8,It.AlignAll=15;function Bs(){this.index=this.Jc=this.rd=this.lc=this.first=this.layer=0,this.link=null,this.j=0}Bs.className="SegInfo";function oa(t){Yt.call(this,t)}Z(oa,Yt),oa.prototype.createVertex=function(){return new vn(this)},oa.prototype.createEdge=function(){return new fc(this)},oa.className="LayeredDigraphNetwork";function vn(t){me.call(this,t),this.ao=this.co=this.bo=this.eo=null,this.Za=this.Ag=this.Ig=-1,this.u=NaN,this.F=null,this.valid=!1,this.finish=this.Ll=NaN,this.Eu=0,this.gv=this.hv=null}Z(vn,me);function rk(t,e){return t.index-e.index}function wg(t,e){if(!t.ao){for(var i=[],n=d(t.destinationEdgesArrayAccess),r=n.next();!r.done;r=n.next())r=r.value,r.valid&&i.push(r);t.ao=i}for(t=d(t.ao),i=t.next();!i.done;i=t.next())if(i=i.value,i.toVertex===e)return i;O("Unable to find destination edge to given vertex")}function Yv(t){if(!t.eo){for(var e=[],i=d(t.sourceEdgesArrayAccess),n=i.next();!n.done;n=i.next())n=n.value,!n.valid||n.fromVertex.layer<=n.toVertex.layer||e.push(n.fromVertex);e.sort(rk),t.eo=e}return t.eo}function HT(t){if(!t.bo){for(var e=[],i=d(t.destinationEdgesArrayAccess),n=i.next();!n.done;n=i.next())n=n.value,!n.valid||n.fromVertex.layer<=n.toVertex.layer||e.push(n.toVertex);e.sort(rk),t.bo=e}return t.bo}vn.prototype.Cl=function(t){me.prototype.Cl.call(this,t),this.co=this.eo=null},vn.prototype.Kl=function(t){me.prototype.Kl.call(this,t),this.co=this.eo=null},vn.prototype.zl=function(t){me.prototype.zl.call(this,t),this.ao=this.bo=null},vn.prototype.Jl=function(t){me.prototype.Jl.call(this,t),this.ao=this.bo=null},Y.Object.defineProperties(vn.prototype,{layer:{get:function(){return this.Ig},set:function(t){this.Ig!==t&&(this.Ig=t)}},column:{get:function(){return this.Ag},set:function(t){this.Ag!==t&&(this.Ag=t)}},index:{get:function(){return this.Za},set:function(t){this.Za!==t&&(this.Za=t)}},component:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},near:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),vn.prototype.deleteDestinationEdge=vn.prototype.Jl,vn.prototype.addDestinationEdge=vn.prototype.zl,vn.prototype.deleteSourceEdge=vn.prototype.Kl,vn.prototype.addSourceEdge=vn.prototype.Cl,vn.className="LayeredDigraphVertex";function fc(t){Gi.call(this,t),this.j=this.ia=this.Ha=!1,this.V=this.u=NaN,this.F=this.o=0}Z(fc,Gi),Y.Object.defineProperties(fc.prototype,{fromVertex:{get:function(){return this.kd},set:function(t){this.kd!==t&&(this.kd=t)}},toVertex:{get:function(){return this.qd},set:function(t){this.qd!==t&&(this.qd=t)}},valid:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},rev:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToPos:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}},portFromColOffset:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},portToColOffset:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}}}),fc.className="LayeredDigraphEdge";function xt(t){Kt.call(this),this.Xb=new _,this.Xn=pc,this.ud=Tr,this.wo=gc,this.Bq=Lg,this.bw=[],this.td=!0,this.Tb=yc,this.$d=new ht(10,10).freeze();var e=new Fu(this);this.W=new En(e),this.Y=new En(e),this.su=[],t&&Object.assign(this,t)}Z(xt,Kt),xt.prototype.cloneProtected=function(t){Kt.prototype.cloneProtected.call(this,t),t.Xn=this.Xn,t.wo=this.wo,t.Bq=this.Bq,t.td=this.td,t.Tb=this.Tb,t.$d.assign(this.$d),t.W.copyInheritedPropertiesFrom(this.W),t.Y.copyInheritedPropertiesFrom(this.Y)},xt.prototype.qb=function(t){t.classType===xt?t.name.indexOf("Alignment")===0?this.alignment=t:t.name.indexOf("Arrangement")===0?this.arrangement=t:t.name.indexOf("Compaction")===0?this.compaction=t:t.name.indexOf("Path")===0?this.path=t:t.name.indexOf("Sorting")===0?this.sorting=t:t.name.indexOf("Style")===0?this.treeStyle=t:O("Unknown enum value: "+t):Kt.prototype.qb.call(this,t)},xt.prototype.createNetwork=function(){return new Fu(this)},xt.prototype.makeNetwork=function(t){function e(n){if(n instanceof W)return!n.isLinkLabel&&n.category!=="Comment";if(n instanceof V){var r=n.fromNode;return r===null||r.isLinkLabel||r.category==="Comment"?!1:(n=n.toNode,!(n===null||n.isLinkLabel||n.category==="Comment"))}return!1}var i=this.createNetwork();return t instanceof j?(i.lg(t.nodes,!0,e),i.lg(t.links,!0,e)):t instanceof dt?i.lg(t.memberParts,!1,e):i.lg(t.iterator,!1,e),i},xt.prototype.doLayout=function(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangement!==mc&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(e===null&&t instanceof j&&(e=t),this.path===pc&&e!==null?this.ud=e.isTreePathToChildren?Tr:xl:this.ud=this.path===pc?Tr:this.path,0<this.network.vertexes.count){for(this.network.Lo(),t=this.network.vertexes.iterator;t.next();)e=t.value,e.initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Xb.count){for(t=new _,e=this.Xb.iterator;e.next();){var i=e.value;i instanceof W?(i=this.network.li(i),i!==null&&t.add(i)):i instanceof En&&t.add(i)}this.Xb=t}for(this.Xb.count===0&&this.findRoots(),t=this.Xb.copy().iterator;t.next();)e=t.value,e.initialized||(e.initialized=!0,Gv(this,e));for(e=this.network.vertexes,t=null;t=XT(e),0<t.count;)e=ok(this,t),e!==null&&this.Xb.add(e),e.initialized=!0,Gv(this,e),e=t;for(t=this.Xb.iterator;t.next();)e=t.value,e instanceof En&&lk(this,e);for(t=this.Xb.iterator;t.next();)e=t.value,e instanceof En&&uk(this,e);for(t=this.Xb.iterator;t.next();)e=t.value,e instanceof En&&hk(this,e);if(this.Du(),this.layerStyle===vc){for(t=[],e=this.network.vertexes.iterator;e.next();){i=e.value;var n=i.parent;n===null&&(n=i),n=n.angle===0||n.angle===180;var r=t[i.level];r===void 0&&(r=0),t[i.level]=Math.max(r,n?i.width:i.height)}for(e=0;e<t.length;e++)t[e]===void 0&&(t[e]=0);for(this.bw=t,e=this.network.vertexes.iterator;e.next();)i=e.value,n=i.parent,n===null&&(n=i),n.angle===0||n.angle===180?(n.angle===180&&(i.focusX+=t[i.level]-i.width),i.width=t[i.level]):(n.angle===270&&(i.focusY+=t[i.level]-i.height),i.height=t[i.level])}else if(this.layerStyle===Fg)for(t=this.network.vertexes.iterator;t.next();){for(e=t.value,i=e.angle===0||e.angle===180,n=-1,r=0;r<e.children.length;r++){var o=e.children[r];n=Math.max(n,i?o.width:o.height)}if(0<=n)for(r=0;r<e.children.length;r++)o=e.children[r],i?(e.angle===180&&(o.focusX+=n-o.width),o.width=n):(e.angle===270&&(o.focusY+=n-o.height),o.height=n)}for(t=this.Xb.iterator;t.next();)e=t.value,e instanceof En&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Xb=new _,this.isValidLayout=!0};function XT(t){var e=new _;for(t=t.iterator;t.next();){var i=t.value;i.initialized||e.add(i)}return e}xt.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var i=e.value;switch(this.ud){case Tr:i.sourceEdges.count===0&&this.Xb.add(i);break;case xl:i.destinationEdges.count===0&&this.Xb.add(i);break;default:O("Unhandled path value "+this.ud.toString())}}this.Xb.count===0&&(t=ok(this,t),t!==null&&this.Xb.add(t))};function ok(t,e){var i=999999,n=null;for(e=e.iterator;e.next();){var r=e.value;switch(t.ud){case Tr:r.sourceEdges.count<i&&(i=r.sourceEdges.count,n=r);break;case xl:r.destinationEdges.count<i&&(i=r.destinationEdges.count,n=r);break;default:O("Unhandled path value "+t.ud.toString())}}return n}function Gv(t,e){if(e!==null){switch(t.ud){case Tr:if(0<e.destinationEdges.count){for(var i=new q,n=e.destinationVertexes;n.next();){var r=n.value;sk(t,e,r)&&i.add(r)}0<i.count&&(e.children=i.Fa())}break;case xl:if(0<e.sourceEdges.count){for(i=new q,n=e.sourceVertexes;n.next();)r=n.value,sk(t,e,r)&&i.add(r);0<i.count&&(e.children=i.Fa())}break;default:O("Unhandled path value"+t.ud.toString())}for(i=e.children,n=i.length,r=0;r<n;r++){var o=i[r];o.initialized=!0,o.level=e.level+1,o.parent=e,t.Xb.remove(o)}for(e=0;e<n;e++)Gv(t,i[e])}}function sk(t,e,i){if(i.initialized){if(e===null)var n=!1;else{for(n=e.parent;n!==null&&n!==i;)n=n.parent;n=n===i}if(n||i.level>e.level)return!1;t.removeChild(i.parent,i)}return!0}xt.prototype.removeChild=function(t,e){if(t!==null&&e!==null){for(var i=t.children,n=0,r=0;r<i.length;r++)i[r]===e&&n++;if(0<n){n=Array(i.length-n);for(var o=r=0;o<i.length;o++)i[o]!==e&&(n[r++]=i[o]);t.children=n}}};function lk(t,e){if(e!==null){t.initializeTreeVertexValues(e),e.alignment===Ar&&t.sortTreeVertexChildren(e);for(var i=0,n=e.childrenCount,r=0,o=e.children,l=o.length,u=0;u<l;u++){var h=o[u];lk(t,h),i+=h.descendantCount+1,n=Math.max(n,h.maxChildrenCount),r=Math.max(r,h.maxGenerationCount)}e.descendantCount=i,e.maxChildrenCount=n,e.maxGenerationCount=0<n?r+1:0}}function KT(t,e){switch(t.wo){default:case gc:return e.parent!==null?e.parent:t.W;case Ng:return e.parent===null?t.W:e.parent.parent===null?t.Y:e.parent;case Pg:return e.parent!==null?e.parent.parent!==null?e.parent.parent:t.Y:t.W;case Cg:var i=!0;if(e.childrenCount===0)i=!1;else for(var n=e.children,r=n.length,o=0;o<r;o++)if(0<n[o].childrenCount){i=!1;break}return i&&e.parent!==null?t.Y:e.parent!==null?e.parent:t.W}}xt.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(KT(this,t)),t.parent!==null&&t.parent.alignment===Ar){for(var e=t.angle,i=t.parent.children,n=0;n<i.length&&t!==i[n];)n++;n%2===0?n!==i.length-1&&(e=e===90?180:e===180?270:e===270?180:270):e=e===90?0:e===180?90:e===270?0:90,t.angle=e}t.initialized=!0};function uk(t,e){if(e!==null){t.assignTreeVertexValues(e),e=e.children;for(var i=e.length,n=0;n<i;n++)uk(t,e[n])}}xt.prototype.assignTreeVertexValues=function(){};function hk(t,e){if(e!==null){e.alignment!==Ar&&t.sortTreeVertexChildren(e),e=e.children;for(var i=e.length,n=0;n<i;n++)hk(t,e[n])}}xt.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case Tu:break;case sa:t.children.reverse();break;case la:t.children.sort(t.comparer);break;case ua:t.children.sort(t.comparer),t.children.reverse();break;default:O("Unhandled sorting value "+t.sorting.toString())}},xt.prototype.Du=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},xt.prototype.addComments=function(t){var e=t.angle,i=t.parent,n=0,r=!1;i!==null&&(n=i.angle,r=i.alignment,r=Rs(r)),e=e===90||e===270,n=n===90||n===270,i=t.childrenCount===0;var o=0,l=0,u=0,h=t.commentSpacing;if(t.node!==null)for(var f=t.node.Ou();f.next();){var c=f.value;c.category==="Comment"&&c.canLayout()&&(t.comments===null&&(t.comments=[]),t.comments.push(c),c.Va(),c=c.measuredBounds,e&&!i||!r&&!n&&i||r&&n&&i?(o=Math.max(o,c.width),l+=c.height+Math.abs(u)):(o+=c.width+Math.abs(u),l=Math.max(l,c.height)),u=h)}t.comments!==null&&(e&&!i||!r&&!n&&i||r&&n&&i?(o+=Math.abs(t.commentMargin),l=Math.max(0,l-t.height)):(l+=Math.abs(t.commentMargin),o=Math.max(0,o-t.width)),r=E.allocAt(0,0,t.bounds.width+o,t.bounds.height+l),t.bounds=r,E.free(r))};function Rs(t){return t===Po||t===Ar||t===No||t===qr}function cc(t){return t===Po||t===Ar}function Hv(t){var e=t.parent;if(e!==null){var i=e.alignment;if(Rs(i)){if(cc(i)){for(e=e.children,i=0;i<e.length&&t!==e[i];)i++;return i%2===0}if(i===No)return!0}}return!1}xt.prototype.layoutComments=function(t){if(t.comments!==null){var e=t.node.measuredBounds,i=t.parent,n=t.angle,r=0,o=!1;i!==null&&(r=i.angle,o=i.alignment,o=Rs(o)),n=n===90||n===270,i=r===90||r===270;for(var l=t.childrenCount===0,u=Hv(t),h=0,f=t.comments,c=f.length,p=C.alloc(),g=0;g<c;g++){var m=f[g],v=m.measuredBounds;if(n&&!l||!o&&!i&&l||o&&i&&l){if(135<r&&!o||i&&u)if(0<=t.commentMargin)for(p.h(t.bounds.x-t.commentMargin-v.width,t.bounds.y+h),m.move(p),m=m.Sd();m.next();){var x=m.value;x.fromSpot=Pn,x.toSpot=Ri}else for(p.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+h),m.move(p),m=m.Sd();m.next();)x=m.value,x.fromSpot=Ri,x.toSpot=Pn;else if(0<=t.commentMargin)for(p.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+h),m.move(p),m=m.Sd();m.next();)x=m.value,x.fromSpot=Ri,x.toSpot=Pn;else for(p.h(t.bounds.x+t.commentMargin-v.width,t.bounds.y+h),m.move(p),m=m.Sd();m.next();)x=m.value,x.fromSpot=Pn,x.toSpot=Ri;h=0<=t.commentSpacing?h+(v.height+t.commentSpacing):h+(t.commentSpacing-v.height)}else{if(135<r&&!o||!i&&u)if(0<=t.commentMargin)for(p.h(t.bounds.x+h,t.bounds.y-t.commentMargin-v.height),m.move(p),m=m.Sd();m.next();)x=m.value,x.fromSpot=Cn,x.toSpot=Nn;else for(p.h(t.bounds.x+h,t.bounds.y+2*t.focus.y-t.commentMargin),m.move(p),m=m.Sd();m.next();)x=m.value,x.fromSpot=Nn,x.toSpot=Cn;else if(0<=t.commentMargin)for(p.h(t.bounds.x+h,t.bounds.y+2*t.focus.y+t.commentMargin),m.move(p),m=m.Sd();m.next();)x=m.value,x.fromSpot=Nn,x.toSpot=Cn;else for(p.h(t.bounds.x+h,t.bounds.y+t.commentMargin-v.height),m.move(p),m=m.Sd();m.next();)x=m.value,x.fromSpot=Cn,x.toSpot=Nn;h=0<=t.commentSpacing?h+(v.width+t.commentSpacing):h+(t.commentSpacing-v.width)}}if(C.free(p),e=h-t.commentSpacing-(n?e.height:e.width),this.ud===Tr)for(t=t.destinationEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.toEndSegmentLength=0<e?e:NaN)}},xt.prototype.layoutTree=function(t){if(t!==null){for(var e=t.children,i=e.length,n=0;n<i;n++)this.layoutTree(e[n]);switch(t.compaction){case dc:ak(this,t);break;case ha:if(t.alignment===Ar)ak(this,t);else if(t.childrenCount===0)n=t.parent,i=!1,e=0,n!==null&&(e=n.angle,i=n.alignment,i=Rs(i)),n=Hv(t),t.T.h(0,0),t.Da.h(t.width,t.height),t.parent===null||t.comments===null||(e!==180&&e!==270||i)&&!n?t.la.h(0,0):e===180&&!i||(e===90||e===270)&&n?t.la.h(t.width-2*t.focus.x,0):t.la.h(0,t.height-2*t.focus.y),t.Zo=null,t.kp=null;else{var r=tr(t);e=r===90||r===270;var o=0,l=t.children,u=l.length;for(i=0;i<u;i++)n=l[i],o=Math.max(o,e?n.Da.width:n.Da.height);var h=t.alignment;n=h===Lr;var f=h===Fr,c=Rs(h),p=Math.max(0,t.breadthLimit);i=this.computeLayerSpacing(t);var g=t.nodeSpacing,m=this.computeNodeIndent(t),v=t.rowSpacing,x=0;(n||f||t.im||t.jm&&t.maxGenerationCount===1)&&(x=Math.max(0,t.rowIndent)),n=t.width;var k=t.height,S=0,P=0,N=0,T=null,F=null,D=0,X=0,tt=0,et=0,U=0,R=0,pt=0,ut=0;if(c&&!cc(h)&&135<r&&l.reverse(),cc(h))if(1<u)for(var Tt=0;Tt<u;Tt++)Tt%2===0&&Tt!==u-1&&(ut=Math.max(ut,e?l[Tt].Da.width:l[Tt].Da.height));else u===1&&(ut=e?l[0].Da.width:l[0].Da.height);if(c){switch(h){case Po:P=135>r?fk(this,t,l,ut,S,P):ck(this,t,l,ut,S,P),ut=P.x,S=P.width,P=P.height;break;case No:for(T=0;T<u;T++)F=l[T],p=F.Da,N=R===0?0:v,e?(F.T.h(o-p.width,et+N),S=Math.max(S,p.width),P=Math.max(P,et+N+p.height),et+=N+p.height):(F.T.h(tt+N,o-p.height),S=Math.max(S,tt+N+p.width),P=Math.max(P,p.height),tt+=N+p.width),R++;break;case qr:for(T=0;T<u;T++)F=l[T],o=F.Da,p=R===0?0:v,e?(F.T.h(g/2+t.focus.x,et+p),S=Math.max(S,o.width),P=Math.max(P,et+p+o.height),et+=p+o.height):(F.T.h(tt+p,g/2+t.focus.y),S=Math.max(S,tt+p+o.width),P=Math.max(P,o.height),tt+=p+o.width),R++}T=ji(this,2),F=ji(this,2),e?(T[0].h(0,0),T[1].h(0,P),F[0].h(S,0)):(T[0].h(0,0),T[1].h(S,0),F[0].h(0,P)),F[1].h(S,P)}else for(Tt=0;Tt<u;Tt++){var Vt=l[Tt],ke=Vt.Da;if(e){0<p&&0<R&&tt+g+ke.width>p&&(tt<o&&vl(t,h,o-tt,0,pt,Tt-1),U++,R=0,pt=Tt,N=P,tt=0,et=135<r?-P-v:P+v),Sg(this,Vt,0,et);var Ne=0;if(R===0)T=Vt.Zo,F=Vt.kp,D=ke.width,X=ke.height,(T===null||F===null||r!==tr(Vt))&&(T=ji(this,2),F=ji(this,2),T[0].h(0,0),T[1].h(0,X),F[0].h(D,0),F[1].h(D,X));else{var ei=Rt();X=pk(this,t,Vt,T,F,D,X,ei),Ne=X.x,T=ei[0],F=ei[1],D=X.width,X=X.height,Bt(ei),tt<ke.width&&0>Ne&&(Nu(t,-Ne,0,pt,Tt-1),kg(T,-Ne,0),kg(F,-Ne,0),Ne=0)}Vt.T.h(Ne,et),S=Math.max(S,D),P=Math.max(P,N+(U===0?0:v)+ke.height),tt=D}else 0<p&&0<R&&et+g+ke.height>p&&(et<o&&vl(t,h,0,o-et,pt,Tt-1),U++,R=0,pt=Tt,N=S,et=0,tt=135<r?-S-v:S+v),Sg(this,Vt,tt,0),Ne=0,R===0?(T=Vt.Zo,F=Vt.kp,D=ke.width,X=ke.height,(T===null||F===null||r!==tr(Vt))&&(T=ji(this,2),F=ji(this,2),T[0].h(0,0),T[1].h(D,0),F[0].h(0,X),F[1].h(D,X))):(ei=Rt(),X=pk(this,t,Vt,T,F,D,X,ei),Ne=X.x,T=ei[0],F=ei[1],D=X.width,X=X.height,Bt(ei),et<ke.height&&0>Ne&&(Nu(t,0,-Ne,pt,Tt-1),kg(T,0,-Ne),kg(F,0,-Ne),Ne=0)),Vt.T.h(tt,Ne),P=Math.max(P,X),S=Math.max(S,N+(U===0?0:v)+ke.width),et=X;R++}switch(0<U&&(e?(P+=Math.max(0,i),tt<S&&vl(t,h,S-tt,0,pt,u-1),0<x&&(f||Nu(t,x,0,0,u-1),S+=x)):(S+=Math.max(0,i),et<P&&vl(t,h,0,P-et,pt,u-1),0<x&&(f||Nu(t,0,x,0,u-1),P+=x))),x=f=0,h){case Lu:e?f+=S/2-t.focus.x-m/2:x+=P/2-t.focus.y-m/2;break;case wl:0<U?e?f+=S/2-t.focus.x-m/2:x+=P/2-t.focus.y-m/2:e?(ut=l[0].T.x+l[0].la.x,f+=ut+(l[u-1].T.x+l[u-1].la.x+2*l[u-1].focus.x-ut)/2-t.focus.x-m/2):(ut=l[0].T.y+l[0].la.y,x+=ut+(l[u-1].T.y+l[u-1].la.y+2*l[u-1].focus.y-ut)/2-t.focus.y-m/2);break;case Lr:e?(f-=m,S+=m):(x-=m,P+=m);break;case Fr:e?(f+=S-t.width+m,S+=m):(x+=P-t.height+m,P+=m);break;case Po:e?1<u?f+=ut+g/2-t.focus.x:f+=l[0].focus.x-t.focus.x+l[0].la.x:1<u?x+=ut+g/2-t.focus.y:x+=l[0].focus.y-t.focus.y+l[0].la.y;break;case No:e?f+=S+g/2-t.focus.x:x+=P+g/2-t.focus.y;break;case qr:break;default:P=this.customAlignment(t,f,x,S,P),f=P[0],x=P[1],S=P[2],P=P[3]}for(m=0;m<u;m++)ut=l[m],e?ut.T.h(ut.T.x+ut.la.x-f,ut.T.y+(135<r?(c?-P:-ut.Da.height)+ut.la.y-i:k+i+ut.la.y)):ut.T.h(ut.T.x+(135<r?(c?-S:-ut.Da.width)+ut.la.x-i:n+i+ut.la.x),ut.T.y+ut.la.y-x);if(u=l=0,c?e?(S=Xv(t,S,f),0>f&&(f=0),135<r&&(x+=P+i),P+=k+i,h===qr&&(l+=g/2+t.focus.x),u+=k+i):(135<r&&(f+=S+i),S+=n+i,P=Kv(t,P,x),0>x&&(x=0),h===qr&&(u+=g/2+t.focus.y),l+=n+i):e?(t.comments===null?n>S&&(S=_v(h,n-S,0),l=S.x,u=S.y,S=n,f=0):S=Xv(t,S,f),0>f&&(l-=f,f=0),135<r&&(x+=P+i),P=Math.max(Math.max(P,k),P+k+i),u+=k+i):(135<r&&(f+=S+i),S=Math.max(Math.max(S,n),S+n+i),t.comments===null?k>P&&(P=_v(h,0,k-P),l=P.x,u=P.y,P=k,x=0):P=Kv(t,P,x),0>x&&(u-=x,x=0),l+=n+i),0<U)r=ji(this,4),U=ji(this,4),e?(r[2].h(0,k+i),r[3].h(r[2].x,P),U[2].h(S,r[2].y),U[3].h(U[2].x,r[3].y)):(r[2].h(n+i,0),r[3].h(S,r[2].y),U[2].h(r[2].x,P),U[3].h(r[3].x,U[2].y));else{for(r=ji(this,T.length+2),U=ji(this,F.length+2),h=0;h<T.length;h++)c=T[h],r[h+2].h(c.x+l,c.y+u);for(h=0;h<F.length;h++)c=F[h],U[h+2].h(c.x+l,c.y+u)}e?(r[0].h(f,0),r[1].h(r[0].x,k),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),U[0].h(f+n,0),U[1].h(U[0].x,k),U[2].y<U[1].y&&(U[2].x<U[0].x?U[2].assign(U[1]):U[1].assign(U[2])),U[3].y<U[2].y&&(U[3].x<U[0].x?U[3].assign(U[2]):U[2].assign(U[3])),r[2].y-=i/2,U[2].y-=i/2):(r[0].h(0,x),r[1].h(n,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),U[0].h(0,x+k),U[1].h(n,U[0].y),U[2].x<U[1].x&&(U[2].y<U[0].y?U[2].assign(U[1]):U[1].assign(U[2])),U[3].x<U[2].x&&(U[3].y<U[0].y?U[3].assign(U[2]):U[2].assign(U[3])),r[2].x-=i/2,U[2].x-=i/2),pr(this,T),pr(this,F),t.Zo=r,t.kp=U,t.la.h(f,x),t.Da.h(S,P)}break;default:O("Unhandled compaction value "+t.compaction.toString())}}};function ak(t,e){if(e.childrenCount===0){var i=!1,n=0;e.parent!==null&&(n=e.parent.angle,i=e.parent.alignment,i=Rs(i));var r=Hv(e);e.T.h(0,0),e.Da.h(e.width,e.height),e.parent===null||e.comments===null||(n!==180&&n!==270||i)&&!r?e.la.h(0,0):n===180&&!i||(n===90||n===270)&&r?e.la.h(e.width-2*e.focus.x,0):e.la.h(0,e.height-2*e.focus.y)}else{n=tr(e),i=n===90||n===270;var o=0;r=e.children;for(var l=r.length,u=0;u<l;u++){var h=r[u];o=Math.max(o,i?h.Da.width:h.Da.height)}var f=e.alignment,c=f===Lr,p=f===Fr;u=Rs(f);var g=Math.max(0,e.breadthLimit);h=t.computeLayerSpacing(e);var m=e.nodeSpacing,v=t.computeNodeIndent(e),x=c||p?0:v/2,k=e.rowSpacing,S=0;(c||p||e.im||e.jm&&e.maxGenerationCount===1)&&(S=Math.max(0,e.rowIndent)),c=e.width;var P=e.height,N=0,T=0,F=0,D=0,X=0,tt=0,et=0,U=0,R=0,pt=0;if(u&&!cc(f)&&135<n&&r.reverse(),cc(f))if(1<l)for(var ut=0;ut<l;ut++){var Tt=r[ut],Vt=Tt.Da;ut%2===0&&ut!==l-1?R=Math.max(R,(i?Vt.width:Vt.height)+t.computeBusNodeSpacing(Tt)-m):ut%2!==0&&(pt=Math.max(pt,(i?Vt.width:Vt.height)+t.computeBusNodeSpacing(Tt)-m))}else l===1&&(R=i?r[0].Da.width:r[0].Da.height);if(u)switch(f){case Po:case Ar:T=135>n?fk(t,e,r,R,N,T):ck(t,e,r,R,N,T),R=T.x,N=T.width,T=T.height;break;case No:for(g=0;g<l;g++)x=r[g],F=x.Da,pt=et===0?0:k,i?(x.T.h(o-F.width,X+pt),N=Math.max(N,F.width),T=Math.max(T,X+pt+F.height),X+=pt+F.height):(x.T.h(D+pt,o-F.height),N=Math.max(N,D+pt+F.width),T=Math.max(T,F.height),D+=pt+F.width),et++;break;case qr:for(o=0;o<l;o++)g=r[o],x=g.Da,F=et===0?0:k,i?(g.T.h(m/2+e.focus.x,X+F),N=Math.max(N,x.width),T=Math.max(T,X+F+x.height),X+=F+x.height):(g.T.h(D+F,m/2+e.focus.y),N=Math.max(N,D+F+x.width),T=Math.max(T,x.height),D+=F+x.width),et++}else for(pt=0;pt<l;pt++)ut=r[pt],Tt=ut.Da,i?(0<g&&0<et&&D+m+Tt.width>g&&(D<o&&vl(e,f,o-D,0,U,pt-1),tt++,et=0,U=pt,F=T,D=0,X=135<n?-T-k:T+k),Vt=et===0?x:m,Sg(t,ut,0,X),ut.T.h(D+Vt,X),N=Math.max(N,D+Vt+Tt.width),T=Math.max(T,F+(tt===0?0:k)+Tt.height),D+=Vt+Tt.width):(0<g&&0<et&&X+m+Tt.height>g&&(X<o&&vl(e,f,0,o-X,U,pt-1),tt++,et=0,U=pt,F=N,X=0,D=135<n?-N-k:N+k),Vt=et===0?x:m,Sg(t,ut,D,0),ut.T.h(D,X+Vt),T=Math.max(T,X+Vt+Tt.height),N=Math.max(N,F+(tt===0?0:k)+Tt.width),X+=Vt+Tt.height),et++;switch(0<tt&&(i?(T+=Math.max(0,h),D<N&&vl(e,f,N-D,0,U,l-1),0<S&&(p||Nu(e,S,0,0,l-1),N+=S)):(N+=Math.max(0,h),X<T&&vl(e,f,0,T-X,U,l-1),0<S&&(p||Nu(e,0,S,0,l-1),T+=S))),S=p=0,f){case Lu:i?p+=N/2-e.focus.x-v/2:S+=T/2-e.focus.y-v/2;break;case wl:0<tt?i?p+=N/2-e.focus.x-v/2:S+=T/2-e.focus.y-v/2:i?(t=r[0].T.x+r[0].la.x,p+=t+(r[l-1].T.x+r[l-1].la.x+2*r[l-1].focus.x-t)/2-e.focus.x-v/2):(t=r[0].T.y+r[0].la.y,S+=t+(r[l-1].T.y+r[l-1].la.y+2*r[l-1].focus.y-t)/2-e.focus.y-v/2);break;case Lr:i?(p-=v,N+=v):(S-=v,T+=v);break;case Fr:i?(p+=N-e.width+v,N+=v):(S+=T-e.height+v,T+=v);break;case Po:case Ar:i?1<l?p+=R+m/2-e.focus.x:p+=r[0].focus.x-e.focus.x+r[0].la.x:1<l?S+=R+m/2-e.focus.y:S+=r[0].focus.y-e.focus.y+r[0].la.y;break;case No:i?p+=N+m/2-e.focus.x:S+=T+m/2-e.focus.y;break;case qr:break;default:t=t.customAlignment(e,p,S,N,T),p=t[0],S=t[1],N=t[2],T=t[3]}for(t=0;t<l;t++)v=r[t],i?v.T.h(v.T.x+v.la.x-p,v.T.y+(135<n?(u?-T:-v.Da.height)+v.la.y-h:P+h+v.la.y)):v.T.h(v.T.x+(135<n?(u?-N:-v.Da.width)+v.la.x-h:c+h+v.la.x),v.T.y+v.la.y-S);i?(N=Xv(e,N,p),0>p&&(p=0),135<n&&(S+=T+h),T=Math.max(Math.max(T,P),T+P+h)):(135<n&&(p+=N+h),N=Math.max(Math.max(N,c),N+c+h),T=Kv(e,T,S),0>S&&(S=0)),e.la.h(p,S),e.Da.h(N,T)}}xt.prototype.customAlignment=function(t,e,i,n,r){return[e,i,n,r]};function fk(t,e,i,n,r,o){var l=i.length;if(l===0)return new E(n,0,r,o);if(l===1)return e=i[0],r=e.Da.width,o=e.Da.height,new E(n,0,r,o);for(var u=e.nodeSpacing,h=e.rowSpacing,f=tr(e)===90,c=0,p=0,g=0,m=0;m<l;m++)if(!(m%2!==0||1<l&&m===l-1)){var v=i[m],x=v.Da,k=c===0?0:h;if(f){var S=t.computeBusNodeSpacing(v)-u;v.T.h(n-(x.width+S),g+k),r=Math.max(r,x.width+S),o=Math.max(o,g+k+x.height),g+=k+x.height}else S=t.computeBusNodeSpacing(v)-u,v.T.h(p+k,n-(x.height+S)),o=Math.max(o,x.height+S),r=Math.max(r,p+k+x.width),p+=k+x.width;c++}for(c=0,v=p,m=g,f?(p=n+u,g=0):(p=0,g=n+u),x=0;x<l;x++)if(x%2!==0){k=i[x],S=k.Da;var P=c===0?0:h;if(f){var N=t.computeBusNodeSpacing(k)-u;k.T.h(p+N,g+P),r=Math.max(r,p+S.width+N),o=Math.max(o,g+P+S.height),g+=P+S.height}else N=t.computeBusNodeSpacing(k)-u,k.T.h(p+P,g+N),r=Math.max(r,p+P+S.width),o=Math.max(o,g+S.height+N),p+=P+S.width;c++}return 1<l&&l%2===1&&(i=i[l-1],l=i.Da,t=t.computeBusLastRowSpacing(i,f?Math.max(Math.abs(m),Math.abs(g)):Math.max(Math.abs(v),Math.abs(p))),f?(i.T.h(n+u/2-i.focus.x-i.la.x,o+t),f=n+u/2-i.focus.x-i.la.x,r=Math.max(r,f+l.width),0>f&&(r-=f),o=Math.max(o,Math.max(m,g)+t+l.height),0>i.T.x&&(n=Mg(e,i.T.x,!1,n,u))):(i.T.h(r+t,n+u/2-i.focus.y-i.la.y),r=Math.max(r,Math.max(v,p)+t+l.width),g=n+u/2-i.focus.y-i.la.y,o=Math.max(o,g+l.height),0>g&&(o-=g),0>i.T.y&&(n=Mg(e,i.T.y,!0,n,u)))),new E(n,0,r,o)}function ck(t,e,i,n,r,o){var l=i.length;if(l===0)return new E(n,0,r,o);if(l===1)return i=i[0],r=i.Da.width,o=i.Da.height,new E(n,0,r,o);for(var u=e.nodeSpacing,h=e.rowSpacing,f=tr(e)===270,c=0,p=0,g=0,m=0;m<l;m++)if(!(m%2!==0||1<l&&m===l-1)){var v=i[m],x=v.Da,k=c===0?0:h;if(f){var S=t.computeBusNodeSpacing(v)-u;g-=k+x.height,v.T.h(n-(x.width+S),g),r=Math.max(r,x.width+S),o=Math.max(o,Math.abs(g))}else S=t.computeBusNodeSpacing(v)-u,p-=k+x.width,v.T.h(p,n-(x.height+S)),o=Math.max(o,x.height+S),r=Math.max(r,Math.abs(p));c++}for(c=0,v=p,m=g,f?(p=n+u,g=0):(p=0,g=n+u),x=0;x<l;x++)if(x%2!==0){k=i[x],S=k.Da;var P=c===0?0:h;if(f){var N=t.computeBusNodeSpacing(k)-u;g-=P+S.height,k.T.h(p+N,g),r=Math.max(r,p+S.width+N),o=Math.max(o,Math.abs(g))}else N=t.computeBusNodeSpacing(k)-u,p-=P+S.width,k.T.h(p,g+N),o=Math.max(o,g+S.height+N),r=Math.max(r,Math.abs(p));c++}for(1<l&&l%2===1&&(h=i[l-1],c=h.Da,t=t.computeBusLastRowSpacing(h,f?Math.max(Math.abs(m),Math.abs(g)):Math.max(Math.abs(v),Math.abs(p))),f?(h.T.h(n+u/2-h.focus.x-h.la.x,-o-c.height-t),p=n+u/2-h.focus.x-h.la.x,r=Math.max(r,p+c.width),0>p&&(r-=p),o=Math.max(o,Math.abs(Math.min(m,g))+t+c.height),0>h.T.x&&(n=Mg(e,h.T.x,!1,n,u))):(h.T.h(-r-c.width-t,n+u/2-h.focus.y-h.la.y),r=Math.max(r,Math.abs(Math.min(v,p))+t+c.width),g=n+u/2-h.focus.y-h.la.y,o=Math.max(o,g+c.height),0>g&&(o-=g),0>h.T.y&&(n=Mg(e,h.T.y,!0,n,u)))),e=0;e<l;e++)u=i[e],f?u.T.h(u.T.x,u.T.y+o):u.T.h(u.T.x+r,u.T.y);return new E(n,0,r,o)}xt.prototype.computeBusNodeSpacing=function(t){return t.parent===null?0:t.parent.nodeSpacing},xt.prototype.computeBusLastRowSpacing=function(t){return t.parent===null?0:t.parent.rowSpacing};function Mg(t,e,i,n,r){t=t.children;for(var o=t.length,l=0;l<o;l++)i?t[l].T.h(t[l].T.x,t[l].T.y-e):t[l].T.h(t[l].T.x-e,t[l].T.y);return e=t[o-1],Math.max(n,i?e.la.y+e.focus.y-r/2:e.la.x+e.focus.x-r/2)}function Xv(t,e,i){switch(t.alignment){case wl:case Lu:return i+t.width>e&&(e=i+t.width),0>i&&(e-=i),e;case Lr:return t.width>e?t.width:e;case Fr:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case Po:case Ar:return Math.max(t.width,Math.max(e,i+t.width)-Math.min(0,i));case No:return t.width-t.focus.x+t.nodeSpacing/2+e;case qr:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function Kv(t,e,i){switch(t.alignment){case wl:case Lu:return i+t.height>e&&(e=i+t.height),0>i&&(e-=i),e;case Lr:return t.height>e?t.height:e;case Fr:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case Po:case Ar:return Math.max(t.height,Math.max(e,i+t.height)-Math.min(0,i));case No:return t.height-t.focus.y+t.nodeSpacing/2+e;case qr:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function _v(t,e,i){switch(t){case Lu:e/=2,i/=2;break;case wl:e/=2,i/=2;break;case Lr:i=e=0;break;case Fr:break;default:O("Unhandled alignment value "+t.toString())}return new C(e,i)}function vl(t,e,i,n,r,o){e=_v(e,i,n),Nu(t,e.x,e.y,r,o)}function Nu(t,e,i,n,r){if(e!==0||i!==0)for(t=t.children;n<=r;n++){var o=t[n].T;o.x+=e,o.y+=i}}function Sg(t,e,i,n){var r=e.parent;switch(t.ud){case Tr:for(t=e.sourceEdges;t.next();)e=t.value,e.fromVertex===r&&e.relativePoint.h(i,n);break;case xl:for(t=e.destinationEdges;t.next();)e=t.value,e.toVertex===r&&e.relativePoint.h(i,n);break;default:O("Unhandled path value "+t.ud.toString())}}function kg(t,e,i){for(var n=0;n<t.length;n++){var r=t[n];r.x+=e,r.y+=i}}function pk(t,e,i,n,r,o,l,u){var h=tr(e),f=h===90||h===270,c=e.nodeSpacing;e=n;var p=r;n=o;var g=l,m=i.Zo,v=i.kp;l=i.Da;var x=f?Math.max(g,l.height):Math.max(n,l.width);if((m===null||h!==tr(i))&&(m=ji(t,2),v=ji(t,2),f?(m[0].h(0,0),m[1].h(0,l.height),v[0].h(l.width,0),v[1].h(v[0].x,m[1].y)):(m[0].h(0,0),m[1].h(l.width,0),v[0].h(0,l.height),v[1].h(m[1].x,v[0].y))),f){if(g=9999999,!(p===null||2>p.length||m===null||2>m.length))for(r=i=0;i<p.length&&r<m.length;){o=p[i];var k=m[r];h=k.x,f=k.y,h+=n;var S=o;i+1<p.length&&(S=p[i+1]);var P=k;k=P.x,P=P.y,r+1<m.length&&(P=m[r+1],k=P.x,P=P.y,k+=n);var N=g;o.y===f?N=h-o.x:o.y>f&&o.y<P?N=h+(o.y-f)/(P-f)*(k-h)-o.x:f>o.y&&f<S.y&&(N=h-(o.x+(f-o.y)/(S.y-o.y)*(S.x-o.x))),N<g&&(g=N),S.y<=o.y?i++:P<=f?r++:(S.y<=P&&i++,P<=S.y&&r++)}if(g=n-g,g+=c,i=m,r=g,e===null||2>e.length||i===null||2>i.length)n=null;else{for(c=ji(t,e.length+i.length),n=o=h=0;o<i.length&&i[o].y<e[0].y;)f=i[o++],c[n++].h(f.x+r,f.y);for(;h<e.length;)f=e[h++],c[n++].h(f.x,f.y);for(h=e[e.length-1].y;o<i.length&&i[o].y<=h;)o++;for(;o<i.length&&i[o].y>h;)f=i[o++],c[n++].h(f.x+r,f.y);for(i=ji(t,n),h=0;h<n;h++)i[h].assign(c[h]);pr(t,c),n=i}if(o=v,h=g,p===null||2>p.length||o===null||2>o.length)r=null;else{for(c=ji(t,p.length+o.length),r=f=i=0;i<p.length&&p[i].y<o[0].y;)S=p[i++],c[r++].h(S.x,S.y);for(;f<o.length;)S=o[f++],c[r++].h(S.x+h,S.y);for(o=o[o.length-1].y;i<p.length&&p[i].y<=o;)i++;for(;i<p.length&&p[i].y>o;)h=p[i++],c[r++].h(h.x,h.y);for(o=ji(t,r),i=0;i<r;i++)o[i].assign(c[i]);pr(t,c),r=o}return o=Math.max(0,g)+l.width,l=x,pr(t,e),pr(t,m),pr(t,p),pr(t,v),u[0]=n,u[1]=r,new E(g,0,o,l)}if(n=9999999,!(p===null||2>p.length||m===null||2>m.length))for(r=i=0;i<p.length&&r<m.length;)o=p[i],k=m[r],h=k.x,f=k.y,f+=g,S=o,i+1<p.length&&(S=p[i+1]),P=k,k=P.x,P=P.y,r+1<m.length&&(P=m[r+1],k=P.x,P=P.y,P+=g),N=n,o.x===h?N=f-o.y:o.x>h&&o.x<k?N=f+(o.x-h)/(k-h)*(P-f)-o.y:h>o.x&&h<S.x&&(N=f-(o.y+(h-o.x)/(S.x-o.x)*(S.y-o.y))),N<n&&(n=N),S.x<=o.x?i++:k<=h?r++:(S.x<=k&&i++,k<=S.x&&r++);if(g-=n,g+=c,i=m,r=g,e===null||2>e.length||i===null||2>i.length)n=null;else{for(c=ji(t,e.length+i.length),n=o=h=0;o<i.length&&i[o].x<e[0].x;)f=i[o++],c[n++].h(f.x,f.y+r);for(;h<e.length;)f=e[h++],c[n++].h(f.x,f.y);for(h=e[e.length-1].x;o<i.length&&i[o].x<=h;)o++;for(;o<i.length&&i[o].x>h;)f=i[o++],c[n++].h(f.x,f.y+r);for(i=ji(t,n),h=0;h<n;h++)i[h].assign(c[h]);pr(t,c),n=i}if(o=v,h=g,p===null||2>p.length||o===null||2>o.length)r=null;else{for(c=ji(t,p.length+o.length),r=f=i=0;i<p.length&&p[i].x<o[0].x;)S=p[i++],c[r++].h(S.x,S.y);for(;f<o.length;)S=o[f++],c[r++].h(S.x,S.y+h);for(o=o[o.length-1].x;i<p.length&&p[i].x<=o;)i++;for(;i<p.length&&p[i].x>o;)h=p[i++],c[r++].h(h.x,h.y);for(o=ji(t,r),i=0;i<r;i++)o[i].assign(c[i]);pr(t,c),r=o}return o=x,l=Math.max(0,g)+l.height,pr(t,e),pr(t,m),pr(t,p),pr(t,v),u[0]=n,u[1]=r,new E(g,0,o,l)}function ji(t,e){if(t=t.su[e],t!==void 0&&(t=t.pop(),t!==void 0))return t;t=[];for(var i=0;i<e;i++)t[i]=new C;return t}function pr(t,e){var i=e.length,n=t.su[i];n===void 0&&(n=[],t.su[i]=n),n.push(e)}xt.prototype.arrangeTrees=function(){if(this.Tb===mc)for(var t=this.Xb.iterator;t.next();){var e=t.value;if(e instanceof En){var i=e.node;if(i!==null){var n=i.position;i=n.x,n=n.y,isFinite(i)||(i=0),isFinite(n)||(n=0),Wv(this,e,i,n)}}}else{for(t=[],e=this.Xb.iterator;e.next();)i=e.value,i instanceof En&&t.push(i);switch(this.sorting){case Tu:break;case sa:t.reverse();break;case la:t.sort(this.comparer);break;case ua:t.sort(this.comparer),t.reverse();break;default:O("Unhandled sorting value "+this.sorting.toString())}for(i=this.arrangementOrigin,e=i.x,i=i.y,n=0;n<t.length;n++){var r=t[n];switch(Wv(this,r,e+r.la.x,i+r.la.y),this.Tb){case yc:i+=r.Da.height+this.$d.height;break;case Tg:e+=r.Da.width+this.$d.width;break;default:O("Unhandled arrangement value "+this.Tb.toString())}}}};function Wv(t,e,i,n){if(e!==null){e.x=i,e.y=n,e=e.children;for(var r=e.length,o=0;o<r;o++){var l=e[o];Wv(t,l,i+l.T.x,n+l.T.y)}}}xt.prototype.commitLayout=function(){this.Av(),this.commitNodes(),this.Iu(),this.isRouting&&this.commitLinks()},xt.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},xt.prototype.Iu=function(){if(this.layerStyle===vc){for(var t=this.bw,e=[],i=null,n=this.network.vertexes.iterator;n.next();){var r=n.value;i===null?i=r.bounds.copy():i.ed(r.bounds);var o=e[r.level];o===void 0?o=this.computeLayerSpacing(r):o=Math.max(o,this.computeLayerSpacing(r)),e[r.level]=o}for(n=0;n<e.length;n++)e[n]===void 0&&(e[n]=0);if(this.angle===90||this.angle===270?(i.Bc(this.nodeSpacing/2,this.layerSpacing),n=new C(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.Bc(this.layerSpacing,this.nodeSpacing/2),n=new C(-this.layerSpacing/2,-this.nodeSpacing/2)),r=[],i=this.angle===90||this.angle===270?i.width:i.height,o=0,this.angle===180||this.angle===270)for(var l=0;l<t.length;l++)o+=t[l]+e[l];for(l=0;l<t.length;l++){var u=t[l]+e[l];this.angle===270?(o-=u,r.push(new E(0,o,i,u))):this.angle===90?(r.push(new E(0,o,i,u)),o+=u):this.angle===180?(o-=u,r.push(new E(o,0,u,i))):(r.push(new E(o,0,u,i)),o+=u)}this.commitLayers(r,n)}},xt.prototype.commitLayers=function(){},xt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},xt.prototype.Av=function(){for(var t=this.Xb.iterator;t.next();){var e=t.value;e instanceof En&&dk(this,e)}};function dk(t,e){if(e!==null){t.setPortSpots(e),e=e.children;for(var i=e.length,n=0;n<i;n++)dk(t,e[n])}}xt.prototype.setPortSpots=function(t){var e=t.alignment;if(Rs(e)){var i=this.ud===Tr,n=tr(t);switch(n){case 0:var r=Ri;break;case 90:r=Nn;break;case 180:r=Pn;break;default:r=Cn}var o=t.children,l=o.length;switch(e){case Po:case Ar:for(e=0;e<l;e++){var u=o[e];if(u=(i?u.sourceEdges:u.destinationEdges).first(),u!==null&&(u=u.link,u!==null)){var h=n===90||n===270?Pn:Cn;if(l===1||e===l-1&&l%2===1)switch(n){case 0:h=Pn;break;case 90:h=Cn;break;case 180:h=Ri;break;default:h=Nn}else e%2===0&&(h=n===90||n===270?Ri:Nn);i?(t.setsPortSpot&&(u.fromSpot=r),t.setsChildPortSpot&&(u.toSpot=h)):(t.setsPortSpot&&(u.fromSpot=h),t.setsChildPortSpot&&(u.toSpot=r))}}break;case No:for(n=n===90||n===270?Ri:Nn,o=i?t.destinationEdges:t.sourceEdges;o.next();)l=o.value.link,l!==null&&(i?(t.setsPortSpot&&(l.fromSpot=r),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=r)));break;case qr:for(n=n===90||n===270?Pn:Cn,o=i?t.destinationEdges:t.sourceEdges;o.next();)l=o.value.link,l!==null&&(i?(t.setsPortSpot&&(l.fromSpot=r),t.setsChildPortSpot&&(l.toSpot=n)):(t.setsPortSpot&&(l.fromSpot=n),t.setsChildPortSpot&&(l.toSpot=r)))}}else if(i=tr(t),this.ud===Tr){for(r=t.destinationEdges;r.next();)if(n=r.value.link,n!==null){if(t.setsPortSpot)if(t.portSpot.$b())switch(i){case 0:n.fromSpot=Ri;break;case 90:n.fromSpot=Nn;break;case 180:n.fromSpot=Pn;break;default:n.fromSpot=Cn}else n.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.$b())switch(i){case 0:n.toSpot=Pn;break;case 90:n.toSpot=Cn;break;case 180:n.toSpot=Ri;break;default:n.toSpot=Nn}else n.toSpot=t.childPortSpot}}else for(r=t.sourceEdges;r.next();)if(n=r.value.link,n!==null){if(t.setsPortSpot)if(t.portSpot.$b())switch(i){case 0:n.toSpot=Ri;break;case 90:n.toSpot=Nn;break;case 180:n.toSpot=Pn;break;default:n.toSpot=Cn}else n.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.$b())switch(i){case 0:n.fromSpot=Pn;break;case 90:n.fromSpot=Cn;break;case 180:n.fromSpot=Ri;break;default:n.fromSpot=Nn}else n.fromSpot=t.childPortSpot}};function tr(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}xt.prototype.computeLayerSpacing=function(t){var e=tr(t);e=e===90||e===270;var i=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var n=Math.min(1,t.layerSpacingParentOverlap);i-=e?t.height*n:t.width*n}return i<(e?-t.height:-t.width)&&(i=e?-t.height:-t.width),i},xt.prototype.computeNodeIndent=function(t){var e=tr(t),i=t.nodeIndent;if(0<t.nodeIndentPastParent){var n=Math.min(1,t.nodeIndentPastParent);i+=e===90||e===270?t.width*n:t.height*n}return i=Math.max(0,i)},Y.Object.defineProperties(xt.prototype,{roots:{get:function(){return this.Xb},set:function(t){this.Xb!==t&&(this.Xb=t,this.C())}},path:{get:function(){return this.Xn},set:function(t){this.Xn!==t&&(this.Xn=t,this.C())}},treeStyle:{get:function(){return this.wo},set:function(t){this.Tb===t||t!==gc&&t!==Pg&&t!==Cg&&t!==Ng||(this.wo=t,this.C())}},layerStyle:{get:function(){return this.Bq},set:function(t){this.Tb===t||t!==Lg&&t!==Fg&&t!==vc||(this.Bq=t,this.C())}},comments:{get:function(){return this.td},set:function(t){this.td!==t&&(this.td=t,this.C())}},arrangement:{get:function(){return this.Tb},set:function(t){this.Tb===t||t!==yc&&t!==Tg&&t!==mc||(this.Tb=t,this.C())}},arrangementSpacing:{get:function(){return this.$d},set:function(t){this.$d.D(t)||(this.$d.assign(t),this.C())}},rootDefaults:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t,this.C())}},alternateDefaults:{get:function(){return this.Y},set:function(t){this.Y!==t&&(this.Y=t,this.C())}},sorting:{get:function(){return this.W.sorting},set:function(t){this.W.sorting===t||t!==Tu&&t!==sa&&t!==la&&!ua||(this.W.sorting=t,this.C())}},comparer:{get:function(){return this.W.comparer},set:function(t){this.W.comparer!==t&&(this.W.comparer=t,this.C())}},angle:{get:function(){return this.W.angle},set:function(t){this.W.angle!==t&&(t===0||t===90||t===180||t===270?(this.W.angle=t,this.C()):O("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.W.alignment},set:function(t){this.W.alignment!==t&&(this.W.alignment=t,this.C())}},nodeIndent:{get:function(){return this.W.nodeIndent},set:function(t){this.W.nodeIndent!==t&&0<=t&&(this.W.nodeIndent=t,this.C())}},nodeIndentPastParent:{get:function(){return this.W.nodeIndentPastParent},set:function(t){this.W.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.W.nodeIndentPastParent=t,this.C())}},nodeSpacing:{get:function(){return this.W.nodeSpacing},set:function(t){this.W.nodeSpacing!==t&&(this.W.nodeSpacing=t,this.C())}},layerSpacing:{get:function(){return this.W.layerSpacing},set:function(t){this.W.layerSpacing!==t&&(this.W.layerSpacing=t,this.C())}},layerSpacingParentOverlap:{get:function(){return this.W.layerSpacingParentOverlap},set:function(t){this.W.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.W.layerSpacingParentOverlap=t,this.C())}},compaction:{get:function(){return this.W.compaction},set:function(t){this.W.compaction===t||t!==dc&&t!==ha||(this.W.compaction=t,this.C())}},breadthLimit:{get:function(){return this.W.breadthLimit},set:function(t){this.W.breadthLimit!==t&&0<=t&&(this.W.breadthLimit=t,this.C())}},rowSpacing:{get:function(){return this.W.rowSpacing},set:function(t){this.W.rowSpacing!==t&&(this.W.rowSpacing=t,this.C())}},rowIndent:{get:function(){return this.W.rowIndent},set:function(t){this.W.rowIndent!==t&&0<=t&&(this.W.rowIndent=t,this.C())}},commentSpacing:{get:function(){return this.W.commentSpacing},set:function(t){this.W.commentSpacing!==t&&(this.W.commentSpacing=t,this.C())}},commentMargin:{get:function(){return this.W.commentMargin},set:function(t){this.W.commentMargin!==t&&(this.W.commentMargin=t,this.C())}},setsPortSpot:{get:function(){return this.W.setsPortSpot},set:function(t){this.W.setsPortSpot!==t&&(this.W.setsPortSpot=t,this.C())}},portSpot:{get:function(){return this.W.portSpot},set:function(t){this.W.portSpot.D(t)||(this.W.portSpot=t,this.C())}},setsChildPortSpot:{get:function(){return this.W.setsChildPortSpot},set:function(t){this.W.setsChildPortSpot!==t&&(this.W.setsChildPortSpot=t,this.C())}},childPortSpot:{get:function(){return this.W.childPortSpot},set:function(t){this.W.childPortSpot.D(t)||(this.W.childPortSpot=t,this.C())}},alternateSorting:{get:function(){return this.Y.sorting},set:function(t){this.Y.sorting===t||t!==Tu&&t!==sa&&t!==la&&!ua||(this.Y.sorting=t,this.C())}},alternateComparer:{get:function(){return this.Y.comparer},set:function(t){this.Y.comparer!==t&&(this.Y.comparer=t,this.C())}},alternateAngle:{get:function(){return this.Y.angle},set:function(t){this.Y.angle===t||t!==0&&t!==90&&t!==180&&t!==270||(this.Y.angle=t,this.C())}},alternateAlignment:{get:function(){return this.Y.alignment},set:function(t){this.Y.alignment!==t&&(this.Y.alignment=t,this.C())}},alternateNodeIndent:{get:function(){return this.Y.nodeIndent},set:function(t){this.Y.nodeIndent!==t&&0<=t&&(this.Y.nodeIndent=t,this.C())}},alternateNodeIndentPastParent:{get:function(){return this.Y.nodeIndentPastParent},set:function(t){this.Y.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.Y.nodeIndentPastParent=t,this.C())}},alternateNodeSpacing:{get:function(){return this.Y.nodeSpacing},set:function(t){this.Y.nodeSpacing!==t&&(this.Y.nodeSpacing=t,this.C())}},alternateLayerSpacing:{get:function(){return this.Y.layerSpacing},set:function(t){this.Y.layerSpacing!==t&&(this.Y.layerSpacing=t,this.C())}},alternateLayerSpacingParentOverlap:{get:function(){return this.Y.layerSpacingParentOverlap},set:function(t){this.Y.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.Y.layerSpacingParentOverlap=t,this.C())}},alternateCompaction:{get:function(){return this.Y.compaction},set:function(t){this.Y.compaction===t||t!==dc&&t!==ha||(this.Y.compaction=t,this.C())}},alternateBreadthLimit:{get:function(){return this.Y.breadthLimit},set:function(t){this.Y.breadthLimit!==t&&0<=t&&(this.Y.breadthLimit=t,this.C())}},alternateRowSpacing:{get:function(){return this.Y.rowSpacing},set:function(t){this.Y.rowSpacing!==t&&(this.Y.rowSpacing=t,this.C())}},alternateRowIndent:{get:function(){return this.Y.rowIndent},set:function(t){this.Y.rowIndent!==t&&0<=t&&(this.Y.rowIndent=t,this.C())}},alternateCommentSpacing:{get:function(){return this.Y.commentSpacing},set:function(t){this.Y.commentSpacing!==t&&(this.Y.commentSpacing=t,this.C())}},alternateCommentMargin:{get:function(){return this.Y.commentMargin},set:function(t){this.Y.commentMargin!==t&&(this.Y.commentMargin=t,this.C())}},alternateSetsPortSpot:{get:function(){return this.Y.setsPortSpot},set:function(t){this.Y.setsPortSpot!==t&&(this.Y.setsPortSpot=t,this.C())}},alternatePortSpot:{get:function(){return this.Y.portSpot},set:function(t){this.Y.portSpot.D(t)||(this.Y.portSpot=t,this.C())}},alternateSetsChildPortSpot:{get:function(){return this.Y.setsChildPortSpot},set:function(t){this.Y.setsChildPortSpot!==t&&(this.Y.setsChildPortSpot=t,this.C())}},alternateChildPortSpot:{get:function(){return this.Y.childPortSpot},set:function(t){this.Y.childPortSpot.D(t)||(this.Y.childPortSpot=t,this.C())}}});var pc=new K(xt,"PathDefault",-1),Tr=new K(xt,"PathDestination",0),xl=new K(xt,"PathSource",1),Tu=new K(xt,"SortingForwards",10),sa=new K(xt,"SortingReverse",11),la=new K(xt,"SortingAscending",12),ua=new K(xt,"SortingDescending",13),Lu=new K(xt,"AlignmentCenterSubtrees",20),wl=new K(xt,"AlignmentCenterChildren",21),Lr=new K(xt,"AlignmentStart",22),Fr=new K(xt,"AlignmentEnd",23),Po=new K(xt,"AlignmentBus",24),Ar=new K(xt,"AlignmentBusBranching",25),No=new K(xt,"AlignmentTopLeftBus",26),qr=new K(xt,"AlignmentBottomRightBus",27),dc=new K(xt,"CompactionNone",30),ha=new K(xt,"CompactionBlock",31),gc=new K(xt,"StyleLayered",40),Cg=new K(xt,"StyleLastParents",41),Pg=new K(xt,"StyleAlternating",42),Ng=new K(xt,"StyleRootOnly",43),yc=new K(xt,"ArrangementVertical",50),Tg=new K(xt,"ArrangementHorizontal",51),mc=new K(xt,"ArrangementFixedRoots",52),Lg=new K(xt,"LayerIndividual",60),Fg=new K(xt,"LayerSiblings",61),vc=new K(xt,"LayerUniform",62);xt.className="TreeLayout",xt.PathDefault=pc,xt.PathDestination=Tr,xt.PathSource=xl,xt.SortingForwards=Tu,xt.SortingReverse=sa,xt.SortingAscending=la,xt.SortingDescending=ua,xt.AlignmentCenterSubtrees=Lu,xt.AlignmentCenterChildren=wl,xt.AlignmentStart=Lr,xt.AlignmentEnd=Fr,xt.AlignmentBus=Po,xt.AlignmentBusBranching=Ar,xt.AlignmentTopLeftBus=No,xt.AlignmentBottomRightBus=qr,xt.CompactionNone=dc,xt.CompactionBlock=ha,xt.StyleLayered=gc,xt.StyleLastParents=Cg,xt.StyleAlternating=Pg,xt.StyleRootOnly=Ng,xt.ArrangementVertical=yc,xt.ArrangementHorizontal=Tg,xt.ArrangementFixedRoots=mc,xt.LayerIndividual=Lg,xt.LayerSiblings=Fg,xt.LayerUniform=vc;function Fu(t){Yt.call(this,t)}Z(Fu,Yt),Fu.prototype.createVertex=function(){return new En(this)},Fu.prototype.createEdge=function(){return new aa(this)},Fu.className="TreeNetwork";function En(t){me.call(this,t),this.V=!1,this.hb=null,this.u=[],this.nb=this.Ha=this.F=this.ia=0,this.td=null,this.T=new C(0,0),this.Da=new ht(0,0),this.la=new C(0,0),this.jm=this.im=this.uA=!1,this.kp=this.Zo=null,this.nd=Tu,this.hd=Nv,this.Lb=0,this.Kb=wl,this.Vq=this.Uq=0,this.Wq=20,this.ie=50,this.Aq=0,this.Hp=ha,this.Ap=0,this.nr=25,this.Gp=this.mr=10,this.Fp=20,this.xr=!0,this.dr=_e,this.wr=!0,this.Dp=_e}Z(En,me),En.prototype.copyInheritedPropertiesFrom=function(t){t!==null&&(this.nd=t.sorting,this.hd=t.comparer,this.Lb=t.angle,this.Kb=t.alignment,this.Uq=t.nodeIndent,this.Vq=t.nodeIndentPastParent,this.Wq=t.nodeSpacing,this.ie=t.layerSpacing,this.Aq=t.layerSpacingParentOverlap,this.Hp=t.compaction,this.Ap=t.breadthLimit,this.nr=t.rowSpacing,this.mr=t.rowIndent,this.Gp=t.commentSpacing,this.Fp=t.commentMargin,this.xr=t.setsPortSpot,this.dr=t.portSpot,this.wr=t.setsChildPortSpot,this.Dp=t.childPortSpot)},Y.Object.defineProperties(En.prototype,{initialized:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t)}},parent:{get:function(){return this.hb},set:function(t){this.hb!==t&&(this.hb=t)}},children:{get:function(){return this.u},set:function(t){if(this.u!==t){if(t!==null)for(var e=t.length,i=0;i<e;i++);this.u=t}}},level:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}},descendantCount:{get:function(){return this.F},set:function(t){this.F!==t&&(this.F=t)}},maxChildrenCount:{get:function(){return this.Ha},set:function(t){this.Ha!==t&&(this.Ha=t)}},maxGenerationCount:{get:function(){return this.nb},set:function(t){this.nb!==t&&(this.nb=t)}},comments:{get:function(){return this.td},set:function(t){if(this.td!==t){if(t!==null)for(var e=t.length,i=0;i<e;i++);this.td=t}}},sorting:{get:function(){return this.nd},set:function(t){this.nd!==t&&(this.nd=t)}},comparer:{get:function(){return this.hd},set:function(t){this.hd!==t&&(this.hd=t)}},angle:{get:function(){return this.Lb},set:function(t){this.Lb!==t&&(this.Lb=t)}},alignment:{get:function(){return this.Kb},set:function(t){this.Kb!==t&&(this.Kb=t)}},nodeIndent:{get:function(){return this.Uq},set:function(t){this.Uq!==t&&(this.Uq=t)}},nodeIndentPastParent:{get:function(){return this.Vq},set:function(t){this.Vq!==t&&(this.Vq=t)}},nodeSpacing:{get:function(){return this.Wq},set:function(t){this.Wq!==t&&(this.Wq=t)}},layerSpacing:{get:function(){return this.ie},set:function(t){this.ie!==t&&(this.ie=t)}},layerSpacingParentOverlap:{get:function(){return this.Aq},set:function(t){this.Aq!==t&&(this.Aq=t)}},compaction:{get:function(){return this.Hp},set:function(t){this.Hp!==t&&(this.Hp=t)}},breadthLimit:{get:function(){return this.Ap},set:function(t){this.Ap!==t&&(this.Ap=t)}},rowSpacing:{get:function(){return this.nr},set:function(t){this.nr!==t&&(this.nr=t)}},rowIndent:{get:function(){return this.mr},set:function(t){this.mr!==t&&(this.mr=t)}},commentSpacing:{get:function(){return this.Gp},set:function(t){this.Gp!==t&&(this.Gp=t)}},commentMargin:{get:function(){return this.Fp},set:function(t){this.Fp!==t&&(this.Fp=t)}},setsPortSpot:{get:function(){return this.xr},set:function(t){this.xr!==t&&(this.xr=t)}},portSpot:{get:function(){return this.dr},set:function(t){this.dr.D(t)||(this.dr=t)}},setsChildPortSpot:{get:function(){return this.wr},set:function(t){this.wr!==t&&(this.wr=t)}},childPortSpot:{get:function(){return this.Dp},set:function(t){this.Dp.D(t)||(this.Dp=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.T},set:function(t){this.T.set(t)}},subtreeSize:{get:function(){return this.Da},set:function(t){this.Da.set(t)}},subtreeOffset:{get:function(){return this.la},set:function(t){this.la.set(t)}}}),En.className="TreeVertex";function aa(t){Gi.call(this,t),this.au=new C(0,0)}Z(aa,Gi),aa.prototype.commit=function(){var t=this.link;if(t!==null&&!t.isAvoiding){var e=this.network.layout,i=null,n=null;switch(e.ud){case Tr:i=this.fromVertex,n=this.toVertex;break;case xl:i=this.toVertex,n=this.fromVertex;break;default:O("Unhandled path value "+e.ud.toString())}if(i!==null&&n!==null){var r=this.au;if(r.x!==0||r.y!==0||i.uA){n=i.bounds;var o=tr(i),l=e.computeLayerSpacing(i),u=i.rowSpacing;t.vg();var h=t.curve===Yi,f=t.isOrthogonal,c;if(t.uh(),f||h){for(c=2;4<t.pointsCount;)t.rv(2);var p=t.i(1),g=t.i(2)}else{for(c=1;3<t.pointsCount;)t.rv(1);p=t.i(0),g=t.i(t.pointsCount-1)}var m=t.i(t.pointsCount-1);o===0?(i.alignment===Fr?(o=n.bottom+r.y,r.y===0&&p.y>m.y+i.rowIndent&&(o=Math.min(o,Math.max(p.y,o-e.computeNodeIndent(i))))):i.alignment===Lr?(o=n.top+r.y,r.y===0&&p.y<m.y-i.rowIndent&&(o=Math.max(o,Math.min(p.y,o+e.computeNodeIndent(i))))):o=i.im||i.jm&&i.maxGenerationCount===1?n.top-i.la.y+r.y:n.y+n.height/2+r.y,h?(t.m(c,p.x,o),c++,t.m(c,n.right+l,o),c++,t.m(c,n.right+l+(r.x-u)/3,o),c++,t.m(c,n.right+l+2*(r.x-u)/3,o),c++,t.m(c,n.right+l+(r.x-u),o),c++,t.m(c,g.x,o)):(f&&(t.m(c,n.right+l/2,p.y),c++),t.m(c,n.right+l/2,o),c++,t.m(c,n.right+l+r.x-(f?u/2:u),o),c++,f&&t.m(c,t.i(c-1).x,g.y))):o===90?(i.alignment===Fr?(o=n.right+r.x,r.x===0&&p.x>m.x+i.rowIndent&&(o=Math.min(o,Math.max(p.x,o-e.computeNodeIndent(i))))):i.alignment===Lr?(o=n.left+r.x,r.x===0&&p.x<m.x-i.rowIndent&&(o=Math.max(o,Math.min(p.x,o+e.computeNodeIndent(i))))):o=i.im||i.jm&&i.maxGenerationCount===1?n.left-i.la.x+r.x:n.x+n.width/2+r.x,h?(t.m(c,o,p.y),c++,t.m(c,o,n.bottom+l),c++,t.m(c,o,n.bottom+l+(r.y-u)/3),c++,t.m(c,o,n.bottom+l+2*(r.y-u)/3),c++,t.m(c,o,n.bottom+l+(r.y-u)),c++,t.m(c,o,g.y)):(f&&(t.m(c,p.x,n.bottom+l/2),c++),t.m(c,o,n.bottom+l/2),c++,t.m(c,o,n.bottom+l+r.y-(f?u/2:u)),c++,f&&t.m(c,g.x,t.i(c-1).y))):o===180?(i.alignment===Fr?(o=n.bottom+r.y,r.y===0&&p.y>m.y+i.rowIndent&&(o=Math.min(o,Math.max(p.y,o-e.computeNodeIndent(i))))):i.alignment===Lr?(o=n.top+r.y,r.y===0&&p.y<m.y-i.rowIndent&&(o=Math.max(o,Math.min(p.y,o+e.computeNodeIndent(i))))):o=i.im||i.jm&&i.maxGenerationCount===1?n.top-i.la.y+r.y:n.y+n.height/2+r.y,h?(t.m(c,p.x,o),c++,t.m(c,n.left-l,o),c++,t.m(c,n.left-l+(r.x+u)/3,o),c++,t.m(c,n.left-l+2*(r.x+u)/3,o),c++,t.m(c,n.left-l+(r.x+u),o),c++,t.m(c,g.x,o)):(f&&(t.m(c,n.left-l/2,p.y),c++),t.m(c,n.left-l/2,o),c++,t.m(c,n.left-l+r.x+(f?u/2:u),o),c++,f&&t.m(c,t.i(c-1).x,g.y))):o===270?(i.alignment===Fr?(o=n.right+r.x,r.x===0&&p.x>m.x+i.rowIndent&&(o=Math.min(o,Math.max(p.x,o-e.computeNodeIndent(i))))):i.alignment===Lr?(o=n.left+r.x,r.x===0&&p.x<m.x-i.rowIndent&&(o=Math.max(o,Math.min(p.x,o+e.computeNodeIndent(i))))):o=i.im||i.jm&&i.maxGenerationCount===1?n.left-i.la.x+r.x:n.x+n.width/2+r.x,h?(t.m(c,o,p.y),c++,t.m(c,o,n.top-l),c++,t.m(c,o,n.top-l+(r.y+u)/3),c++,t.m(c,o,n.top-l+2*(r.y+u)/3),c++,t.m(c,o,n.top-l+(r.y+u)),c++,t.m(c,o,g.y)):(f&&(t.m(c,p.x,n.top-l/2),c++),t.m(c,o,n.top-l/2),c++,t.m(c,o,n.top-l+r.y+(f?u/2:u)),c++,f&&t.m(c,g.x,t.i(c-1).y))):O("Invalid angle "+o),t.zf()}else r=n,t=this.link,n=this.network.layout,e=tr(i),e!==tr(r)&&(l=n.computeLayerSpacing(i),u=i.bounds,i=r.bounds,e===0&&i.left-u.right<l+1||e===90&&i.top-u.bottom<l+1||e===180&&u.left-i.right<l+1||e===270&&u.top-i.bottom<l+1||(t.vg(),i=t.curve===Yi,r=t.isOrthogonal,n=Rs(this.fromVertex.alignment),t.uh(),e===0?(e=u.right+l/2,i?t.pointsCount===4&&(i=t.i(3).y,t.L(1,e-20,t.i(1).y),t.m(2,e-20,i),t.m(3,e,i),t.m(4,e+20,i),t.L(5,t.i(5).x,i)):r?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,e,t.i(2).y),t.L(3,e,t.i(3).y)):t.pointsCount===4?t.m(2,e,t.i(2).y):t.pointsCount===3?t.L(1,e,t.i(2).y):t.pointsCount===2&&t.m(1,e,t.i(1).y)):e===90?(e=u.bottom+l/2,i?t.pointsCount===4&&(i=t.i(3).x,t.L(1,t.i(1).x,e-20),t.m(2,i,e-20),t.m(3,i,e),t.m(4,i,e+20),t.L(5,i,t.i(5).y)):r?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,t.i(2).x,e),t.L(3,t.i(3).x,e)):t.pointsCount===4?t.m(2,t.i(2).x,e):t.pointsCount===3?t.L(1,t.i(2).x,e):t.pointsCount===2&&t.m(1,t.i(1).x,e)):e===180?(e=u.left-l/2,i?t.pointsCount===4&&(i=t.i(3).y,t.L(1,e+20,t.i(1).y),t.m(2,e+20,i),t.m(3,e,i),t.m(4,e-20,i),t.L(5,t.i(5).x,i)):r?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,e,t.i(2).y),t.L(3,e,t.i(3).y)):t.pointsCount===4?t.m(2,e,t.i(2).y):t.pointsCount===3?t.L(1,e,t.i(2).y):t.pointsCount===2&&t.m(1,e,t.i(1).y)):e===270&&(e=u.top-l/2,i?t.pointsCount===4&&(i=t.i(3).x,t.L(1,t.i(1).x,e+20),t.m(2,i,e+20),t.m(3,i,e),t.m(4,i,e-20),t.L(5,i,t.i(5).y)):r?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,t.i(2).x,e),t.L(3,t.i(3).x,e)):t.pointsCount===4?t.m(2,t.i(2).x,e):t.pointsCount===3?t.L(1,t.i(2).x,e):t.pointsCount===2&&t.m(1,t.i(1).x,e)),t.zf()))}}},Y.Object.defineProperties(aa.prototype,{fromVertex:{get:function(){return this.kd},set:function(t){this.kd!==t&&(this.kd=t)}},toVertex:{get:function(){return this.qd},set:function(t){this.qd!==t&&(this.qd=t)}},relativePoint:{get:function(){return this.au},set:function(t){this.au.set(t)}}}),aa.className="TreeEdge",qt.prototype.initializeStandardTools=function(){this.gb("Action",new Ho,this.mouseDownTools),this.gb("Relinking",new Ln,this.mouseDownTools),this.gb("LinkReshaping",new ge,this.mouseDownTools),this.gb("Rotating",new bi,this.mouseDownTools),this.gb("Resizing",new gi,this.mouseDownTools),this.gb("Linking",new Ai,this.mouseMoveTools),this.gb("Dragging",new bt,this.mouseMoveTools),this.gb("DragSelecting",new Gr,this.mouseMoveTools),this.gb("Panning",new Hr,this.mouseMoveTools),this.gb("ContextMenu",new zi,this.mouseUpTools),this.gb("TextEditing",new _t,this.mouseUpTools),this.gb("ClickCreating",new nl,this.mouseUpTools),this.gb("ClickSelecting",new sh,this.mouseUpTools)},Pr("Horizontal",new hd),Pr("Spot",new fd),Pr("Table",new pd),Pr("Viewbox",new yd),Pr("TableRow",new dd),Pr("TableColumn",new gd),Pr("Graduated",new Cf),Pr("Grid",new kf),$p.add("GraphLinksModel",Pe),$p.add("TreeModel",yn);var Ag=$.go,$v={get licenseKey(){return j.licenseKey},set licenseKey(t){j.licenseKey=t},get version(){return j.version},Group:dt,EnumValue:K,List:q,Set:_,Map:ct,Point:C,Size:ht,Rect:E,Margin:Dt,Spot:lt,Geometry:H,PathFigure:Ae,PathSegment:Ft,InputEvent:an,DiagramEvent:bl,ChangedEvent:Jt,Model:nt,GraphLinksModel:St,TreeModel:Mi,Binding:se,Transaction:Ie,UndoManager:ne,CommandHandler:zt,Tool:Lt,DraggingTool:bt,DraggingInfo:ks,DraggingOptions:wh,LinkingBaseTool:We,LinkingTool:Ai,RelinkingTool:Ln,LinkReshapingTool:ge,ResizingTool:gi,RotatingTool:bi,ClickSelectingTool:sh,ActionTool:Ho,ClickCreatingTool:nl,HTMLInfo:Xo,ContextMenuTool:zi,DragSelectingTool:Gr,PanningTool:Hr,TextEditingTool:_t,ToolManager:qt,Animation:qe,AnimationManager:fn,AnimationTrigger:Xr,Layer:be,Diagram:j,Palette:bp,Overview:Kr,Brush:jt,GraphObject:it,Panel:z,RowColumnDefinition:ce,Shape:yt,TextBlock:Ut,Picture:Ni,Part:ot,Adornment:Nt,Node:W,Link:V,Placeholder:vi,Layout:Kt,LayoutNetwork:Yt,LayoutVertex:me,LayoutEdge:Gi,GridLayout:je,PanelLayout:ye,CircularLayout:Zt,CircularNetwork:ia,CircularVertex:nc,CircularEdge:lg,ForceDirectedLayout:ze,ForceDirectedNetwork:Pu,ForceDirectedVertex:rc,ForceDirectedEdge:oc,LayeredDigraphLayout:It,LayeredDigraphNetwork:oa,LayeredDigraphVertex:vn,LayeredDigraphEdge:fc,TreeLayout:xt,TreeNetwork:Fu,TreeVertex:En,TreeEdge:aa,GeometryType:{Line:H.o,Rectangle:H.u,Ellipse:H.F,Path:H.j},GeometryStretch:{None:te,Default:cn,Fill:oe,Uniform:Fn},SegmentType:{Move:Tn,Line:$t,Bezier:qi,QuadraticBezier:lr,Arc:fe,SvgArc:_n},ChangeType:{Transaction:Wn,Property:Wt,Insert:de,Remove:Se},WheelMode:{Scroll:tu,Zoom:rh,None:Gw},GestureMode:{Zoom:j0,Cancel:ef,None:Lp},LinkingDirection:{Either:rf,ForwardsOnly:z0,BackwardsOnly:V0},ReshapingBehavior:{None:Fp,Horizontal:nu,Vertical:ru,All:Ap},TextEditingAccept:{LostFocus:G0,MouseDown:lf,Tab:jp,Enter:uf},TextEditingStarting:{SingleClick:nM,SingleClickSelected:Dp,DoubleClick:H0},TextEditingState:{None:uh,Active:hh,Editing:hf,Validating:Op,Invalid:ah,Validated:Ip},AnimationStyle:{Default:af,AnimateLocations:_0,None:W0},TriggerStart:{Default:Z0,Immediate:Up,Bundled:Q0},AutoScale:{None:tn,Uniform:lu,UniformToFill:mf},CycleMode:{All:Zp,NotDirected:vm,NotUndirected:xm,DestinationTree:wm,SourceTree:Mm},ScrollMode:{Document:Ss,Infinite:Qp},CollapsePolicy:{TreeParent:ol,AllParents:Jp,AnyParents:qp},Stretch:{None:te,Default:cn,Vertical:Ue,Horizontal:Re,Fill:oe},Orientation:{None:Ye,Along:Hh,Plus90:Xh,Minus90:Kh,Opposite:$d,Upright:Rf,Plus90Upright:_h,Minus90Upright:Wh,Upright45:zf},Flip:{None:te,Vertical:Mh,Horizontal:Sh,Both:kh},BrushType:{Solid:wo,Linear:Wr,Radial:rn,Pattern:gu},ColorSpace:{Lab:yu,HSL:Vm},ViewboxStretch:{Uniform:Fn,UniformToFill:au},Sizing:{Default:Cd,None:Dh,ProportionalExtra:Nf},Wrap:{None:Fd,Fit:tv,DesiredSize:Ad,BreakAll:ev},TextOverflow:{Clip:jd,Ellipsis:Ff},TextFormat:{Trim:Eh,None:iv},ImageStretch:{None:te,Fill:oe,Uniform:Fn,UniformToFill:au},LayoutConditions:{None:0,Added:1,Removed:2,Shown:4,Hidden:8,NodeSized:16,GroupLayout:32,NodeReplaced:64,Standard:127},PortSpreading:{None:$S,Evenly:Df,Packed:Yd},LinkAdjusting:{None:Ye,End:Gh,Scale:Ef,Stretch:Bf},Routing:{Normal:Wd,Orthogonal:t2,AvoidsNodes:e2},Curve:{None:Ye,Bezier:Yi,JumpGap:ko,JumpOver:Mu},GridAlignment:{Position:Gf,Location:Qh},GridArrangement:{LeftToRight:Hf,RightToLeft:qn},GridSorting:{Forwards:qd,Reverse:Xf,Ascending:Jh,Descending:Kf},BindingMode:{OneWay:Ov,TwoWay:bh},CircularArrangement:{ConstantSpacing:Dn,ConstantDistance:rs,ConstantAngle:Co,Packed:On},CircularDirection:{Clockwise:ti,Counterclockwise:os,BidirectionalLeft:Ds,BidirectionalRight:ku},CircularSorting:{Forwards:Jf,Reverse:qf,Ascending:bf,Descending:tc,Optimized:Cu},CircularNodeDiameterFormula:{Pythagorean:ec,Circular:ml},LayeredDigraphCycleRemove:{DepthFirst:lc,Greedy:pg,FromLayers:ra},LayeredDigraphLayering:{OptimalLinkLength:uc,LongestPathSink:dg,LongestPathSource:gg},LayeredDigraphInit:{DepthFirstOut:hc,DepthFirstIn:yg,Naive:mg},LayeredDigraphAggressive:{None:vg,Less:ac,More:xg},LayeredDigraphPack:{None:0,Expand:1,Straighten:2,Median:4,All:15},LayeredDigraphAlign:{None:0,UpperLeft:1,UpperRight:2,LowerLeft:4,LowerRight:8,All:15},TreePath:{Default:pc,Destination:Tr,Source:xl},TreeSorting:{Forwards:Tu,Reverse:sa,Ascending:la,Descending:ua},TreeAlignment:{CenterSubtrees:Lu,CenterChildren:wl,Start:Lr,End:Fr,Bus:Po,BusBranching:Ar,TopLeftBus:No,BottomRightBus:qr},TreeCompaction:{None:dc,Block:ha},TreeStyle:{Layered:gc,LastParents:Cg,Alternating:Pg,RootOnly:Ng},TreeArrangement:{Vertical:yc,Horizontal:Tg,FixedRoots:mc},TreeLayerStyle:{Individual:Lg,Siblings:Fg,Uniform:vc}};typeof Ag=="object"&&Ag.version&&Pt("WARNING: a `go` object on the root object is already defined.  "+("Debug"in Ag?"debug ":"")+"version: "+Ag.version+", replaced with version: "+$v.version),j.prototype.go=$v,$.go=$v,typeof vy<"u"&&typeof vy.exports=="object"&&(vy.exports=typeof global<"u"?global.go:self.go)})();const wt=typeof global<"u"?global.go:self.go;wt.Group;wt.EnumValue;wt.List;wt.Set;wt.Map;const C1=wt.Point,PC=wt.Size;wt.Rect;wt.Margin;const ry=wt.Spot;wt.Geometry;wt.PathFigure;wt.PathSegment;wt.InputEvent;wt.DiagramEvent;wt.ChangedEvent;wt.Model;wt.GraphLinksModel;const CA=wt.TreeModel,NC=wt.Binding;wt.Transaction;wt.UndoManager;wt.CommandHandler;wt.Tool;wt.DraggingTool;wt.DraggingInfo;wt.LinkingBaseTool;wt.LinkingTool;wt.RelinkingTool;wt.LinkReshapingTool;wt.ResizingTool;wt.RotatingTool;wt.ClickSelectingTool;wt.ActionTool;wt.ClickCreatingTool;wt.HTMLInfo;wt.ContextMenuTool;wt.DragSelectingTool;wt.PanningTool;wt.TextEditingTool;const PA=wt.ToolManager;wt.Animation;wt.AnimationManager;wt.AnimationTrigger;wt.Layer;const TC=wt.Diagram;wt.Palette;wt.Overview;wt.Brush;const NA=wt.GraphObject;wt.Panel;wt.RowColumnDefinition;const P1=wt.Shape,LC=wt.TextBlock;wt.TextBlockMetrics;wt.Picture;wt.Part;wt.Adornment;const TA=wt.Node,FC=wt.Link;wt.Placeholder;wt.Layout;wt.LayoutNetwork;wt.LayoutVertex;wt.LayoutEdge;wt.GridLayout;wt.PanelLayout;wt.CircularLayout;wt.CircularNetwork;wt.CircularVertex;wt.CircularEdge;wt.ForceDirectedLayout;wt.ForceDirectedNetwork;wt.ForceDirectedVertex;wt.ForceDirectedEdge;wt.LayeredDigraphLayout;wt.LayeredDigraphNetwork;wt.LayeredDigraphVertex;wt.LayeredDigraphEdge;const oy=wt.TreeLayout;wt.TreeNetwork;wt.TreeVertex;wt.TreeEdge;wt.version;const LA=[{key:"GCP",text:"Google Cloud Platform",color:"#4285F4"},{key:"General",text:"General Topics",parent:"GCP",color:"#EA4335"},{key:"RegionsZones",text:"Regions and Zones",parent:"General",color:"#FBBC05"},{key:"Compute",text:"Compute",parent:"GCP",color:"#EA4335"},{key:"ComputeEngine",text:"Compute Engine",parent:"Compute",color:"#FBBC05"},{key:"MachineTypes",text:"Machine Types",parent:"ComputeEngine",color:"#34A853"},{key:"LoadBalancing",text:"Load Balancing & Auto Scaling",parent:"ComputeEngine",color:"#34A853"},{key:"Images",text:"Images",parent:"ComputeEngine",color:"#34A853"},{key:"IPAddresses",text:"IP Addresses",parent:"ComputeEngine",color:"#34A853"},{key:"StaticIP",text:"Static IP",parent:"IPAddresses",color:"#4285F4"},{key:"InstanceTemplates",text:"Instance Templates",parent:"ComputeEngine",color:"#34A853"},{key:"CustomImages",text:"Custom Images",parent:"ComputeEngine",color:"#34A853"},{key:"PreemptibleVMs",text:"Preemptible VMs",parent:"ComputeEngine",color:"#34A853"},{key:"SpotVMs",text:"Spot VMs",parent:"ComputeEngine",color:"#34A853"},{key:"ComputeBilling",text:"Compute Engine Billing",parent:"ComputeEngine",color:"#34A853"},{key:"LiveMigration",text:"Live Migration",parent:"ComputeEngine",color:"#34A853"},{key:"Discounts",text:"Discounts",parent:"GCP",color:"#EA4335"},{key:"SustainedUse",text:"Sustained Use Discounts",parent:"Discounts",color:"#FBBC05"},{key:"CommittedUse",text:"Committed Use Discounts",parent:"Discounts",color:"#FBBC05"},{key:"PreemptibleDiscount",text:"Preemptible VM Discounts",parent:"Discounts",color:"#FBBC05"},{key:"InstanceGroups",text:"Instance Groups",parent:"GCP",color:"#EA4335"},{key:"ManagedIG",text:"Managed Instance Groups",parent:"InstanceGroups",color:"#FBBC05"},{key:"MIGFeatures",text:"Features",parent:"ManagedIG",color:"#34A853"},{key:"SelfHealing",text:"Self Healing",parent:"MIGFeatures",color:"#4285F4"},{key:"AutoScaling",text:"Auto Scaling",parent:"MIGFeatures",color:"#4285F4"},{key:"RegionalMIGs",text:"Regional MIGs",parent:"MIGFeatures",color:"#4285F4"},{key:"UnmanagedIG",text:"Unmanaged Instance Groups",parent:"InstanceGroups",color:"#FBBC05"},{key:"LoadBalancingService",text:"Load Balancing",parent:"GCP",color:"#EA4335"},{key:"LBFeatures",text:"Features",parent:"LoadBalancingService",color:"#FBBC05"},{key:"HealthCheck",text:"Health Check",parent:"LBFeatures",color:"#34A853"},{key:"GlobalLB",text:"Global Load Balancing",parent:"LBFeatures",color:"#34A853"},{key:"HostPathRules",text:"Host and Path Rules",parent:"LoadBalancingService",color:"#FBBC05"},{key:"SSLTermination",text:"SSL/TLS Termination",parent:"LoadBalancingService",color:"#FBBC05"},{key:"AppEngine",text:"App Engine",parent:"GCP",color:"#EA4335"},{key:"AEEnvironments",text:"Environments",parent:"AppEngine",color:"#FBBC05"},{key:"StandardEnv",text:"Standard",parent:"AEEnvironments",color:"#34A853"},{key:"FlexibleEnv",text:"Flexible",parent:"AEEnvironments",color:"#34A853"},{key:"AEComponents",text:"Components",parent:"AppEngine",color:"#FBBC05"},{key:"AEServices",text:"Services",parent:"AEComponents",color:"#34A853"},{key:"AEVersions",text:"Versions",parent:"AEComponents",color:"#34A853"},{key:"TrafficSplitting",text:"Traffic Splitting",parent:"AppEngine",color:"#FBBC05"},{key:"AEDeployment",text:"Deployment",parent:"AppEngine",color:"#FBBC05"},{key:"GKE",text:"Google Kubernetes Engine",parent:"GCP",color:"#EA4335"},{key:"GKEClusters",text:"Cluster Types",parent:"GKE",color:"#FBBC05"},{key:"ZonalCluster",text:"Zonal",parent:"GKEClusters",color:"#34A853"},{key:"RegionalCluster",text:"Regional",parent:"GKEClusters",color:"#34A853"},{key:"PrivateCluster",text:"Private",parent:"GKEClusters",color:"#34A853"},{key:"GKEWorkloads",text:"Workloads",parent:"GKE",color:"#FBBC05"},{key:"Pods",text:"Pods",parent:"GKEWorkloads",color:"#34A853"},{key:"Deployments",text:"Deployments",parent:"GKEWorkloads",color:"#34A853"},{key:"CloudFunctions",text:"Cloud Functions",parent:"GCP",color:"#EA4335"},{key:"CFBasics",text:"Basics",parent:"CloudFunctions",color:"#FBBC05"},{key:"CFEvents",text:"Events",parent:"CFBasics",color:"#34A853"},{key:"CFTriggers",text:"Triggers",parent:"CFBasics",color:"#34A853"},{key:"CF2ndGen",text:"2nd Gen Features",parent:"CloudFunctions",color:"#FBBC05"},{key:"Storage",text:"Storage",parent:"GCP",color:"#EA4335"},{key:"CloudStorage",text:"Cloud Storage",parent:"Storage",color:"#FBBC05"},{key:"StorageClasses",text:"Storage Classes",parent:"CloudStorage",color:"#34A853"},{key:"Standard",text:"Standard",parent:"StorageClasses",color:"#4285F4"},{key:"Nearline",text:"Nearline",parent:"StorageClasses",color:"#4285F4"},{key:"Coldline",text:"Coldline",parent:"StorageClasses",color:"#4285F4"},{key:"Archive",text:"Archive",parent:"StorageClasses",color:"#4285F4"},{key:"ObjectOps",text:"Object Operations",parent:"CloudStorage",color:"#34A853"},{key:"ObjectVersioning",text:"Object Versioning",parent:"ObjectOps",color:"#4285F4"},{key:"ObjectLifecycle",text:"Lifecycle Management",parent:"ObjectOps",color:"#4285F4"},{key:"IAM",text:"IAM",parent:"GCP",color:"#EA4335"},{key:"IAMRoles",text:"Roles",parent:"IAM",color:"#FBBC05"},{key:"BasicRoles",text:"Basic Roles",parent:"IAMRoles",color:"#34A853"},{key:"PredefinedRoles",text:"Predefined Roles",parent:"IAMRoles",color:"#34A853"},{key:"CustomRoles",text:"Custom Roles",parent:"IAMRoles",color:"#34A853"},{key:"ServiceAccounts",text:"Service Accounts",parent:"IAM",color:"#FBBC05"},{key:"AccessControl",text:"Access Control",parent:"IAM",color:"#FBBC05"},{key:"Databases",text:"Databases",parent:"GCP",color:"#EA4335"},{key:"RelationalDB",text:"Relational",parent:"Databases",color:"#FBBC05"},{key:"CloudSQL",text:"Cloud SQL",parent:"RelationalDB",color:"#34A853"},{key:"CloudSpanner",text:"Cloud Spanner",parent:"RelationalDB",color:"#34A853"},{key:"NoSQLDB",text:"NoSQL",parent:"Databases",color:"#FBBC05"},{key:"Firestore",text:"Firestore",parent:"NoSQLDB",color:"#34A853"},{key:"Bigtable",text:"Cloud Bigtable",parent:"NoSQLDB",color:"#34A853"},{key:"BigQuery",text:"BigQuery",parent:"Databases",color:"#FBBC05"},{key:"MemoryStore",text:"Memory Store",parent:"Databases",color:"#FBBC05"},{key:"Networking",text:"Networking",parent:"GCP",color:"#EA4335"},{key:"VPC",text:"VPC",parent:"Networking",color:"#FBBC05"},{key:"VPCSubnets",text:"VPC Subnets",parent:"VPC",color:"#34A853"},{key:"FirewallRules",text:"Firewall Rules",parent:"VPC",color:"#34A853"},{key:"SharedVPC",text:"Shared VPC",parent:"VPC",color:"#34A853"},{key:"VPCPeering",text:"VPC Peering",parent:"VPC",color:"#34A853"},{key:"HybridCloud",text:"Hybrid Cloud",parent:"GCP",color:"#EA4335"},{key:"CloudVPN",text:"Cloud VPN",parent:"HybridCloud",color:"#FBBC05"},{key:"CloudInterconnect",text:"Cloud Interconnect",parent:"HybridCloud",color:"#FBBC05"},{key:"Operations",text:"Cloud Operations",parent:"GCP",color:"#EA4335"},{key:"Monitoring",text:"Cloud Monitoring",parent:"Operations",color:"#FBBC05"},{key:"Logging",text:"Cloud Logging",parent:"Operations",color:"#FBBC05"},{key:"ErrorReporting",text:"Error Reporting",parent:"Operations",color:"#FBBC05"},{key:"Debugger",text:"Cloud Debugger",parent:"Operations",color:"#FBBC05"},{key:"Profiler",text:"Cloud Profiler",parent:"Operations",color:"#FBBC05"},{key:"Organization",text:"Organization",parent:"GCP",color:"#EA4335"},{key:"ResourceHierarchy",text:"Resource Hierarchy",parent:"Organization",color:"#FBBC05"},{key:"BillingAccounts",text:"Billing Accounts",parent:"Organization",color:"#FBBC05"},{key:"IAMPractices",text:"IAM Best Practices",parent:"Organization",color:"#FBBC05"}],FA={GCP:" EXAM FOCUS: Core services to remember - Compute Engine, App Engine, GKE, Cloud Storage, BigQuery | Key pillars: Compute, Storage, Networking, Security",RegionsZones:" EXAM FOCUS: Region: Specific geographic location | Zone: Isolated location within a region | Multi-region: Highest availability, data redundancy",ComputeEngine:" EXAM FOCUS: IaaS offering | N1-standard machines most common | Sustained use discounts automatic | Preemptible VMs for cost savings",MachineTypes:" EXAM FOCUS: E2 (cost-optimized), N1 (standard), N2/C2 (performance) | Memory/CPU ratios | Custom types available",LoadBalancing:" EXAM FOCUS: HTTP(S), TCP/SSL Proxy, Network LB | Global vs Regional | Health checks mandatory | Anycast IP",Images:" EXAM FOCUS: Public (maintained by Google) vs Custom | Boot disk image | Family versioning | Deprecation policy",IPAddresses:" EXAM FOCUS: Internal (RFC 1918) vs External | Static vs Ephemeral | Reserve static IPs for stable endpoints",StaticIP:" EXAM FOCUS: Regional or global | Charged when not in use | Can be promoted between regional and global",InstanceTemplates:" EXAM FOCUS: Immutable | Used for MIGs | Define machine type, network, metadata | Cannot update, must create new version",PreemptibleVMs:" EXAM FOCUS: 24hr max runtime | No live migrate | 80% cheaper | No SLA | 30-second termination notice",SpotVMs:" EXAM FOCUS: New version of preemptible | Variable pricing | No maximum runtime | Better for flexible workloads",LiveMigration:" EXAM FOCUS: Automatic maintenance | No downtime | Not available for preemptible VMs | Can be disabled",ComputeBilling:" EXAM FOCUS: Per-second billing | Sustained use discounts | Committed use discounts | Preemptible discounts",Discounts:" EXAM FOCUS: Sustained use (automatic), Committed use (1-3 year), Preemptible/Spot pricing | Understand when each applies",SustainedUse:" EXAM FOCUS: Automatic | Starts at 25% month usage | Increases to 30% discount | No action needed",CommittedUse:" EXAM FOCUS: 1 or 3 year commitment | Up to 70% discount | Charged even if not used | Plan carefully",InstanceGroups:" EXAM FOCUS: MIG vs Unmanaged | MIG features: auto-healing, auto-scaling, rolling updates | Regional for HA",ManagedIG:" EXAM FOCUS: Template-based | Auto-scaling based on CPU/load/metrics | Health checks | Rolling updates",MIGFeatures:" EXAM FOCUS: Auto-healing, Auto-scaling, Regional failover, Load balancing, Rolling updates, Instance template based",UnmanagedIG:" EXAM FOCUS: No auto-scaling/healing | Manual management | Used for legacy apps | Can contain different instance types",AppEngine:" EXAM FOCUS: Standard vs Flexible environments | Auto-scaling | Traffic splitting | Free tier available",StandardEnv:" EXAM FOCUS: Sandbox environment | Faster scaling | Language restrictions | Free daily quota | No SSH access",FlexibleEnv:" EXAM FOCUS: Docker containers | Longer startup | Any runtime | No free quota | SSH access available",AEComponents:" EXAM FOCUS: Services (microservices) | Versions (deployment units) | Traffic splitting | Deployment options",TrafficSplitting:" EXAM FOCUS: IP-based, Cookie-based, Random | Gradual rollouts | A/B testing | Version management",GKE:" EXAM FOCUS: Managed Kubernetes | Node pools | Auto-scaling | Auto-upgrade | Auto-repair | Private clusters",GKEClusters:" EXAM FOCUS: Zonal vs Regional | Private clusters | Node pools | Master version management",GKEWorkloads:" EXAM FOCUS: Pods, Deployments, Services | StatefulSets | DaemonSets | Jobs/CronJobs",CloudFunctions:" EXAM FOCUS: Event-driven | Triggers (HTTP, Cloud Storage, Pub/Sub) | Auto-scales | Pay-per-use",CF2ndGen:" EXAM FOCUS: Longer runtime | Larger instances | Multiple revisions | Concurrency | Min instances",Storage:" EXAM FOCUS: Block (Persistent Disk), File (Filestore), Object (Cloud Storage) | Use cases for each",CloudStorage:" EXAM FOCUS: Storage classes | Lifecycle policies | Object versioning | IAM & ACLs | Signed URLs",StorageClasses:" EXAM FOCUS: Standard (hot), Nearline (30-day), Coldline (90-day), Archive (365-day) | Access frequency",ObjectOps:" EXAM FOCUS: Versioning, Lifecycle rules, Retention policies | Transfer options | Access control",IAM:" EXAM FOCUS: Roles (Basic, Predefined, Custom) | Service Accounts | Resource hierarchy | Principle of least privilege",IAMRoles:" EXAM FOCUS: Basic (Owner, Editor, Viewer), Predefined (granular), Custom (specific permissions)",ServiceAccounts:" EXAM FOCUS: Default vs User-managed | Keys (rotation) | Roles and permissions | Best practices",AccessControl:" EXAM FOCUS: IAM conditions | Resource hierarchy | Organization policies | Service account best practices",Databases:" EXAM FOCUS: OLTP (Cloud SQL, Spanner) | OLAP (BigQuery) | NoSQL (Firestore, Bigtable) | Choose correctly",CloudSQL:" EXAM FOCUS: MySQL, PostgreSQL, SQL Server | HA configuration | Backup/restore | Maintenance windows",CloudSpanner:" EXAM FOCUS: Global, horizontal scaling | Strong consistency | Mission-critical | High cost",Firestore:" EXAM FOCUS: Document DB | Real-time updates | Strong consistency | Mobile/web | Offline support",Bigtable:" EXAM FOCUS: Wide-column NoSQL | Petabyte scale | High throughput | Time-series data | IoT",BigQuery:" EXAM FOCUS: Serverless data warehouse | SQL queries | ML integration | Flat-rate vs on-demand pricing",Networking:" EXAM FOCUS: VPC (subnet, firewall) | Load Balancing | Cloud CDN | Cloud Interconnect | VPN",VPC:" EXAM FOCUS: Auto vs Custom mode | Shared VPC | VPC Peering | Firewall rules | Private Google Access",FirewallRules:" EXAM FOCUS: Ingress vs Egress | Priority | Service accounts | Tags | Default rules",SharedVPC:" EXAM FOCUS: Host vs Service projects | Cross-project networking | IAM roles needed",Operations:" EXAM FOCUS: Monitoring, Logging, Error Reporting, Trace, Debugger | Workspace concepts",Monitoring:" EXAM FOCUS: Metrics, Alerts, Uptime checks | Workspace | Dashboard | Alerting policies",Logging:" EXAM FOCUS: Log types | Export | Retention | Audit logs | Log-based metrics",Organization:" EXAM FOCUS: Resource hierarchy | Folders | Projects | IAM inheritance | Billing account structure",ResourceHierarchy:" EXAM FOCUS: Organization  Folders  Projects  Resources | IAM inheritance | Policy inheritance",BillingAccounts:" EXAM FOCUS: Self-serve vs Invoiced | Budgets & Alerts | Export billing data | Project linking",IAMPractices:" EXAM FOCUS: Least privilege | Use groups | Regular audits | Service account management"};var AA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jA=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DA=(s,a)=>{const d=ms.forwardRef(({color:y="currentColor",size:w=24,strokeWidth:M=2,absoluteStrokeWidth:L,children:I,...B},Q)=>ms.createElement("svg",{ref:Q,...AA,width:w,height:w,stroke:y,strokeWidth:L?Number(M)*24/Number(w):M,className:`lucide lucide-${jA(s)}`,...B},[...a.map(([Z,Y])=>ms.createElement(Z,Y)),...(Array.isArray(I)?I:[I])||[]]));return d.displayName=`${s}`,d};var pw=DA;const OA=pw("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),IA=pw("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),EA=pw("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),BA=()=>{const s=ms.useRef(null),a=ms.useRef(null),[d,y]=ms.useState({text:"",x:0,y:0,visible:!1});ms.useEffect(()=>{if(!s.current)return;const I=NA.make,B=I(TC,s.current,{initialContentAlignment:ry.Center,layout:I(oy,{angle:0,layerSpacing:100,nodeSpacing:30,alignment:oy.AlignmentCenterChildren,arrangement:oy.ArrangementHorizontal,layerStyle:oy.LayerUniform}),"toolManager.mouseWheelBehavior":PA.WheelZoom,"draggingTool.isEnabled":!0,"panningTool.isEnabled":!0,allowHorizontalScroll:!0,allowVerticalScroll:!0,"animationManager.isEnabled":!0,"undoManager.isEnabled":!0,maxSelectionCount:1,"draggingTool.dragsTree":!0,initialAutoScale:TC.Uniform,padding:50,contentAlignment:ry.Center,"grid.visible":!0,"grid.gridCellSize":new PC(50,50)});return B.nodeTemplate=I(TA,"Auto",{selectionAdorned:!0,shadowVisible:!0,shadowOffset:new C1(3,3),shadowBlur:5,mouseEnter:(Q,Z)=>{const Y=FA[Z.data.key];if(Y){const Mt=Z.diagram.div,kt=Z.diagram.transformDocToView(Z.location),$=Z.actualBounds;y({text:Y,x:kt.x+Mt.offsetLeft+$.width+10,y:kt.y+Mt.offsetTop+$.height/2,visible:!0})}const st=Z.findObject("SHAPE");st&&(st.shadowBlur=10,st.shadowOffset=new C1(5,5))},mouseLeave:(Q,Z)=>{y(st=>({...st,visible:!1}));const Y=Z.findObject("SHAPE");Y&&(Y.shadowBlur=5,Y.shadowOffset=new C1(3,3))}},I(P1,"RoundedRectangle",{name:"SHAPE",fill:"white",strokeWidth:2,shadowVisible:!0,portId:"",cursor:"pointer",minSize:new PC(150,50)},new NC("fill","color")),I(LC,{margin:12,font:"bold 14px Arial",textAlign:"center",width:160,wrap:LC.WrapFit,maxLines:3,stroke:"white"},new NC("text"))),B.linkTemplate=I(FC,{routing:FC.Orthogonal,corner:5,selectable:!1},I(P1,{strokeWidth:2,stroke:"#555"}),I(P1,{toArrow:"Standard",stroke:"#555",fill:"#555"})),B.model=new CA(LA),a.current=B,setTimeout(()=>{B.zoomToFit(),B.contentAlignment=ry.Center,B.scale=.8;const Q=B.documentBounds;B.centerRect(Q)},100),()=>{B.div=null}},[]);const w=()=>{a.current&&a.current.commandHandler.increaseZoom()},M=()=>{a.current&&a.current.commandHandler.decreaseZoom()},L=()=>{if(a.current){a.current.scale=.8,a.current.contentAlignment=ry.Center,a.current.zoomToFit();const I=a.current.documentBounds;a.current.centerRect(I)}};return Mn.jsxs("div",{className:"flex flex-col gap-4 w-full h-full bg-white rounded-lg shadow-lg relative",children:[Mn.jsx("div",{className:"flex justify-between items-center p-4 border-b",children:Mn.jsxs("div",{className:"flex gap-2",children:[Mn.jsx("button",{onClick:w,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Zoom In",children:Mn.jsx(IA,{className:"w-5 h-5"})}),Mn.jsx("button",{onClick:M,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Zoom Out",children:Mn.jsx(EA,{className:"w-5 h-5"})}),Mn.jsx("button",{onClick:L,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Reset View",children:Mn.jsx(OA,{className:"w-5 h-5"})})]})}),Mn.jsx("div",{ref:s,className:"w-full h-[800px] border border-gray-200 rounded-lg",style:{backgroundColor:"#ffffff",cursor:"move"}}),d.visible&&Mn.jsx("div",{className:"absolute bg-gray-800 text-white p-4 rounded-lg shadow-lg max-w-md",style:{left:d.x+"px",top:d.y+"px",transform:"translateY(-50%)",zIndex:1e3},children:d.text})]})};function RA(){return Mn.jsx("div",{className:"min-h-screen bg-background p-8",children:Mn.jsxs("div",{className:"container mx-auto",children:[Mn.jsx("h1",{className:"text-3xl font-bold mb-8 text-center",children:"GCP ACE Mind Map "}),Mn.jsx(BA,{})]})})}N1.createRoot(document.getElementById("root")).render(Mn.jsx(cL.StrictMode,{children:Mn.jsx(RA,{})}))});export default zA();
